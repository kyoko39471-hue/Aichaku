(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Tg={exports:{}},_u={};var iE;function AI(){if(iE)return _u;iE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:c,ref:o!==void 0?o:null,props:u}}return _u.Fragment=e,_u.jsx=t,_u.jsxs=t,_u}var sE;function wI(){return sE||(sE=1,Tg.exports=AI()),Tg.exports}var C=wI(),bg={exports:{}},we={};var rE;function II(){if(rE)return we;rE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function L(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,X={};function fe(M,W,se){this.props=M,this.context=W,this.refs=X,this.updater=se||K}fe.prototype.isReactComponent={},fe.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},fe.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function he(){}he.prototype=fe.prototype;function ne(M,W,se){this.props=M,this.context=W,this.refs=X,this.updater=se||K}var Ae=ne.prototype=new he;Ae.constructor=ne,j(Ae,fe.prototype),Ae.isPureReactComponent=!0;var Te=Array.isArray;function oe(){}var A={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function R(M,W,se){var le=se.ref;return{$$typeof:r,type:M,key:W,ref:le!==void 0?le:null,props:se}}function O(M,W){return R(M.type,W,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function P(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(se){return W[se]})}var x=/\/+/g;function Qe(M,W){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):W.toString(36)}function mt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(oe,oe):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,W,se,le,be){var Ce=typeof M;(Ce==="undefined"||Ce==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(Ce){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case r:case e:ze=!0;break;case E:return ze=M._init,Y(ze(M._payload),W,se,le,be)}}if(ze)return be=be(M),ze=le===""?"."+Qe(M,0):le,Te(be)?(se="",ze!=null&&(se=ze.replace(x,"$&/")+"/"),Y(be,W,se,"",function(wr){return wr})):be!=null&&(D(be)&&(be=O(be,se+(be.key==null||M&&M.key===be.key?"":(""+be.key).replace(x,"$&/")+"/")+ze)),W.push(be)),1;ze=0;var Lt=le===""?".":le+":";if(Te(M))for(var ut=0;ut<M.length;ut++)le=M[ut],Ce=Lt+Qe(le,ut),ze+=Y(le,W,se,Ce,be);else if(ut=L(M),typeof ut=="function")for(M=ut.call(M),ut=0;!(le=M.next()).done;)le=le.value,Ce=Lt+Qe(le,ut++),ze+=Y(le,W,se,Ce,be);else if(Ce==="object"){if(typeof M.then=="function")return Y(mt(M),W,se,le,be);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ie(M,W,se){if(M==null)return M;var le=[],be=0;return Y(M,le,"","",function(Ce){return W.call(se,Ce,be++)}),le}function _e(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(se){(M._status===0||M._status===-1)&&(M._status=1,M._result=se)},function(se){(M._status===0||M._status===-1)&&(M._status=2,M._result=se)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Be=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ye={map:ie,forEach:function(M,W,se){ie(M,function(){W.apply(this,arguments)},se)},count:function(M){var W=0;return ie(M,function(){W++}),W},toArray:function(M){return ie(M,function(W){return W})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return we.Activity=T,we.Children=Ye,we.Component=fe,we.Fragment=t,we.Profiler=o,we.PureComponent=ne,we.StrictMode=s,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,we.__COMPILER_RUNTIME={__proto__:null,c:function(M){return A.H.useMemoCache(M)}},we.cache=function(M){return function(){return M.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(M,W,se){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=j({},M.props),be=M.key;if(W!=null)for(Ce in W.key!==void 0&&(be=""+W.key),W)!w.call(W,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&W.ref===void 0||(le[Ce]=W[Ce]);var Ce=arguments.length-2;if(Ce===1)le.children=se;else if(1<Ce){for(var ze=Array(Ce),Lt=0;Lt<Ce;Lt++)ze[Lt]=arguments[Lt+2];le.children=ze}return R(M.type,be,le)},we.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},we.createElement=function(M,W,se){var le,be={},Ce=null;if(W!=null)for(le in W.key!==void 0&&(Ce=""+W.key),W)w.call(W,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(be[le]=W[le]);var ze=arguments.length-2;if(ze===1)be.children=se;else if(1<ze){for(var Lt=Array(ze),ut=0;ut<ze;ut++)Lt[ut]=arguments[ut+2];be.children=Lt}if(M&&M.defaultProps)for(le in ze=M.defaultProps,ze)be[le]===void 0&&(be[le]=ze[le]);return R(M,Ce,be)},we.createRef=function(){return{current:null}},we.forwardRef=function(M){return{$$typeof:m,render:M}},we.isValidElement=D,we.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:_e}},we.memo=function(M,W){return{$$typeof:p,type:M,compare:W===void 0?null:W}},we.startTransition=function(M){var W=A.T,se={};A.T=se;try{var le=M(),be=A.S;be!==null&&be(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(oe,Be)}catch(Ce){Be(Ce)}finally{W!==null&&se.types!==null&&(W.types=se.types),A.T=W}},we.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},we.use=function(M){return A.H.use(M)},we.useActionState=function(M,W,se){return A.H.useActionState(M,W,se)},we.useCallback=function(M,W){return A.H.useCallback(M,W)},we.useContext=function(M){return A.H.useContext(M)},we.useDebugValue=function(){},we.useDeferredValue=function(M,W){return A.H.useDeferredValue(M,W)},we.useEffect=function(M,W){return A.H.useEffect(M,W)},we.useEffectEvent=function(M){return A.H.useEffectEvent(M)},we.useId=function(){return A.H.useId()},we.useImperativeHandle=function(M,W,se){return A.H.useImperativeHandle(M,W,se)},we.useInsertionEffect=function(M,W){return A.H.useInsertionEffect(M,W)},we.useLayoutEffect=function(M,W){return A.H.useLayoutEffect(M,W)},we.useMemo=function(M,W){return A.H.useMemo(M,W)},we.useOptimistic=function(M,W){return A.H.useOptimistic(M,W)},we.useReducer=function(M,W,se){return A.H.useReducer(M,W,se)},we.useRef=function(M){return A.H.useRef(M)},we.useState=function(M){return A.H.useState(M)},we.useSyncExternalStore=function(M,W,se){return A.H.useSyncExternalStore(M,W,se)},we.useTransition=function(){return A.H.useTransition()},we.version="19.2.3",we}var aE;function Ip(){return aE||(aE=1,bg.exports=II()),bg.exports}var Oe=Ip(),Sg={exports:{}},vu={},Ag={exports:{}},wg={};var oE;function RI(){return oE||(oE=1,(function(r){function e(Y,ie){var _e=Y.length;Y.push(ie);e:for(;0<_e;){var Be=_e-1>>>1,Ye=Y[Be];if(0<o(Ye,ie))Y[Be]=ie,Y[_e]=Ye,_e=Be;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ie=Y[0],_e=Y.pop();if(_e!==ie){Y[0]=_e;e:for(var Be=0,Ye=Y.length,M=Ye>>>1;Be<M;){var W=2*(Be+1)-1,se=Y[W],le=W+1,be=Y[le];if(0>o(se,_e))le<Ye&&0>o(be,se)?(Y[Be]=be,Y[le]=_e,Be=le):(Y[Be]=se,Y[W]=_e,Be=W);else if(le<Ye&&0>o(be,_e))Y[Be]=be,Y[le]=_e,Be=le;else break e}}return ie}function o(Y,ie){var _e=Y.sortIndex-ie.sortIndex;return _e!==0?_e:Y.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,T=null,I=3,L=!1,K=!1,j=!1,X=!1,fe=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function Ae(Y){for(var ie=t(p);ie!==null;){if(ie.callback===null)s(p);else if(ie.startTime<=Y)s(p),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(p)}}function Te(Y){if(j=!1,Ae(Y),!K)if(t(g)!==null)K=!0,oe||(oe=!0,P());else{var ie=t(p);ie!==null&&mt(Te,ie.startTime-Y)}}var oe=!1,A=-1,w=5,R=-1;function O(){return X?!0:!(r.unstable_now()-R<w)}function D(){if(X=!1,oe){var Y=r.unstable_now();R=Y;var ie=!0;try{e:{K=!1,j&&(j=!1,he(A),A=-1),L=!0;var _e=I;try{t:{for(Ae(Y),T=t(g);T!==null&&!(T.expirationTime>Y&&O());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,I=T.priorityLevel;var Ye=Be(T.expirationTime<=Y);if(Y=r.unstable_now(),typeof Ye=="function"){T.callback=Ye,Ae(Y),ie=!0;break t}T===t(g)&&s(g),Ae(Y)}else s(g);T=t(g)}if(T!==null)ie=!0;else{var M=t(p);M!==null&&mt(Te,M.startTime-Y),ie=!1}}break e}finally{T=null,I=_e,L=!1}ie=void 0}}finally{ie?P():oe=!1}}}var P;if(typeof ne=="function")P=function(){ne(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Qe=x.port2;x.port1.onmessage=D,P=function(){Qe.postMessage(null)}}else P=function(){fe(D,0)};function mt(Y,ie){A=fe(function(){Y(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(Y){switch(I){case 1:case 2:case 3:var ie=3;break;default:ie=I}var _e=I;I=ie;try{return Y()}finally{I=_e}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=I;I=Y;try{return ie()}finally{I=_e}},r.unstable_scheduleCallback=function(Y,ie,_e){var Be=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,Y){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=_e+Ye,Y={id:E++,callback:ie,priorityLevel:Y,startTime:_e,expirationTime:Ye,sortIndex:-1},_e>Be?(Y.sortIndex=_e,e(p,Y),t(g)===null&&Y===t(p)&&(j?(he(A),A=-1):j=!0,mt(Te,_e-Be))):(Y.sortIndex=Ye,e(g,Y),K||L||(K=!0,oe||(oe=!0,P()))),Y},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Y){var ie=I;return function(){var _e=I;I=ie;try{return Y.apply(this,arguments)}finally{I=_e}}}})(wg)),wg}var lE;function CI(){return lE||(lE=1,Ag.exports=RI()),Ag.exports}var Ig={exports:{}},en={};var uE;function xI(){if(uE)return en;uE=1;var r=Ip();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},en.flushSync=function(g){var p=c.T,E=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=E,s.d.f()}},en.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},en.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},en.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,L=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:L}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:I,fetchPriority:L,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},en.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},en.requestFormReset=function(g){s.d.r(g)},en.unstable_batchedUpdates=function(g,p){return g(p)},en.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.3",en}var cE;function NI(){if(cE)return Ig.exports;cE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ig.exports=xI(),Ig.exports}var hE;function DI(){if(hE)return vu;hE=1;var r=CI(),e=Ip(),t=NI();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case fe:return"Profiler";case X:return"StrictMode";case Te:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case K:return"Portal";case ne:return n.displayName||"Context";case he:return(n._context.displayName||"Context")+".Consumer";case Ae:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return i=n.displayName||null,i!==null?i:Qe(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return Qe(n(i))}catch{}}return null}var mt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],Ye=-1;function M(n){return{current:n}}function W(n){0>Ye||(n.current=Be[Ye],Be[Ye]=null,Ye--)}function se(n,i){Ye++,Be[Ye]=n.current,n.current=i}var le=M(null),be=M(null),Ce=M(null),ze=M(null);function Lt(n,i){switch(se(Ce,i),se(be,n),se(le,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?I0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=I0(i),n=R0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(le),se(le,n)}function ut(){W(le),W(be),W(Ce)}function wr(n){n.memoizedState!==null&&se(ze,n);var i=le.current,a=R0(i,n.type);i!==a&&(se(be,n),se(le,a))}function Va(n){be.current===n&&(W(le),W(be)),ze.current===n&&(W(ze),mu._currentValue=_e)}var Oa,Ma;function ci(n){if(Oa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Oa=i&&i[1]||"",Ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oa+n+Ma}var ml=!1;function Ir(n,i){if(!n||ml)return"";ml=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var F=G}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(G){F=G}n.call(Z.prototype)}}else{try{throw Error()}catch(G){F=G}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),q=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===q.length)for(l=N.length-1,f=q.length-1;1<=l&&0<=f&&N[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==q[f]){var Q=`
`+N[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{ml=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ci(a):""}function gl(n,i){switch(n.tag){case 26:case 27:case 5:return ci(n.type);case 16:return ci("Lazy");case 13:return n.child!==i&&i!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Ir(n.type,!1);case 11:return Ir(n.type.render,!1);case 1:return Ir(n.type,!0);case 31:return ci("Activity");default:return""}}function pl(n){try{var i="",a=null;do i+=gl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wt=Object.prototype.hasOwnProperty,Ut=r.unstable_scheduleCallback,Es=r.unstable_cancelCallback,Sd=r.unstable_shouldYield,vc=r.unstable_requestPaint,ln=r.unstable_now,Rr=r.unstable_getCurrentPriorityLevel,yl=r.unstable_ImmediatePriority,_l=r.unstable_UserBlockingPriority,Ts=r.unstable_NormalPriority,Ad=r.unstable_LowPriority,Ec=r.unstable_IdlePriority,Tc=r.log,bc=r.unstable_setDisableYieldValue,Xn=null,Kt=null;function Mn(n){if(typeof Tc=="function"&&bc(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Xn,n)}catch{}}var _t=Math.clz32?Math.clz32:Ac,Sc=Math.log,Pa=Math.LN2;function Ac(n){return n>>>=0,n===0?32:31-(Sc(n)/Pa|0)|0}var hi=256,Cr=262144,It=4194304;function fi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function di(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=fi(l):(_&=b,_!==0?f=fi(_):a||(a=b&~n,a!==0&&(f=fi(a))))):(b=l&~d,b!==0?f=fi(b):_!==0?f=fi(_):a||(a=l&~n,a!==0&&(f=fi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function $n(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function wd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(){var n=It;return It<<=1,(It&62914560)===0&&(It=4194304),n}function mi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function xr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Id(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,q=n.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-_t(a),Z=1<<Q;b[Q]=0,N[Q]=-1;var F=q[Q];if(F!==null)for(q[Q]=null,Q=0;Q<F.length;Q++){var G=F[Q];G!==null&&(G.lane&=-536870913)}a&=~Z}l!==0&&Nr(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Nr(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-_t(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function vl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-_t(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function El(n,i){var a=i&-i;return a=(a&42)!==0?1:Dr(a),(a&(n.suspendedLanes|i))!==0?0:a}function Dr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ic(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:$0(n.type))}function Jn(n,i){var a=ie.p;try{return ie.p=n,i()}finally{ie.p=a}}var Zn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Zn,qt="__reactProps$"+Zn,gi="__reactContainer$"+Zn,ka="__reactEvents$"+Zn,Rd="__reactListeners$"+Zn,Rc="__reactHandles$"+Zn,Cc="__reactResources$"+Zn,pi="__reactMarker$"+Zn;function La(n){delete n[Rt],delete n[qt],delete n[ka],delete n[Rd],delete n[Rc]}function yi(n){var i=n[Rt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[gi]||a[Rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=M0(n);n!==null;){if(a=n[Rt])return a;n=M0(n)}return i}n=a,a=n.parentNode}return null}function Pn(n){if(n=n[Rt]||n[gi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Tn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function _i(n){var i=n[Cc];return i||(i=n[Cc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ct(n){n[pi]=!0}var Tl=new Set,bl={};function vi(n,i){Ei(n,i),Ei(n+"Capture",i)}function Ei(n,i){for(bl[n]=i,n=0;n<i.length;n++)Tl.add(i[n])}var Sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Al={},wl={};function xc(n){return wt.call(wl,n)?!0:wt.call(Al,n)?!1:Sl.test(n)?wl[n]=!0:(Al[n]=!0,!1)}function Ua(n,i,a){if(xc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function bn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function xt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bs(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Il(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Xe(n){if(!n._valueTracker){var i=bs(n)?"checked":"value";n._valueTracker=Il(n,i,""+n[i])}}function Vr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=bs(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ti(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Or=/[\n"\\]/g;function fn(n){return n.replace(Or,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function za(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ft(i)):n.value!==""+Ft(i)&&(n.value=""+Ft(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Rl(n,_,Ft(i)):a!=null?Rl(n,_,Ft(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Ft(b):n.removeAttribute("name")}function Nc(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xe(n);return}a=a!=null?""+Ft(a):"",i=i!=null?""+Ft(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Xe(n)}function Rl(n,i,a){i==="number"&&Ti(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ss(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Ft(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Dc(n,i,a){if(i!=null&&(i=""+Ft(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Ft(a):""}function As(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(mt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ft(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Xe(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Vc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function xl(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Cl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Cl(n,d,i[d])}function ja(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ws=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(n){return ws.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Wn(){}var Nl=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Is=null,bi=null;function Mr(n){var i=Pn(n);if(i&&(n=i.stateNode)){var a=n[qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(za(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qt]||null;if(!f)throw Error(s(90));za(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Vr(l)}break e;case"textarea":Dc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ss(n,!!a.multiple,i,!1)}}}var qa=!1;function Rs(n,i,a){if(qa)return n(i,a);qa=!0;try{var l=n(i);return l}finally{if(qa=!1,(Is!==null||bi!==null)&&(Ih(),Is&&(i=Is,n=bi,bi=Is=null,Mr(i),n)))for(i=0;i<n.length;i++)Mr(n[i])}}function ei(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(Ln)try{var et={};Object.defineProperty(et,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Pr=!1}var Si=null,Dl=null,kr=null;function Vl(){if(kr)return kr;var n,i=Dl,a=i.length,l,f="value"in Si?Si.value:Si.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return kr=f.slice(n,1<l?1-l:void 0)}function Lr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Hi(){return!0}function ti(){return!1}function Qt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Hi:ti,this.isPropagationStopped=ti,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),i}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Qt(Gi),Cs=T({},Gi,{view:0,detail:0}),Ol=Qt(Cs),xs,Fa,wi,Ha=T({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(xs=n.screenX-wi.screenX,Fa=n.screenY-wi.screenY):Fa=xs=0,wi=n),xs)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),Ml=Qt(Ha),Ur=T({},Ha,{dataTransfer:0}),Mc=Qt(Ur),Pc=T({},Cs,{relatedTarget:0}),zr=Qt(Pc),Pl=T({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),kc=Qt(Pl),Ga=T({},Gi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Lc=Qt(Ga),Uc=T({},Gi,{data:0}),Ii=Qt(Uc),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Bc[n])?!!i[n]:!1}function Ns(){return qc}var un=T({},Cs,{key:function(n){if(n.key){var i=zc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Lr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(n){return n.type==="keypress"?Lr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Lr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fc=Qt(un),Hc=T({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Qt(Hc),h=T({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),y=Qt(h),v=T({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qt(v),z=T({},Ha,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Qt(z),te=T({},Gi,{newState:0,oldState:0}),Ie=Qt(te),vt=[9,13,27,32],He=Ln&&"CompositionEvent"in window,ct=null;Ln&&"documentMode"in document&&(ct=document.documentMode);var Un=Ln&&"TextEvent"in window&&!ct,Ri=Ln&&(!He||ct&&8<ct&&11>=ct),ni=" ",ii=!1;function jr(n,i){switch(n){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ka(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qa=!1;function Y1(n,i){switch(n){case"compositionend":return Ka(i);case"keypress":return i.which!==32?null:(ii=!0,ni);case"textInput":return n=i.data,n===ni&&ii?null:n;default:return null}}function X1(n,i){if(Qa)return n==="compositionend"||!He&&jr(n,i)?(n=Vl(),kr=Dl=Si=null,Qa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var $1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ly(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!$1[n.type]:i==="textarea"}function Uy(n,i,a,l){Is?bi?bi.push(l):bi=[l]:Is=l,i=Oh(i,"onChange"),0<i.length&&(a=new Ai("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var kl=null,Ll=null;function J1(n){E0(n,0)}function Gc(n){var i=Tn(n);if(Vr(i))return n}function zy(n,i){if(n==="change")return i}var jy=!1;if(Ln){var Cd;if(Ln){var xd="oninput"in document;if(!xd){var By=document.createElement("div");By.setAttribute("oninput","return;"),xd=typeof By.oninput=="function"}Cd=xd}else Cd=!1;jy=Cd&&(!document.documentMode||9<document.documentMode)}function qy(){kl&&(kl.detachEvent("onpropertychange",Fy),Ll=kl=null)}function Fy(n){if(n.propertyName==="value"&&Gc(Ll)){var i=[];Uy(i,Ll,n,kn(n)),Rs(J1,i)}}function Z1(n,i,a){n==="focusin"?(qy(),kl=i,Ll=a,kl.attachEvent("onpropertychange",Fy)):n==="focusout"&&qy()}function W1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gc(Ll)}function ew(n,i){if(n==="click")return Gc(i)}function tw(n,i){if(n==="input"||n==="change")return Gc(i)}function nw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:nw;function Ul(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!wt.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function Hy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gy(n,i){var a=Hy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hy(a)}}function Ky(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ky(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Qy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ti(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ti(n.document)}return i}function Nd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var iw=Ln&&"documentMode"in document&&11>=document.documentMode,Ya=null,Dd=null,zl=null,Vd=!1;function Yy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vd||Ya==null||Ya!==Ti(l)||(l=Ya,"selectionStart"in l&&Nd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Ul(zl,l)||(zl=l,l=Oh(Dd,"onSelect"),0<l.length&&(i=new Ai("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ya)))}function Br(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Xa={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},Od={},Xy={};Ln&&(Xy=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function qr(n){if(Od[n])return Od[n];if(!Xa[n])return n;var i=Xa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Xy)return Od[n]=i[a];return n}var $y=qr("animationend"),Jy=qr("animationiteration"),Zy=qr("animationstart"),sw=qr("transitionrun"),rw=qr("transitionstart"),aw=qr("transitioncancel"),Wy=qr("transitionend"),e_=new Map,Md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Md.push("scrollEnd");function si(n,i){e_.set(n,i),vi(i,[n])}var Kc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],$a=0,Pd=0;function Qc(){for(var n=$a,i=Pd=$a=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&t_(a,f,d)}}function Yc(n,i,a,l){zn[$a++]=n,zn[$a++]=i,zn[$a++]=a,zn[$a++]=l,Pd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function kd(n,i,a,l){return Yc(n,i,a,l),Xc(n)}function Fr(n,i){return Yc(n,null,null,i),Xc(n)}function t_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-_t(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Xc(n){if(50<ou)throw ou=0,Gm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ja={};function ow(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,l){return new ow(n,i,a,l)}function Ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qi(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function n_(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function $c(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Ld(n)&&(_=1);else if(typeof n=="string")_=fI(n,a,le.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=An(31,a,i,f),n.elementType=R,n.lanes=d,n;case j:return Hr(a.children,f,d,i);case X:_=8,f|=24;break;case fe:return n=An(12,a,i,f|2),n.elementType=fe,n.lanes=d,n;case Te:return n=An(13,a,i,f),n.elementType=Te,n.lanes=d,n;case oe:return n=An(19,a,i,f),n.elementType=oe,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:_=10;break e;case he:_=9;break e;case Ae:_=11;break e;case A:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return i=An(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Hr(n,i,a,l){return n=An(7,n,l,i),n.lanes=a,n}function Ud(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function i_(n){var i=An(18,null,null,0);return i.stateNode=n,i}function zd(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var s_=new WeakMap;function jn(n,i){if(typeof n=="object"&&n!==null){var a=s_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:pl(i)},s_.set(n,i),i)}return{value:n,source:i,stack:pl(i)}}var Za=[],Wa=0,Jc=null,jl=0,Bn=[],qn=0,Ds=null,Ci=1,xi="";function Yi(n,i){Za[Wa++]=jl,Za[Wa++]=Jc,Jc=n,jl=i}function r_(n,i,a){Bn[qn++]=Ci,Bn[qn++]=xi,Bn[qn++]=Ds,Ds=n;var l=Ci;n=xi;var f=32-_t(l)-1;l&=~(1<<f),a+=1;var d=32-_t(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ci=1<<32-_t(i)+f|a<<f|l,xi=d+n}else Ci=1<<d|a<<f|l,xi=n}function jd(n){n.return!==null&&(Yi(n,1),r_(n,1,0))}function Bd(n){for(;n===Jc;)Jc=Za[--Wa],Za[Wa]=null,jl=Za[--Wa],Za[Wa]=null;for(;n===Ds;)Ds=Bn[--qn],Bn[qn]=null,xi=Bn[--qn],Bn[qn]=null,Ci=Bn[--qn],Bn[qn]=null}function a_(n,i){Bn[qn++]=Ci,Bn[qn++]=xi,Bn[qn++]=Ds,Ci=i.id,xi=i.overflow,Ds=n}var Yt=null,ot=null,Le=!1,Vs=null,Fn=!1,qd=Error(s(519));function Os(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl(jn(i,n)),qd}function o_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Rt]=n,i[qt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<uu.length;a++)Ve(uu[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),Nc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),As(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||A0(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=Wn),i=!0):i=!1,i||Os(n,!0)}function l_(n){for(Yt=n.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Yt=Yt.return}}function eo(n){if(n!==Yt)return!1;if(!Le)return l_(n),Le=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||ag(n.type,n.memoizedProps)),a=!a),a&&ot&&Os(n),l_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ot=O0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ot=O0(n)}else i===27?(i=ot,Qs(n.type)?(n=hg,hg=null,ot=n):ot=i):ot=Yt?Gn(n.stateNode.nextSibling):null;return!0}function Gr(){ot=Yt=null,Le=!1}function Fd(){var n=Vs;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Vs=null),n}function Bl(n){Vs===null?Vs=[n]:Vs.push(n)}var Hd=M(null),Kr=null,Xi=null;function Ms(n,i,a){se(Hd,i._currentValue),i._currentValue=a}function $i(n){n._currentValue=Hd.current,W(Hd)}function Gd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Kd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Gd(d.return,a,n),l||(_=null);break e}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Gd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function to(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===ze.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(mu):n=[mu])}f=f.return}n!==null&&Kd(i,n,a,l),i.flags|=262144}function Zc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qr(n){Kr=n,Xi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return u_(Kr,n)}function Wc(n,i){return Kr===null&&Qr(n),u_(n,i)}function u_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Xi===null){if(n===null)throw Error(s(308));Xi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Xi=Xi.next=i;return a}var lw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},uw=r.unstable_scheduleCallback,cw=r.unstable_NormalPriority,Nt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new lw,data:new Map,refCount:0}}function ql(n){n.refCount--,n.refCount===0&&uw(cw,function(){n.controller.abort()})}var Fl=null,Yd=0,no=0,io=null;function hw(n,i){if(Fl===null){var a=Fl=[];Yd=0,no=Jm(),io={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yd++,i.then(c_,c_),i}function c_(){if(--Yd===0&&Fl!==null){io!==null&&(io.status="fulfilled");var n=Fl;Fl=null,no=0,io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function fw(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var h_=Y.S;Y.S=function(n,i){Yv=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&hw(n,i),h_!==null&&h_(n,i)};var Yr=M(null);function Xd(){var n=Yr.current;return n!==null?n:rt.pooledCache}function eh(n,i){i===null?se(Yr,Yr.current):se(Yr,i.pool)}function f_(){var n=Xd();return n===null?null:{parent:Nt._currentValue,pool:n}}var so=Error(s(460)),$d=Error(s(474)),th=Error(s(542)),nh={then:function(){}};function d_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function m_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Wn,Wn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,p_(n),n;default:if(typeof i.status=="string")i.then(Wn,Wn);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,p_(n),n}throw $r=i,so}}function Xr(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($r=a,so):a}}var $r=null;function g_(){if($r===null)throw Error(s(459));var n=$r;return $r=null,n}function p_(n){if(n===so||n===th)throw Error(s(483))}var ro=null,Hl=0;function ih(n){var i=Hl;return Hl+=1,ro===null&&(ro=[]),m_(ro,n,i)}function Gl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function sh(n,i){throw i.$$typeof===I?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function y_(n){function i(k,V){if(n){var B=k.deletions;B===null?(k.deletions=[V],k.flags|=16):B.push(V)}}function a(k,V){if(!n)return null;for(;V!==null;)i(k,V),V=V.sibling;return null}function l(k){for(var V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function f(k,V){return k=Qi(k,V),k.index=0,k.sibling=null,k}function d(k,V,B){return k.index=B,n?(B=k.alternate,B!==null?(B=B.index,B<V?(k.flags|=67108866,V):B):(k.flags|=67108866,V)):(k.flags|=1048576,V)}function _(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function b(k,V,B,$){return V===null||V.tag!==6?(V=Ud(B,k.mode,$),V.return=k,V):(V=f(V,B),V.return=k,V)}function N(k,V,B,$){var pe=B.type;return pe===j?Q(k,V,B.props.children,$,B.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&Xr(pe)===V.type)?(V=f(V,B.props),Gl(V,B),V.return=k,V):(V=$c(B.type,B.key,B.props,null,k.mode,$),Gl(V,B),V.return=k,V)}function q(k,V,B,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=zd(B,k.mode,$),V.return=k,V):(V=f(V,B.children||[]),V.return=k,V)}function Q(k,V,B,$,pe){return V===null||V.tag!==7?(V=Hr(B,k.mode,$,pe),V.return=k,V):(V=f(V,B),V.return=k,V)}function Z(k,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Ud(""+V,k.mode,B),V.return=k,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case L:return B=$c(V.type,V.key,V.props,null,k.mode,B),Gl(B,V),B.return=k,B;case K:return V=zd(V,k.mode,B),V.return=k,V;case w:return V=Xr(V),Z(k,V,B)}if(mt(V)||P(V))return V=Hr(V,k.mode,B,null),V.return=k,V;if(typeof V.then=="function")return Z(k,ih(V),B);if(V.$$typeof===ne)return Z(k,Wc(k,V),B);sh(k,V)}return null}function F(k,V,B,$){var pe=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return pe!==null?null:b(k,V,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case L:return B.key===pe?N(k,V,B,$):null;case K:return B.key===pe?q(k,V,B,$):null;case w:return B=Xr(B),F(k,V,B,$)}if(mt(B)||P(B))return pe!==null?null:Q(k,V,B,$,null);if(typeof B.then=="function")return F(k,V,ih(B),$);if(B.$$typeof===ne)return F(k,V,Wc(k,B),$);sh(k,B)}return null}function G(k,V,B,$,pe){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(B)||null,b(V,k,""+$,pe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case L:return k=k.get($.key===null?B:$.key)||null,N(V,k,$,pe);case K:return k=k.get($.key===null?B:$.key)||null,q(V,k,$,pe);case w:return $=Xr($),G(k,V,B,$,pe)}if(mt($)||P($))return k=k.get(B)||null,Q(V,k,$,pe,null);if(typeof $.then=="function")return G(k,V,B,ih($),pe);if($.$$typeof===ne)return G(k,V,B,Wc(V,$),pe);sh(V,$)}return null}function ce(k,V,B,$){for(var pe=null,qe=null,me=V,xe=V=0,Pe=null;me!==null&&xe<B.length;xe++){me.index>xe?(Pe=me,me=null):Pe=me.sibling;var Fe=F(k,me,B[xe],$);if(Fe===null){me===null&&(me=Pe);break}n&&me&&Fe.alternate===null&&i(k,me),V=d(Fe,V,xe),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe,me=Pe}if(xe===B.length)return a(k,me),Le&&Yi(k,xe),pe;if(me===null){for(;xe<B.length;xe++)me=Z(k,B[xe],$),me!==null&&(V=d(me,V,xe),qe===null?pe=me:qe.sibling=me,qe=me);return Le&&Yi(k,xe),pe}for(me=l(me);xe<B.length;xe++)Pe=G(me,k,xe,B[xe],$),Pe!==null&&(n&&Pe.alternate!==null&&me.delete(Pe.key===null?xe:Pe.key),V=d(Pe,V,xe),qe===null?pe=Pe:qe.sibling=Pe,qe=Pe);return n&&me.forEach(function(Zs){return i(k,Zs)}),Le&&Yi(k,xe),pe}function ve(k,V,B,$){if(B==null)throw Error(s(151));for(var pe=null,qe=null,me=V,xe=V=0,Pe=null,Fe=B.next();me!==null&&!Fe.done;xe++,Fe=B.next()){me.index>xe?(Pe=me,me=null):Pe=me.sibling;var Zs=F(k,me,Fe.value,$);if(Zs===null){me===null&&(me=Pe);break}n&&me&&Zs.alternate===null&&i(k,me),V=d(Zs,V,xe),qe===null?pe=Zs:qe.sibling=Zs,qe=Zs,me=Pe}if(Fe.done)return a(k,me),Le&&Yi(k,xe),pe;if(me===null){for(;!Fe.done;xe++,Fe=B.next())Fe=Z(k,Fe.value,$),Fe!==null&&(V=d(Fe,V,xe),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe);return Le&&Yi(k,xe),pe}for(me=l(me);!Fe.done;xe++,Fe=B.next())Fe=G(me,k,xe,Fe.value,$),Fe!==null&&(n&&Fe.alternate!==null&&me.delete(Fe.key===null?xe:Fe.key),V=d(Fe,V,xe),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe);return n&&me.forEach(function(SI){return i(k,SI)}),Le&&Yi(k,xe),pe}function it(k,V,B,$){if(typeof B=="object"&&B!==null&&B.type===j&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case L:e:{for(var pe=B.key;V!==null;){if(V.key===pe){if(pe=B.type,pe===j){if(V.tag===7){a(k,V.sibling),$=f(V,B.props.children),$.return=k,k=$;break e}}else if(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&Xr(pe)===V.type){a(k,V.sibling),$=f(V,B.props),Gl($,B),$.return=k,k=$;break e}a(k,V);break}else i(k,V);V=V.sibling}B.type===j?($=Hr(B.props.children,k.mode,$,B.key),$.return=k,k=$):($=$c(B.type,B.key,B.props,null,k.mode,$),Gl($,B),$.return=k,k=$)}return _(k);case K:e:{for(pe=B.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(k,V.sibling),$=f(V,B.children||[]),$.return=k,k=$;break e}else{a(k,V);break}else i(k,V);V=V.sibling}$=zd(B,k.mode,$),$.return=k,k=$}return _(k);case w:return B=Xr(B),it(k,V,B,$)}if(mt(B))return ce(k,V,B,$);if(P(B)){if(pe=P(B),typeof pe!="function")throw Error(s(150));return B=pe.call(B),ve(k,V,B,$)}if(typeof B.then=="function")return it(k,V,ih(B),$);if(B.$$typeof===ne)return it(k,V,Wc(k,B),$);sh(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(a(k,V.sibling),$=f(V,B),$.return=k,k=$):(a(k,V),$=Ud(B,k.mode,$),$.return=k,k=$),_(k)):a(k,V)}return function(k,V,B,$){try{Hl=0;var pe=it(k,V,B,$);return ro=null,pe}catch(me){if(me===so||me===th)throw me;var qe=An(29,me,null,k.mode);return qe.lanes=$,qe.return=k,qe}}}var Jr=y_(!0),__=y_(!1),Ps=!1;function Jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ks(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ls(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Xc(n),t_(n,null,a),i}return Yc(n,l,i,a),Xc(n)}function Kl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,vl(n,a)}}function Wd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var em=!1;function Ql(){if(em){var n=io;if(n!==null)throw n}}function Yl(n,i,a,l){em=!1;var f=n.updateQueue;Ps=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,q=N.next;N.next=null,_===null?d=q:_.next=q,_=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==_&&(b===null?Q.firstBaseUpdate=q:b.next=q,Q.lastBaseUpdate=N))}if(d!==null){var Z=f.baseState;_=0,Q=q=N=null,b=d;do{var F=b.lane&-536870913,G=F!==b.lane;if(G?(Me&F)===F:(l&F)===F){F!==0&&F===no&&(em=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ce=n,ve=b;F=i;var it=a;switch(ve.tag){case 1:if(ce=ve.payload,typeof ce=="function"){Z=ce.call(it,Z,F);break e}Z=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ve.payload,F=typeof ce=="function"?ce.call(it,Z,F):ce,F==null)break e;Z=T({},Z,F);break e;case 2:Ps=!0}}F=b.callback,F!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[F]:G.push(F))}else G={lane:F,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(q=Q=G,N=Z):Q=Q.next=G,_|=F;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;G=b,b=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Q===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=q,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),qs|=_,n.lanes=_,n.memoizedState=Z}}function v_(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function E_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)v_(a[n],i)}var ao=M(null),rh=M(0);function T_(n,i){n=rs,se(rh,n),se(ao,i),rs=n|i.baseLanes}function tm(){se(rh,rs),se(ao,ao.current)}function nm(){rs=rh.current,W(ao),W(rh)}var wn=M(null),Hn=null;function Us(n){var i=n.alternate;se(Et,Et.current&1),se(wn,n),Hn===null&&(i===null||ao.current!==null||i.memoizedState!==null)&&(Hn=n)}function im(n){se(Et,Et.current),se(wn,n),Hn===null&&(Hn=n)}function b_(n){n.tag===22?(se(Et,Et.current),se(wn,n),Hn===null&&(Hn=n)):zs()}function zs(){se(Et,Et.current),se(wn,wn.current)}function In(n){W(wn),Hn===n&&(Hn=null),W(Et)}var Et=M(0);function ah(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ug(a)||cg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,Re=null,tt=null,Dt=null,oh=!1,oo=!1,Zr=!1,lh=0,Xl=0,lo=null,dw=0;function gt(){throw Error(s(321))}function sm(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function rm(n,i,a,l,f,d){return Ji=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=n===null||n.memoizedState===null?rv:Em,Zr=!1,d=a(l,f),Zr=!1,oo&&(d=A_(i,a,l,f)),S_(n),d}function S_(n){Y.H=Zl;var i=tt!==null&&tt.next!==null;if(Ji=0,Dt=tt=Re=null,oh=!1,Xl=0,lo=null,i)throw Error(s(300));n===null||Vt||(n=n.dependencies,n!==null&&Zc(n)&&(Vt=!0))}function A_(n,i,a,l){Re=n;var f=0;do{if(oo&&(lo=null),Xl=0,oo=!1,25<=f)throw Error(s(301));if(f+=1,Dt=tt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=av,d=i(a,l)}while(oo);return d}function mw(){var n=Y.H,i=n.useState()[0];return i=typeof i.then=="function"?$l(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Re.flags|=1024),i}function am(){var n=lh!==0;return lh=0,n}function om(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function lm(n){if(oh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}oh=!1}Ji=0,Dt=tt=Re=null,oo=!1,Xl=lh=0,lo=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Re.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Tt(){if(tt===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=Dt===null?Re.memoizedState:Dt.next;if(i!==null)Dt=i,tt=n;else{if(n===null)throw Re.alternate===null?Error(s(467)):Error(s(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Dt===null?Re.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(n){var i=Xl;return Xl+=1,lo===null&&(lo=[]),n=m_(lo,n,i),i=Re,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?rv:Em),n}function ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $l(n);if(n.$$typeof===ne)return Xt(n)}throw Error(s(438,String(n)))}function um(n){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=uh(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function Zi(n,i){return typeof i=="function"?i(n):i}function hh(n){var i=Tt();return cm(i,tt,n)}function cm(n,i,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,N=null,q=i,Q=!1;do{var Z=q.lane&-536870913;if(Z!==q.lane?(Me&Z)===Z:(Ji&Z)===Z){var F=q.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Z===no&&(Q=!0);else if((Ji&F)===F){q=q.next,F===no&&(Q=!0);continue}else Z={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=Z,_=d):N=N.next=Z,Re.lanes|=F,qs|=F;Z=q.action,Zr&&a(d,Z),d=q.hasEagerState?q.eagerState:a(d,Z)}else F={lane:Z,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=F,_=d):N=N.next=F,Re.lanes|=Z,qs|=Z;q=q.next}while(q!==null&&q!==i);if(N===null?_=d:N.next=b,!Sn(d,n.memoizedState)&&(Vt=!0,Q&&(a=io,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function hm(n){var i=Tt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function w_(n,i,a){var l=Re,f=Tt(),d=Le;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Sn((tt||f).memoizedState,a);if(_&&(f.memoizedState=a,Vt=!0),f=f.queue,mm(C_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,uo(9,{destroy:void 0},R_.bind(null,l,f,a,i),null),rt===null)throw Error(s(349));d||(Ji&127)!==0||I_(l,i,a)}return a}function I_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=uh(),Re.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function R_(n,i,a,l){i.value=a,i.getSnapshot=l,x_(i)&&N_(n)}function C_(n,i,a){return a(function(){x_(i)&&N_(n)})}function x_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function N_(n){var i=Fr(n,2);i!==null&&_n(i,n,2)}function fm(n){var i=cn();if(typeof n=="function"){var a=n;if(n=a(),Zr){Mn(!0);try{a()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},i}function D_(n,i,a,l){return n.baseState=a,cm(n,tt,typeof l=="function"?l:Zi)}function gw(n,i,a,l,f){if(mh(n))throw Error(s(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,V_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function V_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=Y.T,_={};Y.T=_;try{var b=a(f,l),N=Y.S;N!==null&&N(_,b),O_(n,i,b)}catch(q){dm(n,i,q)}finally{d!==null&&_.types!==null&&(d.types=_.types),Y.T=d}}else try{d=a(f,l),O_(n,i,d)}catch(q){dm(n,i,q)}}function O_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){M_(n,i,l)},function(l){return dm(n,i,l)}):M_(n,i,a)}function M_(n,i,a){i.status="fulfilled",i.value=a,P_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,V_(n,a)))}function dm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,P_(i),i=i.next;while(i!==l)}n.action=null}function P_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function k_(n,i){return i}function L_(n,i){if(Le){var a=rt.formState;if(a!==null){e:{var l=Re;if(Le){if(ot){t:{for(var f=ot,d=Fn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ot=Gn(f.nextSibling),l=f.data==="F!";break e}}Os(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k_,lastRenderedState:i},a.queue=l,a=nv.bind(null,Re,l),l.dispatch=a,l=fm(!1),d=vm.bind(null,Re,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=gw.bind(null,Re,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function U_(n){var i=Tt();return z_(i,tt,n)}function z_(n,i,a){if(i=cm(n,i,k_)[0],n=hh(Zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$l(i)}catch(_){throw _===so?th:_}else l=i;i=Tt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,uo(9,{destroy:void 0},pw.bind(null,f,a),null)),[l,d,n]}function pw(n,i){n.action=i}function j_(n){var i=Tt(),a=tt;if(a!==null)return z_(i,a,n);Tt(),i=i.memoizedState,a=Tt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function uo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=uh(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function B_(){return Tt().memoizedState}function fh(n,i,a,l){var f=cn();Re.flags|=n,f.memoizedState=uo(1|i,{destroy:void 0},a,l===void 0?null:l)}function dh(n,i,a,l){var f=Tt();l=l===void 0?null:l;var d=f.memoizedState.inst;tt!==null&&l!==null&&sm(l,tt.memoizedState.deps)?f.memoizedState=uo(i,d,a,l):(Re.flags|=n,f.memoizedState=uo(1|i,d,a,l))}function q_(n,i){fh(8390656,8,n,i)}function mm(n,i){dh(2048,8,n,i)}function yw(n){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=uh(),Re.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function F_(n){var i=Tt().memoizedState;return yw({ref:i,nextImpl:n}),function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function H_(n,i){return dh(4,2,n,i)}function G_(n,i){return dh(4,4,n,i)}function K_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Q_(n,i,a){a=a!=null?a.concat([n]):null,dh(4,4,K_.bind(null,i,n),a)}function gm(){}function Y_(n,i){var a=Tt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&sm(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function X_(n,i){var a=Tt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&sm(i,l[1]))return l[0];if(l=n(),Zr){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l}function pm(n,i,a){return a===void 0||(Ji&1073741824)!==0&&(Me&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=$v(),Re.lanes|=n,qs|=n,a)}function $_(n,i,a,l){return Sn(a,i)?a:ao.current!==null?(n=pm(n,a,l),Sn(n,i)||(Vt=!0),n):(Ji&42)===0||(Ji&1073741824)!==0&&(Me&261930)===0?(Vt=!0,n.memoizedState=a):(n=$v(),Re.lanes|=n,qs|=n,i)}function J_(n,i,a,l,f){var d=ie.p;ie.p=d!==0&&8>d?d:8;var _=Y.T,b={};Y.T=b,vm(n,!1,i,a);try{var N=f(),q=Y.S;if(q!==null&&q(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=fw(N,l);Jl(n,i,Q,xn(n))}else Jl(n,i,l,xn(n))}catch(Z){Jl(n,i,{then:function(){},status:"rejected",reason:Z},xn())}finally{ie.p=d,_!==null&&b.types!==null&&(_.types=b.types),Y.T=_}}function _w(){}function ym(n,i,a,l){if(n.tag!==5)throw Error(s(476));var f=Z_(n).queue;J_(n,f,i,_e,a===null?_w:function(){return W_(n),a(l)})}function Z_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function W_(n){var i=Z_(n);i.next===null&&(i=n.alternate.memoizedState),Jl(n,i.next.queue,{},xn())}function _m(){return Xt(mu)}function ev(){return Tt().memoizedState}function tv(){return Tt().memoizedState}function vw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();n=ks(a);var l=Ls(i,n,a);l!==null&&(_n(l,i,a),Kl(l,i,a)),i={cache:Qd()},n.payload=i;return}i=i.return}}function Ew(n,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},mh(n)?iv(i,a):(a=kd(n,i,a,l),a!==null&&(_n(a,n,l),sv(a,i,l)))}function nv(n,i,a){var l=xn();Jl(n,i,a,l)}function Jl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(mh(n))iv(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,Sn(b,_))return Yc(n,i,f,0),rt===null&&Qc(),!1}catch{}if(a=kd(n,i,f,l),a!==null)return _n(a,n,l),sv(a,i,l),!0}return!1}function vm(n,i,a,l){if(l={lane:2,revertLane:Jm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},mh(n)){if(i)throw Error(s(479))}else i=kd(n,a,l,2),i!==null&&_n(i,n,2)}function mh(n){var i=n.alternate;return n===Re||i!==null&&i===Re}function iv(n,i){oo=oh=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function sv(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,vl(n,a)}}var Zl={readContext:Xt,use:ch,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Zl.useEffectEvent=gt;var rv={readContext:Xt,use:ch,useCallback:function(n,i){return cn().memoizedState=[n,i===void 0?null:i],n},useContext:Xt,useEffect:q_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,fh(4194308,4,K_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return fh(4194308,4,n,i)},useInsertionEffect:function(n,i){fh(4,2,n,i)},useMemo:function(n,i){var a=cn();i=i===void 0?null:i;var l=n();if(Zr){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=cn();if(a!==void 0){var f=a(i);if(Zr){Mn(!0);try{a(i)}finally{Mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Ew.bind(null,Re,n),[l.memoizedState,n]},useRef:function(n){var i=cn();return n={current:n},i.memoizedState=n},useState:function(n){n=fm(n);var i=n.queue,a=nv.bind(null,Re,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:gm,useDeferredValue:function(n,i){var a=cn();return pm(a,n,i)},useTransition:function(){var n=fm(!1);return n=J_.bind(null,Re,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Re,f=cn();if(Le){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),rt===null)throw Error(s(349));(Me&127)!==0||I_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,q_(C_.bind(null,l,d,n),[n]),l.flags|=2048,uo(9,{destroy:void 0},R_.bind(null,l,d,a,i),null),a},useId:function(){var n=cn(),i=rt.identifierPrefix;if(Le){var a=xi,l=Ci;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=lh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=dw++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:_m,useFormState:L_,useActionState:L_,useOptimistic:function(n){var i=cn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=vm.bind(null,Re,!0,a),a.dispatch=i,[n,i]},useMemoCache:um,useCacheRefresh:function(){return cn().memoizedState=vw.bind(null,Re)},useEffectEvent:function(n){var i=cn(),a={impl:n};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Em={readContext:Xt,use:ch,useCallback:Y_,useContext:Xt,useEffect:mm,useImperativeHandle:Q_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:X_,useReducer:hh,useRef:B_,useState:function(){return hh(Zi)},useDebugValue:gm,useDeferredValue:function(n,i){var a=Tt();return $_(a,tt.memoizedState,n,i)},useTransition:function(){var n=hh(Zi)[0],i=Tt().memoizedState;return[typeof n=="boolean"?n:$l(n),i]},useSyncExternalStore:w_,useId:ev,useHostTransitionStatus:_m,useFormState:U_,useActionState:U_,useOptimistic:function(n,i){var a=Tt();return D_(a,tt,n,i)},useMemoCache:um,useCacheRefresh:tv};Em.useEffectEvent=F_;var av={readContext:Xt,use:ch,useCallback:Y_,useContext:Xt,useEffect:mm,useImperativeHandle:Q_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:X_,useReducer:hm,useRef:B_,useState:function(){return hm(Zi)},useDebugValue:gm,useDeferredValue:function(n,i){var a=Tt();return tt===null?pm(a,n,i):$_(a,tt.memoizedState,n,i)},useTransition:function(){var n=hm(Zi)[0],i=Tt().memoizedState;return[typeof n=="boolean"?n:$l(n),i]},useSyncExternalStore:w_,useId:ev,useHostTransitionStatus:_m,useFormState:j_,useActionState:j_,useOptimistic:function(n,i){var a=Tt();return tt!==null?D_(a,tt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:um,useCacheRefresh:tv};av.useEffectEvent=F_;function Tm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var bm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=xn(),f=ks(l);f.payload=i,a!=null&&(f.callback=a),i=Ls(n,f,l),i!==null&&(_n(i,n,l),Kl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=xn(),f=ks(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ls(n,f,l),i!==null&&(_n(i,n,l),Kl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=xn(),l=ks(a);l.tag=2,i!=null&&(l.callback=i),i=Ls(n,l,a),i!==null&&(_n(i,n,a),Kl(i,n,a))}};function ov(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ul(a,l)||!Ul(f,d):!0}function lv(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&bm.enqueueReplaceState(i,i.state,null)}function Wr(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function uv(n){Kc(n)}function cv(n){console.error(n)}function hv(n){Kc(n)}function gh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function fv(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Sm(n,i,a){return a=ks(a),a.tag=3,a.payload={element:null},a.callback=function(){gh(n,i)},a}function dv(n){return n=ks(n),n.tag=3,n}function mv(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){fv(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){fv(i,a,l),typeof f!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Tw(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&to(i,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Rh():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===nh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Ym(n,l,f)),!1;case 22:return a.flags|=65536,l===nh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Ym(n,l,f)),!1}throw Error(s(435,a.tag))}return Ym(n,l,f),Rh(),!1}if(Le)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==qd&&(n=Error(s(422),{cause:l}),Bl(jn(n,a)))):(l!==qd&&(i=Error(s(423),{cause:l}),Bl(jn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=jn(l,a),f=Sm(n.stateNode,l,f),Wd(n,f),pt!==4&&(pt=2)),!1;var d=Error(s(520),{cause:l});if(d=jn(d,a),au===null?au=[d]:au.push(d),pt!==4&&(pt=2),i===null)return!0;l=jn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Sm(a.stateNode,l,n),Wd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Fs===null||!Fs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=dv(f),mv(f,n,a,l),Wd(a,f),!1}a=a.return}while(a!==null);return!1}var Am=Error(s(461)),Vt=!1;function $t(n,i,a,l){i.child=n===null?__(i,null,a,l):Jr(i,n.child,a,l)}function gv(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Qr(i),l=rm(n,i,a,_,d,f),b=am(),n!==null&&!Vt?(om(n,i,f),Wi(n,i,f)):(Le&&b&&jd(i),i.flags|=1,$t(n,i,l,f),i.child)}function pv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Ld(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,yv(n,i,d,l,f)):(n=$c(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Vm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ul,a(_,l)&&n.ref===i.ref)return Wi(n,i,f)}return i.flags|=1,n=Qi(d,l),n.ref=i.ref,n.return=i,i.child=n}function yv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Ul(d,l)&&n.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,Vm(n,f))(n.flags&131072)!==0&&(Vt=!0);else return i.lanes=n.lanes,Wi(n,i,f)}return wm(n,i,a,l,f)}function _v(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return vv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&eh(i,d!==null?d.cachePool:null),d!==null?T_(i,d):tm(),b_(i);else return l=i.lanes=536870912,vv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(eh(i,d.cachePool),T_(i,d),zs(),i.memoizedState=null):(n!==null&&eh(i,null),tm(),zs());return $t(n,i,f,a),i.child}function Wl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function vv(n,i,a,l,f){var d=Xd();return d=d===null?null:{parent:Nt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&eh(i,null),tm(),b_(i),n!==null&&to(n,i,l,!0),i.childLanes=f,null}function ph(n,i){return i=_h({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Ev(n,i,a){return Jr(i,n.child,null,a),n=ph(i,i.pendingProps),n.flags|=2,In(i),i.memoizedState=null,n}function bw(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Le){if(l.mode==="hidden")return n=ph(i,l),i.lanes=536870912,Wl(null,n);if(im(i),(n=ot)?(n=V0(n,Fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ds!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=i_(n),a.return=i,i.child=a,Yt=i,ot=null)):n=null,n===null)throw Os(i);return i.lanes=536870912,null}return ph(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(im(i),f)if(i.flags&256)i.flags&=-257,i=Ev(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Vt||to(n,i,a,!1),f=(a&n.childLanes)!==0,Vt||f){if(l=rt,l!==null&&(_=El(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Fr(n,_),_n(l,n,_),Am;Rh(),i=Ev(n,i,a)}else n=d.treeContext,ot=Gn(_.nextSibling),Yt=i,Le=!0,Vs=null,Fn=!1,n!==null&&a_(i,n),i=ph(i,l),i.flags|=4096;return i}return n=Qi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function yh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function wm(n,i,a,l,f){return Qr(i),a=rm(n,i,a,l,void 0,f),l=am(),n!==null&&!Vt?(om(n,i,f),Wi(n,i,f)):(Le&&l&&jd(i),i.flags|=1,$t(n,i,a,f),i.child)}function Tv(n,i,a,l,f,d){return Qr(i),i.updateQueue=null,a=A_(i,l,a,f),S_(n),l=am(),n!==null&&!Vt?(om(n,i,d),Wi(n,i,d)):(Le&&l&&jd(i),i.flags|=1,$t(n,i,a,d),i.child)}function bv(n,i,a,l,f){if(Qr(i),i.stateNode===null){var d=Ja,_=a.contextType;typeof _=="object"&&_!==null&&(d=Xt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=bm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Jd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Xt(_):Ja,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Tm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&bm.enqueueReplaceState(d,d.state,null),Yl(i,l,d,f),Ql(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,N=Wr(a,b);d.props=N;var q=d.context,Q=a.contextType;_=Ja,typeof Q=="object"&&Q!==null&&(_=Xt(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||q!==_)&&lv(i,d,l,_),Ps=!1;var F=i.memoizedState;d.state=F,Yl(i,l,d,f),Ql(),q=i.memoizedState,b||F!==q||Ps?(typeof Z=="function"&&(Tm(i,a,Z,l),q=i.memoizedState),(N=Ps||ov(i,a,N,l,F,q,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Zd(n,i),_=i.memoizedProps,Q=Wr(a,_),d.props=Q,Z=i.pendingProps,F=d.context,q=a.contextType,N=Ja,typeof q=="object"&&q!==null&&(N=Xt(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||F!==N)&&lv(i,d,l,N),Ps=!1,F=i.memoizedState,d.state=F,Yl(i,l,d,f),Ql();var G=i.memoizedState;_!==Z||F!==G||Ps||n!==null&&n.dependencies!==null&&Zc(n.dependencies)?(typeof b=="function"&&(Tm(i,a,b,l),G=i.memoizedState),(Q=Ps||ov(i,a,Q,l,F,G,N)||n!==null&&n.dependencies!==null&&Zc(n.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=N,l=Q):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,yh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Jr(i,n.child,null,f),i.child=Jr(i,null,a,f)):$t(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Wi(n,i,f),n}function Sv(n,i,a,l){return Gr(),i.flags|=256,$t(n,i,a,l),i.child}var Im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(n){return{baseLanes:n,cachePool:f_()}}function Cm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function Av(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Et.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Le){if(f?Us(i):zs(),(n=ot)?(n=V0(n,Fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ds!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=i_(n),a.return=i,i.child=a,Yt=i,ot=null)):n=null,n===null)throw Os(i);return cg(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(zs(),f=i.mode,b=_h({mode:"hidden",children:b},f),l=Hr(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=Rm(a),l.childLanes=Cm(n,_,a),i.memoizedState=Im,Wl(null,l)):(Us(i),xm(i,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Us(i),i.flags&=-257,i=Nm(n,i,a)):i.memoizedState!==null?(zs(),i.child=n.child,i.flags|=128,i=null):(zs(),b=l.fallback,f=i.mode,l=_h({mode:"visible",children:l.children},f),b=Hr(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Jr(i,n.child,null,a),l=i.child,l.memoizedState=Rm(a),l.childLanes=Cm(n,_,a),i.memoizedState=Im,i=Wl(null,l));else if(Us(i),cg(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var q=_.dgst;_=q,l=Error(s(419)),l.stack="",l.digest=_,Bl({value:l,source:null,stack:null}),i=Nm(n,i,a)}else if(Vt||to(n,i,a,!1),_=(a&n.childLanes)!==0,Vt||_){if(_=rt,_!==null&&(l=El(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Fr(n,l),_n(_,n,l),Am;ug(b)||Rh(),i=Nm(n,i,a)}else ug(b)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,ot=Gn(b.nextSibling),Yt=i,Le=!0,Vs=null,Fn=!1,n!==null&&a_(i,n),i=xm(i,l.children),i.flags|=4096);return i}return f?(zs(),b=l.fallback,f=i.mode,N=n.child,q=N.sibling,l=Qi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?b=Qi(q,b):(b=Hr(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Wl(null,l),l=i.child,b=n.child.memoizedState,b===null?b=Rm(a):(f=b.cachePool,f!==null?(N=Nt._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=f_(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Cm(n,_,a),i.memoizedState=Im,Wl(n.child,l)):(Us(i),a=n.child,n=a.sibling,a=Qi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function xm(n,i){return i=_h({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function _h(n,i){return n=An(22,n,null,i),n.lanes=0,n}function Nm(n,i,a){return Jr(i,n.child,null,a),n=xm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function wv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Gd(n.return,i,a)}function Dm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Iv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Et.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,se(Et,_),$t(n,i,l,a),l=Le?jl:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wv(n,a,i);else if(n.tag===19)wv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&ah(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Dm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&ah(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Dm(i,!0,a,null,d,l);break;case"together":Dm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Wi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),qs|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(to(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=Qi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Qi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Vm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Zc(n)))}function Sw(n,i,a){switch(i.tag){case 3:Lt(i,i.stateNode.containerInfo),Ms(i,Nt,n.memoizedState.cache),Gr();break;case 27:case 5:wr(i);break;case 4:Lt(i,i.stateNode.containerInfo);break;case 10:Ms(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,im(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Us(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Av(n,i,a):(Us(i),n=Wi(n,i,a),n!==null?n.sibling:null);Us(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(to(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Iv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(Et,Et.current),l)break;return null;case 22:return i.lanes=0,_v(n,i,a,i.pendingProps);case 24:Ms(i,Nt,n.memoizedState.cache)}return Wi(n,i,a)}function Rv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Vt=!0;else{if(!Vm(n,a)&&(i.flags&128)===0)return Vt=!1,Sw(n,i,a);Vt=(n.flags&131072)!==0}else Vt=!1,Le&&(i.flags&1048576)!==0&&r_(i,jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Xr(i.elementType),i.type=n,typeof n=="function")Ld(n)?(l=Wr(n,l),i.tag=1,i=bv(null,i,n,l,a)):(i.tag=0,i=wm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===Ae){i.tag=11,i=gv(null,i,n,l,a);break e}else if(f===A){i.tag=14,i=pv(null,i,n,l,a);break e}}throw i=Qe(n)||n,Error(s(306,i,""))}}return i;case 0:return wm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Wr(l,i.pendingProps),bv(n,i,l,f,a);case 3:e:{if(Lt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Zd(n,i),Yl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Ms(i,Nt,l),l!==d.cache&&Kd(i,[Nt],a,!0),Ql(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Sv(n,i,l,a);break e}else if(l!==f){f=jn(Error(s(424)),i),Bl(f),i=Sv(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ot=Gn(n.firstChild),Yt=i,Le=!0,Vs=null,Fn=!0,a=__(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gr(),l===f){i=Wi(n,i,a);break e}$t(n,i,l,a)}i=i.child}return i;case 26:return yh(n,i),n===null?(a=U0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Le||(a=i.type,n=i.pendingProps,l=Mh(Ce.current).createElement(a),l[Rt]=i,l[qt]=n,Jt(l,a,n),Ct(l),i.stateNode=l):i.memoizedState=U0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return wr(i),n===null&&Le&&(l=i.stateNode=P0(i.type,i.pendingProps,Ce.current),Yt=i,Fn=!0,f=ot,Qs(i.type)?(hg=f,ot=Gn(l.firstChild)):ot=f),$t(n,i,i.pendingProps.children,a),yh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Le&&((f=l=ot)&&(l=Ww(l,i.type,i.pendingProps,Fn),l!==null?(i.stateNode=l,Yt=i,ot=Gn(l.firstChild),Fn=!1,f=!0):f=!1),f||Os(i)),wr(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,ag(f,d)?l=null:_!==null&&ag(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=rm(n,i,mw,null,null,a),mu._currentValue=f),yh(n,i),$t(n,i,l,a),i.child;case 6:return n===null&&Le&&((n=a=ot)&&(a=eI(a,i.pendingProps,Fn),a!==null?(i.stateNode=a,Yt=i,ot=null,n=!0):n=!1),n||Os(i)),null;case 13:return Av(n,i,a);case 4:return Lt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Jr(i,null,l,a):$t(n,i,l,a),i.child;case 11:return gv(n,i,i.type,i.pendingProps,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ms(i,i.type,l.value),$t(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Qr(i),f=Xt(f),l=l(f),i.flags|=1,$t(n,i,l,a),i.child;case 14:return pv(n,i,i.type,i.pendingProps,a);case 15:return yv(n,i,i.type,i.pendingProps,a);case 19:return Iv(n,i,a);case 31:return bw(n,i,a);case 22:return _v(n,i,a,i.pendingProps);case 24:return Qr(i),l=Xt(Nt),n===null?(f=Xd(),f===null&&(f=rt,d=Qd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Jd(i),Ms(i,Nt,f)):((n.lanes&a)!==0&&(Zd(n,i),Yl(i,null,null,a),Ql()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ms(i,Nt,l)):(l=d.cache,Ms(i,Nt,l),l!==f.cache&&Kd(i,[Nt],a,!0))),$t(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function es(n){n.flags|=4}function Om(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(e0())n.flags|=8192;else throw $r=nh,$d}else n.flags&=-16777217}function Cv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!F0(i))if(e0())n.flags|=8192;else throw $r=nh,$d}function vh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?wc():536870912,n.lanes|=i,mo|=i)}function eu(n,i){if(!Le)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function Aw(n,i,a){var l=i.pendingProps;switch(Bd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),$i(Nt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(eo(i)?es(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fd())),lt(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(es(i),d!==null?(lt(i),Cv(i,d)):(lt(i),Om(i,f,null,l,a))):d?d!==n.memoizedState?(es(i),lt(i),Cv(i,d)):(lt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&es(i),lt(i),Om(i,f,n,l,a)),null;case 27:if(Va(i),a=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&es(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return lt(i),null}n=le.current,eo(i)?o_(i):(n=P0(f,l,a),i.stateNode=n,es(i))}return lt(i),null;case 5:if(Va(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&es(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(d=le.current,eo(i))o_(i);else{var _=Mh(Ce.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Rt]=i,d[qt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Jt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&es(i)}}return lt(i),Om(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&es(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ce.current,eo(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Yt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Rt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||A0(n.nodeValue,a)),n||Os(i,!0)}else n=Mh(n).createTextNode(l),n[Rt]=i,i.stateNode=n}return lt(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=eo(i),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Rt]=i}else Gr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),n=!1}else a=Fd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=eo(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Rt]=i}else Gr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),f=!1}else f=Fd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),vh(i,i.updateQueue),lt(i),null);case 4:return ut(),n===null&&tg(i.stateNode.containerInfo),lt(i),null;case 10:return $i(i.type),lt(i),null;case 19:if(W(Et),l=i.memoizedState,l===null)return lt(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)eu(l,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=ah(n),d!==null){for(i.flags|=128,eu(l,!1),n=d.updateQueue,i.updateQueue=n,vh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)n_(a,n),a=a.sibling;return se(Et,Et.current&1|2),Le&&Yi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&ln()>Ah&&(i.flags|=128,f=!0,eu(l,!1),i.lanes=4194304)}else{if(!f)if(n=ah(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,vh(i,n),eu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Le)return lt(i),null}else 2*ln()-l.renderingStartTime>Ah&&a!==536870912&&(i.flags|=128,f=!0,eu(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ln(),n.sibling=null,a=Et.current,se(Et,f?a&1|2:a&1),Le&&Yi(i,l.treeForkCount),n):(lt(i),null);case 22:case 23:return In(i),nm(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&vh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&W(Yr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),$i(Nt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ww(n,i){switch(Bd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return $i(Nt),ut(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Va(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(s(340));Gr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(In(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Gr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Et),null;case 4:return ut(),null;case 10:return $i(i.type),null;case 22:case 23:return In(i),nm(),n!==null&&W(Yr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return $i(Nt),null;case 25:return null;default:return null}}function xv(n,i){switch(Bd(i),i.tag){case 3:$i(Nt),ut();break;case 26:case 27:case 5:Va(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:W(Et);break;case 10:$i(i.type);break;case 22:case 23:In(i),nm(),n!==null&&W(Yr);break;case 24:$i(Nt)}}function tu(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){Je(i,i.return,b)}}function js(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,q=b;try{q()}catch(Q){Je(f,N,Q)}}}l=l.next}while(l!==d)}}catch(Q){Je(i,i.return,Q)}}function Nv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{E_(i,a)}catch(l){Je(n,n.return,l)}}}function Dv(n,i,a){a.props=Wr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Je(n,i,l)}}function nu(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Je(n,i,f)}}function Ni(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Je(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Je(n,i,f)}else a.current=null}function Vv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Je(n,n.return,f)}}function Mm(n,i,a){try{var l=n.stateNode;Qw(l,n.type,a,i),l[qt]=i}catch(f){Je(n,n.return,f)}}function Ov(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qs(n.type)||n.tag===4}function Pm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ov(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function km(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wn));else if(l!==4&&(l===27&&Qs(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(km(n,i,a),n=n.sibling;n!==null;)km(n,i,a),n=n.sibling}function Eh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Qs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Eh(n,i,a),n=n.sibling;n!==null;)Eh(n,i,a),n=n.sibling}function Mv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Jt(i,l,a),i[Rt]=n,i[qt]=a}catch(d){Je(n,n.return,d)}}var ts=!1,Ot=!1,Lm=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Iw(n,i){if(n=n.containerInfo,sg=Bh,n=Qy(n),Nd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,q=0,Q=0,Z=n,F=null;t:for(;;){for(var G;Z!==a||f!==0&&Z.nodeType!==3||(b=_+f),Z!==d||l!==0&&Z.nodeType!==3||(N=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(G=Z.firstChild)!==null;)F=Z,Z=G;for(;;){if(Z===n)break t;if(F===a&&++q===f&&(b=_),F===d&&++Q===l&&(N=_),(G=Z.nextSibling)!==null)break;Z=F,F=Z.parentNode}Z=G}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(rg={focusedElem:n,selectionRange:a},Bh=!1,Ht=i;Ht!==null;)if(i=Ht,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ht=n;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ce=Wr(a.type,f);n=l.getSnapshotBeforeUpdate(ce,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(ve){Je(a,a.return,ve)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)lg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":lg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Ht=n;break}Ht=i.return}}function kv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:is(n,a),l&4&&tu(5,a);break;case 1:if(is(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Je(a,a.return,_)}else{var f=Wr(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Je(a,a.return,_)}}l&64&&Nv(a),l&512&&nu(a,a.return);break;case 3:if(is(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{E_(n,i)}catch(_){Je(a,a.return,_)}}break;case 27:i===null&&l&4&&Mv(a);case 26:case 5:is(n,a),i===null&&l&4&&Vv(a),l&512&&nu(a,a.return);break;case 12:is(n,a);break;case 31:is(n,a),l&4&&zv(n,a);break;case 13:is(n,a),l&4&&jv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Pw.bind(null,a),tI(n,a))));break;case 22:if(l=a.memoizedState!==null||ts,!l){i=i!==null&&i.memoizedState!==null||Ot,f=ts;var d=Ot;ts=l,(Ot=i)&&!d?ss(n,a,(a.subtreeFlags&8772)!==0):is(n,a),ts=f,Ot=d}break;case 30:break;default:is(n,a)}}function Lv(n){var i=n.alternate;i!==null&&(n.alternate=null,Lv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&La(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,mn=!1;function ns(n,i,a){for(a=a.child;a!==null;)Uv(n,i,a),a=a.sibling}function Uv(n,i,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Ot||Ni(a,i),ns(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Ni(a,i);var l=ht,f=mn;Qs(a.type)&&(ht=a.stateNode,mn=!1),ns(n,i,a),hu(a.stateNode),ht=l,mn=f;break;case 5:Ot||Ni(a,i);case 6:if(l=ht,f=mn,ht=null,ns(n,i,a),ht=l,mn=f,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{ht.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:ht!==null&&(mn?(n=ht,N0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),bo(n)):N0(ht,a.stateNode));break;case 4:l=ht,f=mn,ht=a.stateNode.containerInfo,mn=!0,ns(n,i,a),ht=l,mn=f;break;case 0:case 11:case 14:case 15:js(2,a,i),Ot||js(4,a,i),ns(n,i,a);break;case 1:Ot||(Ni(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Dv(a,i,l)),ns(n,i,a);break;case 21:ns(n,i,a);break;case 22:Ot=(l=Ot)||a.memoizedState!==null,ns(n,i,a),Ot=l;break;default:ns(n,i,a)}}function zv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{bo(n)}catch(a){Je(i,i.return,a)}}}function jv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bo(n)}catch(a){Je(i,i.return,a)}}function Rw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Pv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Pv),i;default:throw Error(s(435,n.tag))}}function Th(n,i){var a=Rw(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=kw.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Qs(b.type)){ht=b.stateNode,mn=!1;break e}break;case 5:ht=b.stateNode,mn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,mn=!0;break e}b=b.return}if(ht===null)throw Error(s(160));Uv(d,_,f),ht=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Bv(i,n),i=i.sibling}var ri=null;function Bv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(js(3,n,n.return),tu(3,n),js(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Ot||a===null||Ni(a,a.return)),l&64&&ts&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ri;if(gn(i,n),pn(n),l&512&&(Ot||a===null||Ni(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pi]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Jt(d,l,a),d[Rt]=n,Ct(d),l=d;break e;case"link":var _=B0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;case"meta":if(_=B0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Rt]=n,Ct(d),l=d}n.stateNode=l}else q0(f,n.type,n.stateNode);else n.stateNode=j0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?q0(f,n.type,n.stateNode):j0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Mm(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Ot||a===null||Ni(a,a.return)),a!==null&&l&4&&Mm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Ot||a===null||Ni(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(ce){Je(n,n.return,ce)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Mm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Lm=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ce){Je(n,n.return,ce)}}break;case 3:if(Lh=null,f=ri,ri=Ph(i.containerInfo),gn(i,n),ri=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{bo(i.containerInfo)}catch(ce){Je(n,n.return,ce)}Lm&&(Lm=!1,qv(n));break;case 4:l=ri,ri=Ph(n.stateNode.containerInfo),gn(i,n),pn(n),ri=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Th(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sh=ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Th(n,l)));break;case 22:f=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=ts,Q=Ot;if(ts=q||f,Ot=Q||N,gn(i,n),Ot=Q,ts=q,pn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||ts||Ot||ea(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var Z=N.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ce){Je(N,N.return,ce)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(ce){Je(N,N.return,ce)}}}else if(i.tag===18){if(a===null){N=i;try{var G=N.stateNode;f?D0(G,!0):D0(N.stateNode,!1)}catch(ce){Je(N,N.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Th(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Th(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(Ov(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Pm(n);Eh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var b=Pm(n);Eh(n,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,q=Pm(n);km(n,q,N);break;default:throw Error(s(161))}}catch(Q){Je(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function qv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;qv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function is(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)kv(n,i.alternate,i),i=i.sibling}function ea(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:js(4,i,i.return),ea(i);break;case 1:Ni(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Dv(i,i.return,a),ea(i);break;case 27:hu(i.stateNode);case 26:case 5:Ni(i,i.return),ea(i);break;case 22:i.memoizedState===null&&ea(i);break;case 30:ea(i);break;default:ea(i)}n=n.sibling}}function ss(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:ss(f,d,a),tu(4,d);break;case 1:if(ss(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Je(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)v_(N[f],b)}catch(q){Je(l,l.return,q)}}a&&_&64&&Nv(d),nu(d,d.return);break;case 27:Mv(d);case 26:case 5:ss(f,d,a),a&&l===null&&_&4&&Vv(d),nu(d,d.return);break;case 12:ss(f,d,a);break;case 31:ss(f,d,a),a&&_&4&&zv(f,d);break;case 13:ss(f,d,a),a&&_&4&&jv(f,d);break;case 22:d.memoizedState===null&&ss(f,d,a),nu(d,d.return);break;case 30:break;default:ss(f,d,a)}i=i.sibling}}function Um(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&ql(a))}function zm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ql(n))}function ai(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fv(n,i,a,l),i=i.sibling}function Fv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(n,i,a,l),f&2048&&tu(9,i);break;case 1:ai(n,i,a,l);break;case 3:ai(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ql(n)));break;case 12:if(f&2048){ai(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Je(i,i.return,N)}}else ai(n,i,a,l);break;case 31:ai(n,i,a,l);break;case 13:ai(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ai(n,i,a,l):iu(n,i):d._visibility&2?ai(n,i,a,l):(d._visibility|=2,co(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Um(_,i);break;case 24:ai(n,i,a,l),f&2048&&zm(i.alternate,i);break;default:ai(n,i,a,l)}}function co(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,N=l,q=_.flags;switch(_.tag){case 0:case 11:case 15:co(d,_,b,N,f),tu(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?co(d,_,b,N,f):iu(d,_):(Q._visibility|=2,co(d,_,b,N,f)),f&&q&2048&&Um(_.alternate,_);break;case 24:co(d,_,b,N,f),f&&q&2048&&zm(_.alternate,_);break;default:co(d,_,b,N,f)}i=i.sibling}}function iu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:iu(a,l),f&2048&&Um(l.alternate,l);break;case 24:iu(a,l),f&2048&&zm(l.alternate,l);break;default:iu(a,l)}i=i.sibling}}var su=8192;function ho(n,i,a){if(n.subtreeFlags&su)for(n=n.child;n!==null;)Hv(n,i,a),n=n.sibling}function Hv(n,i,a){switch(n.tag){case 26:ho(n,i,a),n.flags&su&&n.memoizedState!==null&&dI(a,ri,n.memoizedState,n.memoizedProps);break;case 5:ho(n,i,a);break;case 3:case 4:var l=ri;ri=Ph(n.stateNode.containerInfo),ho(n,i,a),ri=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=su,su=16777216,ho(n,i,a),su=l):ho(n,i,a));break;default:ho(n,i,a)}}function Gv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ru(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,Qv(l,n)}Gv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kv(n),n=n.sibling}function Kv(n){switch(n.tag){case 0:case 11:case 15:ru(n),n.flags&2048&&js(9,n,n.return);break;case 3:ru(n);break;case 12:ru(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,bh(n)):ru(n);break;default:ru(n)}}function bh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,Qv(l,n)}Gv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:js(8,i,i.return),bh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,bh(i));break;default:bh(i)}n=n.sibling}}function Qv(n,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:js(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ql(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=n;Ht!==null;){l=Ht;var f=l.sibling,d=l.return;if(Lv(l),l===a){Ht=null;break e}if(f!==null){f.return=d,Ht=f;break e}Ht=d}}}var Cw={getCacheForType:function(n){var i=Xt(Nt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xt(Nt).controller.signal}},xw=typeof WeakMap=="function"?WeakMap:Map,Ge=0,rt=null,De=null,Me=0,$e=0,Rn=null,Bs=!1,fo=!1,jm=!1,rs=0,pt=0,qs=0,ta=0,Bm=0,Cn=0,mo=0,au=null,yn=null,qm=!1,Sh=0,Yv=0,Ah=1/0,wh=null,Fs=null,zt=0,Hs=null,go=null,as=0,Fm=0,Hm=null,Xv=null,ou=0,Gm=null;function xn(){return(Ge&2)!==0&&Me!==0?Me&-Me:Y.T!==null?Jm():Ic()}function $v(){if(Cn===0)if((Me&536870912)===0||Le){var n=Cr;Cr<<=1,(Cr&3932160)===0&&(Cr=262144),Cn=n}else Cn=536870912;return n=wn.current,n!==null&&(n.flags|=32),Cn}function _n(n,i,a){(n===rt&&($e===2||$e===9)||n.cancelPendingCommit!==null)&&(po(n,0),Gs(n,Me,Cn,!1)),xr(n,a),((Ge&2)===0||n!==rt)&&(n===rt&&((Ge&2)===0&&(ta|=a),pt===4&&Gs(n,Me,Cn,!1)),Di(n))}function Jv(n,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||$n(n,i),f=l?Vw(n,i):Qm(n,i,!0),d=l;do{if(f===0){fo&&!l&&Gs(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!Nw(a)){f=Qm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=n;f=au;var N=b.current.memoizedState.isDehydrated;if(N&&(po(b,_).flags|=256),_=Qm(b,_,!1),_!==2){if(jm&&!N){b.errorRecoveryDisabledLanes|=d,ta|=d,f=4;break e}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){po(n,0),Gs(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gs(l,i,Cn,!Bs);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Sh+300-ln(),10<f)){if(Gs(l,i,Cn,!Bs),di(l,0,!0)!==0)break e;as=i,l.timeoutHandle=C0(Zv.bind(null,l,a,yn,wh,qm,i,Cn,ta,mo,Bs,d,"Throttled",-0,0),f);break e}Zv(l,a,yn,wh,qm,i,Cn,ta,mo,Bs,d,null,-0,0)}}break}while(!0);Di(n)}function Zv(n,i,a,l,f,d,_,b,N,q,Q,Z,F,G){if(n.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Hv(i,d,Z);var ce=(d&62914560)===d?Sh-ln():(d&4194048)===d?Yv-ln():0;if(ce=mI(Z,ce),ce!==null){as=d,n.cancelPendingCommit=ce(a0.bind(null,n,i,d,a,l,f,_,b,N,Q,Z,null,F,G)),Gs(n,d,_,!q);return}}a0(n,i,d,a,l,f,_,b,N)}function Nw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gs(n,i,a,l){i&=~Bm,i&=~ta,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-_t(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Nr(n,a,i)}function Ih(){return(Ge&6)===0?(lu(0),!1):!0}function Km(){if(De!==null){if($e===0)var n=De.return;else n=De,Xi=Kr=null,lm(n),ro=null,Hl=0,n=De;for(;n!==null;)xv(n.alternate,n),n=n.return;De=null}}function po(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,$w(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),as=0,Km(),rt=n,De=a=Qi(n.current,null),Me=i,$e=0,Rn=null,Bs=!1,fo=$n(n,i),jm=!1,mo=Cn=Bm=ta=qs=pt=0,yn=au=null,qm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-_t(l),d=1<<f;i|=n[f],l&=~d}return rs=i,Qc(),a}function Wv(n,i){Re=null,Y.H=Zl,i===so||i===th?(i=g_(),$e=3):i===$d?(i=g_(),$e=4):$e=i===Am?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,De===null&&(pt=1,gh(n,jn(i,n.current)))}function e0(){var n=wn.current;return n===null?!0:(Me&4194048)===Me?Hn===null:(Me&62914560)===Me||(Me&536870912)!==0?n===Hn:!1}function t0(){var n=Y.H;return Y.H=Zl,n===null?Zl:n}function n0(){var n=Y.A;return Y.A=Cw,n}function Rh(){pt=4,Bs||(Me&4194048)!==Me&&wn.current!==null||(fo=!0),(qs&134217727)===0&&(ta&134217727)===0||rt===null||Gs(rt,Me,Cn,!1)}function Qm(n,i,a){var l=Ge;Ge|=2;var f=t0(),d=n0();(rt!==n||Me!==i)&&(wh=null,po(n,i)),i=!1;var _=pt;e:do try{if($e!==0&&De!==null){var b=De,N=Rn;switch($e){case 8:Km(),_=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var q=$e;if($e=0,Rn=null,yo(n,b,N,q),a&&fo){_=0;break e}break;default:q=$e,$e=0,Rn=null,yo(n,b,N,q)}}Dw(),_=pt;break}catch(Q){Wv(n,Q)}while(!0);return i&&n.shellSuspendCounter++,Xi=Kr=null,Ge=l,Y.H=f,Y.A=d,De===null&&(rt=null,Me=0,Qc()),_}function Dw(){for(;De!==null;)i0(De)}function Vw(n,i){var a=Ge;Ge|=2;var l=t0(),f=n0();rt!==n||Me!==i?(wh=null,Ah=ln()+500,po(n,i)):fo=$n(n,i);e:do try{if($e!==0&&De!==null){i=De;var d=Rn;t:switch($e){case 1:$e=0,Rn=null,yo(n,i,d,1);break;case 2:case 9:if(d_(d)){$e=0,Rn=null,s0(i);break}i=function(){$e!==2&&$e!==9||rt!==n||($e=7),Di(n)},d.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:d_(d)?($e=0,Rn=null,s0(i)):($e=0,Rn=null,yo(n,i,d,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var b=De;if(_?F0(_):b.stateNode.complete){$e=0,Rn=null;var N=b.sibling;if(N!==null)De=N;else{var q=b.return;q!==null?(De=q,Ch(q)):De=null}break t}}$e=0,Rn=null,yo(n,i,d,5);break;case 6:$e=0,Rn=null,yo(n,i,d,6);break;case 8:Km(),pt=6;break e;default:throw Error(s(462))}}Ow();break}catch(Q){Wv(n,Q)}while(!0);return Xi=Kr=null,Y.H=l,Y.A=f,Ge=a,De!==null?0:(rt=null,Me=0,Qc(),pt)}function Ow(){for(;De!==null&&!Sd();)i0(De)}function i0(n){var i=Rv(n.alternate,n,rs);n.memoizedProps=n.pendingProps,i===null?Ch(n):De=i}function s0(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Tv(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=Tv(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:lm(i);default:xv(a,i),i=De=n_(i,rs),i=Rv(a,i,rs)}n.memoizedProps=n.pendingProps,i===null?Ch(n):De=i}function yo(n,i,a,l){Xi=Kr=null,lm(i),ro=null,Hl=0;var f=i.return;try{if(Tw(n,f,i,a,Me)){pt=1,gh(n,jn(a,n.current)),De=null;return}}catch(d){if(f!==null)throw De=f,d;pt=1,gh(n,jn(a,n.current)),De=null;return}i.flags&32768?(Le||l===1?n=!0:fo||(Me&536870912)!==0?n=!1:(Bs=n=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),r0(i,n)):Ch(i)}function Ch(n){var i=n;do{if((i.flags&32768)!==0){r0(i,Bs);return}n=i.return;var a=Aw(i.alternate,i,rs);if(a!==null){De=a;return}if(i=i.sibling,i!==null){De=i;return}De=i=n}while(i!==null);pt===0&&(pt=5)}function r0(n,i){do{var a=ww(n.alternate,n);if(a!==null){a.flags&=32767,De=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){De=n;return}De=n=a}while(n!==null);pt=6,De=null}function a0(n,i,a,l,f,d,_,b,N){n.cancelPendingCommit=null;do xh();while(zt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Pd,Id(n,a,d,_,b,N),n===rt&&(De=rt=null,Me=0),go=i,Hs=n,as=a,Fm=d,Hm=f,Xv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Lw(Ts,function(){return h0(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=ie.p,ie.p=2,_=Ge,Ge|=4;try{Iw(n,i,a)}finally{Ge=_,ie.p=f,Y.T=l}}zt=1,o0(),l0(),u0()}}function o0(){if(zt===1){zt=0;var n=Hs,i=go,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=ie.p;ie.p=2;var f=Ge;Ge|=4;try{Bv(i,n);var d=rg,_=Qy(n.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Ky(b.ownerDocument.documentElement,b)){if(N!==null&&Nd(b)){var q=N.start,Q=N.end;if(Q===void 0&&(Q=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(Q,b.value.length);else{var Z=b.ownerDocument||document,F=Z&&Z.defaultView||window;if(F.getSelection){var G=F.getSelection(),ce=b.textContent.length,ve=Math.min(N.start,ce),it=N.end===void 0?ve:Math.min(N.end,ce);!G.extend&&ve>it&&(_=it,it=ve,ve=_);var k=Gy(b,ve),V=Gy(b,it);if(k&&V&&(G.rangeCount!==1||G.anchorNode!==k.node||G.anchorOffset!==k.offset||G.focusNode!==V.node||G.focusOffset!==V.offset)){var B=Z.createRange();B.setStart(k.node,k.offset),G.removeAllRanges(),ve>it?(G.addRange(B),G.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),G.addRange(B))}}}}for(Z=[],G=b;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var $=Z[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Bh=!!sg,rg=sg=null}finally{Ge=f,ie.p=l,Y.T=a}}n.current=i,zt=2}}function l0(){if(zt===2){zt=0;var n=Hs,i=go,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=ie.p;ie.p=2;var f=Ge;Ge|=4;try{kv(n,i.alternate,i)}finally{Ge=f,ie.p=l,Y.T=a}}zt=3}}function u0(){if(zt===4||zt===3){zt=0,vc();var n=Hs,i=go,a=as,l=Xv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?zt=5:(zt=0,go=Hs=null,c0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Fs=null),Fi(a),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,f=ie.p,ie.p=2,Y.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{Y.T=i,ie.p=f}}(as&3)!==0&&xh(),Di(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Gm?ou++:(ou=0,Gm=n):ou=0,lu(0)}}function c0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ql(i)))}function xh(){return o0(),l0(),u0(),h0()}function h0(){if(zt!==5)return!1;var n=Hs,i=Fm;Fm=0;var a=Fi(as),l=Y.T,f=ie.p;try{ie.p=32>a?32:a,Y.T=null,a=Hm,Hm=null;var d=Hs,_=as;if(zt=0,go=Hs=null,as=0,(Ge&6)!==0)throw Error(s(331));var b=Ge;if(Ge|=4,Kv(d.current),Fv(d,d.current,_,a),Ge=b,lu(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Xn,d)}catch{}return!0}finally{ie.p=f,Y.T=l,c0(n,i)}}function f0(n,i,a){i=jn(a,i),i=Sm(n.stateNode,i,2),n=Ls(n,i,2),n!==null&&(xr(n,2),Di(n))}function Je(n,i,a){if(n.tag===3)f0(n,n,a);else for(;i!==null;){if(i.tag===3){f0(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fs===null||!Fs.has(l))){n=jn(a,n),a=dv(2),l=Ls(i,a,2),l!==null&&(mv(a,l,i,n),xr(l,2),Di(l));break}}i=i.return}}function Ym(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new xw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(jm=!0,f.add(a),n=Mw.bind(null,n,i,a),i.then(n,n))}function Mw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,rt===n&&(Me&a)===a&&(pt===4||pt===3&&(Me&62914560)===Me&&300>ln()-Sh?(Ge&2)===0&&po(n,0):Bm|=a,mo===Me&&(mo=0)),Di(n)}function d0(n,i){i===0&&(i=wc()),n=Fr(n,i),n!==null&&(xr(n,i),Di(n))}function Pw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),d0(n,a)}function kw(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),d0(n,a)}function Lw(n,i){return Ut(n,i)}var Nh=null,_o=null,Xm=!1,Dh=!1,$m=!1,Ks=0;function Di(n){n!==_o&&n.next===null&&(_o===null?Nh=_o=n:_o=_o.next=n),Dh=!0,Xm||(Xm=!0,zw())}function lu(n,i){if(!$m&&Dh){$m=!0;do for(var a=!1,l=Nh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-_t(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,y0(l,d))}else d=Me,d=di(l,l===rt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,y0(l,d));l=l.next}while(a);$m=!1}}function Uw(){m0()}function m0(){Dh=Xm=!1;var n=0;Ks!==0&&Xw()&&(n=Ks);for(var i=ln(),a=null,l=Nh;l!==null;){var f=l.next,d=g0(l,i);d===0?(l.next=null,a===null?Nh=f:a.next=f,f===null&&(_o=a)):(a=l,(n!==0||(d&3)!==0)&&(Dh=!0)),l=f}zt!==0&&zt!==5||lu(n),Ks!==0&&(Ks=0)}function g0(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-_t(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=wd(b,i)):N<=i&&(n.expiredLanes|=b),d&=~b}if(i=rt,a=Me,a=di(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&($e===2||$e===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Es(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||$n(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Es(l),Fi(a)){case 2:case 8:a=_l;break;case 32:a=Ts;break;case 268435456:a=Ec;break;default:a=Ts}return l=p0.bind(null,n),a=Ut(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Es(l),n.callbackPriority=2,n.callbackNode=null,2}function p0(n,i){if(zt!==0&&zt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(xh()&&n.callbackNode!==a)return null;var l=Me;return l=di(n,n===rt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Jv(n,l,i),g0(n,ln()),n.callbackNode!=null&&n.callbackNode===a?p0.bind(null,n):null)}function y0(n,i){if(xh())return null;Jv(n,i,!0)}function zw(){Jw(function(){(Ge&6)!==0?Ut(yl,Uw):m0()})}function Jm(){if(Ks===0){var n=no;n===0&&(n=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Ks=n}return Ks}function _0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ba(""+n)}function v0(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function jw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=_0((f[qt]||null).action),_=l.submitter;_&&(i=(i=_[qt]||null)?_0(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Ai("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ks!==0){var N=_?v0(f,_):new FormData(f);ym(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?v0(f,_):new FormData(f),ym(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var Zm=0;Zm<Md.length;Zm++){var Wm=Md[Zm],Bw=Wm.toLowerCase(),qw=Wm[0].toUpperCase()+Wm.slice(1);si(Bw,"on"+qw)}si($y,"onAnimationEnd"),si(Jy,"onAnimationIteration"),si(Zy,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(sw,"onTransitionRun"),si(rw,"onTransitionStart"),si(aw,"onTransitionCancel"),si(Wy,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uu));function E0(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,q=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=q;try{d(f)}catch(Q){Kc(Q)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,q=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=q;try{d(f)}catch(Q){Kc(Q)}f.currentTarget=null,d=N}}}}function Ve(n,i){var a=i[ka];a===void 0&&(a=i[ka]=new Set);var l=n+"__bubble";a.has(l)||(T0(i,n,2,!1),a.add(l))}function eg(n,i,a){var l=0;i&&(l|=4),T0(a,n,l,i)}var Vh="_reactListening"+Math.random().toString(36).slice(2);function tg(n){if(!n[Vh]){n[Vh]=!0,Tl.forEach(function(a){a!=="selectionchange"&&(Fw.has(a)||eg(a,!1,n),eg(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Vh]||(i[Vh]=!0,eg("selectionchange",!1,i))}}function T0(n,i,a,l){switch($0(i)){case 2:var f=yI;break;case 8:f=_I;break;default:f=pg}a=f.bind(null,i,a,n),f=void 0,!Pr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function ng(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=yi(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}Rs(function(){var q=d,Q=kn(a),Z=[];e:{var F=e_.get(n);if(F!==void 0){var G=Ai,ce=n;switch(n){case"keypress":if(Lr(a)===0)break e;case"keydown":case"keyup":G=Fc;break;case"focusin":ce="focus",G=zr;break;case"focusout":ce="blur",G=zr;break;case"beforeblur":case"afterblur":G=zr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=y;break;case $y:case Jy:case Zy:G=kc;break;case Wy:G=S;break;case"scroll":case"scrollend":G=Ol;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Ki;break;case"toggle":case"beforetoggle":G=Ie}var ve=(i&4)!==0,it=!ve&&(n==="scroll"||n==="scrollend"),k=ve?F!==null?F+"Capture":null:F;ve=[];for(var V=q,B;V!==null;){var $=V;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||k===null||($=ei(V,k),$!=null&&ve.push(cu(V,$,B))),it)break;V=V.return}0<ve.length&&(F=new G(F,ce,null,a,Q),Z.push({event:F,listeners:ve}))}}if((i&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",F&&a!==Nl&&(ce=a.relatedTarget||a.fromElement)&&(yi(ce)||ce[gi]))break e;if((G||F)&&(F=Q.window===Q?Q:(F=Q.ownerDocument)?F.defaultView||F.parentWindow:window,G?(ce=a.relatedTarget||a.toElement,G=q,ce=ce?yi(ce):null,ce!==null&&(it=u(ce),ve=ce.tag,ce!==it||ve!==5&&ve!==27&&ve!==6)&&(ce=null)):(G=null,ce=q),G!==ce)){if(ve=Ml,$="onMouseLeave",k="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=Ki,$="onPointerLeave",k="onPointerEnter",V="pointer"),it=G==null?F:Tn(G),B=ce==null?F:Tn(ce),F=new ve($,V+"leave",G,a,Q),F.target=it,F.relatedTarget=B,$=null,yi(Q)===q&&(ve=new ve(k,V+"enter",ce,a,Q),ve.target=B,ve.relatedTarget=it,$=ve),it=$,G&&ce)t:{for(ve=Hw,k=G,V=ce,B=0,$=k;$;$=ve($))B++;$=0;for(var pe=V;pe;pe=ve(pe))$++;for(;0<B-$;)k=ve(k),B--;for(;0<$-B;)V=ve(V),$--;for(;B--;){if(k===V||V!==null&&k===V.alternate){ve=k;break t}k=ve(k),V=ve(V)}ve=null}else ve=null;G!==null&&b0(Z,F,G,ve,!1),ce!==null&&it!==null&&b0(Z,it,ce,ve,!0)}}e:{if(F=q?Tn(q):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var qe=zy;else if(Ly(F))if(jy)qe=tw;else{qe=W1;var me=Z1}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&ja(q.elementType)&&(qe=zy):qe=ew;if(qe&&(qe=qe(n,q))){Uy(Z,qe,a,Q);break e}me&&me(n,F,q),n==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&Rl(F,"number",F.value)}switch(me=q?Tn(q):window,n){case"focusin":(Ly(me)||me.contentEditable==="true")&&(Ya=me,Dd=q,zl=null);break;case"focusout":zl=Dd=Ya=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Yy(Z,a,Q);break;case"selectionchange":if(iw)break;case"keydown":case"keyup":Yy(Z,a,Q)}var xe;if(He)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Qa?jr(n,a)&&(Pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ri&&a.locale!=="ko"&&(Qa||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Qa&&(xe=Vl()):(Si=Q,Dl="value"in Si?Si.value:Si.textContent,Qa=!0)),me=Oh(q,Pe),0<me.length&&(Pe=new Ii(Pe,n,null,a,Q),Z.push({event:Pe,listeners:me}),xe?Pe.data=xe:(xe=Ka(a),xe!==null&&(Pe.data=xe)))),(xe=Un?Y1(n,a):X1(n,a))&&(Pe=Oh(q,"onBeforeInput"),0<Pe.length&&(me=new Ii("onBeforeInput","beforeinput",null,a,Q),Z.push({event:me,listeners:Pe}),me.data=xe)),jw(Z,n,q,a,Q)}E0(Z,i)})}function cu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Oh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ei(n,a),f!=null&&l.unshift(cu(n,f,d)),f=ei(n,i),f!=null&&l.push(cu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Hw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function b0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,q=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||q===null||(N=q,f?(q=ei(a,d),q!=null&&_.unshift(cu(a,q,N))):f||(q=ei(a,d),q!=null&&_.push(cu(a,q,N)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Gw=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function S0(n){return(typeof n=="string"?n:""+n).replace(Gw,`
`).replace(Kw,"")}function A0(n,i){return i=S0(i),S0(n)===i}function nt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":bn(n,"class",l);break;case"tabIndex":bn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(n,a,l);break;case"style":xl(n,l,d);break;case"data":if(i!=="object"){bn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ba(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&nt(n,i,"name",f.name,f,null),nt(n,i,"formEncType",f.formEncType,f,null),nt(n,i,"formMethod",f.formMethod,f,null),nt(n,i,"formTarget",f.formTarget,f,null)):(nt(n,i,"encType",f.encType,f,null),nt(n,i,"method",f.method,f,null),nt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ba(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ba(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),Ua(n,"popover",l);break;case"xlinkActuate":xt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ua(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oc.get(a)||a,Ua(n,a,l))}}function ig(n,i,a,l,f,d){switch(a){case"style":xl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ua(n,a,l)}}}function Jt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,d,_,a,null)}}f&&nt(n,i,"srcSet",a.srcSet,a,null),l&&nt(n,i,"src",a.src,a,null);return;case"input":Ve("invalid",n);var b=d=_=f=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":_=Q;break;case"checked":N=Q;break;case"defaultChecked":q=Q;break;case"value":d=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:nt(n,i,l,Q,a,null)}}Nc(n,d,b,N,q,_,f,!1);return;case"select":Ve("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:nt(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Ss(n,!!l,i,!1):a!=null&&Ss(n,!!l,a,!0);return;case"textarea":Ve("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:nt(n,i,_,b,a,null)}As(n,l,f,d);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":nt(n,i,N,l,a,null));return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(l=0;l<uu.length;l++)Ve(uu[l],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,q,l,a,null)}return;default:if(ja(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&ig(n,i,Q,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&nt(n,i,b,l,a,null))}function Qw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,q=null,Q=null;for(G in a){var Z=a[G];if(a.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=Z;default:l.hasOwnProperty(G)||nt(n,i,G,null,l,Z)}}for(var F in l){var G=l[F];if(Z=a[F],l.hasOwnProperty(F)&&(G!=null||Z!=null))switch(F){case"type":d=G;break;case"name":f=G;break;case"checked":q=G;break;case"defaultChecked":Q=G;break;case"value":_=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==Z&&nt(n,i,F,G,l,Z)}}za(n,_,b,N,q,Q,d,f);return;case"select":G=_=b=F=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(d)||nt(n,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":F=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&nt(n,i,f,d,l,N)}i=b,a=_,l=G,F!=null?Ss(n,!!a,F,!1):!!l!=!!a&&(i!=null?Ss(n,!!a,i,!0):Ss(n,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:nt(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":F=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&nt(n,i,_,f,l,d)}Dc(n,F,G);return;case"option":for(var ce in a)F=a[ce],a.hasOwnProperty(ce)&&F!=null&&!l.hasOwnProperty(ce)&&(ce==="selected"?n.selected=!1:nt(n,i,ce,null,l,F));for(N in l)F=l[N],G=a[N],l.hasOwnProperty(N)&&F!==G&&(F!=null||G!=null)&&(N==="selected"?n.selected=F&&typeof F!="function"&&typeof F!="symbol":nt(n,i,N,F,l,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)F=a[ve],a.hasOwnProperty(ve)&&F!=null&&!l.hasOwnProperty(ve)&&nt(n,i,ve,null,l,F);for(q in l)if(F=l[q],G=a[q],l.hasOwnProperty(q)&&F!==G&&(F!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:nt(n,i,q,F,l,G)}return;default:if(ja(i)){for(var it in a)F=a[it],a.hasOwnProperty(it)&&F!==void 0&&!l.hasOwnProperty(it)&&ig(n,i,it,void 0,l,F);for(Q in l)F=l[Q],G=a[Q],!l.hasOwnProperty(Q)||F===G||F===void 0&&G===void 0||ig(n,i,Q,F,l,G);return}}for(var k in a)F=a[k],a.hasOwnProperty(k)&&F!=null&&!l.hasOwnProperty(k)&&nt(n,i,k,null,l,F);for(Z in l)F=l[Z],G=a[Z],!l.hasOwnProperty(Z)||F===G||F==null&&G==null||nt(n,i,Z,F,l,G)}function w0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Yw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&w0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],q=N.startTime;if(q>b)break;var Q=N.transferSize,Z=N.initiatorType;Q&&w0(Z)&&(N=N.responseEnd,_+=Q*(N<b?1:(b-q)/(N-q)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var sg=null,rg=null;function Mh(n){return n.nodeType===9?n:n.ownerDocument}function I0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ag(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var og=null;function Xw(){var n=window.event;return n&&n.type==="popstate"?n===og?!1:(og=n,!0):(og=null,!1)}var C0=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,x0=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof x0<"u"?function(n){return x0.resolve(null).then(n).catch(Zw)}:C0;function Zw(n){setTimeout(function(){throw n})}function Qs(n){return n==="head"}function N0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),bo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")hu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,hu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[pi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&hu(n.ownerDocument.body);a=f}while(a);bo(i)}function D0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function lg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lg(a),La(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Ww(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[pi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Gn(n.nextSibling),n===null)break}return null}function eI(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Gn(n.nextSibling),n===null))return null;return n}function V0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Gn(n.nextSibling),n===null))return null;return n}function ug(n){return n.data==="$?"||n.data==="$~"}function cg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function tI(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Gn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var hg=null;function O0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Gn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function M0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function P0(n,i,a){switch(i=Mh(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function hu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);La(n)}var Kn=new Map,k0=new Set;function Ph(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var os=ie.d;ie.d={f:nI,r:iI,D:sI,C:rI,L:aI,m:oI,X:uI,S:lI,M:cI};function nI(){var n=os.f(),i=Ih();return n||i}function iI(n){var i=Pn(n);i!==null&&i.tag===5&&i.type==="form"?W_(i):os.r(n)}var vo=typeof document>"u"?null:document;function L0(n,i,a){var l=vo;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),k0.has(f)||(k0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Jt(i,"link",n),Ct(i),l.head.appendChild(i)))}}function sI(n){os.D(n),L0("dns-prefetch",n,null)}function rI(n,i){os.C(n,i),L0("preconnect",n,i)}function aI(n,i,a){os.L(n,i,a);var l=vo;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=Eo(n);break;case"script":d=To(n)}Kn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Kn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(fu(d))||i==="script"&&l.querySelector(du(d))||(i=l.createElement("link"),Jt(i,"link",n),Ct(i),l.head.appendChild(i)))}}function oI(n,i){os.m(n,i);var a=vo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=To(n)}if(!Kn.has(d)&&(n=T({rel:"modulepreload",href:n},i),Kn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(du(d)))return}l=a.createElement("link"),Jt(l,"link",n),Ct(l),a.head.appendChild(l)}}}function lI(n,i,a){os.S(n,i,a);var l=vo;if(l&&n){var f=_i(l).hoistableStyles,d=Eo(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(fu(d)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Kn.get(d))&&fg(n,a);var N=_=l.createElement("link");Ct(N),Jt(N,"link",n),N._p=new Promise(function(q,Q){N.onload=q,N.onerror=Q}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,kh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function uI(n,i){os.X(n,i);var a=vo;if(a&&n){var l=_i(a).hoistableScripts,f=To(n),d=l.get(f);d||(d=a.querySelector(du(f)),d||(n=T({src:n,async:!0},i),(i=Kn.get(f))&&dg(n,i),d=a.createElement("script"),Ct(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function cI(n,i){os.M(n,i);var a=vo;if(a&&n){var l=_i(a).hoistableScripts,f=To(n),d=l.get(f);d||(d=a.querySelector(du(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=Kn.get(f))&&dg(n,i),d=a.createElement("script"),Ct(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function U0(n,i,a,l){var f=(f=Ce.current)?Ph(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Eo(a.href),a=_i(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var d=_i(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(fu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Kn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(n,a),d||hI(f,n,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(a),a=_i(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Eo(n){return'href="'+fn(n)+'"'}function fu(n){return'link[rel="stylesheet"]['+n+"]"}function z0(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function hI(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Jt(i,"link",a),Ct(i),n.head.appendChild(i))}function To(n){return'[src="'+fn(n)+'"]'}function du(n){return"script[async]"+n}function j0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,Ct(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ct(l),Jt(l,"style",f),kh(l,a.precedence,n),i.instance=l;case"stylesheet":f=Eo(a.href);var d=n.querySelector(fu(f));if(d)return i.state.loading|=4,i.instance=d,Ct(d),d;l=z0(a),(f=Kn.get(f))&&fg(l,f),d=(n.ownerDocument||n).createElement("link"),Ct(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Jt(d,"link",l),i.state.loading|=4,kh(d,a.precedence,n),i.instance=d;case"script":return d=To(a.src),(f=n.querySelector(du(d)))?(i.instance=f,Ct(f),f):(l=a,(f=Kn.get(d))&&(l=T({},a),dg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ct(f),Jt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,kh(l,a.precedence,n));return i.instance}function kh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function fg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Lh=null;function B0(n,i,a){if(Lh===null){var l=new Map,f=Lh=new Map;f.set(a,l)}else f=Lh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[pi]||d[Rt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function q0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function fI(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function F0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function dI(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Eo(l.href),d=i.querySelector(fu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Uh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Ct(d);return}d=i.ownerDocument||i,l=z0(l),(f=Kn.get(f))&&fg(l,f),d=d.createElement("link"),Ct(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Jt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Uh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var mg=0;function mI(n,i){return n.stylesheets&&n.count===0&&jh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&jh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&mg===0&&(mg=62500*Yw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&jh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>mg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var zh=null;function jh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,zh=new Map,i.forEach(gI,n),zh=null,Uh.call(n))}function gI(n,i){if(!(i.state.loading&4)){var a=zh.get(n);if(a)var l=a.get(null);else{a=new Map,zh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Uh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var mu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function pI(n,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function H0(n,i,a,l,f,d,_,b,N,q,Q,Z){return n=new pI(n,i,a,_,N,q,Q,Z,b),i=1,d===!0&&(i|=24),d=An(3,null,null,i),n.current=d,d.stateNode=n,i=Qd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Jd(d),n}function G0(n){return n?(n=Ja,n):Ja}function K0(n,i,a,l,f,d){f=G0(f),l.context===null?l.context=f:l.pendingContext=f,l=ks(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ls(n,l,i),a!==null&&(_n(a,n,i),Kl(a,n,i))}function Q0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function gg(n,i){Q0(n,i),(n=n.alternate)&&Q0(n,i)}function Y0(n){if(n.tag===13||n.tag===31){var i=Fr(n,67108864);i!==null&&_n(i,n,67108864),gg(n,67108864)}}function X0(n){if(n.tag===13||n.tag===31){var i=xn();i=Dr(i);var a=Fr(n,i);a!==null&&_n(a,n,i),gg(n,i)}}var Bh=!0;function yI(n,i,a,l){var f=Y.T;Y.T=null;var d=ie.p;try{ie.p=2,pg(n,i,a,l)}finally{ie.p=d,Y.T=f}}function _I(n,i,a,l){var f=Y.T;Y.T=null;var d=ie.p;try{ie.p=8,pg(n,i,a,l)}finally{ie.p=d,Y.T=f}}function pg(n,i,a,l){if(Bh){var f=yg(l);if(f===null)ng(n,i,l,qh,a),J0(n,l);else if(EI(f,n,i,a,l))l.stopPropagation();else if(J0(n,l),i&4&&-1<vI.indexOf(n)){for(;f!==null;){var d=Pn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=fi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-_t(_);b.entanglements[1]|=N,_&=~N}Di(d),(Ge&6)===0&&(Ah=ln()+500,lu(0))}}break;case 31:case 13:b=Fr(d,2),b!==null&&_n(b,d,2),Ih(),gg(d,2)}if(d=yg(l),d===null&&ng(n,i,l,qh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else ng(n,i,l,null,a)}}function yg(n){return n=kn(n),_g(n)}var qh=null;function _g(n){if(qh=null,n=yi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return qh=n,null}function $0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rr()){case yl:return 2;case _l:return 8;case Ts:case Ad:return 32;case Ec:return 268435456;default:return 32}default:return 32}}var vg=!1,Ys=null,Xs=null,$s=null,gu=new Map,pu=new Map,Js=[],vI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J0(n,i){switch(n){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":gu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(i.pointerId)}}function yu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&Y0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function EI(n,i,a,l,f){switch(i){case"focusin":return Ys=yu(Ys,n,i,a,l,f),!0;case"dragenter":return Xs=yu(Xs,n,i,a,l,f),!0;case"mouseover":return $s=yu($s,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return gu.set(d,yu(gu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,pu.set(d,yu(pu.get(d)||null,n,i,a,l,f)),!0}return!1}function Z0(n){var i=yi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){X0(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){X0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=yg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Nl=l,a.target.dispatchEvent(l),Nl=null}else return i=Pn(a),i!==null&&Y0(i),n.blockedOn=a,!1;i.shift()}return!0}function W0(n,i,a){Fh(n)&&a.delete(i)}function TI(){vg=!1,Ys!==null&&Fh(Ys)&&(Ys=null),Xs!==null&&Fh(Xs)&&(Xs=null),$s!==null&&Fh($s)&&($s=null),gu.forEach(W0),pu.forEach(W0)}function Hh(n,i){n.blockedOn===i&&(n.blockedOn=null,vg||(vg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,TI)))}var Gh=null;function eE(n){Gh!==n&&(Gh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Gh===n&&(Gh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(_g(l||a)===null)continue;break}var d=Pn(a);d!==null&&(n.splice(i,3),i-=3,ym(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function bo(n){function i(N){return Hh(N,n)}Ys!==null&&Hh(Ys,n),Xs!==null&&Hh(Xs,n),$s!==null&&Hh($s,n),gu.forEach(i),pu.forEach(i);for(var a=0;a<Js.length;a++){var l=Js[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Js.length&&(a=Js[0],a.blockedOn===null);)Z0(a),a.blockedOn===null&&Js.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qt]||null;if(typeof d=="function")_||eE(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qt]||null)b=_.formAction;else if(_g(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),eE(a)}}}function tE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Eg(n){this._internalRoot=n}Kh.prototype.render=Eg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=xn();K0(a,l,n,i,null,null)},Kh.prototype.unmount=Eg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;K0(n.current,2,null,n,null,null),Ih(),i[gi]=null}};function Kh(n){this._internalRoot=n}Kh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ic();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Js.length&&i!==0&&i<Js[a].priority;a++);Js.splice(a,0,n),a===0&&Z0(n)}};var nE=e.version;if(nE!=="19.2.3")throw Error(s(527,nE,"19.2.3"));ie.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var bI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{Xn=Qh.inject(bI),Kt=Qh}catch{}}return vu.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,l="",f=uv,d=cv,_=hv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=H0(n,1,!1,null,null,a,l,null,f,d,_,tE),n[gi]=i.current,tg(n),new Eg(i)},vu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=uv,_=cv,b=hv,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=H0(n,1,!0,i,a??null,l,f,N,d,_,b,tE),i.context=G0(null),a=i.current,l=xn(),l=Dr(l),f=ks(l),f.callback=null,Ls(a,f,l),a=l,i.current.lanes=a,xr(i,a),Di(i),n[gi]=i.current,tg(n),new Kh(i)},vu.version="19.2.3",vu}var fE;function VI(){if(fE)return Sg.exports;fE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sg.exports=DI(),Sg.exports}var OI=VI();const MI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PI=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),dE=r=>{const e=PI(r);return e.charAt(0).toUpperCase()+e.slice(1)},mb=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),kI=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var LI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UI=Oe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:c,...m},g)=>Oe.createElement("svg",{ref:g,...LI,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:mb("lucide",o),...!u&&!kI(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>Oe.createElement(p,E)),...Array.isArray(u)?u:[u]]));const At=(r,e)=>{const t=Oe.forwardRef(({className:s,...o},u)=>Oe.createElement(UI,{ref:u,iconNode:e,className:mb(`lucide-${MI(dE(r))}`,`lucide-${r}`,s),...o}));return t.displayName=dE(r),t};const zI=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Eu=At("arrow-up-down",zI);const jI=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],BI=At("award",jI);const qI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],FI=At("calendar",qI);const HI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],GI=At("chevron-left",HI);const KI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QI=At("circle-check",KI);const YI=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],XI=At("coffee",YI);const $I=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],JI=At("funnel",$I);const ZI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],WI=At("layout-dashboard",ZI);const eR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tR=At("lock",eR);const nR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iR=At("log-out",nR);const sR=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],rR=At("mail",sR);const aR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],oR=At("package",aR);const lR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],uR=At("pencil",lR);const cR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gb=At("plus",cR);const hR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fR=At("search",hR);const dR=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],mE=At("settings-2",dR);const mR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],pb=At("smile",mR);const gR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pR=At("sparkles",gR);const yR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yb=At("trash-2",yR);const _R=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vR=At("user",_R);const ER=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rp=At("x",ER),TR=()=>{};var gE={};const _b=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},bR=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],c=r[t++],m=r[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],c=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],c=o+1<r.length,m=c?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let I=(m&15)<<2|p>>6,L=p&63;g||(L=64,c||(I=64)),s.push(t[E],t[T],t[I],t[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(_b(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):bR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const p=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new SR;const I=u<<2|m>>4;if(s.push(I),p!==64){const L=m<<4&240|p>>2;if(s.push(L),T!==64){const K=p<<6&192|T;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class SR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AR=function(r){const e=_b(r);return vb.encodeByteArray(e,!0)},Eb=function(r){return AR(r).replace(/\./g,"")},Tb=function(r){try{return vb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wR=()=>bb().__FIREBASE_DEFAULTS__,IR=()=>{if(typeof process>"u"||typeof gE>"u")return;const r=gE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},RR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Tb(r[1]);return e&&JSON.parse(e)},Qf=()=>{try{return TR()||wR()||IR()||RR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},CR=r=>Qf()?.emulatorHosts?.[r],Sb=()=>Qf()?.config,Ab=r=>Qf()?.[`_${r}`];class xR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function sl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wb(r){return(await fetch(r,{credentials:"include"})).ok}const Ou={};function NR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ou))Ou[e]?r.emulator.push(e):r.prod.push(e);return r}function DR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let pE=!1;function VR(r,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||Ou[r]===e||Ou[r]||pE)return;Ou[r]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=NR().prod.length>0;function c(){const I=document.getElementById(s);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,L){I.setAttribute("width","24"),I.setAttribute("id",L),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{pE=!0,c()},I}function E(I,L){I.setAttribute("id",L),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=DR(s),L=t("text"),K=document.getElementById(L)||document.createElement("span"),j=t("learnmore"),X=document.getElementById(j)||document.createElement("a"),fe=t("preprendIcon"),he=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ne=I.element;m(ne),E(X,j);const Ae=p();g(he,fe),ne.append(he,K,X,Ae),document.body.appendChild(ne)}u?(K.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function Ib(){const r=Qf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LR(){const r=jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Rb(){return!Ib()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cb(){return!Ib()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xb(){try{return typeof indexedDB=="object"}catch{return!1}}function UR(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const zR="FirebaseError";class ys extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=zR,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?jR(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new ys(o,m,s)}}function jR(r,e){return r.replace(BR,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const BR=/\{\$([^}]+)}/g;function qR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function fs(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],c=e[o];if(yE(u)&&yE(c)){if(!fs(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function yE(r){return r!==null&&typeof r=="object"}function ac(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Iu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ru(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function FR(r,e){const t=new HR(r,e);return t.subscribe.bind(t)}class HR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");GR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Rg),o.error===void 0&&(o.error=Rg),o.complete===void 0&&(o.complete=Rg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Rg(){}function Wt(r){return r&&r._delegate?r._delegate:r}class ga{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class KR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new xR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YR(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:QR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QR(r){return r===ia?void 0:r}function YR(r){return r.instantiationMode==="EAGER"}class XR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ke||(ke={}));const $R={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},JR=ke.INFO,ZR={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},WR=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=ZR[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=JR,this._logHandler=WR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$R[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const e2=(r,e)=>e.some(t=>r instanceof t);let _E,vE;function t2(){return _E||(_E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n2(){return vE||(vE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,Hg=new WeakMap,Db=new WeakMap,Cg=new WeakMap,xp=new WeakMap;function i2(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",c)},u=()=>{t(ur(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Nb.set(t,r)}).catch(()=>{}),xp.set(e,r),e}function s2(r){if(Hg.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",c),r.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",c),r.addEventListener("abort",c)});Hg.set(r,e)}let Gg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Hg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Db.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ur(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function r2(r){Gg=r(Gg)}function a2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(xg(this),e,...t);return Db.set(s,e.sort?e.sort():[e]),ur(s)}:n2().includes(r)?function(...e){return r.apply(xg(this),e),ur(Nb.get(this))}:function(...e){return ur(r.apply(xg(this),e))}}function o2(r){return typeof r=="function"?a2(r):(r instanceof IDBTransaction&&s2(r),e2(r,t2())?new Proxy(r,Gg):r)}function ur(r){if(r instanceof IDBRequest)return i2(r);if(Cg.has(r))return Cg.get(r);const e=o2(r);return e!==r&&(Cg.set(r,e),xp.set(e,r)),e}const xg=r=>xp.get(r);function l2(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(r,e),m=ur(c);return s&&c.addEventListener("upgradeneeded",g=>{s(ur(c.result),g.oldVersion,g.newVersion,ur(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const u2=["get","getKey","getAll","getAllKeys","count"],c2=["put","add","delete","clear"],Ng=new Map;function EE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=c2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||u2.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Ng.set(e,u),u}r2(r=>({...r,get:(e,t,s)=>EE(e,t)||r.get(e,t,s),has:(e,t)=>!!EE(e,t)||r.has(e,t)}));class h2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(f2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function f2(r){return r.getComponent()?.type==="VERSION"}const Kg="@firebase/app",TE="0.14.6";const ds=new Cp("@firebase/app"),d2="@firebase/app-compat",m2="@firebase/analytics-compat",g2="@firebase/analytics",p2="@firebase/app-check-compat",y2="@firebase/app-check",_2="@firebase/auth",v2="@firebase/auth-compat",E2="@firebase/database",T2="@firebase/data-connect",b2="@firebase/database-compat",S2="@firebase/functions",A2="@firebase/functions-compat",w2="@firebase/installations",I2="@firebase/installations-compat",R2="@firebase/messaging",C2="@firebase/messaging-compat",x2="@firebase/performance",N2="@firebase/performance-compat",D2="@firebase/remote-config",V2="@firebase/remote-config-compat",O2="@firebase/storage",M2="@firebase/storage-compat",P2="@firebase/firestore",k2="@firebase/ai",L2="@firebase/firestore-compat",U2="firebase",z2="12.6.0";const Qg="[DEFAULT]",j2={[Kg]:"fire-core",[d2]:"fire-core-compat",[g2]:"fire-analytics",[m2]:"fire-analytics-compat",[y2]:"fire-app-check",[p2]:"fire-app-check-compat",[_2]:"fire-auth",[v2]:"fire-auth-compat",[E2]:"fire-rtdb",[T2]:"fire-data-connect",[b2]:"fire-rtdb-compat",[S2]:"fire-fn",[A2]:"fire-fn-compat",[w2]:"fire-iid",[I2]:"fire-iid-compat",[R2]:"fire-fcm",[C2]:"fire-fcm-compat",[x2]:"fire-perf",[N2]:"fire-perf-compat",[D2]:"fire-rc",[V2]:"fire-rc-compat",[O2]:"fire-gcs",[M2]:"fire-gcs-compat",[P2]:"fire-fst",[L2]:"fire-fst-compat",[k2]:"fire-vertex","fire-js":"fire-js",[U2]:"fire-js-all"};const Ef=new Map,B2=new Map,Yg=new Map;function bE(r,e){try{r.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function jo(r){const e=r.name;if(Yg.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,r);for(const t of Ef.values())bE(t,r);for(const t of B2.values())bE(t,r);return!0}function Np(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Qn(r){return r==null?!1:r.settings!==void 0}const q2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new rc("app","Firebase",q2);class F2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const rl=z2;function Vb(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Qg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(t||(t=Sb()),!t)throw cr.create("no-options");const u=Ef.get(o);if(u){if(fs(t,u.options)&&fs(s,u.config))return u;throw cr.create("duplicate-app",{appName:o})}const c=new XR(o);for(const g of Yg.values())c.addComponent(g);const m=new F2(t,s,c);return Ef.set(o,m),m}function H2(r=Qg){const e=Ef.get(r);if(!e&&r===Qg&&Sb())return Vb();if(!e)throw cr.create("no-app",{appName:r});return e}function hr(r,e,t){let s=j2[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(c.join(" "));return}jo(new ga(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const G2="firebase-heartbeat-database",K2=1,Hu="firebase-heartbeat-store";let Dg=null;function Ob(){return Dg||(Dg=l2(G2,K2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Hu)}catch(t){console.warn(t)}}}}).catch(r=>{throw cr.create("idb-open",{originalErrorMessage:r.message})})),Dg}async function Q2(r){try{const t=(await Ob()).transaction(Hu),s=await t.objectStore(Hu).get(Mb(r));return await t.done,s}catch(e){if(e instanceof ys)ds.warn(e.message);else{const t=cr.create("idb-get",{originalErrorMessage:e?.message});ds.warn(t.message)}}}async function SE(r,e){try{const s=(await Ob()).transaction(Hu,"readwrite");await s.objectStore(Hu).put(e,Mb(r)),await s.done}catch(t){if(t instanceof ys)ds.warn(t.message);else{const s=cr.create("idb-set",{originalErrorMessage:t?.message});ds.warn(s.message)}}}function Mb(r){return`${r.name}!${r.options.appId}`}const Y2=1024,X2=30;class $2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Z2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=AE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>X2){const o=W2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ds.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=AE(),{heartbeatsToSend:t,unsentEntries:s}=J2(this._heartbeatsCache.heartbeats),o=Eb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ds.warn(e),""}}}function AE(){return new Date().toISOString().substring(0,10)}function J2(r,e=Y2){const t=[];let s=r.slice();for(const o of r){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),wE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),wE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Z2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xb()?UR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Q2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wE(r){return Eb(JSON.stringify({version:2,heartbeats:r})).length}function W2(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function eC(r){jo(new ga("platform-logger",e=>new h2(e),"PRIVATE")),jo(new ga("heartbeat",e=>new $2(e),"PRIVATE")),hr(Kg,TE,r),hr(Kg,TE,"esm2020"),hr("fire-js","")}eC("");var tC="firebase",nC="12.7.0";hr(tC,nC,"app");function Pb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iC=Pb,kb=new rc("auth","Firebase",Pb());const Tf=new Cp("@firebase/auth");function sC(r,...e){Tf.logLevel<=ke.WARN&&Tf.warn(`Auth (${rl}): ${r}`,...e)}function sf(r,...e){Tf.logLevel<=ke.ERROR&&Tf.error(`Auth (${rl}): ${r}`,...e)}function ui(r,...e){throw Dp(r,...e)}function ki(r,...e){return Dp(r,...e)}function Lb(r,e,t){const s={...iC(),[e]:t};return new rc("auth","Firebase",s).create(e,{appName:r.name})}function hs(r){return Lb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return kb.create(r,...e)}function Ee(r,e,...t){if(!r)throw Dp(e,...t)}function ls(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sf(e),new Error(e)}function ms(r,e){r||ls(e)}function Xg(){return typeof self<"u"&&self.location?.href||""}function rC(){return IE()==="http:"||IE()==="https:"}function IE(){return typeof self<"u"&&self.location?.protocol||null}function aC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rC()||PR()||"connection"in navigator)?navigator.onLine:!0}function oC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class oc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ms(t>e,"Short delay should be less than long delay!"),this.isMobile=OR()||kR()}get(){return aC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vp(r,e){ms(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ub{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cC=new oc(3e4,6e4);function vr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Er(r,e,t,s,o={}){return zb(r,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=ac({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return MR()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&sl(r.emulatorConfig.host)&&(p.credentials="include"),Ub.fetch()(await jb(r,r.config.apiHost,t,m),p)})}async function zb(r,e,t){r._canInitEmulator=!1;const s={...lC,...e};try{const o=new fC(r),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Yh(r,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Yh(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw Yh(r,"user-disabled",c);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Lb(r,E,p);ui(r,E)}}catch(o){if(o instanceof ys)throw o;ui(r,"network-request-failed",{message:String(o)})}}async function lc(r,e,t,s,o={}){const u=await Er(r,e,t,s,o);return"mfaPendingCredential"in u&&ui(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function jb(r,e,t,s){const o=`${e}${t}?${s}`,u=r,c=u.config.emulator?Vp(r.config,o):`${r.config.apiScheme}://${o}`;return uC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function hC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ki(this.auth,"network-request-failed")),cC.get())})}}function Yh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ki(r,e,s);return o.customData._tokenResponse=t,o}function RE(r){return r!==void 0&&r.enterprise!==void 0}class dC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mC(r,e){return Er(r,"GET","/v2/recaptchaConfig",vr(r,e))}async function gC(r,e){return Er(r,"POST","/v1/accounts:delete",e)}async function bf(r,e){return Er(r,"POST","/v1/accounts:lookup",e)}function Mu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pC(r,e=!1){const t=Wt(r),s=await t.getIdToken(e),o=Op(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:Mu(Vg(o.auth_time)),issuedAtTime:Mu(Vg(o.iat)),expirationTime:Mu(Vg(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Vg(r){return Number(r)*1e3}function Op(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Tb(t);return o?JSON.parse(o):(sf("Failed to decode base64 JWT payload"),null)}catch(o){return sf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function CE(r){const e=Op(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ys&&yC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function yC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class _C{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $g{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sf(r){const e=r.auth,t=await r.getIdToken(),s=await Gu(r,bf(e,{idToken:t}));Ee(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?Bb(o.providerUserInfo):[],c=EC(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!c?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $g(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function vC(r){const e=Wt(r);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EC(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Bb(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function TC(r,e){const t=await zb(r,{},async()=>{const s=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,c=await jb(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&sl(r.emulatorConfig.host)&&(g.credentials="include"),Ub.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bC(r,e){return Er(r,"POST","/v2/accounts:revokeToken",vr(r,e))}class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=CE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await TC(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,c=new Po;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return ls("not implemented")}}function Ws(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new _C(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $g(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pC(this,e)}reload(){return vC(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await Gu(this,gC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:I,isAnonymous:L,providerData:K,stsTokenManager:j}=t;Ee(T&&j,e,"internal-error");const X=Po.fromJSON(this.name,j);Ee(typeof T=="string",e,"internal-error"),Ws(s,e.name),Ws(o,e.name),Ee(typeof I=="boolean",e,"internal-error"),Ee(typeof L=="boolean",e,"internal-error"),Ws(u,e.name),Ws(c,e.name),Ws(m,e.name),Ws(g,e.name),Ws(p,e.name),Ws(E,e.name);const fe=new li({uid:T,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:L,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:X,createdAt:p,lastLoginAt:E});return K&&Array.isArray(K)&&(fe.providerData=K.map(he=>({...he}))),g&&(fe._redirectEventId=g),fe}static async _fromIdTokenResponse(e,t,s=!1){const o=new Po;o.updateFromServerResponse(t);const u=new li({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Sf(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Bb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Po;m.updateFromIdToken(s);const g=new li({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new $g(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const xE=new Map;function us(r){ms(r instanceof Function,"Expected a class definition");let e=xE.get(r);return e?(ms(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,xE.set(r,e),e)}class qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qb.type="NONE";const NE=qb;function rf(r,e,t){return`firebase:${r}:${e}:${t}`}class ko{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=rf(this.userKey,o.apiKey,u),this.fullPersistenceKey=rf("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bf(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ko(us(NE),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||us(NE);const c=rf(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const E=await p._get(c);if(E){let T;if(typeof E=="string"){const I=await bf(e,{idToken:E}).catch(()=>{});if(!I)break;T=await li._fromGetAccountInfoResponse(e,I,E)}else T=li._fromJSON(e,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ko(u,e,s):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new ko(u,e,s))}}function DE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yb(e))return"Blackberry";if(Xb(e))return"Webos";if(Hb(e))return"Safari";if((e.includes("chrome/")||Gb(e))&&!e.includes("edge/"))return"Chrome";if(Qb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function Fb(r=jt()){return/firefox\//i.test(r)}function Hb(r=jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gb(r=jt()){return/crios\//i.test(r)}function Kb(r=jt()){return/iemobile/i.test(r)}function Qb(r=jt()){return/android/i.test(r)}function Yb(r=jt()){return/blackberry/i.test(r)}function Xb(r=jt()){return/webos/i.test(r)}function Mp(r=jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function SC(r=jt()){return Mp(r)&&!!window.navigator?.standalone}function AC(){return LR()&&document.documentMode===10}function $b(r=jt()){return Mp(r)||Qb(r)||Xb(r)||Yb(r)||/windows phone/i.test(r)||Kb(r)}function Jb(r,e=[]){let t;switch(r){case"Browser":t=DE(jt());break;case"Worker":t=`${DE(jt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rl}/${s}`}class wC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function IC(r,e={}){return Er(r,"GET","/v2/passwordPolicy",vr(r,e))}const RC=6;class CC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class xC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new wC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=us(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bf(this,{idToken:e}),s=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(hs(this));const t=e?Wt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IC(this),t=new CC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&us(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ra(r){return Wt(r)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=FR(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NC(r){Yf=r}function Zb(r){return Yf.loadJS(r)}function DC(){return Yf.recaptchaEnterpriseScript}function VC(){return Yf.gapiScript}function OC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class MC{constructor(){this.enterprise=new PC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class PC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kC="recaptcha-enterprise",Wb="NO_RECAPTCHA";class LC{constructor(e){this.type=kC,this.auth=Ra(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{mC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new dC(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,c(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,c,m){const g=window.grecaptcha;RE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{c(p)}).catch(()=>{c(Wb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MC().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(m=>{if(!t&&RE(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=DC();g.length!==0&&(g+=m),Zb(g).then(()=>{o(m,u,c)}).catch(p=>{c(p)})}}).catch(m=>{c(m)})})}}async function OE(r,e,t,s=!1,o=!1){const u=new LC(r);let c;if(o)c=Wb;else try{c=await u.verify(t)}catch{c=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Jg(r,e,t,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await OE(r,e,t,t==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await OE(r,e,t,t==="getOobCode");return s(r,c)}else return Promise.reject(u)})}function UC(r,e){const t=Np(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(fs(u,e??{}))return o;ui(o,"already-initialized")}return t.initialize({options:e})}function zC(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(us);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function jC(r,e,t){const s=Ra(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=eS(e),{host:c,port:m}=BC(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(fs(p,s.config.emulator)&&fs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,sl(c)?(wb(`${u}//${c}${g}`),VR("Auth",!0)):qC()}function eS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function BC(r){const e=eS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:ME(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:ME(c)}}}function ME(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function qC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Pp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,t){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}async function FC(r,e){return Er(r,"POST","/v1/accounts:signUp",e)}async function HC(r,e){return lc(r,"POST","/v1/accounts:signInWithPassword",vr(r,e))}async function GC(r,e){return lc(r,"POST","/v1/accounts:signInWithEmailLink",vr(r,e))}async function KC(r,e){return lc(r,"POST","/v1/accounts:signInWithEmailLink",vr(r,e))}class Ku extends Pp{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ku(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ku(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,t,"signInWithPassword",HC);case"emailLink":return GC(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,s,"signUpPassword",FC);case"emailLink":return KC(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Lo(r,e){return lc(r,"POST","/v1/accounts:signInWithIdp",vr(r,e))}const QC="http://localhost";class pa extends Pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const c=new pa(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:QC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ac(t)}return e}}function YC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XC(r){const e=Iu(Ru(r)).link,t=e?Iu(Ru(e)).deep_link_id:null,s=Iu(Ru(r)).deep_link_id;return(s?Iu(Ru(s)).link:null)||s||t||e||r}class kp{constructor(e){const t=Iu(Ru(e)),s=t.apiKey??null,o=t.oobCode??null,u=YC(t.mode??null);Ee(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=XC(e);try{return new kp(t)}catch{return null}}}class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,t){return Ku._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=kp.parseLink(t);return Ee(s,"argument-error"),Ku._fromEmailAndCode(e,s.code,s.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class uc extends tS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ir extends uc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";class sr extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pa._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return sr.credential(t,s)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";class rr extends uc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";class ar extends uc{constructor(){super("twitter.com")}static credential(e,t){return pa._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ar.credential(t,s)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";async function $C(r,e){return lc(r,"POST","/v1/accounts:signUp",vr(r,e))}class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await li._fromIdTokenResponse(e,s,o),c=PE(s);return new ya({user:u,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=PE(s);return new ya({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function PE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Af extends ys{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Af(e,t,s,o)}}function nS(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(r,u,e,s):u})}async function JC(r,e,t=!1){const s=await Gu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ya._forOperation(r,"link",s)}async function ZC(r,e,t=!1){const{auth:s}=r;if(Qn(s.app))return Promise.reject(hs(s));const o="reauthenticate";try{const u=await Gu(r,nS(s,o,e,r),t);Ee(u.idToken,s,"internal-error");const c=Op(u.idToken);Ee(c,s,"internal-error");const{sub:m}=c;return Ee(r.uid===m,s,"user-mismatch"),ya._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ui(s,"user-mismatch"),u}}async function iS(r,e,t=!1){if(Qn(r.app))return Promise.reject(hs(r));const s="signIn",o=await nS(r,s,e),u=await ya._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(u.user),u}async function WC(r,e){return iS(Ra(r),e)}async function sS(r){const e=Ra(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ex(r,e,t){if(Qn(r.app))return Promise.reject(hs(r));const s=Ra(r),c=await Jg(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$C).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&sS(r),g}),m=await ya._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(m.user),m}function tx(r,e,t){return Qn(r.app)?Promise.reject(hs(r)):WC(Wt(r),al.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&sS(r),s})}function nx(r,e,t,s){return Wt(r).onIdTokenChanged(e,t,s)}function ix(r,e,t){return Wt(r).beforeAuthStateChanged(e,t)}function sx(r,e,t,s){return Wt(r).onAuthStateChanged(e,t,s)}function rx(r){return Wt(r).signOut()}const wf="__sak";class rS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ax=1e3,ox=10;class aS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$b(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);AC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ox):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aS.type="LOCAL";const lx=aS;class oS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oS.type="SESSION";const lS=oS;function ux(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Xf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await ux(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];function Lp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class cx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Lp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Li(){return window}function hx(r){Li().location.href=r}function uS(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function fx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dx(){return navigator?.serviceWorker?.controller||null}function mx(){return uS()?self:null}const cS="firebaseLocalStorageDb",gx=1,If="firebaseLocalStorage",hS="fbase_key";class cc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(r,e){return r.transaction([If],e?"readwrite":"readonly").objectStore(If)}function px(){const r=indexedDB.deleteDatabase(cS);return new cc(r).toPromise()}function Zg(){const r=indexedDB.open(cS,gx);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(If,{keyPath:hS})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(If)?e(s):(s.close(),await px(),e(await Zg()))})})}async function kE(r,e,t){const s=$f(r,!0).put({[hS]:e,value:t});return new cc(s).toPromise()}async function yx(r,e){const t=$f(r,!1).get(e),s=await new cc(t).toPromise();return s===void 0?null:s.value}function LE(r,e){const t=$f(r,!0).delete(e);return new cc(t).toPromise()}const _x=800,vx=3;class fS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>vx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(mx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fx(),!this.activeServiceWorker)return;this.sender=new cx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await kE(e,wf,"1"),await LE(e,wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>kE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>yx(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>LE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=$f(o,!1).getAll();return new cc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fS.type="LOCAL";const Ex=fS;new oc(3e4,6e4);function Tx(r,e){return e?us(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Up extends Pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bx(r){return iS(r.auth,new Up(r),r.bypassAuthState)}function Sx(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),ZC(t,new Up(r),r.bypassAuthState)}async function Ax(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),JC(t,new Up(r),r.bypassAuthState)}class dS{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bx;case"linkViaPopup":case"linkViaRedirect":return Ax;case"reauthViaPopup":case"reauthViaRedirect":return Sx;default:ui(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wx=new oc(2e3,1e4);class Mo extends dS{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Mo.currentPopupAction&&Mo.currentPopupAction.cancel(),Mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=Lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wx.get())};e()}}Mo.currentPopupAction=null;const Ix="pendingRedirect",af=new Map;class Rx extends dS{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=af.get(this.auth._key());if(!e){try{const s=await Cx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cx(r,e){const t=Dx(e),s=Nx(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function xx(r,e){af.set(r._key(),e)}function Nx(r){return us(r._redirectPersistence)}function Dx(r){return rf(Ix,r.config.apiKey,r.name)}async function Vx(r,e,t=!1){if(Qn(r.app))return Promise.reject(hs(r));const s=Ra(r),o=Tx(s,e),c=await new Rx(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const Ox=600*1e3;class Mx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Px(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ki(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ox&&this.cachedEventUids.clear(),this.cachedEventUids.has(UE(e))}saveEventToCache(e){this.cachedEventUids.add(UE(e)),this.lastProcessedEventTime=Date.now()}}function UE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function mS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function Px(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(r);default:return!1}}async function kx(r,e={}){return Er(r,"GET","/v1/projects",e)}const Lx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ux=/^https?/;async function zx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await kx(r);for(const t of e)try{if(jx(t))return}catch{}ui(r,"unauthorized-domain")}function jx(r){const e=Xg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!Ux.test(t))return!1;if(Lx.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const Bx=new oc(3e4,6e4);function zE(){const r=Li().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function qx(r){return new Promise((e,t)=>{function s(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),t(ki(r,"network-request-failed"))},timeout:Bx.get()})}if(Li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Li().gapi?.load)s();else{const o=OC("iframefcb");return Li()[o]=()=>{gapi.load?s():t(ki(r,"network-request-failed"))},Zb(`${VC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw of=null,e})}let of=null;function Fx(r){return of=of||qx(r),of}const Hx=new oc(5e3,15e3),Gx="__/auth/iframe",Kx="emulator/auth/iframe",Qx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xx(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Vp(e,Kx):`https://${r.config.authDomain}/${Gx}`,s={apiKey:e.apiKey,appName:r.name,v:rl},o=Yx.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${ac(s).slice(1)}`}async function $x(r){const e=await Fx(r),t=Li().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:Xx(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qx,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=ki(r,"network-request-failed"),m=Li().setTimeout(()=>{u(c)},Hx.get());function g(){Li().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(c)})}))}const Jx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zx=500,Wx=600,eN="_blank",tN="http://localhost";class jE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nN(r,e,t,s=Zx,o=Wx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...Jx,width:s.toString(),height:o.toString(),top:u,left:c},p=jt().toLowerCase();t&&(m=Gb(p)?eN:t),Fb(p)&&(e=e||tN,g.scrollbars="yes");const E=Object.entries(g).reduce((I,[L,K])=>`${I}${L}=${K},`,"");if(SC(p)&&m!=="_self")return iN(e||"",m),new jE(null);const T=window.open(e||"",m,E);Ee(T,r,"popup-blocked");try{T.focus()}catch{}return new jE(T)}function iN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const sN="__/auth/handler",rN="emulator/auth/handler",aN=encodeURIComponent("fac");async function BE(r,e,t,s,o,u){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:rl,eventId:o};if(e instanceof tS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",qR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(e instanceof uc){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${aN}=${encodeURIComponent(g)}`:"";return`${oN(r)}?${ac(m).slice(1)}${p}`}function oN({config:r}){return r.emulator?Vp(r,rN):`https://${r.authDomain}/${sN}`}const Og="webStorageSupport";class lN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lS,this._completeRedirectFn=Vx,this._overrideRedirectResult=xx}async _openPopup(e,t,s,o){ms(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await BE(e,t,s,Xg(),o);return nN(e,u,Lp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await BE(e,t,s,Xg(),o);return hx(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(ms(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await $x(e),s=new Mx(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Og,{type:Og},o=>{const u=o?.[0]?.[Og];u!==void 0&&t(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $b()||Hb()||Mp()}}const uN=lN;var qE="@firebase/auth",FE="1.12.0";class cN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fN(r){jo(new ga("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jb(r)},p=new xC(s,o,u,g);return zC(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),jo(new ga("auth-internal",e=>{const t=Ra(e.getProvider("auth").getImmediate());return(s=>new cN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(qE,FE,hN(r)),hr(qE,FE,"esm2020")}const dN=300,mN=Ab("authIdTokenMaxAge")||dN;let HE=null;const gN=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>mN)return;const o=t?.token;HE!==o&&(HE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pN(r=H2()){const e=Np(r,"auth");if(e.isInitialized())return e.getImmediate();const t=UC(r,{popupRedirectResolver:uN,persistence:[Ex,lx,lS]}),s=Ab("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=gN(u.toString());ix(t,c,()=>c(t.currentUser)),nx(t,m=>c(m))}}const o=CR("auth");return o&&jC(t,`http://${o}`),t}function yN(){return document.getElementsByTagName("head")?.[0]??document}NC({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=ki("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",yN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fN("Browser");var GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fr,gS;(function(){var r;function e(A,w){function R(){}R.prototype=w.prototype,A.F=w.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(O,D,P){for(var x=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)x[Qe-2]=arguments[Qe];return w.prototype[D].apply(O,x)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,w,R){R||(R=0);const O=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)O[D]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(D=0;D<16;++D)O[D]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=A.g[0],R=A.g[1],D=A.g[2];let P=A.g[3],x;x=w+(P^R&(D^P))+O[0]+3614090360&4294967295,w=R+(x<<7&4294967295|x>>>25),x=P+(D^w&(R^D))+O[1]+3905402710&4294967295,P=w+(x<<12&4294967295|x>>>20),x=D+(R^P&(w^R))+O[2]+606105819&4294967295,D=P+(x<<17&4294967295|x>>>15),x=R+(w^D&(P^w))+O[3]+3250441966&4294967295,R=D+(x<<22&4294967295|x>>>10),x=w+(P^R&(D^P))+O[4]+4118548399&4294967295,w=R+(x<<7&4294967295|x>>>25),x=P+(D^w&(R^D))+O[5]+1200080426&4294967295,P=w+(x<<12&4294967295|x>>>20),x=D+(R^P&(w^R))+O[6]+2821735955&4294967295,D=P+(x<<17&4294967295|x>>>15),x=R+(w^D&(P^w))+O[7]+4249261313&4294967295,R=D+(x<<22&4294967295|x>>>10),x=w+(P^R&(D^P))+O[8]+1770035416&4294967295,w=R+(x<<7&4294967295|x>>>25),x=P+(D^w&(R^D))+O[9]+2336552879&4294967295,P=w+(x<<12&4294967295|x>>>20),x=D+(R^P&(w^R))+O[10]+4294925233&4294967295,D=P+(x<<17&4294967295|x>>>15),x=R+(w^D&(P^w))+O[11]+2304563134&4294967295,R=D+(x<<22&4294967295|x>>>10),x=w+(P^R&(D^P))+O[12]+1804603682&4294967295,w=R+(x<<7&4294967295|x>>>25),x=P+(D^w&(R^D))+O[13]+4254626195&4294967295,P=w+(x<<12&4294967295|x>>>20),x=D+(R^P&(w^R))+O[14]+2792965006&4294967295,D=P+(x<<17&4294967295|x>>>15),x=R+(w^D&(P^w))+O[15]+1236535329&4294967295,R=D+(x<<22&4294967295|x>>>10),x=w+(D^P&(R^D))+O[1]+4129170786&4294967295,w=R+(x<<5&4294967295|x>>>27),x=P+(R^D&(w^R))+O[6]+3225465664&4294967295,P=w+(x<<9&4294967295|x>>>23),x=D+(w^R&(P^w))+O[11]+643717713&4294967295,D=P+(x<<14&4294967295|x>>>18),x=R+(P^w&(D^P))+O[0]+3921069994&4294967295,R=D+(x<<20&4294967295|x>>>12),x=w+(D^P&(R^D))+O[5]+3593408605&4294967295,w=R+(x<<5&4294967295|x>>>27),x=P+(R^D&(w^R))+O[10]+38016083&4294967295,P=w+(x<<9&4294967295|x>>>23),x=D+(w^R&(P^w))+O[15]+3634488961&4294967295,D=P+(x<<14&4294967295|x>>>18),x=R+(P^w&(D^P))+O[4]+3889429448&4294967295,R=D+(x<<20&4294967295|x>>>12),x=w+(D^P&(R^D))+O[9]+568446438&4294967295,w=R+(x<<5&4294967295|x>>>27),x=P+(R^D&(w^R))+O[14]+3275163606&4294967295,P=w+(x<<9&4294967295|x>>>23),x=D+(w^R&(P^w))+O[3]+4107603335&4294967295,D=P+(x<<14&4294967295|x>>>18),x=R+(P^w&(D^P))+O[8]+1163531501&4294967295,R=D+(x<<20&4294967295|x>>>12),x=w+(D^P&(R^D))+O[13]+2850285829&4294967295,w=R+(x<<5&4294967295|x>>>27),x=P+(R^D&(w^R))+O[2]+4243563512&4294967295,P=w+(x<<9&4294967295|x>>>23),x=D+(w^R&(P^w))+O[7]+1735328473&4294967295,D=P+(x<<14&4294967295|x>>>18),x=R+(P^w&(D^P))+O[12]+2368359562&4294967295,R=D+(x<<20&4294967295|x>>>12),x=w+(R^D^P)+O[5]+4294588738&4294967295,w=R+(x<<4&4294967295|x>>>28),x=P+(w^R^D)+O[8]+2272392833&4294967295,P=w+(x<<11&4294967295|x>>>21),x=D+(P^w^R)+O[11]+1839030562&4294967295,D=P+(x<<16&4294967295|x>>>16),x=R+(D^P^w)+O[14]+4259657740&4294967295,R=D+(x<<23&4294967295|x>>>9),x=w+(R^D^P)+O[1]+2763975236&4294967295,w=R+(x<<4&4294967295|x>>>28),x=P+(w^R^D)+O[4]+1272893353&4294967295,P=w+(x<<11&4294967295|x>>>21),x=D+(P^w^R)+O[7]+4139469664&4294967295,D=P+(x<<16&4294967295|x>>>16),x=R+(D^P^w)+O[10]+3200236656&4294967295,R=D+(x<<23&4294967295|x>>>9),x=w+(R^D^P)+O[13]+681279174&4294967295,w=R+(x<<4&4294967295|x>>>28),x=P+(w^R^D)+O[0]+3936430074&4294967295,P=w+(x<<11&4294967295|x>>>21),x=D+(P^w^R)+O[3]+3572445317&4294967295,D=P+(x<<16&4294967295|x>>>16),x=R+(D^P^w)+O[6]+76029189&4294967295,R=D+(x<<23&4294967295|x>>>9),x=w+(R^D^P)+O[9]+3654602809&4294967295,w=R+(x<<4&4294967295|x>>>28),x=P+(w^R^D)+O[12]+3873151461&4294967295,P=w+(x<<11&4294967295|x>>>21),x=D+(P^w^R)+O[15]+530742520&4294967295,D=P+(x<<16&4294967295|x>>>16),x=R+(D^P^w)+O[2]+3299628645&4294967295,R=D+(x<<23&4294967295|x>>>9),x=w+(D^(R|~P))+O[0]+4096336452&4294967295,w=R+(x<<6&4294967295|x>>>26),x=P+(R^(w|~D))+O[7]+1126891415&4294967295,P=w+(x<<10&4294967295|x>>>22),x=D+(w^(P|~R))+O[14]+2878612391&4294967295,D=P+(x<<15&4294967295|x>>>17),x=R+(P^(D|~w))+O[5]+4237533241&4294967295,R=D+(x<<21&4294967295|x>>>11),x=w+(D^(R|~P))+O[12]+1700485571&4294967295,w=R+(x<<6&4294967295|x>>>26),x=P+(R^(w|~D))+O[3]+2399980690&4294967295,P=w+(x<<10&4294967295|x>>>22),x=D+(w^(P|~R))+O[10]+4293915773&4294967295,D=P+(x<<15&4294967295|x>>>17),x=R+(P^(D|~w))+O[1]+2240044497&4294967295,R=D+(x<<21&4294967295|x>>>11),x=w+(D^(R|~P))+O[8]+1873313359&4294967295,w=R+(x<<6&4294967295|x>>>26),x=P+(R^(w|~D))+O[15]+4264355552&4294967295,P=w+(x<<10&4294967295|x>>>22),x=D+(w^(P|~R))+O[6]+2734768916&4294967295,D=P+(x<<15&4294967295|x>>>17),x=R+(P^(D|~w))+O[13]+1309151649&4294967295,R=D+(x<<21&4294967295|x>>>11),x=w+(D^(R|~P))+O[4]+4149444226&4294967295,w=R+(x<<6&4294967295|x>>>26),x=P+(R^(w|~D))+O[11]+3174756917&4294967295,P=w+(x<<10&4294967295|x>>>22),x=D+(w^(P|~R))+O[2]+718787259&4294967295,D=P+(x<<15&4294967295|x>>>17),x=R+(P^(D|~w))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+P&4294967295}s.prototype.v=function(A,w){w===void 0&&(w=A.length);const R=w-this.blockSize,O=this.C;let D=this.h,P=0;for(;P<w;){if(D==0)for(;P<=R;)o(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<w;)if(O[D++]=A.charCodeAt(P++),D==this.blockSize){o(this,O),D=0;break}}else for(;P<w;)if(O[D++]=A[P++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=w},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;w=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=w&255,w/=256;for(this.v(A),A=Array(16),w=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)A[w++]=this.g[R]>>>O&255;return A};function u(A,w){var R=m;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=w(A)}function c(A,w){this.h=w;const R=[];let O=!0;for(let D=A.length-1;D>=0;D--){const P=A[D]|0;O&&P==w||(R[D]=P,O=!1)}this.g=R}var m={};function g(A){return-128<=A&&A<128?u(A,function(w){return new c([w|0],w<0?-1:0)}):new c([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return T;if(A<0)return X(p(-A));const w=[];let R=1;for(let O=0;A>=R;O++)w[O]=A/R|0,R*=4294967296;return new c(w,0)}function E(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return X(E(A.substring(1),w));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(w,8));let O=T;for(let P=0;P<A.length;P+=8){var D=Math.min(8,A.length-P);const x=parseInt(A.substring(P,P+D),w);D<8?(D=p(Math.pow(w,D)),O=O.j(D).add(p(x))):(O=O.j(R),O=O.add(p(x)))}return O}var T=g(0),I=g(1),L=g(16777216);r=c.prototype,r.m=function(){if(j(this))return-X(this).m();let A=0,w=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);A+=(O>=0?O:4294967296+O)*w,w*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(K(this))return"0";if(j(this))return"-"+X(this).toString(A);const w=p(Math.pow(A,6));var R=this;let O="";for(;;){const D=Ae(R,w).g;R=fe(R,D.j(w));let P=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=D,K(R))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function K(A){if(A.h!=0)return!1;for(let w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function j(A){return A.h==-1}r.l=function(A){return A=fe(this,A),j(A)?-1:K(A)?0:1};function X(A){const w=A.g.length,R=[];for(let O=0;O<w;O++)R[O]=~A.g[O];return new c(R,~A.h).add(I)}r.abs=function(){return j(this)?X(this):this},r.add=function(A){const w=Math.max(this.g.length,A.g.length),R=[];let O=0;for(let D=0;D<=w;D++){let P=O+(this.i(D)&65535)+(A.i(D)&65535),x=(P>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);O=x>>>16,P&=65535,x&=65535,R[D]=x<<16|P}return new c(R,R[R.length-1]&-2147483648?-1:0)};function fe(A,w){return A.add(X(w))}r.j=function(A){if(K(this)||K(A))return T;if(j(this))return j(A)?X(this).j(X(A)):X(X(this).j(A));if(j(A))return X(this.j(X(A)));if(this.l(L)<0&&A.l(L)<0)return p(this.m()*A.m());const w=this.g.length+A.g.length,R=[];for(var O=0;O<2*w;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<A.g.length;D++){const P=this.i(O)>>>16,x=this.i(O)&65535,Qe=A.i(D)>>>16,mt=A.i(D)&65535;R[2*O+2*D]+=x*mt,he(R,2*O+2*D),R[2*O+2*D+1]+=P*mt,he(R,2*O+2*D+1),R[2*O+2*D+1]+=x*Qe,he(R,2*O+2*D+1),R[2*O+2*D+2]+=P*Qe,he(R,2*O+2*D+2)}for(A=0;A<w;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=w;A<2*w;A++)R[A]=0;return new c(R,0)};function he(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function ne(A,w){this.g=A,this.h=w}function Ae(A,w){if(K(w))throw Error("division by zero");if(K(A))return new ne(T,T);if(j(A))return w=Ae(X(A),w),new ne(X(w.g),X(w.h));if(j(w))return w=Ae(A,X(w)),new ne(X(w.g),w.h);if(A.g.length>30){if(j(A)||j(w))throw Error("slowDivide_ only works with positive integers.");for(var R=I,O=w;O.l(A)<=0;)R=Te(R),O=Te(O);var D=oe(R,1),P=oe(O,1);for(O=oe(O,2),R=oe(R,2);!K(O);){var x=P.add(O);x.l(A)<=0&&(D=D.add(R),P=x),O=oe(O,1),R=oe(R,1)}return w=fe(A,D.j(w)),new ne(D,w)}for(D=T;A.l(w)>=0;){for(R=Math.max(1,Math.floor(A.m()/w.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=p(R),x=P.j(w);j(x)||x.l(A)>0;)R-=O,P=p(R),x=P.j(w);K(P)&&(P=I),D=D.add(P),A=fe(A,x)}return new ne(D,A)}r.B=function(A){return Ae(this,A).h},r.and=function(A){const w=Math.max(this.g.length,A.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)&A.i(O);return new c(R,this.h&A.h)},r.or=function(A){const w=Math.max(this.g.length,A.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)|A.i(O);return new c(R,this.h|A.h)},r.xor=function(A){const w=Math.max(this.g.length,A.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)^A.i(O);return new c(R,this.h^A.h)};function Te(A){const w=A.g.length+1,R=[];for(let O=0;O<w;O++)R[O]=A.i(O)<<1|A.i(O-1)>>>31;return new c(R,A.h)}function oe(A,w){const R=w>>5;w%=32;const O=A.g.length-R,D=[];for(let P=0;P<O;P++)D[P]=w>0?A.i(P+R)>>>w|A.i(P+R+1)<<32-w:A.i(P+R);return new c(D,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,fr=c}).apply(typeof GE<"u"?GE:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pS,Cu,yS,lf,Wg,_S,vS,ES;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var v=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in v))break e;v=v[z]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,z,H){for(var te=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)te[Ie-2]=arguments[Ie];return y.prototype[z].apply(S,te)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function L(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function K(h,y){for(let S=1;S<arguments.length;S++){const z=arguments[S];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=h.length||0;const H=z.length||0;h.length=v+H;for(let te=0;te<H;te++)h[v+te]=z[te]}else h.push(z)}}class j{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(h){c.setTimeout(()=>{throw h},0)}function fe(){var h=A;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class he{constructor(){this.h=this.g=null}add(y,v){const S=ne.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ne=new j(()=>new Ae,h=>h.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,oe=!1,A=new he,w=()=>{const h=Promise.resolve(void 0);Te=()=>{h.then(R)}};function R(){for(var h;h=fe();){try{h.h.call(h.g)}catch(v){X(v)}var y=ne;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}oe=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Qe(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(Qe,D),Qe.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ie(h,y,v,S,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=z,this.key=++Y,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Ye(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function M(h){const y={};for(const v in h)y[v]=h[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(h,y){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)h[v]=S[v];for(let H=0;H<W.length;H++)v=W[H],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,y,v,S,z){const H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);const te=Ce(h,y,S,z);return te>-1?(y=h[te],v||(y.fa=!1)):(y=new ie(y,this.src,H,!!S,z),y.fa=v,h.push(y)),y};function be(h,y){const v=y.type;if(v in h.g){var S=h.g[v],z=Array.prototype.indexOf.call(S,y,void 0),H;(H=z>=0)&&Array.prototype.splice.call(S,z,1),H&&(_e(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ce(h,y,v,S){for(let z=0;z<h.length;++z){const H=h[z];if(!H.da&&H.listener==y&&H.capture==!!v&&H.ha==S)return z}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Lt={};function ut(h,y,v,S,z){if(Array.isArray(y)){for(let H=0;H<y.length;H++)ut(h,y[H],v,S,z);return null}return v=pl(v),h&&h[mt]?h.J(y,v,m(S)?!!S.capture:!1,z):wr(h,y,v,!1,S,z)}function wr(h,y,v,S,z,H){if(!y)throw Error("Invalid event type");const te=m(z)?!!z.capture:!!z;let Ie=Ir(h);if(Ie||(h[ze]=Ie=new le(h)),v=Ie.add(y,v,S,te,H),v.proxy)return v;if(S=Va(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)P||(z=te),z===void 0&&(z=!1),h.addEventListener(y.toString(),S,z);else if(h.attachEvent)h.attachEvent(ci(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Va(){function h(v){return y.call(h.src,h.listener,v)}const y=ml;return h}function Oa(h,y,v,S,z){if(Array.isArray(y))for(var H=0;H<y.length;H++)Oa(h,y[H],v,S,z);else S=m(S)?!!S.capture:!!S,v=pl(v),h&&h[mt]?(h=h.i,H=String(y).toString(),H in h.g&&(y=h.g[H],v=Ce(y,v,S,z),v>-1&&(_e(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[H],h.h--)))):h&&(h=Ir(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ce(y,v,S,z)),(v=h>-1?y[h]:null)&&Ma(v))}function Ma(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[mt])be(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(ci(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Ir(y))?(be(v,h),v.h==0&&(v.src=null,y[ze]=null)):_e(h)}}}function ci(h){return h in Lt?Lt[h]:Lt[h]="on"+h}function ml(h,y){if(h.da)h=!0;else{y=new Qe(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Ma(h),h=v.call(S,y)}return h}function Ir(h){return h=h[ze],h instanceof le?h:null}var gl="__closure_events_fn_"+(Math.random()*1e9>>>0);function pl(h){return typeof h=="function"?h:(h[gl]||(h[gl]=function(y){return h.handleEvent(y)}),h[gl])}function wt(){O.call(this),this.i=new le(this),this.M=this,this.G=null}T(wt,O),wt.prototype[mt]=!0,wt.prototype.removeEventListener=function(h,y,v,S){Oa(this,h,y,v,S)};function Ut(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var z=y;y=new D(S,h),se(y,z)}z=!0;let H,te;if(v)for(te=v.length-1;te>=0;te--)H=y.g=v[te],z=Es(H,S,!0,y)&&z;if(H=y.g=h,z=Es(H,S,!0,y)&&z,z=Es(H,S,!1,y)&&z,v)for(te=0;te<v.length;te++)H=y.g=v[te],z=Es(H,S,!1,y)&&z}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)_e(v[S]);delete h.g[y],h.h--}}this.G=null},wt.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},wt.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Es(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let H=0;H<y.length;++H){const te=y[H];if(te&&!te.da&&te.capture==v){const Ie=te.listener,vt=te.ha||te.src;te.fa&&be(h.i,te),z=Ie.call(vt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Sd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function vc(h){h.g=Sd(()=>{h.g=null,h.i&&(h.i=!1,vc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:vc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(h){O.call(this),this.h=h,this.g={}}T(Rr,O);var yl=[];function _l(h){Be(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ma(y)},h),h.g={}}Rr.prototype.N=function(){Rr.Z.N.call(this),_l(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=c.JSON.stringify,Ad=c.JSON.parse,Ec=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Tc(){}function bc(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){D.call(this,"d")}T(Kt,D);function Mn(){D.call(this,"c")}T(Mn,D);var _t={},Sc=null;function Pa(){return Sc=Sc||new wt}_t.Ia="serverreachability";function Ac(h){D.call(this,_t.Ia,h)}T(Ac,D);function hi(h){const y=Pa();Ut(y,new Ac(y))}_t.STAT_EVENT="statevent";function Cr(h,y){D.call(this,_t.STAT_EVENT,h),this.stat=y}T(Cr,D);function It(h){const y=Pa();Ut(y,new Cr(y,h))}_t.Ja="timingevent";function fi(h,y){D.call(this,_t.Ja,h),this.size=y}T(fi,D);function di(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function wd(h,y,v,S,z,H){h.info(function(){if(h.g)if(H){var te="",Ie=H.split("&");for(let He=0;He<Ie.length;He++){var vt=Ie[He].split("=");if(vt.length>1){const ct=vt[0];vt=vt[1];const Un=ct.split("_");te=Un.length>=2&&Un[1]=="type"?te+(ct+"="+vt+"&"):te+(ct+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+v+`
`+te})}function wc(h,y,v,S,z,H,te){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+v+`
`+H+" "+te})}function mi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Id(h,v)+(S?" "+S:"")})}function xr(h,y){h.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function Id(h,y){if(!h.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(h=0;h<H.length;h++)if(Array.isArray(H[h])){var v=H[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let te=1;te<S.length;te++)S[te]=""}}}}return Ts(H)}catch{return y}}var Nr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},El;function Dr(){}T(Dr,Tc),Dr.prototype.g=function(){return new XMLHttpRequest},El=new Dr;function Fi(h){return encodeURIComponent(String(h))}function Ic(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Jn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Rr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Rt={},qt={};function gi(h,y,v){h.M=1,h.A=Vr(xt(y)),h.u=v,h.R=!0,ka(h,null)}function ka(h,y){h.F=Date.now(),pi(h),h.B=xt(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ja(v.i,"t",S),h.C=0,v=h.j.L,h.h=new Zn,h.g=Bc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(yl[0]=z.toString()),z=yl);for(let H=0;H<z.length;H++){const te=ut(v,z[H],S||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),hi(),wd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ti(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=ti(this.g),vt=this.g.ya(),He=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Ie!=4||vt==7||(vt==8||He<=0?hi(3):hi(2)),yi(this);var y=this.g.ca();this.X=y;var v=Rd(this);if(this.o=y==200,wc(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(S)){var H=S;break t}}H=null}if(h=H)mi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,h);else{this.o=!1,this.m=3,It(12),Tn(this),Pn(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<v.length;)if(ct=Cc(this,v),ct==qt){Ie==4&&(this.m=4,It(14),h=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Rt){this.m=4,It(15),mi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else mi(this.i,this.l,ct,null),_i(this,ct);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||v.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)mi(this.i,this.l,v,"[Invalid Chunked Response]"),Tn(this),Pn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Pl(te),te.P=!0,It(11))}}else mi(this.i,this.l,v,null),_i(this,v);Ie==4&&Tn(this),this.o&&!this.K&&(Ie==4?Lc(this.j,this):(this.o=!1,pi(this)))}else Gi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Tn(this),Pn(this)}}}catch{}};function Rd(h){if(!Rc(h))return h.g.la();const y=Qt(h.g);if(y==="")return"";let v="";const S=y.length,z=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Tn(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let H=0;H<S;H++)h.h.h=!0,v+=h.h.i.decode(y[H],{stream:!(z&&H==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Rc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Cc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qt:(v=Number(y.substring(v,S)),isNaN(v)?Rt:(S+=1,S+v>y.length?qt:(y=y.slice(S,S+v),h.C=S+v,y)))}Jn.prototype.cancel=function(){this.K=!0,Tn(this)};function pi(h){h.T=Date.now()+h.H,La(h,h.H)}function La(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=di(p(h.aa,h),y)}function yi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(xr(this.i,this.B),this.M!=2&&(hi(),It(17)),Tn(this),this.m=2,Pn(this)):La(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Lc(h.j,h)}function Tn(h){yi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,_l(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function _i(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ei(v.h,h))){if(!h.L&&Ei(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ga(v),xs(v);else break e;zr(v),It(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=di(p(v.Va,v),6e3));vi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ii(v,11)}else if((h.L||v.g==h)&&Ga(v),!x(y))for(z=v.Ba.g.parse(y),y=0;y<z.length;y++){let He=z[y];const ct=He[0];if(!(ct<=v.K))if(v.K=ct,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const Un=He[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const Ri=He[4];Ri!=null&&(v.za=Ri,v.j.info("SVER="+v.za));const ni=He[5];ni!=null&&typeof ni=="number"&&ni>0&&(S=1.5*ni,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ii=h.g;if(ii){const jr=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var H=S.h;H.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Sl(H,H.h),H.h=null))}if(S.G){const Ka=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Ka&&(S.wa=Ka,Xe(S.J,S.G,Ka))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var te=h;if(S.na=jc(S,S.L?S.ba:null,S.W),te.L){Al(S.h,te);var Ie=te,vt=S.O;vt&&(Ie.H=vt),Ie.D&&(yi(Ie),pi(Ie)),S.g=te}else Pc(S);v.i.length>0&&wi(v)}else He[0]!="stop"&&He[0]!="close"||Ii(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ii(v,7):Ol(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}hi(4)}catch{}}var Ct=class{constructor(h,y){this.g=h,this.map=y}};function Tl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vi(h){return h.h?1:h.g?h.g.size:0}function Ei(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Sl(h,y){h.g?h.g.add(y):h.h=y}function Al(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Tl.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return L(h.i)}var xc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ua(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let z,H=null;S>=0?(z=h[v].substring(0,S),H=h[v].substring(S+1)):z=h[v],y(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bn?(this.l=h.l,Ft(this,h.j),this.o=h.o,this.g=h.g,bs(this,h.u),this.h=h.h,Il(this,Oc(h.i)),this.m=h.m):h&&(y=String(h).match(xc))?(this.l=!1,Ft(this,y[1]||"",!0),this.o=Ti(y[2]||""),this.g=Ti(y[3]||"",!0),bs(this,y[4]),this.h=Ti(y[5]||"",!0),Il(this,y[6]||"",!0),this.m=Ti(y[7]||"")):(this.l=!1,this.i=new As(null,this.l))}bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Or(y,za,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Or(y,za,!0),"@"),h.push(Fi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Or(v,v.charAt(0)=="/"?Rl:Nc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Or(v,Dc)),h.join("")},bn.prototype.resolve=function(h){const y=xt(this);let v=!!h.j;v?Ft(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)bs(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=y.h.lastIndexOf("/");z!=-1&&(S=y.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let te=0;te<z.length;){const Ie=z[te++];Ie=="."?S&&te==z.length&&H.push(""):Ie==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&te==z.length&&H.push("")):(H.push(Ie),S=!0)}S=H.join("/")}else S=z}return v?y.h=S:v=h.i.toString()!=="",v?Il(y,Oc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function xt(h){return new bn(h)}function Ft(h,y,v){h.j=v?Ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function bs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Il(h,y,v){y instanceof As?(h.i=y,Ba(h.i,h.l)):(v||(y=Or(y,Ss)),h.i=new As(y,h.l))}function Xe(h,y,v){h.i.set(y,v)}function Vr(h){return Xe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Or(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var za=/[#\/\?@]/g,Nc=/[#\?:]/g,Rl=/[#\?]/g,Ss=/[#\?@]/g,Dc=/#/g;function As(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ua(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=As.prototype,r.add=function(h,y){dn(this),this.i=null,h=ws(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Vc(h,y){dn(h),y=ws(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Cl(h,y){return dn(h),y=ws(h,y),h.g.has(y)}r.forEach=function(h,y){dn(this),this.g.forEach(function(v,S){v.forEach(function(z){h.call(y,z,S,this)},this)},this)};function xl(h,y){dn(h);let v=[];if(typeof y=="string")Cl(h,y)&&(v=v.concat(h.g.get(ws(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return dn(this),this.i=null,h=ws(this,h),Cl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=xl(this,h),h.length>0?String(h[0]):y):y};function ja(h,y,v){Vc(h,y),v.length>0&&(h.i=null,h.g.set(ws(h,y),L(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const z=Fi(v);v=xl(this,v);for(let H=0;H<v.length;H++){let te=z;v[H]!==""&&(te+="="+Fi(v[H])),h.push(te)}}return this.i=h.join("&")};function Oc(h){const y=new As;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ws(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ba(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(v,S){const z=S.toLowerCase();S!=z&&(Vc(this,S),ja(this,z,v))},h)),h.j=y}function Wn(h,y){const v=new $n;if(c.Image){const S=new Image;S.onload=E(kn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(kn,v,"TestLoadImage: error",!1,y,S),S.onabort=E(kn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(kn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Nl(h,y){const v=new $n,S=new AbortController,z=setTimeout(()=>{S.abort(),kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?kn(v,"TestPingServer: ok",!0,y):kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),kn(v,"TestPingServer: error",!1,y)})}function kn(h,y,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function Is(){this.g=new Ec}function bi(h){this.i=h.Sb||null,this.h=h.ab||!1}T(bi,Tc),bi.prototype.g=function(){return new Mr(this.i,this.h)};function Mr(h,y){wt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Mr,wt),r=Mr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ei(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function qa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rs(this):ei(this),this.readyState==3&&qa(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Rs(this))},r.Na=function(h){this.g&&(this.response=h,Rs(this))},r.ga=function(){this.g&&Rs(this)};function Rs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Be(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Pr(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ln(v),typeof h=="string"?v!=null&&Fi(v):Xe(h,y,v))}function et(h){wt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(et,wt);var Si=/^https?$/i,Dl=["POST","PUT"];r=et.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():El.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(H){kr(this,H);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())v.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),z=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Dl,y,void 0)>=0)||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of v)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(H){kr(this,H)}};function kr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Vl(h),Hi(h)}function Vl(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Hi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},r.Xa=function(){Lr(this)};function Lr(h){if(h.h&&typeof u<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),ti(h)==4){h.h=!1;try{const H=h.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=H===0){let te=String(h.D).match(xc)[1]||null;!te&&c.self&&c.self.location&&(te=c.self.location.protocol.slice(0,-1)),S=!Si.test(te?te.toLowerCase():"")}v=S}if(v)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var z=ti(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",Vl(h)}}finally{Hi(h)}}}}function Hi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ut(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ad(y)}};function Qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(h){const y={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(x(h[S]))continue;var v=Ic(h[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=y[z]||[];y[z]=H,H.push(v)}Ye(y,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Cs(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,h),this.Za=Ai("retryDelaySeedMs",1e4,h),this.Ta=Ai("forwardChannelMaxRetries",2,h),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Tl(h&&h.concurrentRequestLimit),this.Ba=new Is,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Cs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,S){It(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=jc(this,null,this.W),wi(this)};function Ol(h){if(Fa(h),h.I==3){var y=h.V++,v=xt(h.J);if(Xe(v,"SID",h.M),Xe(v,"RID",y),Xe(v,"TYPE","terminate"),Ur(h,v),y=new Jn(h,h.j,y),y.M=2,y.A=Vr(xt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Bc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),pi(y)}zc(h)}function xs(h){h.g&&(Pl(h),h.g.cancel(),h.g=null)}function Fa(h){xs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ga(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function wi(h){if(!bl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Te||w(),oe||(Te(),oe=!0),A.add(y,h),h.D=0}}function Ha(h,y){return vi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=di(p(h.Ea,h,y),Uc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new Jn(this,this.j,h);let H=this.o;if(this.U&&(H?(H=M(H),se(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Mc(this,z,y),v=xt(this.J),Xe(v,"RID",h),Xe(v,"CVER",22),this.G&&Xe(v,"X-HTTP-Session-Id",this.G),Ur(this,v),H&&(this.R?y="headers="+Fi(Ln(H))+"&"+y:this.u&&Pr(v,this.u,H)),Sl(this.h,z),this.Ra&&Xe(v,"TYPE","init"),this.S?(Xe(v,"$req",y),Xe(v,"SID","null"),z.U=!0,gi(z,v,null)):gi(z,v,y),this.I=2}}else this.I==3&&(h?Ml(this,h):this.i.length==0||bl(this.h)||Ml(this))};function Ml(h,y){var v;y?v=y.l:v=h.V++;const S=xt(h.J);Xe(S,"SID",h.M),Xe(S,"RID",v),Xe(S,"AID",h.K),Ur(h,S),h.u&&h.o&&Pr(S,h.u,h.o),v=new Jn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Mc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Sl(h.h,v),gi(v,S,y)}function Ur(h,y){h.H&&Be(h.H,function(v,S){Xe(y,S,v)}),h.l&&Be({},function(v,S){Xe(y,S,v)})}function Mc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var z=h.i;let Ie=-1;for(;;){const vt=["count="+v];Ie==-1?v>0?(Ie=z[0].g,vt.push("ofs="+Ie)):Ie=0:vt.push("ofs="+Ie);let He=!0;for(let ct=0;ct<v;ct++){var H=z[ct].g;const Un=z[ct].map;if(H-=Ie,H<0)Ie=Math.max(0,z[ct].g-100),He=!1;else try{H="req"+H+"_"||"";try{var te=Un instanceof Map?Un:Object.entries(Un);for(const[Ri,ni]of te){let ii=ni;m(ni)&&(ii=Ts(ni)),vt.push(H+Ri+"="+encodeURIComponent(ii))}}catch(Ri){throw vt.push(H+"type="+encodeURIComponent("_badmap")),Ri}}catch{S&&S(Un)}}if(He){te=vt.join("&");break e}}te=void 0}return h=h.i.splice(0,v),y.G=h,te}function Pc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Te||w(),oe||(Te(),oe=!0),A.add(y,h),h.A=0}}function zr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=di(p(h.Da,h),Uc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,kc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=di(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),xs(this),kc(this))};function Pl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function kc(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);Xe(y,"RID","rpc"),Xe(y,"SID",h.M),Xe(y,"AID",h.K),Xe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xe(y,"TO",h.ia),Xe(y,"TYPE","xmlhttp"),Ur(h,y),h.u&&h.o&&Pr(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Vr(xt(y)),v.u=null,v.R=!0,ka(v,h)}r.Va=function(){this.C!=null&&(this.C=null,xs(this),zr(this),It(19))};function Ga(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Lc(h,y){var v=null;if(h.g==y){Ga(h),Pl(h),h.g=null;var S=2}else if(Ei(h.h,y))v=y.G,Al(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var z=h.D;S=Pa(),Ut(S,new fi(S,v)),wi(h)}else Pc(h);else if(z=y.m,z==3||z==0&&y.X>0||!(S==1&&Ha(h,y)||S==2&&zr(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function Uc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ii(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const z=!S;S=new bn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(S,"https"),Vr(S),z?Wn(S.toString(),v):Nl(S.toString(),v)}else It(2);h.I=0,h.l&&h.l.pa(y),zc(h),Fa(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function zc(h){if(h.I=0,h.ja=[],h.l){const y=wl(h.h);(y.length!=0||h.i.length!=0)&&(K(h.ja,y),K(h.ja,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.oa()}}function jc(h,y,v){var S=v instanceof bn?xt(v):new bn(v);if(S.g!="")y&&(S.g=y+"."+S.g),bs(S,S.u);else{var z=c.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const H=new bn(null);S&&Ft(H,S),y&&(H.g=y),z&&bs(H,z),v&&(H.h=v),S=H}return v=h.G,y=h.wa,v&&y&&Xe(S,v,y),Xe(S,"VER",h.ka),Ur(h,S),S}function Bc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new et(new bi({ab:v})):new et(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function qc(){}r=qc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ns(){}Ns.prototype.g=function(h,y){return new un(h,y)};function un(h,y){wt.call(this),this.g=new Cs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ki(this)}T(un,wt),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Ol(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Ts(h),h=v);y.i.push(new Ct(y.Ya++,h)),y.I==3&&wi(y)},un.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,un.Z.N.call(this)};function Fc(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Fc,Kt);function Hc(){Mn.call(this),this.status=1}T(Hc,Mn);function Ki(h){this.g=h}T(Ki,qc),Ki.prototype.ra=function(){Ut(this.g,"a")},Ki.prototype.qa=function(h){Ut(this.g,new Fc(h))},Ki.prototype.pa=function(h){Ut(this.g,new Hc)},Ki.prototype.oa=function(){Ut(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,ES=function(){return new Ns},vS=function(){return Pa()},_S=_t,Wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,lf=Nr,vl.COMPLETE="complete",yS=vl,bc.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Cu=bc,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,pS=et}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const KE="@firebase/firestore",QE="4.9.3";class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let ol="12.7.0";const _a=new Cp("@firebase/firestore");function xo(){return _a.logLevel}function ee(r,...e){if(_a.logLevel<=ke.DEBUG){const t=e.map(zp);_a.debug(`Firestore (${ol}): ${r}`,...t)}}function bt(r,...e){if(_a.logLevel<=ke.ERROR){const t=e.map(zp);_a.error(`Firestore (${ol}): ${r}`,...t)}}function Qu(r,...e){if(_a.logLevel<=ke.WARN){const t=e.map(zp);_a.warn(`Firestore (${ol}): ${r}`,...t)}}function zp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function ue(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,TS(r,s,t)}function TS(r,e,t){let s=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw bt(s),new Error(s)}function ge(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||TS(e,o,s)}function de(r,e){return r}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _N{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class EN{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ui,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ui)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ge(typeof s.accessToken=="string",31837,{l:s}),new _N(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class TN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new TN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class YE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const s=u=>{u.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new YE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new YE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=AN(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Se(r,e){return r<e?-1:r>e?1:0}function ep(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Mg(o)===Mg(u)?Se(o,u):Mg(o)?1:-1}return Se(r.length,e.length)}const wN=55296,IN=57343;function Mg(r){const e=r.charCodeAt(0);return e>=wN&&e<=IN}function Bo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}function bS(r){return r+"\0"}const XE="__name__";class Vi{constructor(e,t,s){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ue(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Vi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Se(e.length,t.length)}static compareSegments(e,t){const s=Vi.isNumericId(e),o=Vi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):ep(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}}class Ke extends Vi{construct(e,t,s){return new Ke(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new re(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const RN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Vi{construct(e,t,s){return new dt(e,t,s)}static isValidIdentifier(e){return RN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XE}static keyField(){return new dt([XE])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new re(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new re(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new re(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new re(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ke.fromString(e))}static fromName(e){return new ae(Ke.fromString(e).popFirst(5))}static empty(){return new ae(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ke(e.slice()))}}function SS(r,e,t){if(!t)throw new re(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function CN(r,e,t,s){if(e===!0&&s===!0)throw new re(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function $E(r){if(!ae.isDocumentKey(r))throw new re(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function JE(r){if(ae.isDocumentKey(r))throw new re(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function AS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Bp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ue(12329,{type:typeof r})}function Bi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new re(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bp(r);throw new re(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Pt(r,e){const t={typeString:r};return e&&(t.value=e),t}function hc(r,e){if(!AS(r))throw new re(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new re(J.INVALID_ARGUMENT,t);return!0}const ZE=-62135596800,WE=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*WE);return new Ze(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZE)throw new re(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WE}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hc(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ZE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Pt("string",Ze._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ze(0,0))}static max(){return new ye(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qo=-1;class Rf{constructor(e,t,s,o){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=o}}function tp(r){return r.fields.find((e=>e.kind===2))}function sa(r){return r.fields.filter((e=>e.kind!==2))}Rf.UNKNOWN_ID=-1;class uf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yu(0,On.min())}}function wS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ye.fromTimestamp(s===1e9?new Ze(t+1,0):new Ze(t,s));return new On(o,ae.empty(),e)}function IS(r){return new On(r.readTime,r.key,qo)}class On{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new On(ye.min(),ae.empty(),qo)}static max(){return new On(ye.max(),ae.empty(),qo)}}function qp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(r.documentKey,e.documentKey),t!==0?t:Se(r.largestBatchId,e.largestBatchId))}const RS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Tr(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==RS)throw r;ee("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,s)=>{t(e)}))}static reject(e){return new U(((t,s)=>{s(e)}))}static waitFor(e){return new U(((t,s)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>s(g)))})),c=!0,u===o&&t()}))}static or(e){let t=U.resolve(!1);for(const s of e)t=t.next((o=>o?U.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new U(((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((E=>{c[p]=E,++m,m===u&&s(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new U(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}const Nn="SimpleDb";class Jf{static open(e,t,s,o){try{return new Jf(t,e.transaction(o,s))}catch(u){throw new Pu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ui,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Pu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const o=Fp(s.target.error);this.S.reject(new Pu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new NN(t)}}class dr{static delete(e){return ee(Nn,"Removing database:",e),aa(bb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xb())return!1;if(dr.F())return!0;const e=jt(),t=dr.M(e),s=0<t&&t<10,o=xS(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,dr.M(jt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Nn,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{s(new Pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?s(new re(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?s(new re(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):s(new Pu(e,c))},o.onupgradeneeded=u=>{ee(Nn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ee(Nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Jf.open(this.db,e,u?"readonly":"readwrite",s),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),U.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ee(Nn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function xS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class xN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class Pu extends re{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function br(r){return r.name==="IndexedDbTransactionError"}class NN{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(ee(Nn,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(ee(Nn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),aa(s)}add(e){return ee(Nn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Nn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Nn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return ee(Nn,"COUNT",this.store.name),aa(this.store.count())}J(e,t){const s=this.options(e,t),o=s.index?this.store.index(s.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(s.range);return new U(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(s),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new U(((o,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){ee(Nn,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const o=this.cursor(s);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const o=this.cursor(s);return this.H(o,t)}te(e){const t=this.cursor({});return new U(((s,o)=>{t.onerror=u=>{const c=Fp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():s()})):s()}}))}H(e,t){const s=[];return new U(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new xN(m),p=t(m.primaryKey,m.value,g);if(p instanceof U){const E=p.catch((T=>(g.done(),U.reject(T))));s.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>U.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function aa(r){return new U(((e,t)=>{r.onsuccess=s=>{const o=s.target.result;e(o)},r.onerror=s=>{const o=Fp(s.target.error);t(o)}}))}let eT=!1;function Fp(r){const e=dr.M(jt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eT||(eT=!0,setTimeout((()=>{throw s}),0)),s}}return r}const ku="IndexBackfiller";class DN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(ku,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ee(ku,`Documents written: ${t}`)}catch(t){br(t)?ee(ku,"Ignoring IndexedDB error during index backfill: ",t):await Tr(t)}await this.re(6e4)}))}}class VN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let o=t,u=!0;return U.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!s.has(c))return ee(ku,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,s.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,s).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ee(ku,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((o,u)=>{const c=IS(u);qp(c,s)>0&&(s=c)})),new On(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vn.ce=-1;const ha=-1;function Zf(r){return r==null}function Xu(r){return r===0&&1/r==-1/0}function NS(r){return typeof r=="number"&&Number.isInteger(r)&&!Xu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Cf="";function on(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=tT(e)),e=ON(r.get(t),e);return tT(e)}function ON(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case Cf:t+="";break;default:t+=u}}return t}function tT(r){return r+Cf+""}function Mi(r){const e=r.length;if(ge(e>=2,64408,{path:r}),e===2)return ge(r.charAt(0)===Cf&&r.charAt(1)==="",56145,{path:r}),Ke.emptyPath();const t=e-2,s=[];let o="";for(let u=0;u<e;){const c=r.indexOf(Cf,u);switch((c<0||c>t)&&ue(50515,{path:r}),r.charAt(c+1)){case"":const m=r.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),s.push(g);break;case"":o+=r.substring(u,c),o+="\0";break;case"":o+=r.substring(u,c+1);break;default:ue(61167,{path:r})}u=c+2}return new Ke(s)}const ra="remoteDocuments",fc="owner",So="owner",$u="mutationQueues",MN="userId",oi="mutations",nT="batchId",ca="userMutationsIndex",iT=["userId","batchId"];function cf(r,e){return[r,on(e)]}function DS(r,e,t){return[r,on(e),t]}const PN={},Fo="documentMutations",xf="remoteDocumentsV14",kN=["prefixPath","collectionGroup","readTime","documentId"],hf="documentKeyIndex",LN=["prefixPath","collectionGroup","documentId"],VS="collectionGroupIndex",UN=["collectionGroup","readTime","prefixPath","documentId"],Ju="remoteDocumentGlobal",np="remoteDocumentGlobalKey",Ho="targets",OS="queryTargetsIndex",zN=["canonicalId","targetId"],Go="targetDocuments",jN=["targetId","path"],Hp="documentTargetsIndex",BN=["path","targetId"],Nf="targetGlobalKey",fa="targetGlobal",Zu="collectionParents",qN=["collectionId","parent"],Ko="clientMetadata",FN="clientId",Wf="bundles",HN="bundleId",ed="namedQueries",GN="name",Gp="indexConfiguration",KN="indexId",ip="collectionGroupIndex",QN="collectionGroup",Lu="indexState",YN=["indexId","uid"],MS="sequenceNumberIndex",XN=["uid","sequenceNumber"],Uu="indexEntries",$N=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PS="documentKeyIndex",JN=["indexId","uid","orderedDocumentKey"],td="documentOverlays",ZN=["userId","collectionPath","documentId"],sp="collectionPathOverlayIndex",WN=["userId","collectionPath","largestBatchId"],kS="collectionGroupOverlayIndex",eD=["userId","collectionGroup","largestBatchId"],Kp="globals",tD="name",LS=[$u,oi,Fo,ra,Ho,fc,fa,Go,Ko,Ju,Zu,Wf,ed],nD=[...LS,td],US=[$u,oi,Fo,xf,Ho,fc,fa,Go,Ko,Ju,Zu,Wf,ed,td],zS=US,Qp=[...zS,Gp,Lu,Uu],iD=Qp,jS=[...Qp,Kp],sD=jS;class rp extends CS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Bt(r,e){const t=de(r);return dr.O(t.le,e)}function sT(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Sr(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function BS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class at{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Zt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class We{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rT(this.data.getIterator())}getIteratorFrom(e){return new rT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new We(this.comparator);return t.data=e,t}}class rT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ao(r){return r.hasNext()?r.getNext():void 0}class En{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new En([])}unionWith(e){let t=new We(dt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class qS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qS("Invalid base64 string: "+u):u}})(e);return new St(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const rD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(r){if(ge(!!r,39018),typeof r=="string"){let e=0;const t=rD.exec(r);if(ge(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ps(r){return typeof r=="string"?St.fromBase64String(r):St.fromUint8Array(r)}const FS="server_timestamp",HS="__type__",GS="__previous_value__",KS="__local_write_time__";function Yp(r){return(r?.mapValue?.fields||{})[HS]?.stringValue===FS}function nd(r){const e=r.mapValue.fields[GS];return Yp(e)?nd(e):e}function Wu(r){const e=gs(r.mapValue.fields[KS].timestampValue);return new Ze(e.seconds,e.nanos)}class aD{constructor(e,t,s,o,u,c,m,g,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Df="(default)";class va{constructor(e,t){this.projectId=e,this.database=t||Df}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const Xp="__type__",QS="__max__",lr={mapValue:{fields:{__type__:{stringValue:QS}}}},$p="__vector__",Qo="value",ff={nullValue:"NULL_VALUE"};function gr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yp(r)?4:YS(r)?9007199254740991:id(r)?10:11:ue(28295,{value:r})}function qi(r,e){if(r===e)return!0;const t=gr(r);if(t!==gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Wu(r).isEqual(Wu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=gs(o.timestampValue),m=gs(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ps(o.bytesValue).isEqual(ps(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return ft(o.geoPointValue.latitude)===ft(u.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ft(o.integerValue)===ft(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=ft(o.doubleValue),m=ft(u.doubleValue);return c===m?Xu(c)===Xu(m):isNaN(c)&&isNaN(m)}return!1})(r,e);case 9:return Bo(r.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(sT(c)!==sT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!qi(c[g],m[g])))return!1;return!0})(r,e);default:return ue(52216,{left:r})}}function ec(r,e){return(r.values||[]).find((t=>qi(t,e)))!==void 0}function pr(r,e){if(r===e)return 0;const t=gr(r),s=gr(e);if(t!==s)return Se(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(r.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=ft(u.integerValue||u.doubleValue),g=ft(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return aT(r.timestampValue,e.timestampValue);case 4:return aT(Wu(r),Wu(e));case 5:return ep(r.stringValue,e.stringValue);case 6:return(function(u,c){const m=ps(u),g=ps(c);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Se(m[p],g[p]);if(E!==0)return E}return Se(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Se(ft(u.latitude),ft(c.latitude));return m!==0?m:Se(ft(u.longitude),ft(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return oT(r.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Qo]?.arrayValue,E=g[Qo]?.arrayValue,T=Se(p?.values?.length||0,E?.values?.length||0);return T!==0?T:oT(p,E)})(r.mapValue,e.mapValue);case 11:return(function(u,c){if(u===lr.mapValue&&c===lr.mapValue)return 0;if(u===lr.mapValue)return 1;if(c===lr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const I=ep(g[T],E[T]);if(I!==0)return I;const L=pr(m[g[T]],p[E[T]]);if(L!==0)return L}return Se(g.length,E.length)})(r.mapValue,e.mapValue);default:throw ue(23264,{he:t})}}function aT(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Se(r,e);const t=gs(r),s=gs(e),o=Se(t.seconds,s.seconds);return o!==0?o:Se(t.nanos,s.nanos)}function oT(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=pr(t[o],s[o]);if(u)return u}return Se(t.length,s.length)}function Yo(r){return ap(r)}function ap(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=gs(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ps(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ae.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=ap(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${ap(t.fields[c])}`;return o+"}"})(r.mapValue):ue(61005,{value:r})}function df(r){switch(gr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nd(r);return e?16+df(e):16;case 5:return 2*r.stringValue.length;case 6:return ps(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+df(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Sr(s.fields,((u,c)=>{o+=u.length+df(c)})),o})(r.mapValue);default:throw ue(13486,{value:r})}}function Jp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function op(r){return!!r&&"integerValue"in r}function tc(r){return!!r&&"arrayValue"in r}function lT(r){return!!r&&"nullValue"in r}function uT(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mf(r){return!!r&&"mapValue"in r}function id(r){return(r?.mapValue?.fields||{})[Xp]?.stringValue===$p}function zu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Sr(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=zu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zu(r.arrayValue.values[t]);return e}return{...r}}function YS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===QS}const XS={mapValue:{fields:{[Xp]:{stringValue:$p},[Qo]:{arrayValue:{}}}}};function oD(r){return"nullValue"in r?ff:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Jp(va.empty(),ae.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?id(r)?XS:{mapValue:{}}:ue(35942,{value:r})}function lD(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Jp(va.empty(),ae.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?XS:"mapValue"in r?id(r)?{mapValue:{}}:lr:ue(61959,{value:r})}function cT(r,e){const t=pr(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function hT(r,e){const t=pr(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=dt.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}c?s[m.lastSegment()]=zu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];mf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Sr(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new rn(zu(this.value))}}function $S(r){const e=[];return Sr(r.fields,((t,s)=>{const o=new dt([t]);if(mf(s)){const u=$S(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new En(e)}class yt{constructor(e,t,s,o,u,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new yt(e,0,ye.min(),ye.min(),ye.min(),rn.empty(),0)}static newFoundDocument(e,t,s,o){return new yt(e,1,t,ye.min(),s,o,0)}static newNoDocument(e,t){return new yt(e,2,t,ye.min(),ye.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,ye.min(),ye.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(e,t){this.position=e,this.inclusive=t}}function fT(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],c=r.position[o];if(u.field.isKeyField()?s=ae.comparator(ae.fromName(c.referenceValue),t.key):s=pr(c,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function dT(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!qi(r.position[t],e.position[t]))return!1;return!0}class Vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function uD(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class JS{}class Ue extends JS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new cD(e,t,s):t==="array-contains"?new dD(e,s):t==="in"?new iA(e,s):t==="not-in"?new mD(e,s):t==="array-contains-any"?new gD(e,s):new Ue(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new hD(e,s):new fD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pr(t,this.value)):t!==null&&gr(this.value)===gr(t)&&this.matchesComparison(pr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends JS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new st(e,t)}matches(e){return $o(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $o(r){return r.op==="and"}function lp(r){return r.op==="or"}function Zp(r){return ZS(r)&&$o(r)}function ZS(r){for(const e of r.filters)if(e instanceof st)return!1;return!0}function up(r){if(r instanceof Ue)return r.field.canonicalString()+r.op.toString()+Yo(r.value);if(Zp(r))return r.filters.map((e=>up(e))).join(",");{const e=r.filters.map((t=>up(t))).join(",");return`${r.op}(${e})`}}function WS(r,e){return r instanceof Ue?(function(s,o){return o instanceof Ue&&s.op===o.op&&s.field.isEqual(o.field)&&qi(s.value,o.value)})(r,e):r instanceof st?(function(s,o){return o instanceof st&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&WS(c,o.filters[m])),!0):!1})(r,e):void ue(19439)}function eA(r,e){const t=r.filters.concat(e);return st.create(t,r.op)}function tA(r){return r instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yo(t.value)}`})(r):r instanceof st?(function(t){return t.op.toString()+" {"+t.getFilters().map(tA).join(" ,")+"}"})(r):"Filter"}class cD extends Ue{constructor(e,t,s){super(e,t,s),this.key=ae.fromName(s.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class hD extends Ue{constructor(e,t){super(e,"in",t),this.keys=nA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fD extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=nA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function nA(r,e){return(e.arrayValue?.values||[]).map((t=>ae.fromName(t.referenceValue)))}class dD extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tc(t)&&ec(t.arrayValue,this.value)}}class iA extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ec(this.value.arrayValue,t)}}class mD extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ec(this.value.arrayValue,t)}}class gD extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ec(this.value.arrayValue,s)))}}class pD{constructor(e,t=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function cp(r,e=null,t=[],s=[],o=null,u=null,c=null){return new pD(r,e,t,s,o,u,c)}function Ea(r){const e=de(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>up(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Yo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Yo(s))).join(",")),e.Te=t}return e.Te}function dc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!uD(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!WS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!dT(r.startAt,e.startAt)&&dT(r.endAt,e.endAt)}function Of(r){return ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Mf(r,e){return r.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function mT(r,e,t){let s=ff,o=!0;for(const u of Mf(r,e)){let c=ff,m=!0;switch(u.op){case"<":case"<=":c=oD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=ff}cT({value:s,inclusive:o},{value:c,inclusive:m})<0&&(s=c,o=m)}if(t!==null){for(let u=0;u<r.orderBy.length;++u)if(r.orderBy[u].field.isEqual(e)){const c=t.position[u];cT({value:s,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(s=c,o=t.inclusive);break}}return{value:s,inclusive:o}}function gT(r,e,t){let s=lr,o=!0;for(const u of Mf(r,e)){let c=lr,m=!0;switch(u.op){case">=":case">":c=lD(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=lr}hT({value:s,inclusive:o},{value:c,inclusive:m})>0&&(s=c,o=m)}if(t!==null){for(let u=0;u<r.orderBy.length;++u)if(r.orderBy[u].field.isEqual(e)){const c=t.position[u];hT({value:s,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(s=c,o=t.inclusive);break}}return{value:s,inclusive:o}}class sd{constructor(e,t=null,s=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sA(r,e,t,s,o,u,c,m){return new sd(r,e,t,s,o,u,c,m)}function rd(r){return new sd(r)}function pT(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yD(r){return r.collectionGroup!==null}function ju(r){const e=de(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new We(dt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Vf(u,s))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new Vf(dt.keyField(),s))}return e.Ie}function Vn(r){const e=de(r);return e.Ee||(e.Ee=_D(e,ju(r))),e.Ee}function _D(r,e){if(r.limitType==="F")return cp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Vf(o.field,u)}));const t=r.endAt?new Xo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xo(r.startAt.position,r.startAt.inclusive):null;return cp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function hp(r,e,t){return new sd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ad(r,e){return dc(Vn(r),Vn(e))&&r.limitType===e.limitType}function rA(r){return`${Ea(Vn(r))}|lt:${r.limitType}`}function No(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>tA(o))).join(", ")}]`),Zf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Yo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Yo(o))).join(",")),`Target(${s})`})(Vn(r))}; limitType=${r.limitType})`}function mc(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ae.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of ju(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,g){const p=fT(c,m,g);return c.inclusive?p<=0:p<0})(s.startAt,ju(s),o)||s.endAt&&!(function(c,m,g){const p=fT(c,m,g);return c.inclusive?p>=0:p>0})(s.endAt,ju(s),o))})(r,e)}function aA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function oA(r){return(e,t)=>{let s=!1;for(const o of ju(r)){const u=vD(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function vD(r,e,t){const s=r.field.isKeyField()?ae.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?pr(g,p):ue(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ue(19790,{direction:r.dir})}}class _s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return BS(this.inner)}size(){return this.innerSize}}const ED=new at(ae.comparator);function Dn(){return ED}const lA=new at(ae.comparator);function xu(...r){let e=lA;for(const t of r)e=e.insert(t.key,t);return e}function uA(r){let e=lA;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Pi(){return Bu()}function cA(){return Bu()}function Bu(){return new _s((r=>r.toString()),((r,e)=>r.isEqual(e)))}const TD=new at(ae.comparator),bD=new We(ae.comparator);function Ne(...r){let e=bD;for(const t of r)e=e.add(t);return e}const SD=new We(Se);function Wp(){return SD}function ey(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xu(e)?"-0":e}}function hA(r){return{integerValue:""+r}}function fA(r,e){return NS(e)?hA(e):ey(r,e)}class od{constructor(){this._=void 0}}function AD(r,e,t){return r instanceof Jo?(function(o,u){const c={fields:{[HS]:{stringValue:FS},[KS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Yp(u)&&(u=nd(u)),u&&(c.fields[GS]=u),{mapValue:c}})(t,e):r instanceof Ta?mA(r,e):r instanceof ba?gA(r,e):(function(o,u){const c=dA(o,u),m=yT(c)+yT(o.Ae);return op(c)&&op(o.Ae)?hA(m):ey(o.serializer,m)})(r,e)}function wD(r,e,t){return r instanceof Ta?mA(r,e):r instanceof ba?gA(r,e):t}function dA(r,e){return r instanceof Zo?(function(s){return op(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Jo extends od{}class Ta extends od{constructor(e){super(),this.elements=e}}function mA(r,e){const t=pA(e);for(const s of r.elements)t.some((o=>qi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ba extends od{constructor(e){super(),this.elements=e}}function gA(r,e){let t=pA(e);for(const s of r.elements)t=t.filter((o=>!qi(o,s)));return{arrayValue:{values:t}}}class Zo extends od{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yT(r){return ft(r.integerValue||r.doubleValue)}function pA(r){return tc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class gc{constructor(e,t){this.field=e,this.transform=t}}function ID(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Ta&&o instanceof Ta||s instanceof ba&&o instanceof ba?Bo(s.elements,o.elements,qi):s instanceof Zo&&o instanceof Zo?qi(s.Ae,o.Ae):s instanceof Jo&&o instanceof Jo})(r.transform,e.transform)}class RD{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ld{}function yA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ud(r.key,an.none()):new ll(r.key,r.data,an.none());{const t=r.data,s=rn.empty();let o=new We(dt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new vs(r.key,s,new En(o.toArray()),an.none())}}function CD(r,e,t){r instanceof ll?(function(o,u,c){const m=o.value.clone(),g=vT(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):r instanceof vs?(function(o,u,c){if(!gf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=vT(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(_A(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function qu(r,e,t,s){return r instanceof ll?(function(u,c,m,g){if(!gf(u.precondition,c))return m;const p=u.value.clone(),E=ET(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof vs?(function(u,c,m,g){if(!gf(u.precondition,c))return m;const p=ET(u.fieldTransforms,g,c),E=c.data;return E.setAll(_A(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,t,s):(function(u,c,m){return gf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,e,t)}function xD(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=dA(s.transform,o||null);u!=null&&(t===null&&(t=rn.empty()),t.set(s.field,u))}return t||null}function _T(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Bo(s,o,((u,c)=>ID(u,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ll extends ld{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vs extends ld{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _A(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function vT(r,e,t){const s=new Map;ge(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const u=r[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,wD(c,m,t[o]))}return s}function ET(r,e,t){const s=new Map;for(const o of r){const u=o.transform,c=t.data.field(o.field);s.set(o.field,AD(u,c,e))}return s}class ud extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ty{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CD(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=qu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=qu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=cA();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=yA(c,m);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(ye.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,s)=>_T(t,s)))&&Bo(this.baseMutations,e.baseMutations,((t,s)=>_T(t,s)))}}class ny{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ge(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return TD})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new ny(e,t,s,o)}}class iy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ND{constructor(e,t){this.count=e,this.unchangedNames=t}}var Mt,je;function DD(r){switch(r){case J.OK:return ue(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ue(15467,{code:r})}}function EA(r){if(r===void 0)return bt("GRPC error has no .code"),J.UNKNOWN;switch(r){case Mt.OK:return J.OK;case Mt.CANCELLED:return J.CANCELLED;case Mt.UNKNOWN:return J.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return J.INTERNAL;case Mt.UNAVAILABLE:return J.UNAVAILABLE;case Mt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Mt.NOT_FOUND:return J.NOT_FOUND;case Mt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Mt.ABORTED:return J.ABORTED;case Mt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Mt.DATA_LOSS:return J.DATA_LOSS;default:return ue(39323,{code:r})}}(je=Mt||(Mt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";function VD(){return new TextEncoder}const OD=new fr([4294967295,4294967295],0);function TT(r){const e=VD().encode(r),t=new gS;return t.update(e),new Uint8Array(t.digest())}function bT(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fr([t,s],0),new fr([o,u],0)]}class sy{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Nu(`Invalid padding: ${t}`);if(s<0)throw new Nu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Nu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Nu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(fr.fromNumber(s)));return o.compare(OD)===1&&(o=new fr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=TT(e),[s,o]=bT(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new sy(u,o,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=TT(e),[s,o]=bT(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pc{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new pc(ye.min(),o,new at(Se),Dn(),Ne())}}class yc{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yc(s,t,Ne(),Ne(),Ne())}}class pf{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class TA{constructor(e,t){this.targetId=e,this.Ce=t}}class bA{constructor(e,t,s=St.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ST{constructor(){this.ve=0,this.Fe=AT(),this.Me=St.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),s=Ne();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ue(38017,{changeType:u})}})),new yc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=AT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dn(),this.Je=Jh(),this.He=Jh(),this.Ye=new at(Se)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Of(u))if(s===0){const c=new ae(u.path);this.et(t,c,yt.newNoDocument(c,ye.min()))}else ge(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=ps(s).toUint8Array()}catch(g){if(g instanceof qS)return Qu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new sy(c,o,u)}catch(g){return Qu(g instanceof Nu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Of(m.target)){const g=new ae(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,yt.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let s=Ne();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new pc(e,t,this.Ye,this.je,s);return this.je=Dn(),this.Je=Jh(),this.He=Jh(),this.Ye=new at(Se),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ST,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new We(Se),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new We(Se),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ST),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jh(){return new at(ae.comparator)}function AT(){return new at(ae.comparator)}const PD={asc:"ASCENDING",desc:"DESCENDING"},kD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LD={and:"AND",or:"OR"};class UD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fp(r,e){return r.useProto3Json||Zf(e)?e:{value:e}}function Wo(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zD(r,e){return Wo(r,e.toTimestamp())}function hn(r){return ge(!!r,49232),ye.fromTimestamp((function(t){const s=gs(t);return new Ze(s.seconds,s.nanos)})(r))}function ry(r,e){return dp(r,e).canonicalString()}function dp(r,e){const t=(function(o){return new Ke(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function AA(r){const e=Ke.fromString(r);return ge(OA(e),10190,{key:e.toString()}),e}function Pf(r,e){return ry(r.databaseId,e.path)}function da(r,e){const t=AA(e);if(t.get(1)!==r.databaseId.projectId)throw new re(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new re(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ae(RA(t))}function wA(r,e){return ry(r.databaseId,e)}function IA(r){const e=AA(r);return e.length===4?Ke.emptyPath():RA(e)}function mp(r){return new Ke(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function RA(r){return ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function wT(r,e,t){return{name:Pf(r,e),fields:t.value.mapValue.fields}}function jD(r,e,t){const s=da(r,e.name),o=hn(e.updateTime),u=e.createTime?hn(e.createTime):ye.min(),c=new rn({mapValue:{fields:e.fields}}),m=yt.newFoundDocument(s,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function BD(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ue(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(ge(E===void 0||typeof E=="string",58123),St.fromBase64String(E||"")):(ge(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),St.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?J.UNKNOWN:EA(p.code);return new re(E,p.message||"")})(c);t=new bA(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=da(r,s.document.name),u=hn(s.document.updateTime),c=s.document.createTime?hn(s.document.createTime):ye.min(),m=new rn({mapValue:{fields:s.document.fields}}),g=yt.newFoundDocument(o,u,c,m),p=s.targetIds||[],E=s.removedTargetIds||[];t=new pf(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=da(r,s.document),u=s.readTime?hn(s.readTime):ye.min(),c=yt.newNoDocument(o,u),m=s.removedTargetIds||[];t=new pf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=da(r,s.document),u=s.removedTargetIds||[];t=new pf([],u,o,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new ND(o,u),m=s.targetId;t=new TA(m,c)}}return t}function kf(r,e){let t;if(e instanceof ll)t={update:wT(r,e.key,e.value)};else if(e instanceof ud)t={delete:Pf(r,e.key)};else if(e instanceof vs)t={update:wT(r,e.key,e.data),updateMask:QD(e.fieldMask)};else{if(!(e instanceof vA))return ue(16599,{Vt:e.type});t={verify:Pf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ta)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ba)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Zo)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ue(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:zD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ue(27497)})(r,e.precondition)),t}function gp(r,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?an.updateTime(hn(u.updateTime)):u.exists!==void 0?an.exists(u.exists):an.none()})(e.currentDocument):an.none(),s=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)ge(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Jo;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Ta(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new ba(E)}else"increment"in m?g=new Zo(c,m.increment):ue(16584,{proto:m});const p=dt.fromServerFormat(m.fieldPath);return new gc(p,g)})(r,o))):[];if(e.update){e.update.name;const o=da(r,e.update.name),u=new rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((E=>dt.fromServerFormat(E))))})(e.updateMask);return new vs(o,u,c,t,s)}return new ll(o,u,t,s)}if(e.delete){const o=da(r,e.delete);return new ud(o,t)}if(e.verify){const o=da(r,e.verify);return new vA(o,t)}return ue(1463,{proto:e})}function qD(r,e){return r&&r.length>0?(ge(e!==void 0,14353),r.map((t=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(ye.min())&&(c=hn(u)),new RD(c,o.transformResults||[])})(t,e)))):[]}function CA(r,e){return{documents:[wA(r,e.path)]}}function xA(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=wA(r,o);const u=(function(p){if(p.length!==0)return VA(st.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(I){return{field:Do(I.field),direction:HD(I.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=fp(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function NA(r){let e=IA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ge(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(T){const I=DA(T);return I instanceof st&&Zp(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((I=>(function(K){return new Vf(Vo(K.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(I)))})(t.orderBy));let m=null;t.limit&&(m=(function(T){let I;return I=typeof T=="object"?T.value:T,Zf(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(T){const I=!!T.before,L=T.values||[];return new Xo(L,I)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const I=!T.before,L=T.values||[];return new Xo(L,I)})(t.endAt)),sA(e,o,c,u,m,"F",g,p)}function FD(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Vo(t.unaryFilter.field);return Ue.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Vo(t.unaryFilter.field);return Ue.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Vo(t.unaryFilter.field);return Ue.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vo(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ue.create(Vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return st.create(t.compositeFilter.filters.map((s=>DA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(t.compositeFilter.op))})(r):ue(30097,{filter:r})}function HD(r){return PD[r]}function GD(r){return kD[r]}function KD(r){return LD[r]}function Do(r){return{fieldPath:r.canonicalString()}}function Vo(r){return dt.fromServerFormat(r.fieldPath)}function VA(r){return r instanceof Ue?(function(t){if(t.op==="=="){if(uT(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NAN"}};if(lT(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uT(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NAN"}};if(lT(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(t.field),op:GD(t.op),value:t.value}}})(r):r instanceof st?(function(t){const s=t.getFilters().map((o=>VA(o)));return s.length===1?s[0]:{compositeFilter:{op:KD(t.op),filters:s}}})(r):ue(54877,{filter:r})}function QD(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function OA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class cs{constructor(e,t,s,o,u=ye.min(),c=ye.min(),m=St.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class MA{constructor(e){this.yt=e}}function YD(r,e){let t;if(e.document)t=jD(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ae.fromSegments(e.noDocument.path),o=Aa(e.noDocument.readTime);t=yt.newNoDocument(s,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue(56709);{const s=ae.fromSegments(e.unknownDocument.path),o=Aa(e.unknownDocument.version);t=yt.newUnknownDocument(s,o)}}return e.readTime&&t.setReadTime((function(o){const u=new Ze(o[0],o[1]);return ye.fromTimestamp(u)})(e.readTime)),t}function IT(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(u,c){return{name:Pf(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(u,c.version.toTimestamp()),createTime:Wo(u,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Sa(e.version)};else{if(!e.isUnknownDocument())return ue(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Sa(e.version)}}return s}function Lf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Sa(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Aa(r){const e=new Ze(r.seconds,r.nanoseconds);return ye.fromTimestamp(e)}function oa(r,e){const t=(e.baseMutations||[]).map((u=>gp(r.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const s=e.mutations.map((u=>gp(r.yt,u))),o=Ze.fromMillis(e.localWriteTimeMs);return new ty(e.batchId,o,t,s)}function Du(r){const e=Aa(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Aa(r.lastLimboFreeSnapshotVersion):ye.min();let s;return s=(function(u){return u.documents!==void 0})(r.query)?(function(u){const c=u.documents.length;return ge(c===1,1966,{count:c}),Vn(rd(IA(u.documents[0])))})(r.query):(function(u){return Vn(NA(u))})(r.query),new cs(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,St.fromBase64String(r.resumeToken))}function PA(r,e){const t=Sa(e.snapshotVersion),s=Sa(e.lastLimboFreeSnapshotVersion);let o;o=Of(e.target)?CA(r.yt,e.target):xA(r.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ea(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:o}}function kA(r){const e=NA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hp(e,e.limit,"L"):e}function Pg(r,e){return new iy(e.largestBatchId,gp(r.yt,e.overlayMutation))}function RT(r,e){const t=e.path.lastSegment();return[r,on(e.path.popLast()),t]}function CT(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:Sa(s.readTime),documentKey:on(s.documentKey.path),largestBatchId:s.largestBatchId}}class XD{getBundleMetadata(e,t){return xT(e).get(t).next((s=>{if(s)return(function(u){return{id:u.bundleId,createTime:Aa(u.createTime),version:u.version}})(s)}))}saveBundleMetadata(e,t){return xT(e).put((function(o){return{bundleId:o.id,createTime:Sa(hn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return NT(e).get(t).next((s=>{if(s)return(function(u){return{name:u.name,query:kA(u.bundledQuery),readTime:Aa(u.readTime)}})(s)}))}saveNamedQuery(e,t){return NT(e).put((function(o){return{name:o.name,readTime:Sa(hn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function xT(r){return Bt(r,Wf)}function NT(r){return Bt(r,ed)}class cd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new cd(e,s)}getOverlay(e,t){return Tu(e).get(RT(this.userId,t)).next((s=>s?Pg(this.serializer,s):null))}getOverlays(e,t){const s=Pi();return U.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){const o=[];return s.forEach(((u,c)=>{const m=new iy(t,c);o.push(this.St(e,m))})),U.waitFor(o)}removeOverlaysForBatchId(e,t,s){const o=new Set;t.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,s+1],!1,!0);u.push(Tu(e).Z(sp,m))})),U.waitFor(u)}getOverlaysForCollection(e,t,s){const o=Pi(),u=on(t),c=IDBKeyRange.bound([this.userId,u,s],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Tu(e).J(sp,c).next((m=>{for(const g of m){const p=Pg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,s,o){const u=Pi();let c;const m=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tu(e).ee({index:kS,range:m},((g,p,E)=>{const T=Pg(this.serializer,p);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>u))}St(e,t){return Tu(e).put((function(o,u,c){const[m,g,p]=RT(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:kf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Tu(r){return Bt(r,td)}class $D{bt(e){return Bt(e,Kp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t?.value;return s?St.fromUint8Array(s):St.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class la{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const s=ft(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Xu(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=gs(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ps(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?YS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):id(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ue(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const o of Object.keys(s))this.Ot(o,t),this.Ct(s[o],t)}kt(e,t){const s=e.fields||{};this.Ft(t,53);const o=Qo,u=s[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(u)),this.Ot(o,t),this.Ct(s[o],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const o of s)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}la.Kt=new la;const wo=255;function JD(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function DT(r){const e=64-(function(s){let o=0;for(let u=0;u<8;++u){const c=JD(255&s[u]);if(o+=c,c!==8)break}return o})(r);return Math.ceil(e/8)}class ZD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),s=DT(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let o=t.length-s;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),s=DT(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let o=t.length-s;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(wo),this.sn(255)}_n(){this.an(wo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let o=1;o<t.length;++o)t[o]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===wo?(this.sn(wo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===wo?(this.an(wo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const o=new Uint8Array(s);o.set(this.buffer),this.buffer=o}}class WD{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class eV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class bu{constructor(){this.cn=new ZD,this.ln=new WD(this.cn),this.hn=new eV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ua{constructor(e,t,s,o){this.Tn=e,this.In=t,this.En=s,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new ua(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:yf(this.En),directionalValue:yf(this.dn),orderedDocumentKey:yf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const o=this.Rn(e,t,s);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function er(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=VT(r.En,e.En),t!==0?t:(t=VT(r.dn,e.dn),t!==0?t:ae.comparator(r.In,e.In)))}function VT(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function yf(r){return Cb()?(function(t){let s="";for(let o=0;o<t.length;o++)s+=String.fromCharCode(t[o]);return s})(r):r}function OT(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(r)}class MT{constructor(e){this.mn=new We(((t,s)=>dt.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=tp(e);if(t!==void 0&&!this.wn(t))return!1;const s=sa(e);let o=new Set,u=0,c=0;for(;u<s.length&&this.wn(s[u]);++u)o=o.add(s[u].fieldPath.canonicalString());if(u===s.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=s[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<s.length;++u){const m=s[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new We(dt.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new uf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new uf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new uf(s.field,s.dir==="asc"?0:1)));return new Rf(Rf.UNKNOWN_ID,this.collectionId,t,Yu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function LA(r){if(ge(r instanceof Ue||r instanceof st,20012),r instanceof Ue){if(r instanceof iA){const t=r.value.arrayValue?.values?.map((s=>Ue.create(r.field,"==",s)))||[];return st.create(t,"or")}return r}const e=r.filters.map((t=>LA(t)));return st.create(e,r.op)}function tV(r){if(r.getFilters().length===0)return[];const e=_p(LA(r));return ge(UA(e),7391),pp(e)||yp(e)?[e]:e.getFilters()}function pp(r){return r instanceof Ue}function yp(r){return r instanceof st&&Zp(r)}function UA(r){return pp(r)||yp(r)||(function(t){if(t instanceof st&&lp(t)){for(const s of t.getFilters())if(!pp(s)&&!yp(s))return!1;return!0}return!1})(r)}function _p(r){if(ge(r instanceof Ue||r instanceof st,34018),r instanceof Ue)return r;if(r.filters.length===1)return _p(r.filters[0]);const e=r.filters.map((s=>_p(s)));let t=st.create(e,r.op);return t=Uf(t),UA(t)?t:(ge(t instanceof st,64498),ge($o(t),40251),ge(t.filters.length>1,57927),t.filters.reduce(((s,o)=>ay(s,o))))}function ay(r,e){let t;return ge(r instanceof Ue||r instanceof st,38388),ge(e instanceof Ue||e instanceof st,25473),t=r instanceof Ue?e instanceof Ue?(function(o,u){return st.create([o,u],"and")})(r,e):PT(r,e):e instanceof Ue?PT(e,r):(function(o,u){if(ge(o.filters.length>0&&u.filters.length>0,48005),$o(o)&&$o(u))return eA(o,u.getFilters());const c=lp(o)?o:u,m=lp(o)?u:o,g=c.filters.map((p=>ay(p,m)));return st.create(g,"or")})(r,e),Uf(t)}function PT(r,e){if($o(e))return eA(e,r.getFilters());{const t=e.filters.map((s=>ay(r,s)));return st.create(t,"or")}}function Uf(r){if(ge(r instanceof Ue||r instanceof st,11850),r instanceof Ue)return r;const e=r.getFilters();if(e.length===1)return Uf(e[0]);if(ZS(r))return r;const t=e.map((o=>Uf(o))),s=[];return t.forEach((o=>{o instanceof Ue?s.push(o):o instanceof st&&(o.op===r.op?s.push(...o.filters):s.push(o))})),s.length===1?s[0]:st.create(s,r.op)}class nV{constructor(){this.Cn=new oy}addToCollectionParentIndex(e,t){return this.Cn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(On.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(On.min())}updateCollectionGroup(e,t,s){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class oy{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new We(Ke.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new We(Ke.comparator)).toArray()}}const kT="IndexedDbIndexManager",Zh=new Uint8Array(0);class iV{constructor(e,t){this.databaseId=t,this.vn=new oy,this.Fn=new _s((s=>Ea(s)),((s,o)=>dc(s,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:s,parent:on(o)};return LT(e).put(u)}return U.resolve()}getCollectionParents(e,t){const s=[],o=IDBKeyRange.bound([t,""],[bS(t),""],!1,!0);return LT(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;s.push(Mi(c.parent))}return s}))}addFieldIndex(e,t){const s=Su(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=s.add(o);if(t.indexState){const c=Ro(e);return u.next((m=>{c.put(CT(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const s=Su(e),o=Ro(e),u=Io(e);return s.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Su(e),s=Io(e),o=Ro(e);return t.Z().next((()=>s.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return U.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((o=>{if(o===0||o===1){const u=new MT(s).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const s=Io(e);let o=!0;const u=new Map;return U.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Ne();const m=[];return U.forEach(u,((g,p)=>{ee(kT,`Using index ${(function(ne){return`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map((Ae=>`${Ae.fieldPath}:${Ae.kind}`)).join(",")}`})(g)} to execute ${Ea(t)}`);const E=(function(ne,Ae){const Te=tp(Ae);if(Te===void 0)return null;for(const oe of Mf(ne,Te.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null})(p,g),T=(function(ne,Ae){const Te=new Map;for(const oe of sa(Ae))for(const A of Mf(ne,oe.fieldPath))switch(A.op){case"==":case"in":Te.set(oe.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return Te.set(oe.fieldPath.canonicalString(),A.value),Array.from(Te.values())}return null})(p,g),I=(function(ne,Ae){const Te=[];let oe=!0;for(const A of sa(Ae)){const w=A.kind===0?mT(ne,A.fieldPath,ne.startAt):gT(ne,A.fieldPath,ne.startAt);Te.push(w.value),oe&&(oe=w.inclusive)}return new Xo(Te,oe)})(p,g),L=(function(ne,Ae){const Te=[];let oe=!0;for(const A of sa(Ae)){const w=A.kind===0?gT(ne,A.fieldPath,ne.endAt):mT(ne,A.fieldPath,ne.endAt);Te.push(w.value),oe&&(oe=w.inclusive)}return new Xo(Te,oe)})(p,g),K=this.On(g,p,I),j=this.On(g,p,L),X=this.Nn(g,p,T),fe=this.Bn(g.indexId,E,K,I.inclusive,j,L.inclusive,X);return U.forEach(fe,(he=>s.Y(he,t.limit).next((ne=>{ne.forEach((Ae=>{const Te=ae.fromSegments(Ae.documentKey);c.has(Te)||(c=c.add(Te),m.push(Te))}))}))))})).next((()=>m))}return U.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=tV(st.create(e.filters,"and")).map((s=>cp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(s.length,u.length),p=g/(t!=null?t.length:1),E=[];for(let T=0;T<g;++T){const I=t?this.Ln(t[T/p]):Zh,L=this.kn(e,I,s[T%p],o),K=this.qn(e,I,u[T%p],c),j=m.map((X=>this.kn(e,I,X,!0)));E.push(...this.createRange(L,K,j))}return E}kn(e,t,s,o){const u=new ua(e,ae.empty(),t,s);return o?u:u.An()}qn(e,t,s,o){const u=new ua(e,ae.empty(),t,s);return o?u.An():u}xn(e,t){const s=new MT(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)s.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let s=2;const o=this.Mn(t);return U.forEach(o,(u=>this.xn(e,u).next((c=>{c?s!==0&&c.fields.length<(function(g){let p=new We(dt.comparator),E=!1;for(const T of g.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?E=!0:p=p.add(I.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)})(u)&&(s=1):s=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&s===2?1:s))}Qn(e,t){const s=new bu;for(const o of sa(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=s.Pn(o.kind);la.Kt.Dt(u,c)}return s.un()}Ln(e){const t=new bu;return la.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new bu;return la.Kt.Dt(Jp(this.databaseId,t),s.Pn((function(u){const c=sa(u);return c.length===0?0:c[c.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let o=[];o.push(new bu);let u=0;for(const c of sa(e)){const m=s[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&tc(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);la.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const o=[...e],u=[];for(const c of s.arrayValue.values||[])for(const m of o){const g=new bu;g.seed(m.un()),la.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((s=>s instanceof Ue&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=Su(e),o=Ro(e);return(t?s.J(ip,IDBKeyRange.bound(t,t)):s.J()).next((u=>{const c=[];return U.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,T){const I=T?new Yu(T.sequenceNumber,new On(Aa(T.readTime),new ae(Mi(T.documentKey)),T.largestBatchId)):Yu.empty(),L=E.fields.map((([K,j])=>new uf(dt.fromServerFormat(K),j)));return new Rf(E.indexId,E.collectionGroup,L,I)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,o)=>{const u=s.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Se(s.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const o=Su(e),u=Ro(e);return this.Gn(e).next((c=>o.J(ip,IDBKeyRange.bound(t,t)).next((m=>U.forEach(m,(g=>u.put(CT(g.indexId,this.uid,c,s))))))))}updateIndexEntries(e,t){const s=new Map;return U.forEach(t,((o,u)=>{const c=s.get(o.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(s.set(o.collectionGroup,m),U.forEach(m,(g=>this.zn(e,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?U.resolve():this.Jn(e,u,g,p,E)})))))))}))}Hn(e,t,s,o){return Io(e).put(o.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,o){return Io(e).delete(o.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const o=Io(e);let u=new We(er);return o.ee({index:PS,range:IDBKeyRange.only([s.indexId,this.uid,yf(this.$n(s,t))])},((c,m)=>{u=u.add(new ua(s.indexId,t,OT(m.arrayValue),OT(m.directionalValue)))})).next((()=>u))}jn(e,t){let s=new We(er);const o=this.Qn(t,e);if(o==null)return s;const u=tp(t);if(u!=null){const c=e.data.field(u.fieldPath);if(tc(c))for(const m of c.arrayValue.values||[])s=s.add(new ua(t.indexId,e.key,this.Ln(m),o))}else s=s.add(new ua(t.indexId,e.key,Zh,o));return s}Jn(e,t,s,o,u){ee(kT,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,E,T,I){const L=g.getIterator(),K=p.getIterator();let j=Ao(L),X=Ao(K);for(;j||X;){let fe=!1,he=!1;if(j&&X){const ne=E(j,X);ne<0?he=!0:ne>0&&(fe=!0)}else j!=null?he=!0:fe=!0;fe?(T(X),X=Ao(K)):he?(I(j),j=Ao(L)):(j=Ao(L),X=Ao(K))}})(o,u,er,(m=>{c.push(this.Hn(e,t,s,m))}),(m=>{c.push(this.Yn(e,t,s,m))})),U.waitFor(c)}Gn(e){let t=1;return Ro(e).ee({index:MS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((c,m)=>er(c,m))).filter(((c,m,g)=>!m||er(c,g[m-1])!==0));const o=[];o.push(e);for(const c of s){const m=er(c,e),g=er(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Zh,ae.empty()),g=o[c+1].Vn(this.uid,Zh,ae.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return er(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(UT)}getMinOffset(e,t){return U.mapArray(this.Mn(t),(s=>this.xn(e,s).next((o=>o||ue(44426))))).next(UT)}}function LT(r){return Bt(r,Zu)}function Io(r){return Bt(r,Uu)}function Su(r){return Bt(r,Gp)}function Ro(r){return Bt(r,Lu)}function UT(r){ge(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const o=r[s].indexState.offset;qp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new On(e.readTime,e.documentKey,t)}const zT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}function jA(r,e,t){const s=r.store(oi),o=r.store(Fo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=s.ee({range:c},((E,T,I)=>(m++,I.delete())));u.push(g.next((()=>{ge(m===1,47070,{batchId:t.batchId})})));const p=[];for(const E of t.mutations){const T=DS(e,E.key.path,t.batchId);u.push(o.delete(T)),p.push(E.key)}return U.waitFor(u).next((()=>p))}function zf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ue(14731);e=r.noDocument}return JSON.stringify(e).length}sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(zA,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class hd{constructor(e,t,s,o){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=o,this.Xn={}}static wt(e,t,s,o){ge(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new hd(u,t,s,o)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tr(e).ee({index:ca,range:s},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,s,o){const u=Oo(e),c=tr(e);return c.add({}).next((m=>{ge(typeof m=="number",49019);const g=new ty(m,t,s,o),p=(function(L,K,j){const X=j.baseMutations.map((he=>kf(L.yt,he))),fe=j.mutations.map((he=>kf(L.yt,he)));return{userId:K,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:X,mutations:fe}})(this.serializer,this.userId,g),E=[];let T=new We(((I,L)=>Se(I.canonicalString(),L.canonicalString())));for(const I of o){const L=DS(this.userId,I.key.path,m);T=T.add(I.key.path.popLast()),E.push(c.put(p)),E.push(u.put(L,PN))}return T.forEach((I=>{E.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),U.waitFor(E).next((()=>g))}))}lookupMutationBatch(e,t){return tr(e).get(t).next((s=>s?(ge(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),oa(this.serializer,s)):null))}er(e,t){return this.Xn[t]?U.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const o=s.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=IDBKeyRange.lowerBound([this.userId,s]);let u=null;return tr(e).ee({index:ca,range:o},((c,m,g)=>{m.userId===this.userId&&(ge(m.batchId>=s,47524,{tr:s}),u=oa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=ha;return tr(e).ee({index:ca,range:t,reverse:!0},((o,u,c)=>{s=u.batchId,c.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ha],[this.userId,Number.POSITIVE_INFINITY]);return tr(e).J(ca,t).next((s=>s.map((o=>oa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=cf(this.userId,t.path),o=IDBKeyRange.lowerBound(s),u=[];return Oo(e).ee({range:o},((c,m,g)=>{const[p,E,T]=c,I=Mi(E);if(p===this.userId&&t.path.isEqual(I))return tr(e).get(T).next((L=>{if(!L)throw ue(61480,{nr:c,batchId:T});ge(L.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:L.userId,batchId:T}),u.push(oa(this.serializer,L))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new We(Se);const o=[];return t.forEach((u=>{const c=cf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Oo(e).ee({range:m},((p,E,T)=>{const[I,L,K]=p,j=Mi(L);I===this.userId&&u.path.isEqual(j)?s=s.add(K):T.done()}));o.push(g)})),U.waitFor(o).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1,u=cf(this.userId,s),c=IDBKeyRange.lowerBound(u);let m=new We(Se);return Oo(e).ee({range:c},((g,p,E)=>{const[T,I,L]=g,K=Mi(I);T===this.userId&&s.isPrefixOf(K)?K.length===o&&(m=m.add(L)):E.done()})).next((()=>this.rr(e,m)))}rr(e,t){const s=[],o=[];return t.forEach((u=>{o.push(tr(e).get(u).next((c=>{if(c===null)throw ue(35274,{batchId:u});ge(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),s.push(oa(this.serializer,c))})))})),U.waitFor(o).next((()=>s))}removeMutationBatch(e,t){return jA(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),U.forEach(s,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const s=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Oo(e).ee({range:s},((u,c,m)=>{if(u[0]===this.userId){const g=Mi(u[1]);o.push(g)}else m.done()})).next((()=>{ge(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return BA(e,this.userId,t)}_r(e){return qA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ha,lastStreamToken:""}))}}function BA(r,e,t){const s=cf(e,t.path),o=s[1],u=IDBKeyRange.lowerBound(s);let c=!1;return Oo(r).ee({range:u,X:!0},((m,g,p)=>{const[E,T,I]=m;E===e&&T===o&&(c=!0),p.done()})).next((()=>c))}function tr(r){return Bt(r,oi)}function Oo(r){return Bt(r,Fo)}function qA(r){return Bt(r,$u)}class wa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wa(0)}static cr(){return new wa(-1)}}class sV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new wa(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ye.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,s&&(o.lastRemoteSnapshotVersion=s.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Co(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(ge(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let o=0;const u=[];return Co(e).ee(((c,m)=>{const g=Du(m);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>U.waitFor(u))).next((()=>o))}forEachTarget(e,t){return Co(e).ee(((s,o)=>{const u=Du(o);t(u)}))}lr(e){return jT(e).get(Nf).next((t=>(ge(t!==null,2888),t)))}hr(e,t){return jT(e).put(Nf,t)}Pr(e,t){return Co(e).put(PA(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Ea(t),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let u=null;return Co(e).ee({range:o,index:OS},((c,m,g)=>{const p=Du(m);dc(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,s){const o=[],u=or(e);return t.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:s,path:m})),o.push(this.referenceDelegate.addReference(e,s,c))})),U.waitFor(o)}removeMatchingKeys(e,t,s){const o=or(e);return U.forEach(t,(u=>{const c=on(u.path);return U.waitFor([o.delete([s,c]),this.referenceDelegate.removeReference(e,s,u)])}))}removeMatchingKeysForTargetId(e,t){const s=or(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(o)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),o=or(e);let u=Ne();return o.ee({range:s,X:!0},((c,m,g)=>{const p=Mi(c[1]),E=new ae(p);u=u.add(E)})).next((()=>u))}containsKey(e,t){const s=on(t.path),o=IDBKeyRange.bound([s],[bS(s)],!1,!0);let u=0;return or(e).ee({index:Hp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return Co(e).get(t).next((s=>s?Du(s):null))}}function Co(r){return Bt(r,Ho)}function jT(r){return Bt(r,fa)}function or(r){return Bt(r,Go)}const BT="LruGarbageCollector",FA=1048576;function qT([r,e],[t,s]){const o=Se(r,t);return o===0?Se(e,s):o}class rV{constructor(e){this.Ir=e,this.buffer=new We(qT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();qT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(BT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){br(t)?ee(BT,"Ignoring IndexedDB error during garbage collection: ",t):await Tr(t)}await this.Vr(3e5)}))}}class aV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(vn.ce);const s=new rV(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(zT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,t)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),xo()<=ke.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function GA(r,e){return new aV(r,e)}class oV{constructor(e,t){this.db=e,this.garbageCollector=GA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,o)=>t(o)))}addReference(e,t,s){return Wh(e,s)}removeReference(e,t,s){return Wh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Wh(e,t)}br(e,t){return(function(o,u){let c=!1;return qA(o).te((m=>BA(o,m,u).next((g=>(g&&(c=!0),U.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,s.getEntry(e,c).next((()=>(s.removeEntry(c,ye.min()),or(e).delete((function(T){return[0,on(T.path)]})(c)))))}));o.push(g)}})).next((()=>U.waitFor(o))).next((()=>s.apply(e))).next((()=>u))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Wh(e,t)}Sr(e,t){const s=or(e);let o,u=vn.ce;return s.ee({index:Hp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&t(new ae(Mi(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&t(new ae(Mi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wh(r,e){return or(r).put((function(s,o){return{targetId:0,path:on(s.path),sequenceNumber:o}})(e,r.currentSequenceNumber))}class KA{constructor(){this.changes=new _s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?U.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return na(e).put(s)}removeEntry(e,t,s){return na(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Lf(c),m[m.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=yt.newInvalidDocument(t);return na(e).ee({index:hf,range:IDBKeyRange.only(Au(t))},((o,u)=>{s=this.Cr(t,u)})).next((()=>s))}vr(e,t){let s={size:0,document:yt.newInvalidDocument(t)};return na(e).ee({index:hf,range:IDBKeyRange.only(Au(t))},((o,u)=>{s={document:this.Cr(t,u),size:zf(u)}})).next((()=>s))}getEntries(e,t){let s=Dn();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);s=s.insert(o,c)})).next((()=>s))}Mr(e,t){let s=Dn(),o=new at(ae.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);s=s.insert(u,m),o=o.insert(u,zf(c))})).next((()=>({documents:s,Or:o})))}Fr(e,t,s){if(t.isEmpty())return U.resolve();let o=new We(GT);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Au(o.first()),Au(o.last())),c=o.getIterator();let m=c.getNext();return na(e).ee({index:hf,range:u},((g,p,E)=>{const T=ae.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&GT(m,T)<0;)s(m,null),m=c.getNext();m&&m.isEqual(T)&&(s(m,p),m=c.hasNext()?c.getNext():null),m?E.j(Au(m)):E.done()})).next((()=>{for(;m;)s(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,s,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Lf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u?.incrementDocumentReadCount(p.length);let E=Dn();for(const T of p){const I=this.Cr(ae.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(mc(t,I)||o.has(I.key))&&(E=E.insert(I.key,I))}return E}))}getAllFromCollectionGroup(e,t,s,o){let u=Dn();const c=HT(t,s),m=HT(t,On.max());return na(e).ee({index:VS,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const T=this.Cr(ae.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new uV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return FT(e).get(np).next((t=>(ge(!!t,20021),t)))}Dr(e,t){return FT(e).put(np,t)}Cr(e,t){if(t){const s=YD(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(ye.min())))return s}return yt.newInvalidDocument(e)}}function QA(r){return new lV(r)}class uV extends KA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new _s((s=>s.toString()),((s,o)=>s.isEqual(o)))}applyChanges(e){const t=[];let s=0,o=new We(((u,c)=>Se(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=IT(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=zf(g);s+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(s-=m.size,this.trackRemovals){const g=IT(this.Nr.serializer,c.convertToNoDocument(ye.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,s)),U.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:s.get(u).readTime})})),s)))}}function FT(r){return Bt(r,Ju)}function na(r){return Bt(r,xf)}function Au(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HT(r,e){const t=e.documentKey.path.toArray();return[r,Lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GT(r,e){const t=r.path.toArray(),s=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<s.length-2;++u)if(o=Se(t[u],s[u]),o)return o;return o=Se(t.length,s.length),o||(o=Se(t[t.length-2],s[s.length-2]),o||Se(t[t.length-1],s[s.length-1]))}class cV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class YA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&qu(s.mutation,o,En.empty(),Ze.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ne()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ne()){const o=Pi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let c=xu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Pi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ne())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,o){let u=Dn();const c=Bu(),m=(function(){return Bu()})();return t.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof vs)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),qu(E.mutation,p,E.mutation.getFieldMask(),Ze.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),t.forEach(((p,E)=>m.set(p,new cV(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Bu();let o=new at(((c,m)=>c-m)),u=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let E=s.get(g)||En.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||Ne()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=cA();E.forEach((I=>{if(!u.has(I)){const L=yA(t.get(I),s.get(I));L!==null&&T.set(I,L),u=u.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return U.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):U.resolve(Pi());let m=qo,g=u;return c.next((p=>U.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?U.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{g=g.insert(E,I)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ne()))).next((E=>({batchId:m,changes:uA(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((s=>{let o=xu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let c=xu();return this.indexManager.getCollectionParents(e,u).next((m=>U.forEach(m,(g=>{const p=(function(T,I){return new sd(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((E=>{E.forEach(((T,I)=>{c=c.insert(T,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,yt.newInvalidDocument(E)))}));let m=xu();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&qu(E.mutation,p,En.empty(),Ze.now()),mc(t,p)&&(m=m.insert(g,p))})),m}))}}class hV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return U.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:kA(o.bundledQuery),readTime:hn(o.readTime)}})(t)),U.resolve()}}class fV{constructor(){this.overlays=new at(ae.comparator),this.qr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Pi();return U.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),U.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),U.resolve()}getOverlaysForCollection(e,t,s){const o=Pi(),u=t.length+1,c=new ae(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return U.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new at(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=Pi(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Pi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return U.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new iy(t,s));let u=this.qr.get(t);u===void 0&&(u=Ne(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}class dV{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class ly{constructor(){this.Qr=new We(Gt.$r),this.Ur=new We(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ae(new Ke([])),s=new Gt(t,e),o=new Gt(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new Ke([])),s=new Gt(t,e),o=new Gt(t,e+1);let u=Ne();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Gt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Se(e.Yr,t.Yr)}static Kr(e,t){return Se(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class mV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new We(Gt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ty(u,t,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Gt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return U.resolve(c)}lookupMutationBatch(e,t){return U.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return U.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ha:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),U.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new We(Se);return t.forEach((o=>{const u=new Gt(o,0),c=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),U.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;ae.isDocumentKey(u)||(u=u.child(""));const c=new Gt(new ae(u),0);let m=new We(Se);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),U.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return U.forEach(t.mutations,(o=>{const u=new Gt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Gt(t,0),o=this.Zr.firstAfterOrEqual(s);return U.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gV{constructor(e){this.ri=e,this.docs=(function(){return new at(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return U.resolve(s?s.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let s=Dn();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():yt.newInvalidDocument(o))})),U.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Dn();const c=t.path,m=new ae(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||qp(IS(E),s)<=0||(o.has(E.key)||mc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return U.resolve(u)}getAllFromCollectionGroup(e,t,s,o){ue(9500)}ii(e,t){return U.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new pV(this)}getSize(e){return U.resolve(this.size)}}class pV extends KA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),U.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class yV{constructor(e){this.persistence=e,this.si=new _s((t=>Ea(t)),dc),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new ly,this.targetCount=0,this.ai=wa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),U.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Pr(t),U.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),U.waitFor(u).next((()=>o))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return U.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),U.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),U.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return U.resolve(s)}containsKey(e,t){return U.resolve(this._i.containsKey(t))}}class uy{constructor(e,t){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new dV,this.referenceDelegate=e(this),this.Pi=new yV(this),this.indexManager=new nV,this.remoteDocumentCache=(function(o){return new gV(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new MA(t),this.Ii=new hV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new mV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ee("MemoryPersistence","Starting transaction:",e);const o=new _V(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return U.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class _V extends CS{constructor(e){super(),this.currentSequenceNumber=e}}class fd{constructor(e){this.persistence=e,this.Ri=new ly,this.Vi=null}static mi(e){return new fd(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),U.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(s=>{const o=ae.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class jf{constructor(e,t){this.persistence=e,this.pi=new _s((s=>on(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=GA(this,t)}static mi(e,t){return new jf(e,t)}Ei(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return U.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?U.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,u.removeEntry(c,ye.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),U.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=df(e.data.value)),t}br(e,t,s){return U.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return U.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class vV{constructor(e){this.serializer=e}k(e,t,s,o){const u=new Jf("createOrUpgrade",t);s<1&&o>=1&&((function(g){g.createObjectStore(fc)})(e),(function(g){g.createObjectStore($u,{keyPath:MN}),g.createObjectStore(oi,{keyPath:nT,autoIncrement:!0}).createIndex(ca,iT,{unique:!0}),g.createObjectStore(Fo)})(e),KT(e),(function(g){g.createObjectStore(ra)})(e));let c=U.resolve();return s<3&&o>=3&&(s!==0&&((function(g){g.deleteObjectStore(Go),g.deleteObjectStore(Ho),g.deleteObjectStore(fa)})(e),KT(e)),c=c.next((()=>(function(g){const p=g.store(fa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return p.put(Nf,E)})(u)))),s<4&&o>=4&&(s!==0&&(c=c.next((()=>(function(g,p){return p.store(oi).J().next((T=>{g.deleteObjectStore(oi),g.createObjectStore(oi,{keyPath:nT,autoIncrement:!0}).createIndex(ca,iT,{unique:!0});const I=p.store(oi),L=T.map((K=>I.put(K)));return U.waitFor(L)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Ko,{keyPath:FN})})(e)}))),s<5&&o>=5&&(c=c.next((()=>this.yi(u)))),s<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Ju)})(e),this.wi(u))))),s<7&&o>=7&&(c=c.next((()=>this.Si(u)))),s<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),s<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&o>=10&&(c=c.next((()=>this.Di(u)))),s<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Wf,{keyPath:HN})})(e),(function(g){g.createObjectStore(ed,{keyPath:GN})})(e)}))),s<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(td,{keyPath:ZN});p.createIndex(sp,WN,{unique:!1}),p.createIndex(kS,eD,{unique:!1})})(e)}))),s<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(xf,{keyPath:kN});p.createIndex(hf,LN),p.createIndex(VS,UN)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(ra)))),s<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),s<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Gp,{keyPath:KN,autoIncrement:!0}).createIndex(ip,QN,{unique:!1}),g.createObjectStore(Lu,{keyPath:YN}).createIndex(MS,XN,{unique:!1}),g.createObjectStore(Uu,{keyPath:$N}).createIndex(PS,JN,{unique:!1})})(e)))),s<16&&o>=16&&(c=c.next((()=>{t.objectStore(Lu).clear()})).next((()=>{t.objectStore(Uu).clear()}))),s<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Kp,{keyPath:tD})})(e)}))),s<18&&o>=18&&Cb()&&(c=c.next((()=>{t.objectStore(Lu).clear()})).next((()=>{t.objectStore(Uu).clear()}))),c}wi(e){let t=0;return e.store(ra).ee(((s,o)=>{t+=zf(o)})).next((()=>{const s={byteSize:t};return e.store(Ju).put(np,s)}))}yi(e){const t=e.store($u),s=e.store(oi);return t.J().next((o=>U.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ha],[u.userId,u.lastAcknowledgedBatchId]);return s.J(ca,c).next((m=>U.forEach(m,(g=>{ge(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=oa(this.serializer,g);return jA(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Go),s=e.store(ra);return e.store(fa).get(Nf).next((o=>{const u=[];return s.ee(((c,m)=>{const g=new Ke(c),p=(function(T){return[0,on(T)]})(g);u.push(t.get(p).next((E=>E?U.resolve():(T=>t.put({targetId:0,path:on(T),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>U.waitFor(u)))}))}bi(e,t){e.createObjectStore(Zu,{keyPath:qN});const s=t.store(Zu),o=new oy,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return s.put({collectionId:m,parent:on(g)})}};return t.store(ra).ee({X:!0},((c,m)=>{const g=new Ke(c);return u(g.popLast())})).next((()=>t.store(Fo).ee({X:!0},(([c,m,g],p)=>{const E=Mi(m);return u(E.popLast())}))))}Di(e){const t=e.store(Ho);return t.ee(((s,o)=>{const u=Du(o),c=PA(this.serializer,u);return t.put(c)}))}Ci(e,t){const s=t.store(ra),o=[];return s.ee(((u,c)=>{const m=t.store(xf),g=(function(T){return T.document?new ae(Ke.fromString(T.document.name).popFirst(5)):T.noDocument?ae.fromSegments(T.noDocument.path):T.unknownDocument?ae.fromSegments(T.unknownDocument.path):ue(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>U.waitFor(o)))}Fi(e,t){const s=t.store(oi),o=QA(this.serializer),u=new uy(fd.mi,this.serializer.yt);return s.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Ne();oa(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),U.forEach(m,((g,p)=>{const E=new nn(p),T=cd.wt(this.serializer,E),I=u.getIndexManager(E),L=hd.wt(E,this.serializer,I,u.referenceDelegate);return new YA(o,L,T,I).recalculateAndSaveOverlaysForDocumentKeys(new rp(t,vn.ce),g).next()}))}))}}function KT(r){r.createObjectStore(Go,{keyPath:jN}).createIndex(Hp,BN,{unique:!0}),r.createObjectStore(Ho,{keyPath:"targetId"}).createIndex(OS,zN,{unique:!0}),r.createObjectStore(fa)}const nr="IndexedDbPersistence",kg=18e5,Lg=5e3,Ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EV="main";class cy{constructor(e,t,s,o,u,c,m,g,p,E,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!cy.v())throw new re(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oV(this,o),this.$i=t+EV,this.serializer=new MA(g),this.Ui=new dr(this.$i,this.Ni,new vV(this.serializer)),this.hi=new $D,this.Pi=new sV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QA(this.serializer),this.Ii=new XD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&bt(nr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(J.FAILED_PRECONDITION,Ug);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new vn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(br(e))return ee(nr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(nr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return wu(e).get(So).next((t=>U.resolve(this.es(t))))}ts(e){return ef(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,kg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=Bt(t,Ko);return s.J().next((o=>{const u=this.ss(o,kg),c=o.filter((m=>u.indexOf(m)===-1));return U.forEach(c,(m=>s.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):wu(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Lg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new re(J.FAILED_PRECONDITION,Ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).J().next((s=>this.ss(s,Lg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(nr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[fc,Ko],(e=>{const t=new rp(e,vn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>ef(e).J().next((t=>this.ss(t,kg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return hd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return cd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){ee(nr,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?sD:g===17?jS:g===16?iD:g===15?Qp:g===14?zS:g===13?US:g===12?nD:g===11?LS:void ue(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new rp(m,this.ci?this.ci.next():vn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new re(J.FAILED_PRECONDITION,RS);return s(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>s(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return wu(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Lg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(J.FAILED_PRECONDITION,Ug)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wu(e).put(So,t)}static v(){return dr.v()}Zi(e){const t=wu(e);return t.get(So).next((s=>this.es(s)?(ee(nr,"Releasing primary lease."),t.delete(So)):U.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(bt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Rb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ee(nr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bt(nr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wu(r){return Bt(r,fc)}function ef(r){return Bt(r,Ko)}function XA(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class hy{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ne(),o=Ne();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new hy(e,t.fromCache,s,o)}}class TV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $A{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Rb()?8:xS(jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new TV;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(xo()<=ke.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",No(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(xo()<=ke.DEBUG&&ee("QueryEngine","Query:",No(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(xo()<=ke.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",No(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):U.resolve())}ys(e,t){if(pT(t))return U.resolve(null);let s=Vn(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=hp(t,null,"F"),s=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=Ne(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,hp(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,o){return pT(t)||o.isEqual(ye.min())?U.resolve(null):this.ps.getDocuments(e,s).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,s,o)?U.resolve(null):(xo()<=ke.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(t)),this.vs(e,c,t,wS(o,qo)).next((m=>m)))}))}Ds(e,t){let s=new We(oA(e));return t.forEach(((o,u)=>{mc(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return xo()<=ke.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",No(t)),this.ps.getDocumentsMatchingQuery(e,t,On.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const fy="LocalStore",bV=3e8;class SV{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new at(Se),this.xs=new _s((u=>Ea(u)),dc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function JA(r,e,t,s){return new SV(r,e,t,s)}async function ZA(r,e){const t=de(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let g=Ne();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function AV(r,e){const t=de(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,I=T.keys();let L=U.resolve();return I.forEach((K=>{L=L.next((()=>E.getEntry(g,K))).next((j=>{const X=p.docVersions.get(K);ge(X!==null,48541),j.version.compareTo(X)<0&&(T.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),E.addEntry(j)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ne();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function WA(r){const e=de(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function wV(r,e){const t=de(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const I=o.get(T);if(!I)return;m.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,T))));let L=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?L=L.withResumeToken(St.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,s)),o=o.insert(T,L),(function(j,X,fe){return j.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=bV?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(I,L,E)&&m.push(t.Pi.updateTargetData(u,L))}));let g=Dn(),p=Ne();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(IV(u,c,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(ye.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((T=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return U.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function IV(r,e,t){let s=Ne(),o=Ne();return t.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let c=Dn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ye.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ee(fy,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function RV(r,e){const t=de(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ha),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Bf(r,e){const t=de(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,U.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new cs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function el(r,e,t){const s=de(r),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!br(c))throw c;ee(fy,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function vp(r,e,t){const s=de(r);let o=ye.min(),u=Ne();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const T=de(g),I=T.xs.get(E);return I!==void 0?U.resolve(T.Ms.get(I)):T.Pi.getTargetData(p,E)})(s,c,Vn(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:ye.min(),t?u:Ne()))).next((m=>(n1(s,aA(e),m),{documents:m,Qs:u})))))}function e1(r,e){const t=de(r),s=de(t.Pi),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>s.At(u,e).next((c=>c?c.target:null))))}function t1(r,e){const t=de(r),s=t.Os.get(e)||ye.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Ns.getAllFromCollectionGroup(o,e,wS(s,qo),Number.MAX_SAFE_INTEGER))).then((o=>(n1(t,e,o),o)))}function n1(r,e,t){let s=r.Os.get(e)||ye.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}const i1="firestore_clients";function QT(r,e){return`${i1}_${r}_${e}`}const s1="firestore_mutations";function YT(r,e,t){let s=`${s1}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const r1="firestore_targets";function zg(r,e){return`${r1}_${r}_${e}`}const Oi="SharedClientState";class qf{constructor(e,t,s,o){this.user=e,this.batchId=t,this.state=s,this.error=o}static Ws(e,t,s){const o=JSON.parse(s);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new re(o.error.code,o.error.message))),c?new qf(e,t,o.state,u):(bt(Oi,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let o,u=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new re(s.error.code,s.error.message))),u?new Fu(e,s.state,o):(bt(Oi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ff{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let o=typeof s=="object"&&s.activeTargetIds instanceof Array,u=Wp();for(let c=0;o&&c<s.activeTargetIds.length;++c)o=NS(s.activeTargetIds[c]),u=u.add(s.activeTargetIds[c]);return o?new Ff(e,u):(bt(Oi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class dy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new dy(t.clientId,t.onlineState):(bt(Oi,`Failed to parse online state: ${e}`),null)}}class Ep{constructor(){this.activeTargetIds=Wp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jg{constructor(e,t,s,o,u){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new at(Se),this.started=!1,this.Xs=[];const c=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=QT(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Ep),this.ro=new RegExp(`^${i1}_${c}_([^_]*)$`),this.io=new RegExp(`^${s1}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${r1}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const o=this.getItem(QT(this.persistenceKey,s));if(o){const u=Ff.Ws(s,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(zg(this.persistenceKey,e));if(o){const u=Fu.Ws(e,o);u&&(s=u.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zg(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((o=>{this.Po(o)})),this.currentUser=e,s.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee(Oi,"READ",e,t),t}setItem(e,t){ee(Oi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee(Oi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ee(Oi,"EVENT",t.key,t.newValue),t.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);ge(typeof m=="number",30636,{So:u}),c=m}catch(m){bt(Oi,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);s!==vn.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const o=new qf(this.currentUser,e,t,s),u=YT(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Gs())}Po(e){const t=YT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const o=zg(this.persistenceKey,e),u=new Fu(e,t,s);this.setItem(o,u.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return Ff.Ws(s,t)}fo(e,t){const s=this.io.exec(e),o=Number(s[1]),u=s[2]!==void 0?s[2]:null;return qf.Ws(new nn(u),o,t)}yo(e,t){const s=this.so.exec(e),o=Number(s[1]);return Fu.Ws(o,t)}uo(e){return dy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee(Oi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),o=this.lo(this.Zs),u=this.lo(s),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Wp();return e.forEach(((s,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class a1{constructor(){this.Mo=new Ep,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ep,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CV{Oo(e){}shutdown(){}}const XT="ConnectivityMonitor";class $T{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(XT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(XT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let tf=null;function Tp(){return tf===null?tf=(function(){return 268435456+Math.round(2147483648*Math.random())})():tf++,"0x"+tf.toString(16)}const Bg="RestConnection",xV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Df?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const c=Tp(),m=this.zo(e,t.toUriEncodedString());ee(Bg,`Sending RPC '${e}' ${c}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=sl(p);return this.Jo(e,m,g,s,E).then((T=>(ee(Bg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Qu(Bg,`RPC '${e}' ${c} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,t,s,o,u,c){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=xV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class DV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const tn="WebChannelConnection";class VV extends NV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const c=Tp();return new Promise(((m,g)=>{const p=new pS;p.setWithCredentials(!0),p.listenOnce(yS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case lf.NO_ERROR:const T=p.getResponseJson();ee(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),m(T);break;case lf.TIMEOUT:ee(tn,`RPC '${e}' ${c} timed out`),g(new re(J.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const I=p.getStatus();if(ee(tn,`RPC '${e}' ${c} failed with status:`,I,"response text:",p.getResponseText()),I>0){let L=p.getResponseJson();Array.isArray(L)&&(L=L[0]);const K=L?.error;if(K&&K.status&&K.message){const j=(function(fe){const he=fe.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(he)>=0?he:J.UNKNOWN})(K.status);g(new re(j,K.message))}else g(new re(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new re(J.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ee(tn,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);ee(tn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=Tp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ES(),m=vS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=u.join("");ee(tn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=c.createWebChannel(E,g);this.I_(T);let I=!1,L=!1;const K=new DV({Yo:X=>{L?ee(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(I||(ee(tn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),ee(tn,`RPC '${e}' stream ${o} sending:`,X),T.send(X))},Zo:()=>T.close()}),j=(X,fe,he)=>{X.listen(fe,(ne=>{try{he(ne)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return j(T,Cu.EventType.OPEN,(()=>{L||(ee(tn,`RPC '${e}' stream ${o} transport opened.`),K.o_())})),j(T,Cu.EventType.CLOSE,(()=>{L||(L=!0,ee(tn,`RPC '${e}' stream ${o} transport closed`),K.a_(),this.E_(T))})),j(T,Cu.EventType.ERROR,(X=>{L||(L=!0,Qu(tn,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),K.a_(new re(J.UNAVAILABLE,"The operation could not be completed")))})),j(T,Cu.EventType.MESSAGE,(X=>{if(!L){const fe=X.data[0];ge(!!fe,16349);const he=fe,ne=he?.error||he[0]?.error;if(ne){ee(tn,`RPC '${e}' stream ${o} received error:`,ne);const Ae=ne.status;let Te=(function(w){const R=Mt[w];if(R!==void 0)return EA(R)})(Ae),oe=ne.message;Te===void 0&&(Te=J.INTERNAL,oe="Unknown error status: "+Ae+" with message "+ne.message),L=!0,K.a_(new re(Te,oe)),T.close()}else ee(tn,`RPC '${e}' stream ${o} received:`,fe),K.u_(fe)}})),j(m,_S.STAT_EVENT,(X=>{X.stat===Wg.PROXY?ee(tn,`RPC '${e}' stream ${o} detected buffering proxy`):X.stat===Wg.NOPROXY&&ee(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function o1(){return typeof window<"u"?window:null}function _f(){return typeof document<"u"?document:null}function dd(r){return new UD(r,!0)}class l1{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const JT="PersistentStream";class u1{constructor(e,t,s,o,u,c,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new l1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new re(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(JT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ee(JT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OV extends u1{constructor(e,t,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BD(this.serializer,e),s=(function(u){if(!("targetChange"in u))return ye.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?ye.min():c.readTime?hn(c.readTime):ye.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=mp(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Of(g)?{documents:CA(u,g)}:{query:xA(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=SA(u,c.resumeToken);const p=fp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(ye.min())>0){m.readTime=Wo(u,c.snapshotVersion.toTimestamp());const p=fp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=FD(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=mp(this.serializer),t.removeTarget=e,this.q_(t)}}class MV extends u1{constructor(e,t,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qD(e.writeResults,e.commitTime),s=hn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=mp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>kf(this.serializer,s)))};this.q_(t)}}class PV{}class kV extends PV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new re(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,dp(t,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(J.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,dp(t,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new re(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ia="RemoteStore";class UV{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Ca(this)&&(ee(Ia,"Restarting streams for network reachability change."),await(async function(g){const p=de(g);p.Ea.add(4),await _c(p),p.Ra.set("Unknown"),p.Ea.delete(4),await md(p)})(this))}))})),this.Ra=new LV(s,o)}}async function md(r){if(Ca(r))for(const e of r.da)await e(!0)}async function _c(r){for(const e of r.da)await e(!1)}function gd(r,e){const t=de(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),py(t)?gy(t):cl(t).O_()&&my(t,e))}function tl(r,e){const t=de(r),s=cl(t);t.Ia.delete(e),s.O_()&&c1(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ca(t)&&t.Ra.set("Unknown"))}function my(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(r).Y_(e)}function c1(r,e){r.Va.Ue(e),cl(r).Z_(e)}function gy(r){r.Va=new MD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),cl(r).start(),r.Ra.ua()}function py(r){return Ca(r)&&!cl(r).x_()&&r.Ia.size>0}function Ca(r){return de(r).Ea.size===0}function h1(r){r.Va=void 0}async function zV(r){r.Ra.set("Online")}async function jV(r){r.Ia.forEach(((e,t)=>{my(r,e)}))}async function BV(r,e){h1(r),py(r)?(r.Ra.ha(e),gy(r)):r.Ra.set("Unknown")}async function qV(r,e,t){if(r.Ra.set("Online"),e instanceof bA&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ee(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hf(r,s)}else if(e instanceof pf?r.Va.Ze(e):e instanceof TA?r.Va.st(e):r.Va.tt(e),!t.isEqual(ye.min()))try{const s=await WA(r.localStore);t.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(St.EMPTY_BYTE_STRING,E.snapshotVersion)),c1(u,g);const T=new cs(E.target,g,p,E.sequenceNumber);my(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){ee(Ia,"Failed to raise snapshot:",s),await Hf(r,s)}}async function Hf(r,e,t){if(!br(e))throw e;r.Ea.add(1),await _c(r),r.Ra.set("Offline"),t||(t=()=>WA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ee(Ia,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await md(r)}))}function f1(r,e){return e().catch((t=>Hf(r,t,e)))}async function ul(r){const e=de(r),t=yr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ha;for(;FV(e);)try{const o=await RV(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,HV(e,o)}catch(o){await Hf(e,o)}d1(e)&&m1(e)}function FV(r){return Ca(r)&&r.Ta.length<10}function HV(r,e){r.Ta.push(e);const t=yr(r);t.O_()&&t.X_&&t.ea(e.mutations)}function d1(r){return Ca(r)&&!yr(r).x_()&&r.Ta.length>0}function m1(r){yr(r).start()}async function GV(r){yr(r).ra()}async function KV(r){const e=yr(r);for(const t of r.Ta)e.ea(t.mutations)}async function QV(r,e,t){const s=r.Ta.shift(),o=ny.from(s,e,t);await f1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await ul(r)}async function YV(r,e){e&&yr(r).X_&&await(async function(s,o){if((function(c){return DD(c)&&c!==J.ABORTED})(o.code)){const u=s.Ta.shift();yr(s).B_(),await f1(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ul(s)}})(r,e),d1(r)&&m1(r)}async function ZT(r,e){const t=de(r);t.asyncQueue.verifyOperationInProgress(),ee(Ia,"RemoteStore received new credentials");const s=Ca(t);t.Ea.add(3),await _c(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await md(t)}async function bp(r,e){const t=de(r);e?(t.Ea.delete(2),await md(t)):e||(t.Ea.add(2),await _c(t),t.Ra.set("Unknown"))}function cl(r){return r.ma||(r.ma=(function(t,s,o){const u=de(t);return u.sa(),new OV(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:zV.bind(null,r),t_:jV.bind(null,r),r_:BV.bind(null,r),H_:qV.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),py(r)?gy(r):r.Ra.set("Unknown")):(await r.ma.stop(),h1(r))}))),r.ma}function yr(r){return r.fa||(r.fa=(function(t,s,o){const u=de(t);return u.sa(),new MV(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:GV.bind(null,r),r_:YV.bind(null,r),ta:KV.bind(null,r),na:QV.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ul(r)):(await r.fa.stop(),r.Ta.length>0&&(ee(Ia,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class yy{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const c=Date.now()+s,m=new yy(e,t,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(r,e){if(bt("AsyncQueue",`${e}: ${r}`),br(r))return new re(J.UNAVAILABLE,`${e}: ${r}`);throw r}class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ae.comparator(t.key,s.key):(t,s)=>ae.comparator(t.key,s.key),this.keyedMap=xu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Uo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class WT{constructor(){this.ga=new at(ae.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class nl{constructor(e,t,s,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new nl(e,t,Uo.emptySet(t),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class XV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $V{constructor(){this.queries=eb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=de(t),u=o.queries;o.queries=eb(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new re(J.ABORTED,"Firestore shutting down"))}}function eb(){return new _s((r=>rA(r)),ad)}async function g1(r,e){const t=de(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new XV,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=_y(c,`Initialization of query '${No(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&vy(t)}async function p1(r,e){const t=de(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function JV(r,e){const t=de(r);let s=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&vy(t)}function ZV(r,e,t){const s=de(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function vy(r){r.Ca.forEach((e=>{e.next()}))}var Sp,tb;(tb=Sp||(Sp={})).Ma="default",tb.Cache="cache";class y1{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sp.Cache}}class _1{constructor(e){this.key=e}}class v1{constructor(e){this.key=e}}class WV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=oA(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new WT,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const I=o.get(E),L=mc(this.query,T)?T:null,K=!!I&&this.mutatedKeys.has(I.key),j=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let X=!1;I&&L?I.data.isEqual(L.data)?K!==j&&(s.track({type:3,doc:L}),X=!0):this.su(I,L)||(s.track({type:2,doc:L}),X=!0,(g&&this.eu(L,g)>0||p&&this.eu(L,p)<0)&&(m=!0)):!I&&L?(s.track({type:0,doc:L}),X=!0):I&&!L&&(s.track({type:1,doc:I}),X=!0,(g||p)&&(m=!0)),X&&(L?(c=c.add(L),u=j?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,T)=>(function(L,K){const j=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:X})}};return j(L)-j(K)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new nl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new WT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new v1(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new _1(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hl="SyncEngine";class eO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class tO{constructor(e){this.key=e,this.hu=!1}}class nO{constructor(e,t,s,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _s((m=>rA(m)),ad),this.Iu=new Map,this.Eu=new Set,this.du=new at(ae.comparator),this.Au=new Map,this.Ru=new ly,this.Vu={},this.mu=new Map,this.fu=wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iO(r,e,t=!0){const s=pd(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await E1(s,e,t,!0),o}async function sO(r,e){const t=pd(r);await E1(t,e,!0,!1)}async function E1(r,e,t,s){const o=await Bf(r.localStore,Vn(e)),u=o.targetId,c=r.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await Ey(r,e,u,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&gd(r.remoteStore,o),m}async function Ey(r,e,t,s,o){r.pu=(T,I,L)=>(async function(j,X,fe,he){let ne=X.view.ru(fe);ne.Cs&&(ne=await vp(j.localStore,X.query,!1).then((({documents:A})=>X.view.ru(A,ne))));const Ae=he&&he.targetChanges.get(X.targetId),Te=he&&he.targetMismatches.get(X.targetId)!=null,oe=X.view.applyChanges(ne,j.isPrimaryClient,Ae,Te);return Ap(j,X.targetId,oe.au),oe.snapshot})(r,T,I,L);const u=await vp(r.localStore,e,!0),c=new WV(e,u.Qs),m=c.ru(u.documents),g=yc.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),p=c.applyChanges(m,r.isPrimaryClient,g);Ap(r,t,p.au);const E=new eO(e,t,c);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function rO(r,e,t){const s=de(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!ad(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await el(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&tl(s.remoteStore,o.targetId),il(s,o.targetId)})).catch(Tr)):(il(s,o.targetId),await el(s.localStore,o.targetId,!0))}async function aO(r,e){const t=de(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),tl(t.remoteStore,s.targetId))}async function oO(r,e,t){const s=Ay(r);try{const o=await(function(c,m){const g=de(c),p=Ze.now(),E=m.reduce(((L,K)=>L.add(K.key)),Ne());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let K=Dn(),j=Ne();return g.Ns.getEntries(L,E).next((X=>{K=X,K.forEach(((fe,he)=>{he.isValidDocument()||(j=j.add(fe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,K))).next((X=>{T=X;const fe=[];for(const he of m){const ne=xD(he,T.get(he.key).overlayedDocument);ne!=null&&fe.push(new vs(he.key,ne,$S(ne.value.mapValue),an.exists(!0)))}return g.mutationQueue.addMutationBatch(L,p,fe,m)})).next((X=>{I=X;const fe=X.applyToLocalDocumentSet(T,j);return g.documentOverlayCache.saveOverlays(L,X.batchId,fe)}))})).then((()=>({batchId:I.batchId,changes:uA(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new at(Se)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await Ar(s,o.changes),await ul(s.remoteStore)}catch(o){const u=_y(o,"Failed to persist write");t.reject(u)}}async function T1(r,e){const t=de(r);try{const s=await wV(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ge(c.hu,14607):o.removedDocuments.size>0&&(ge(c.hu,42227),c.hu=!1))})),await Ar(t,s,e)}catch(s){await Tr(s)}}function nb(r,e,t){const s=de(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=de(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const I of T.Sa)I.va(m)&&(p=!0)})),p&&vy(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function lO(r,e,t){const s=de(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new at(ae.comparator);c=c.insert(u,yt.newNoDocument(u,ye.min()));const m=Ne().add(u),g=new pc(ye.min(),new Map,new at(Se),c,m);await T1(s,g),s.du=s.du.remove(u),s.Au.delete(e),Sy(s)}else await el(s.localStore,e,!1).then((()=>il(s,e,t))).catch(Tr)}async function uO(r,e){const t=de(r),s=e.batch.batchId;try{const o=await AV(t.localStore,e);by(t,s,null),Ty(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ar(t,o)}catch(o){await Tr(o)}}async function cO(r,e,t){const s=de(r);try{const o=await(function(c,m){const g=de(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(ge(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,e);by(s,e,t),Ty(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ar(s,o)}catch(o){await Tr(o)}}function Ty(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function by(r,e,t){const s=de(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function il(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||b1(r,s)}))}function b1(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(tl(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Sy(r))}function Ap(r,e,t){for(const s of t)s instanceof _1?(r.Ru.addReference(s.key,e),hO(r,s)):s instanceof v1?(ee(hl,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||b1(r,s.key)):ue(19791,{wu:s})}function hO(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ee(hl,"New document in limbo: "+t),r.Eu.add(s),Sy(r))}function Sy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ae(Ke.fromString(e)),s=r.fu.next();r.Au.set(s,new tO(t)),r.du=r.du.insert(t,s),gd(r.remoteStore,new cs(Vn(rd(t.path)),s,"TargetPurposeLimboResolution",vn.ce))}}async function Ar(r,e,t){const s=de(r),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{c.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=hy.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(g,p){const E=de(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>U.forEach(p,(I=>U.forEach(I.Es,(L=>E.persistence.referenceDelegate.addReference(T,I.targetId,L))).next((()=>U.forEach(I.ds,(L=>E.persistence.referenceDelegate.removeReference(T,I.targetId,L)))))))))}catch(T){if(!br(T))throw T;ee(fy,"Failed to update sequence numbers: "+T)}for(const T of p){const I=T.targetId;if(!T.fromCache){const L=E.Ms.get(I),K=L.snapshotVersion,j=L.withLastLimboFreeSnapshotVersion(K);E.Ms=E.Ms.insert(I,j)}}})(s.localStore,u))}async function fO(r,e){const t=de(r);if(!t.currentUser.isEqual(e)){ee(hl,"User change. New user:",e.toKey());const s=await ZA(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new re(J.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ar(t,s.Ls)}}function dO(r,e){const t=de(r),s=t.Au.get(e);if(s&&s.hu)return Ne().add(s.key);{let o=Ne();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function mO(r,e){const t=de(r),s=await vp(t.localStore,e.query,!0),o=e.view.cu(s);return t.isPrimaryClient&&Ap(t,e.targetId,o.au),o}async function gO(r,e){const t=de(r);return t1(t.localStore,e).then((s=>Ar(t,s)))}async function pO(r,e,t,s){const o=de(r),u=await(function(m,g){const p=de(m),E=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(T=>E.er(T,g).next((I=>I?p.localDocuments.getDocuments(T,I):U.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await ul(o.remoteStore):t==="acknowledged"||t==="rejected"?(by(o,e,s||null),Ty(o,e),(function(m,g){de(de(m).mutationQueue).ir(g)})(o.localStore,e)):ue(6720,"Unknown batchState",{Su:t}),await Ar(o,u)):ee(hl,"Cannot apply mutation batch with id: "+e)}async function yO(r,e){const t=de(r);if(pd(t),Ay(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),o=await ib(t,s.toArray());t.gu=!0,await bp(t.remoteStore,!0);for(const u of o)gd(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const s=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?s.push(c):o=o.then((()=>(il(t,c),el(t.localStore,c,!0)))),tl(t.remoteStore,c)})),await o,await ib(t,s),(function(c){const m=de(c);m.Au.forEach(((g,p)=>{tl(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new at(ae.comparator)})(t),t.gu=!1,await bp(t.remoteStore,!1)}}async function ib(r,e,t){const s=de(r),o=[],u=[];for(const c of e){let m;const g=s.Iu.get(c);if(g&&g.length!==0){m=await Bf(s.localStore,Vn(g[0]));for(const p of g){const E=s.Tu.get(p),T=await mO(s,E);T.snapshot&&u.push(T.snapshot)}}else{const p=await e1(s.localStore,c);m=await Bf(s.localStore,p),await Ey(s,S1(p),c,!1,m.resumeToken)}o.push(m)}return s.Pu.H_(u),o}function S1(r){return sA(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function _O(r){return(function(t){return de(de(t).persistence).Ts()})(de(r).localStore)}async function vO(r,e,t,s){const o=de(r);if(o.gu)return void ee(hl,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await t1(o.localStore,aA(u[0])),m=pc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",St.EMPTY_BYTE_STRING);await Ar(o,c,m);break}case"rejected":await el(o.localStore,e,!0),il(o,e,s);break;default:ue(64155,t)}}async function EO(r,e,t){const s=pd(r);if(s.gu){for(const o of e){if(s.Iu.has(o)&&s.sharedClientState.isActiveQueryTarget(o)){ee(hl,"Adding an already active target "+o);continue}const u=await e1(s.localStore,o),c=await Bf(s.localStore,u);await Ey(s,S1(u),c.targetId,!1,c.resumeToken),gd(s.remoteStore,c)}for(const o of t)s.Iu.has(o)&&await el(s.localStore,o,!1).then((()=>{tl(s.remoteStore,o),il(s,o)})).catch(Tr)}}function pd(r){const e=de(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=T1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lO.bind(null,e),e.Pu.H_=JV.bind(null,e.eventManager),e.Pu.yu=ZV.bind(null,e.eventManager),e}function Ay(r){const e=de(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cO.bind(null,e),e}class nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JA(this.persistence,new $A,e.initialUser,this.serializer)}Cu(e){return new uy(fd.mi,this.serializer)}Du(e){return new a1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nc.provider={build:()=>new nc};class TO extends nc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof jf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new HA(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new uy((s=>jf.mi(s,t)),this.serializer)}}class A1 extends nc{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Ay(this.xu.syncEngine),await ul(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return JA(this.persistence,new $A,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new HA(s,e.asyncQueue,t)}Mu(e,t){const s=new VN(t,this.persistence);return new DN(e.asyncQueue,s)}Cu(e){const t=XA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new cy(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,o1(),_f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new a1}}class bO extends A1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof jg&&(this.sharedClientState.syncEngine={Co:pO.bind(null,t),vo:vO.bind(null,t),Fo:EO.bind(null,t),Ts:_O.bind(null,t),Do:gO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await yO(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=o1();if(!jg.v(t))throw new re(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=XA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jg(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class ic{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=fO.bind(null,this.syncEngine),await bp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $V})()}createDatastore(e){const t=dd(e.databaseInfo.databaseId),s=(function(u){return new VV(u)})(e.databaseInfo);return(function(u,c,m,g){return new kV(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,c,m){return new UV(s,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>nb(this.syncEngine,t,0)),(function(){return $T.v()?new $T:new CV})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,E){const T=new nO(o,u,c,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=de(t);ee(Ia,"RemoteStore shutting down."),s.Ea.add(5),await _c(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ic.provider={build:()=>new ic};class w1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const _r="FirestoreClient";class SO{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{ee(_r,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ee(_r,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=_y(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function qg(r,e){r.asyncQueue.verifyOperationInProgress(),ee(_r,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await ZA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function sb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await AO(r);ee(_r,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>ZT(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>ZT(e.remoteStore,o))),r._onlineComponents=e}async function AO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ee(_r,"Using user provided OfflineComponentProvider");try{await qg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Qu("Error using user provided cache. Falling back to memory cache: "+t),await qg(r,new nc)}}else ee(_r,"Using default OfflineComponentProvider"),await qg(r,new TO(void 0));return r._offlineComponents}async function I1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ee(_r,"Using user provided OnlineComponentProvider"),await sb(r,r._uninitializedComponentsProvider._online)):(ee(_r,"Using default OnlineComponentProvider"),await sb(r,new ic))),r._onlineComponents}function wO(r){return I1(r).then((e=>e.syncEngine))}async function R1(r){const e=await I1(r),t=e.eventManager;return t.onListen=iO.bind(null,e.syncEngine),t.onUnlisten=rO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aO.bind(null,e.syncEngine),t}function IO(r,e,t={}){const s=new Ui;return r.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new w1({next:I=>{E.Nu(),c.enqueueAndForget((()=>p1(u,T)));const L=I.docs.has(m);!L&&I.fromCache?p.reject(new re(J.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&I.fromCache&&g&&g.source==="server"?p.reject(new re(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new y1(rd(m.path),E,{includeMetadataChanges:!0,qa:!0});return g1(u,T)})(await R1(r),r.asyncQueue,e,t,s))),s.promise}function RO(r,e,t={}){const s=new Ui;return r.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new w1({next:I=>{E.Nu(),c.enqueueAndForget((()=>p1(u,T))),I.fromCache&&g.source==="server"?p.reject(new re(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new y1(m,E,{includeMetadataChanges:!0,qa:!0});return g1(u,T)})(await R1(r),r.asyncQueue,e,t,s))),s.promise}function C1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const rb=new Map;const CO="firestore.googleapis.com",ab=!0;class ob{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CO,this.ssl=ab}else this.host=e.host,this.ssl=e.ssl??ab;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FA)throw new re(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wy{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ob({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ob(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new vN;switch(s.type){case"firstParty":return new bN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=rb.get(t);s&&(ee("ComponentProvider","Removing Datastore"),rb.delete(t),s.terminate())})(this),Promise.resolve()}}class yd{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yd(this.firestore,e,this._query)}}class kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(hc(t,kt._jsonSchema))return new kt(e,s||null,new ae(Ke.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Pt("string",kt._jsonSchemaVersion),referencePath:Pt("string")};class mr extends yd{constructor(e,t,s){super(e,t,rd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ae(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function x1(r,e,...t){if(r=Wt(r),SS("collection","path",e),r instanceof wy){const s=Ke.fromString(e,...t);return JE(s),new mr(r,null,s)}{if(!(r instanceof kt||r instanceof mr))throw new re(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return JE(s),new mr(r.firestore,null,s)}}function fl(r,e,...t){if(r=Wt(r),arguments.length===1&&(e=jp.newId()),SS("doc","path",e),r instanceof wy){const s=Ke.fromString(e,...t);return $E(s),new kt(r,null,new ae(s))}{if(!(r instanceof kt||r instanceof mr))throw new re(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return $E(s),new kt(r.firestore,r instanceof mr?r.converter:null,new ae(s))}}const lb="AsyncQueue";class ub{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new l1(this,"async_queue_retry"),this._c=()=>{const s=_f();s&&ee(lb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=_f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ui;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!br(e))throw e;ee(lb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",cb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=yy.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ue(47125,{Pc:cb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class xa extends wy{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new ub,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ub(e),this._firestoreClient=void 0,await e}}}function xO(r,e,t){t||(t=Df);const s=Np(r,"firestore");if(s.isInitialized(t)){const o=s.getImmediate({identifier:t}),u=s.getOptions(t);if(fs(u,e))return o;throw new re(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new re(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FA)throw new re(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&sl(e.host)&&wb(e.host),s.initialize({options:e,instanceIdentifier:t})}function Iy(r){if(r._terminated)throw new re(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||NO(r),r._firestoreClient}function NO(r){const e=r._freezeSettings(),t=(function(o,u,c,m){return new aD(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,C1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new SO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(St.fromBase64String(e))}catch(t){throw new re(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Pt("string",Yn._jsonSchemaVersion),bytes:Pt("string")};class _d{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Na{constructor(e){this._methodName=e}}class zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zi._jsonSchemaVersion}}static fromJSON(e){if(hc(e,zi._jsonSchema))return new zi(e.latitude,e.longitude)}}zi._jsonSchemaVersion="firestore/geoPoint/1.0",zi._jsonSchema={type:Pt("string",zi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};class ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hc(e,ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ji(e.vectorValues);throw new re(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:Pt("string",ji._jsonSchemaVersion),vectorValues:Pt("object")};const DO=/^__.*__$/;class VO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}class N1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function D1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:r})}}class vd{constructor(e,t,s,o,u,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(D1(this.Ac)&&DO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||dd(e)}Cc(e,t,s,o=!1){return new vd({Ac:e,methodName:t,Dc:s,path:dt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(r){const e=r._freezeSettings(),t=dd(r._databaseId);return new OO(r._databaseId,!!e.ignoreUndefinedProperties,t)}function V1(r,e,t,s,o,u={}){const c=r.Cc(u.merge||u.mergeFields?2:0,e,t,o);Vy("Data must be an object, but it was:",c,s);const m=M1(s,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const I=wp(e,T,t);if(!c.contains(I))throw new re(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);k1(E,I)||E.push(I)}g=new En(E),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new VO(new rn(m),g,p)}class Ed extends Na{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ed}}function O1(r,e,t){return new vd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cy extends Na{_toFieldTransform(e){return new gc(e.path,new Jo)}isEqual(e){return e instanceof Cy}}class xy extends Na{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=O1(this,e,!0),s=this.vc.map((u=>dl(u,t))),o=new Ta(s);return new gc(e.path,o)}isEqual(e){return e instanceof xy&&fs(this.vc,e.vc)}}class Ny extends Na{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=O1(this,e,!0),s=this.vc.map((u=>dl(u,t))),o=new ba(s);return new gc(e.path,o)}isEqual(e){return e instanceof Ny&&fs(this.vc,e.vc)}}class Dy extends Na{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Zo(e.serializer,fA(e.serializer,this.Fc));return new gc(e.path,t)}isEqual(e){return e instanceof Dy&&this.Fc===e.Fc}}function MO(r,e,t,s){const o=r.Cc(1,e,t);Vy("Data must be an object, but it was:",o,s);const u=[],c=rn.empty();Sr(s,((g,p)=>{const E=Oy(e,g,t);p=Wt(p);const T=o.yc(E);if(p instanceof Ed)u.push(E);else{const I=dl(p,T);I!=null&&(u.push(E),c.set(E,I))}}));const m=new En(u);return new N1(c,m,o.fieldTransforms)}function PO(r,e,t,s,o,u){const c=r.Cc(1,e,t),m=[wp(e,s,t)],g=[o];if(u.length%2!=0)throw new re(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(wp(e,u[I])),g.push(u[I+1]);const p=[],E=rn.empty();for(let I=m.length-1;I>=0;--I)if(!k1(p,m[I])){const L=m[I];let K=g[I];K=Wt(K);const j=c.yc(L);if(K instanceof Ed)p.push(L);else{const X=dl(K,j);X!=null&&(p.push(L),E.set(L,X))}}const T=new En(p);return new N1(E,T,c.fieldTransforms)}function dl(r,e){if(P1(r=Wt(r)))return Vy("Unsupported field value:",e,r),M1(r,e);if(r instanceof Na)return(function(s,o){if(!D1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let g=dl(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return fA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ze.fromDate(s);return{timestampValue:Wo(o.serializer,u)}}if(s instanceof Ze){const u=new Ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wo(o.serializer,u)}}if(s instanceof zi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:SA(o.serializer,s._byteString)};if(s instanceof kt){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ry(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ji)return(function(c,m){return{mapValue:{fields:{[Xp]:{stringValue:$p},[Qo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return ey(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Bp(s)}`)})(r,e)}function M1(r,e){const t={};return BS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(r,((s,o)=>{const u=dl(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function P1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ze||r instanceof zi||r instanceof Yn||r instanceof kt||r instanceof Na||r instanceof ji)}function Vy(r,e,t){if(!P1(t)||!AS(t)){const s=Bp(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function wp(r,e,t){if((e=Wt(e))instanceof _d)return e._internalPath;if(typeof e=="string")return Oy(r,e);throw Gf("Field path arguments must be of type string or ",r,!1,void 0,t)}const kO=new RegExp("[~\\*/\\[\\]]");function Oy(r,e,t){if(e.search(kO)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new _d(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Gf(r,e,t,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new re(J.INVALID_ARGUMENT,m+r+g)}function k1(r,e){return r.some((t=>t.isEqual(e)))}class L1{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(U1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LO extends L1{data(){return super.data()}}function U1(r,e){return typeof e=="string"?Oy(r,e):e instanceof _d?e._internalPath:e._delegate._internalPath}function UO(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new re(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zO{convertValue(e,t="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Sr(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[Qo].arrayValue?.values?.map((s=>ft(s.doubleValue)));return new ji(t)}convertGeoPoint(e){return new zi(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=nd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=gs(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ke.fromString(e);ge(OA(s),9688,{name:e});const o=new va(s.get(1),s.get(3)),u=new ae(s.popFirst(5));return o.isEqual(t)||bt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function z1(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class Vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ma extends L1{constructor(e,t,s,o,u,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(U1("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ma._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Pt("string",ma._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class vf extends ma{data(e={}){return super.data(e)}}class zo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new vf(this._firestore,this._userDataWriter,s.key,s,new Vu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new vf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new vf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:jO(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:r})}}function BO(r){r=Bi(r,kt);const e=Bi(r.firestore,xa);return IO(Iy(e),r._key).then((t=>KO(e,r,t)))}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:Pt("string",zo._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class j1 extends zO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function qO(r){r=Bi(r,yd);const e=Bi(r.firestore,xa),t=Iy(e),s=new j1(e);return UO(r._query),RO(t,r._query).then((o=>new zo(e,s,r,o)))}function FO(r,e,t){r=Bi(r,kt);const s=Bi(r.firestore,xa),o=z1(r.converter,e);return Td(s,[V1(Ry(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,an.none())])}function My(r,e,t,...s){r=Bi(r,kt);const o=Bi(r.firestore,xa),u=Ry(o);let c;return c=typeof(e=Wt(e))=="string"||e instanceof _d?PO(u,"updateDoc",r._key,e,t,s):MO(u,"updateDoc",r._key,e),Td(o,[c.toMutation(r._key,an.exists(!0))])}function HO(r){return Td(Bi(r.firestore,xa),[new ud(r._key,an.none())])}function GO(r,e){const t=Bi(r.firestore,xa),s=fl(r),o=z1(r.converter,e);return Td(t,[V1(Ry(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,an.exists(!1))]).then((()=>s))}function Td(r,e){return(function(s,o){const u=new Ui;return s.asyncQueue.enqueueAndForget((async()=>oO(await wO(s),o,u))),u.promise})(Iy(r),e)}function KO(r,e,t){const s=t.docs.get(e._key),o=new j1(r);return new ma(r,o,e._key,s,new Vu(t.hasPendingWrites,t.fromCache),e.converter)}class QO{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=JO(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function YO(r){return new QO(r)}class XO{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ic.provider,this._offlineComponentProvider={build:t=>new A1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class $O{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ic.provider,this._offlineComponentProvider={build:t=>new bO(t,e?.cacheSizeBytes)}}}function JO(r){return new XO(r?.forceOwnership)}function ZO(){return new $O}function bd(){return new Cy("serverTimestamp")}function WO(...r){return new xy("arrayUnion",r)}function e4(...r){return new Ny("arrayRemove",r)}function t4(r){return new Dy("increment",r)}(function(e,t=!0){(function(o){ol=o})(rl),jo(new ga("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new xa(new EN(s.getProvider("auth-internal")),new SN(c,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),hr(KE,QE,e),hr(KE,QE,"esm2020")})();const n4={apiKey:"AIzaSyAD3y3HNjlsSO7xykkqLWqofxU5U_6hW_Y",authDomain:"aichaku-924d0.firebaseapp.com",projectId:"aichaku-924d0",storageBucket:"aichaku-924d0.firebasestorage.app",messagingSenderId:"745993610184",appId:"1:745993610184:web:97ea4b13fef74d43d396fd"},B1=Vb(n4),Kf=pN(B1),Da=xO(B1,{localCache:YO({tabManager:ZO()})}),i4=()=>{const[r,e]=Oe.useState(null);return Oe.useEffect(()=>{const s=sx(Kf,o=>{e(o)});return()=>s()},[]),{user:r,logout:async()=>{await rx(Kf)}}},s4=async r=>{const e=fl(Da,"users",r,"metadata","categories"),t=await BO(e);if(t.exists())return t.data();const s={brands:{Closet:[],Beauty:[],Appliances:[]},subcategories:{Closet:[],Beauty:[],Appliances:[]}};return await FO(e,s),s},r4=async r=>{const e=x1(Da,"users",r,"items");return(await qO(e)).docs.map(s=>({id:s.id,...s.data()}))},a4=async(r,e)=>{const t=x1(Da,"users",r,"items"),s={...e,uses:e.uses??0,createdAt:bd()};return{id:(await GO(t,s)).id,...s}},o4=async(r,e,t)=>{const s=fl(Da,"users",r,"items",e);await My(s,{uses:t4(1),lastUsedAt:bd(),lastUsedLocalDate:t})},l4=async(r,e)=>{const t=fl(Da,"users",r,"items",e);await HO(t)},u4=async(r,e,t)=>{const s=fl(Da,"users",r,"items",e);await My(s,{...t,updatedAt:bd()})},c4=r=>{const[e,t]=Oe.useState({brands:{},subcategories:{}});return Oe.useEffect(()=>{if(!r){t({brands:{},subcategories:{}});return}(async()=>{const o=await s4(r.uid);t(o)})()},[r]),{categoriesData:e,setCategoriesData:t}},h4=r=>{const[e,t]=Oe.useState([]),[s,o]=Oe.useState(!1);Oe.useEffect(()=>{if(!r){t([]);return}(async()=>{o(!0);const T=await r4(r.uid);t(T),o(!1)})()},[r]);const u=()=>{const E=new Date,T=E.getFullYear(),I=String(E.getMonth()+1).padStart(2,"0"),L=String(E.getDate()).padStart(2,"0");return`${T}-${I}-${L}`};return{items:e,loading:s,addItem:async E=>{if(!r)return;const T=await a4(r.uid,E);t(I=>[...I,T])},logUsage:async E=>{if(!r)return;const T=u();await o4(r.uid,E,T),t(I=>I.map(L=>L.id===E?{...L,uses:L.uses+1,lastUsedLocalDate:T}:L))},deleteItem:async E=>{r&&(await l4(r.uid,E),t(T=>T.filter(I=>I.id!==E)))},updateItem:async(E,T)=>{r&&(await u4(r.uid,E,T),t(I=>I.map(L=>L.id===E?{...L,...T}:L)))}}};function sc(r,e){return typeof r!="number"||typeof e!="number"?0:e<=0?r:r/e}function f4(r){if(!Array.isArray(r)||r.length===0)return 0;let e=0;for(const t of r)e+=sc(t.price,t.uses);return e/r.length}function d4(r,e,t="desc"){const s=sc(r.price,r.uses),o=sc(e.price,e.uses);return s<o?t==="asc"?-1:1:s>o?t==="asc"?1:-1:0}const m4="/Aichaku/assets/cami-top-yh5VPBAI.svg",g4="/Aichaku/assets/cardigan-DyOr518j.svg",p4="/Aichaku/assets/hoodie-zip-C6ejns6n.svg",y4="/Aichaku/assets/jacket-brown-C3cJCzHZ.svg",_4="/Aichaku/assets/skirt-kqcEnIU2.svg",v4="/Aichaku/assets/eye-shadow-CYE7mQec.svg",E4="/Aichaku/assets/foundation-CxfxfEX9.svg",T4="/Aichaku/assets/lip-gloss-C3F4bIZH.svg",b4="/Aichaku/assets/liquid-lipstick-DPm0nyzs.svg",S4="/Aichaku/assets/air-fryer-6uYiUEqx.svg",A4="/Aichaku/assets/coffee-grinder-DdabzTt_.svg",w4="/Aichaku/assets/robot-vaccum-DZDkWk8Q.svg",I4="/Aichaku/assets/vacuum-C3puDZFN.svg",R4=Object.assign({"./closet/cami-top.svg":m4,"./closet/cardigan.svg":g4,"./closet/hoodie-zip.svg":p4,"./closet/jacket-brown.svg":y4,"./closet/skirt.svg":_4}),C4=Object.assign({"./beauty/eye-shadow.svg":v4,"./beauty/foundation.svg":E4,"./beauty/lip-gloss.svg":T4,"./beauty/liquid-lipstick.svg":b4}),x4=Object.assign({"./appliance/air-fryer.svg":S4,"./appliance/coffee-grinder.svg":A4,"./appliance/robot-vaccum.svg":w4,"./appliance/vacuum.svg":I4});function Py(r){return Object.fromEntries(Object.entries(r).map(([e,t])=>[e.split("/").pop().replace(".svg","").replace(/-([a-z])/g,(o,u)=>u.toUpperCase()),t]))}const q1=Py(R4),F1=Py(C4),H1=Py(x4),N4={...q1,...F1,...H1},G1=Object.keys(q1),K1=Object.keys(F1),Q1=Object.keys(H1);function ky({name:r,size:e=24,className:t=""}){const s=N4[r];return s?C.jsx("img",{src:s,width:e,height:e,className:t,alt:r}):(console.warn(`Icon "${r}" not found`),null)}const Fg={Closet:[...G1.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Beauty:[...K1.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Appliances:[...Q1.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""}]},hb=(r,e=24)=>r?r.type==="emoji"?C.jsx("span",{style:{fontSize:e},children:r.value}):r.type==="custom"?C.jsx(ky,{name:r.value,size:e}):null:null,D4=({isOpen:r,onClose:e,item:t,categoriesData:s,updateItem:o})=>{const[u,c]=Oe.useState({name:"",category:"",brand:"",subcategory:"",price:"",uses:"",icon:{type:null,value:null}}),[m,g]=Oe.useState(!1),[p,E]=Oe.useState(!1),[T,I]=Oe.useState("main");Oe.useEffect(()=>{if(!t)return;const j=t.category??"",X=t.iconType&&t.iconValue?{type:t.iconType,value:t.iconValue}:{type:null,value:null},he=(Fg[j]??[]).some(ne=>ne.type===X.type&&ne.value===X.value);c({name:t.name??"",category:j,brand:t.brand??"",subcategory:t.subcategory??"",price:t.price?.toString()??"",uses:t.uses?.toString()??"",icon:he?X:{type:null,value:null}})},[t]);const L=j=>{c(X=>p?{...X,category:j}:{...X,category:j,icon:Fg[j]?.[0]??null})},K=async j=>{if(j.preventDefault(),!t)return;const X={name:u.name.trim(),category:u.category,brand:u.brand,subcategory:u.subcategory,price:Number(u.price)||0,uses:Number(u.uses)||0,iconType:u.icon?.type??null,iconValue:u.icon?.value??null};await o(t.id,X),e()};return r?C.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:r&&C.jsx("div",{className:"bg-white w-full max-w-xl rounded-[40px] shadow-2xl overflow-hidden transition-all duration-300",children:C.jsxs("div",{className:"p-10",children:[T==="main"&&C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-3xl font-serif italic text-stone-900",children:"Update the Item"}),C.jsx("p",{className:"text-stone-400 text-sm mt-1 font-medium",children:"Update the details of your existing piece"})]}),C.jsx("button",{onClick:()=>{e(),I("main")},className:"bg-stone-100 p-2 rounded-full text-stone-400 hover:text-stone-600 transition-colors",children:C.jsx(Rp,{size:24})})]}),C.jsx("div",{className:"flex justify-center mb-4",children:C.jsxs("div",{className:"relative group",children:[C.jsxs("button",{type:"button",onClick:()=>g(!m),className:"w-24 h-24 rounded-3xl bg-stone-50 border-2 border-dashed border-stone-200 flex items-center justify-center text-4xl hover:border-stone-900 hover:bg-white transition-all shadow-inner group",children:[hb(u.icon,36),C.jsx("div",{className:"absolute -bottom-2 -right-2 bg-stone-900 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx(pb,{size:14})})]}),m&&C.jsx("div",{className:"absolute top-full mt-4 left-1/2 -translate-x-1/2 w-64 bg-white border border-stone-100 shadow-2xl rounded-2xl p-4 z-10 animate-in fade-in zoom-in duration-200",children:C.jsx("div",{className:"grid grid-cols-5 gap-2",children:Fg[u.category]?.map((j,X)=>C.jsx("button",{type:"button",onClick:()=>{c({...u,icon:j}),E(!0),g(!1)},className:"w-10 h-10 flex items-center justify-center hover:bg-stone-100 rounded-lg transition-colors",children:hb(j,20)},`${j.type}-${j.value}-${X}`))})})]})}),T==="main"&&C.jsxs("form",{className:"space-y-6",onSubmit:K,children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-3",children:"Core Category"}),C.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Closet","Beauty","Appliances"].map(j=>C.jsx("button",{type:"button",onClick:()=>L(j),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${u.category===j?"bg-stone-900 text-white border-stone-900 shadow-lg":"bg-white text-stone-500 border-stone-100 hover:border-stone-300"}`,children:j},j))})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("div",{className:"flex justify-between items-center mb-2",children:C.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Brand"})}),C.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:u.brand,onChange:j=>c({...u,brand:j.target.value}),children:[C.jsx("option",{value:"",children:"Select Brand"}),s?.brands?.[u.category]?.map(j=>C.jsx("option",{value:j,children:j},j))]})]}),C.jsxs("div",{children:[C.jsx("div",{className:"flex justify-between items-center mb-2",children:C.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Subcategory"})}),C.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:u.subcategory,onChange:j=>c({...u,subcategory:j.target.value}),children:[C.jsx("option",{value:"",children:"Select Subcategory"}),s.subcategories[u.category]?.map(j=>C.jsx("option",{value:j,children:j},j))]})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Item Name"}),C.jsx("input",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"e.g. Vintage Cashmere Sweater",value:u.name,onChange:j=>c(X=>({...X,name:j.target.value}))})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Price ($)"}),C.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0.00",value:u.price,onChange:j=>c(X=>({...X,price:j.target.value}))})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Initial Times Used"}),C.jsx("input",{required:!0,type:"number",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0",value:u.uses,onChange:j=>c(X=>({...X,price:j.target.value}))})]})]}),C.jsx("button",{type:"submit",className:"w-full py-5 bg-stone-900 text-white rounded-[24px] font-bold uppercase tracking-[0.2em] text-sm shadow-xl hover:bg-stone-800 transition-all hover:-translate-y-1 active:translate-y-0",children:"Save to My Collection"})]})]})})}):null},V4=(r,e=40)=>!r.iconType||!r.iconValue?null:r.iconType==="emoji"?C.jsx("span",{style:{fontSize:e},children:r.iconValue}):r.iconType==="custom"?C.jsx(ky,{name:r.iconValue,size:e}):null,O4=({items:r,activeCategory:e,requestSort:t,logUsage:s,deleteItem:o,updateItem:u,user:c,categoriesData:m,setCategoriesData:g})=>{const[p,E]=Oe.useState(!1),[T,I]=Oe.useState(null),L=j=>{I(j),E(!0)},K=()=>{E(!1),I(null)};return C.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 shadow-sm overflow-hidden",children:[C.jsxs("div",{className:"px-6 py-4 border-b border-stone-100 flex items-center justify-between bg-stone-50/50",children:[C.jsxs("h2",{className:"font-serif text-lg",children:[e," Collection"]}),C.jsx("button",{className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-stone-200 transition-all",children:C.jsx(JI,{size:14})})]}),C.jsxs("table",{className:"w-full text-left",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest border-b border-stone-100",children:[C.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900 transition-colors",onClick:()=>t("subcategory"),children:["Item / Subcategory ",C.jsx(Eu,{size:10,className:"inline ml-1"})]}),C.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("brand"),children:["Brand ",C.jsx(Eu,{size:10,className:"inline ml-1"})]}),C.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("price"),children:["Price ",C.jsx(Eu,{size:10,className:"inline ml-1"})]}),C.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("uses"),children:["Total Uses ",C.jsx(Eu,{size:10,className:"inline ml-1"})]}),C.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("cpu"),children:["Cost Per Use ",C.jsx(Eu,{size:10,className:"inline ml-1"})]}),C.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),C.jsx("tbody",{className:"divide-y divide-stone-50",children:r.map(j=>C.jsxs("tr",{className:"hover:bg-stone-50/50 transition-colors group",children:[C.jsx("td",{className:"px-6 py-4",children:C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"w-10 h-10 rounded-lg bg-stone-50 flex items-center justify-center shadow-sm",children:V4(j,24)}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm font-semibold",children:j.name}),C.jsxs("div",{className:"flex items-center gap-1.5",children:[C.jsx("p",{className:"text-[10px] text-stone-400 uppercase font-bold tracking-tighter",children:j.category}),j.subcategory&&C.jsxs(C.Fragment,{children:[C.jsx("span",{className:"text-[10px] text-stone-300",children:""}),C.jsx("p",{className:"text-[10px] text-stone-400 uppercase font-bold tracking-tighter",children:j.subcategory})]})]})]})]})}),C.jsx("td",{className:"px-6 py-4 text-sm",children:j.brand}),C.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",j.price.toFixed(2)]}),C.jsx("td",{className:"px-6 py-4 text-sm",children:j.uses}),C.jsx("td",{className:"px-6 py-4",children:C.jsxs("span",{className:`text-sm font-bold ${sc(j.price,j.uses)<10?"text-emerald-600":"text-stone-900"}`,children:["$",sc(j.price,j.uses).toFixed(2)]})}),C.jsx("td",{className:"px-6 py-4 text-right",children:C.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[C.jsx("button",{title:"Log Usage",onClick:()=>s(j.id),className:"p-2 bg-stone-100 text-stone-400 hover:bg-stone-900 hover:text-white rounded-xl transition-all shadow-sm",children:C.jsx(QI,{size:15})}),C.jsx("button",{title:"Edit Item",onClick:()=>L(j),className:"p-2 bg-stone-100 text-stone-400 hover:bg-stone-900 hover:text-white rounded-xl transition-all shadow-sm",children:C.jsx(uR,{size:15})}),C.jsx("button",{onClick:()=>o(j.id),title:"Delete Item",className:"p-2 bg-stone-100 text-stone-400 hover:bg-red-500 hover:text-white rounded-xl transition-all shadow-sm",children:C.jsx(yb,{size:15})})]})})]},j.id))})]}),p&&T&&C.jsx(D4,{isOpen:p,onClose:K,item:T,categoriesData:m,updateItem:u})]})},M4=({isOpen:r,onClose:e,onAuthSuccess:t})=>{const[s,o]=Oe.useState(!0),[u,c]=Oe.useState(""),[m,g]=Oe.useState(""),[p,E]=Oe.useState(!1);if(!r)return null;const T=async I=>{I.preventDefault(),E(!0);try{if(s){const L=await tx(Kf,u,m);t(L.user)}else{const L=await ex(Kf,u,m);t(L.user)}e()}catch(L){alert(L.message)}finally{E(!1)}};return C.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:C.jsxs("div",{className:"bg-white w-full max-w-md rounded-[32px] p-8 shadow-2xl relative overflow-hidden",children:[C.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-stone-400 hover:text-stone-600 transition-colors",children:C.jsx(Rp,{size:20})}),C.jsxs("div",{className:"mb-8 text-center",children:[C.jsx("h3",{className:"text-2xl font-serif italic mb-2",children:s?"Welcome Back":"Create Account"}),C.jsx("p",{className:"text-sm text-stone-500 font-medium",children:"Please enter your details to continue"})]}),C.jsxs("form",{className:"space-y-5",onSubmit:T,children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Email Address"}),C.jsxs("div",{className:"relative",children:[C.jsx(rR,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),C.jsx("input",{required:!0,type:"email",value:u,onChange:I=>c(I.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:"hello@example.com"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Password"}),C.jsxs("div",{className:"relative",children:[C.jsx(tR,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),C.jsx("input",{required:!0,type:"password",value:m,onChange:I=>g(I.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:""})]})]}),C.jsx("button",{disabled:p,type:"submit",className:"w-full py-4 bg-stone-900 text-white rounded-2xl font-bold uppercase tracking-widest text-xs shadow-lg hover:bg-stone-800 transition-all disabled:opacity-50",children:p?"Processing...":s?"Sign In":"Sign Up"})]}),C.jsx("div",{className:"mt-6 text-center",children:C.jsx("button",{onClick:()=>o(!s),className:"text-xs font-bold text-stone-400 hover:text-stone-900 transition-colors uppercase tracking-tight",children:s?"Don't have an account? Sign Up":"Already have an account? Sign In"})})]})})},nf={Closet:[...G1.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Beauty:[...K1.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Appliances:[...Q1.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""}]},fb=(r,e=32)=>r?r.type==="emoji"?C.jsx("span",{style:{fontSize:e},children:r.value}):r.type==="custom"?C.jsx(ky,{name:r.value,size:e}):null:null,db=({title:r,list:e,onAdd:t,onRemove:s,onBack:o})=>{const[u,c]=Oe.useState("");return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[C.jsx("button",{onClick:o,className:"p-2 hover:bg-stone-100 rounded-full transition-colors",children:C.jsx(GI,{size:20})}),C.jsx("h3",{className:"text-xl font-serif italic",children:r})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{className:"flex-1 bg-stone-50 border-stone-200 border rounded-xl px-4 py-2 outline-none focus:ring-2 ring-stone-200",placeholder:`New ${r.toLowerCase()} name...`,value:u,onChange:m=>c(m.target.value)}),C.jsx("button",{onClick:()=>{t(u),c("")},className:"bg-stone-900 text-white px-4 py-2 rounded-xl hover:bg-stone-800 transition-colors",children:C.jsx(gb,{size:20})})]}),C.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:e.map(m=>C.jsxs("div",{className:"flex justify-between items-center p-3 bg-stone-50 rounded-xl border border-stone-100",children:[C.jsx("span",{className:"text-stone-700",children:m}),C.jsx("button",{onClick:()=>s(m),className:"text-stone-400 hover:text-red-500 transition-colors",children:C.jsx(yb,{size:16})})]},m))})]})},P4=({isOpen:r,onClose:e,user:t,categoriesData:s,setCategoriesData:o,addItem:u})=>{const[c,m]=Oe.useState("main"),[g,p]=Oe.useState(!1),[E,T]=Oe.useState(!1),[I,L]=Oe.useState(!1),[K,j]=Oe.useState({category:"Closet",icon:nf.Closet[0],brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"});Oe.useEffect(()=>{r&&(L(!1),j(A=>({...A,category:"Closet",icon:nf.Closet[0]})))},[r]);const X=async(A,w,R,O,D)=>{if(!A||!w||!R||!O)return;const P=fl(Da,"users",A,"metadata","categories"),x=`${w}.${R}`;let Qe={};D==="add"?Qe[x]=WO(O):D==="remove"&&(Qe[x]=e4(O)),Qe.updatedAt=bd();try{await My(P,Qe),console.log(`Firebase ${w} for ${R} updated successfully.`)}catch(mt){console.error("Error updating Firebase categories:",mt),alert("Failed to update categories in Firebase: "+mt.message)}},fe=async A=>{if(!t||!A)return;const w=K.category,R=s.brands[w]||[];if(A&&!R.includes(A)){const O={...s.brands,[w]:[...R,A]};o(D=>({...D,brands:O})),await X(t.uid,"brands",w,A,"add")}},he=async A=>{if(!t||!A)return;const w=K.category,O=(s.brands[w]||[]).filter(P=>P!==A),D={...s.brands,[w]:O};o(P=>({...P,brands:D})),await X(t.uid,"brands",w,A,"remove")},ne=async A=>{if(!t||!A)return;const w=K.category,R=s.subcategories[w]||[];if(A&&!R.includes(A)){const O={...s.subcategories,[w]:[...R,A]};o(D=>({...D,subcategories:O})),await X(t.uid,"subcategories",w,A,"add")}},Ae=async A=>{if(!t||!A)return;const w=K.category,O=(s.subcategories[w]||[]).filter(P=>P!==A),D={...s.subcategories,[w]:O};o(P=>({...P,subcategories:D})),await X(t.uid,"subcategories",w,A,"remove")},Te=A=>{j(w=>I?{...w,category:A}:{...w,category:A,icon:nf[A]?.[0]??null})},oe=async A=>{if(A.preventDefault(),!t){alert("Guest mode (IndexedDB) is coming soon! Please sign in for now.");return}p(!0);try{const w={name:K.itemName,category:K.category,brand:K.brand,subcategory:K.subcategory,price:parseFloat(K.price)||0,uses:parseInt(K.timesUsed)||0,iconType:K.icon?.type??null,iconValue:K.icon?.value??null};await u(w),j({category:"Closet",brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"}),e()}catch(w){console.error("Add item failed:",w),alert("Failed to save item.")}finally{p(!1)}};return r?C.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:r&&C.jsx("div",{className:"bg-white w-full max-w-xl rounded-[40px] shadow-2xl overflow-hidden transition-all duration-300",children:C.jsxs("div",{className:"p-10",children:[c==="main"&&C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-3xl font-serif italic text-stone-900",children:"Add to Collection"}),C.jsx("p",{className:"text-stone-400 text-sm mt-1 font-medium",children:"Capture the details of your new piece"})]}),C.jsx("button",{onClick:()=>{e(),m("main")},className:"bg-stone-100 p-2 rounded-full text-stone-400 hover:text-stone-600 transition-colors",children:C.jsx(Rp,{size:24})})]}),C.jsx("div",{className:"flex justify-center mb-4",children:C.jsxs("div",{className:"relative group",children:[C.jsxs("button",{type:"button",onClick:()=>T(!E),className:"w-24 h-24 rounded-3xl bg-stone-50 border-2 border-dashed border-stone-200 flex items-center justify-center text-4xl hover:border-stone-900 hover:bg-white transition-all shadow-inner group",children:[fb(K.icon,36),C.jsx("div",{className:"absolute -bottom-2 -right-2 bg-stone-900 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx(pb,{size:14})})]}),E&&C.jsx("div",{className:"absolute top-full mt-4 left-1/2 -translate-x-1/2 w-64 bg-white border border-stone-100 shadow-2xl rounded-2xl p-4 z-10 animate-in fade-in zoom-in duration-200",children:C.jsx("div",{className:"grid grid-cols-5 gap-2",children:nf[K.category]?.map((A,w)=>C.jsx("button",{type:"button",onClick:()=>{j({...K,icon:A}),L(!0),T(!1)},className:"w-10 h-10 flex items-center justify-center hover:bg-stone-100 rounded-lg transition-colors",children:fb(A,20)},`${A.type}-${A.value}-${w}`))})})]})}),c==="main"&&C.jsxs("form",{className:"space-y-6",onSubmit:oe,children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-3",children:"Core Category"}),C.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Closet","Beauty","Appliances"].map(A=>C.jsx("button",{type:"button",onClick:()=>Te(A),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${K.category===A?"bg-stone-900 text-white border-stone-900 shadow-lg":"bg-white text-stone-500 border-stone-100 hover:border-stone-300"}`,children:A},A))})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Brand"}),C.jsx("button",{type:"button",onClick:()=>m("manage-brands"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:C.jsx(mE,{size:14})})]}),C.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:K.brand,onChange:A=>j({...K,brand:A.target.value}),children:[C.jsx("option",{value:"",children:"Select Brand"}),s.brands[K.category]?.map(A=>C.jsx("option",{value:A,children:A},A))]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Subcategory"}),C.jsx("button",{type:"button",onClick:()=>m("manage-subs"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:C.jsx(mE,{size:14})})]}),C.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:K.subcategory,onChange:A=>j({...K,subcategory:A.target.value}),children:[C.jsx("option",{value:"",children:"Select Subcategory"}),s.subcategories[K.category]?.map(A=>C.jsx("option",{value:A,children:A},A))]})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Item Name"}),C.jsx("input",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"e.g. Vintage Cashmere Sweater",value:K.itemName,onChange:A=>j({...K,itemName:A.target.value})})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Price ($)"}),C.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0.00",value:K.price,onChange:A=>j({...K,price:A.target.value})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Initial Times Used"}),C.jsx("input",{required:!0,type:"number",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0",value:K.timesUsed,onChange:A=>j({...K,timesUsed:A.target.value})})]})]}),C.jsx("button",{type:"submit",className:"w-full py-5 bg-stone-900 text-white rounded-[24px] font-bold uppercase tracking-[0.2em] text-sm shadow-xl hover:bg-stone-800 transition-all hover:-translate-y-1 active:translate-y-0",children:"Save to My Collection"})]}),c==="manage-brands"&&C.jsx(db,{title:"Brands",list:s.brands[K.category]||[],onAdd:fe,onRemove:he,onBack:()=>m("main")}),c==="manage-subs"&&C.jsx(db,{title:"Subcategories",list:s.subcategories[K.category]||[],onAdd:ne,onRemove:Ae,onBack:()=>m("main")})]})})}):null},k4=()=>{const{user:r,logout:e}=i4(),[t,s]=Oe.useState(!1),[o,u]=Oe.useState("All"),[c,m]=Oe.useState(""),[g,p]=Oe.useState({key:"cpu",direction:"desc"}),[E,T]=Oe.useState(!1),{categoriesData:I,setCategoriesData:L}=c4(r),{items:K,addItem:j,logUsage:X,deleteItem:fe,updateItem:he}=h4(r),ne=Oe.useMemo(()=>{let oe=K.filter(A=>(o==="All"||A.category===o)&&A.name.toLowerCase().includes(c.toLowerCase()));return g.key&&oe.sort((A,w)=>{if(g.key==="cpu")return d4(A,w,g.direction);let R=A[g.key],O=w[g.key];return(g.key==="brand"||g.key==="subcategory")&&(R=(R||"").toLowerCase(),O=(O||"").toLowerCase()),R<O?g.direction==="asc"?-1:1:R>O?g.direction==="asc"?1:-1:0}),oe},[K,o,c,g]),Ae=oe=>{let A="desc";g.key===oe&&g.direction==="desc"&&(A="asc"),p({key:oe,direction:A})},Te=f4(K).toFixed(2);return C.jsxs("div",{className:"flex h-screen bg-stone-50 font-sans text-stone-900 overflow-hidden",children:[C.jsxs("aside",{className:"w-64 bg-white border-r border-stone-200 flex flex-col p-6 space-y-8",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[C.jsx("div",{className:"w-8 h-8 bg-stone-800 rounded-lg flex items-center justify-center text-white font-serif italic text-xl",children:"A"}),C.jsx("h1",{className:"text-2xl font-serif italic tracking-tight",children:"Aichaku"})]}),C.jsxs("nav",{className:"flex-1 space-y-1",children:[C.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-4 ml-2",children:"Main Menu"}),[{id:"All",icon:WI,label:"Overview"},{id:"Journal",icon:FI,label:"Daily Journal"},{id:"Closet",icon:oR,label:"Closet"},{id:"Beauty",icon:pR,label:"Beauty"},{id:"Appliances",icon:XI,label:"Appliances"}].map(oe=>C.jsxs("button",{onClick:()=>u(oe.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all ${o===oe.id?"bg-stone-900 text-white shadow-md":"text-stone-500 hover:bg-stone-100"}`,children:[C.jsx(oe.icon,{size:18}),oe.label]},oe.id))]}),C.jsx("div",{className:"pt-6 border-t border-stone-100",children:r?C.jsx("div",{className:"group relative",children:C.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-2xl hover:bg-stone-50 transition-colors cursor-pointer",children:[C.jsx("div",{className:"w-9 h-9 rounded-full bg-stone-800 flex items-center justify-center text-white text-xs font-bold uppercase",children:r.email.charAt(0)}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("p",{className:"text-xs font-bold text-stone-900 truncate",children:"My Account"}),C.jsx("p",{className:"text-[10px] text-stone-400 truncate",children:r.email})]}),C.jsx("button",{onClick:e,className:"opacity-0 group-hover:opacity-100 p-1.5 text-stone-400 hover:text-red-500 transition-all",title:"Log out",children:C.jsx(iR,{size:14})})]})}):C.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-2xl bg-stone-100 text-stone-900 text-xs font-bold uppercase tracking-widest hover:bg-stone-200 transition-all border border-stone-200",children:[C.jsx(vR,{size:14})," Sign In"]})})]}),C.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[C.jsxs("header",{className:"h-20 bg-white border-b border-stone-200 flex items-center justify-between px-8",children:[C.jsxs("div",{className:"flex items-center bg-stone-100 px-4 py-2 rounded-full w-96",children:[C.jsx(fR,{size:16,className:"text-stone-400 mr-2"}),C.jsx("input",{className:"bg-transparent border-none outline-none text-sm w-full",placeholder:"Search your collection...",value:c,onChange:oe=>m(oe.target.value)})]}),C.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 bg-stone-900 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-sm hover:bg-stone-800 transition-all",children:[C.jsx(gb,{size:18})," Add New Item"]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[C.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[C.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[C.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Inventory Value"}),C.jsxs("p",{className:"text-3xl font-serif italic",children:["$",K.reduce((oe,A)=>oe+A.price,0).toLocaleString()]})]}),C.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[C.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Avg. Cost Per Use"}),C.jsxs("p",{className:"text-3xl font-serif italic",children:["$",Te]})]}),C.jsxs("div",{className:"bg-stone-900 text-white p-6 rounded-3xl shadow-lg flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Reward Earned"}),C.jsx("p",{className:"text-3xl font-serif italic text-amber-400",children:"$5.00"})]}),C.jsx(BI,{size:40,className:"text-amber-400 opacity-50"})]})]}),C.jsx(O4,{items:ne,activeCategory:o,requestSort:Ae,logUsage:X,deleteItem:fe,updateItem:he,categoriesData:I,setCategoriesData:L})]})]}),C.jsx(M4,{isOpen:t,onClose:()=>s(!1),onAuthSuccess:()=>s(!1)}),C.jsx(P4,{isOpen:E,onClose:()=>T(!1),user:r,categoriesData:I,setCategoriesData:L,addItem:j})]})};OI.createRoot(document.getElementById("root")).render(C.jsx(Oe.StrictMode,{children:C.jsx(k4,{})}));
