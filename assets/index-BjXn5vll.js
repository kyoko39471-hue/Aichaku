(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var _g={exports:{}},yu={};var $E;function cI(){if($E)return yu;$E=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return yu.Fragment=e,yu.jsx=t,yu.jsxs=t,yu}var JE;function hI(){return JE||(JE=1,_g.exports=cI()),_g.exports}var j=hI(),vg={exports:{}},we={};var ZE;function fI(){if(ZE)return we;ZE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function z(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,te={};function fe(V,J,se){this.props=V,this.context=J,this.refs=te,this.updater=se||W}fe.prototype.isReactComponent={},fe.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},fe.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Z(){}Z.prototype=fe.prototype;function Q(V,J,se){this.props=V,this.context=J,this.refs=te,this.updater=se||W}var he=Q.prototype=new Z;he.constructor=Q,ne(he,fe.prototype),he.isPureReactComponent=!0;var ye=Array.isArray;function de(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function R(V,J,se){var le=se.ref;return{$$typeof:s,type:V,key:J,ref:le!==void 0?le:null,props:se}}function O(V,J){return R(V.type,J,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function P(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(se){return J[se]})}var C=/\/+/g;function lt(V,J){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):J.toString(36)}function Pt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(de,de):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,J,se,le,Se){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var Ue=!1;if(V===null)Ue=!0;else switch(Ce){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(V.$$typeof){case s:case e:Ue=!0;break;case E:return Ue=V._init,K(Ue(V._payload),J,se,le,Se)}}if(Ue)return Se=Se(V),Ue=le===""?"."+lt(V,0):le,ye(Se)?(se="",Ue!=null&&(se=Ue.replace(C,"$&/")+"/"),K(Se,J,se,"",function(ws){return ws})):Se!=null&&(N(Se)&&(Se=O(Se,se+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(C,"$&/")+"/")+Ue)),J.push(Se)),1;Ue=0;var kt=le===""?".":le+":";if(ye(V))for(var ut=0;ut<V.length;ut++)le=V[ut],Ce=kt+lt(le,ut),Ue+=K(le,J,se,Ce,Se);else if(ut=z(V),typeof ut=="function")for(V=ut.call(V),ut=0;!(le=V.next()).done;)le=le.value,Ce=kt+lt(le,ut++),Ue+=K(le,J,se,Ce,Se);else if(Ce==="object"){if(typeof V.then=="function")return K(Pt(V),J,se,le,Se);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function re(V,J,se){if(V==null)return V;var le=[],Se=0;return K(V,le,"","",function(Ce){return J.call(se,Ce,Se++)}),le}function Ee(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(se){(V._status===0||V._status===-1)&&(V._status=1,V._result=se)},function(se){(V._status===0||V._status===-1)&&(V._status=2,V._result=se)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var Be=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ke={map:re,forEach:function(V,J,se){re(V,function(){J.apply(this,arguments)},se)},count:function(V){var J=0;return re(V,function(){J++}),J},toArray:function(V){return re(V,function(J){return J})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return we.Activity=b,we.Children=Ke,we.Component=fe,we.Fragment=t,we.Profiler=o,we.PureComponent=Q,we.StrictMode=r,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,we.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},we.cache=function(V){return function(){return V.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(V,J,se){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=ne({},V.props),Se=V.key;if(J!=null)for(Ce in J.key!==void 0&&(Se=""+J.key),J)!w.call(J,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&J.ref===void 0||(le[Ce]=J[Ce]);var Ce=arguments.length-2;if(Ce===1)le.children=se;else if(1<Ce){for(var Ue=Array(Ce),kt=0;kt<Ce;kt++)Ue[kt]=arguments[kt+2];le.children=Ue}return R(V.type,Se,le)},we.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},we.createElement=function(V,J,se){var le,Se={},Ce=null;if(J!=null)for(le in J.key!==void 0&&(Ce=""+J.key),J)w.call(J,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Se[le]=J[le]);var Ue=arguments.length-2;if(Ue===1)Se.children=se;else if(1<Ue){for(var kt=Array(Ue),ut=0;ut<Ue;ut++)kt[ut]=arguments[ut+2];Se.children=kt}if(V&&V.defaultProps)for(le in Ue=V.defaultProps,Ue)Se[le]===void 0&&(Se[le]=Ue[le]);return R(V,Ce,Se)},we.createRef=function(){return{current:null}},we.forwardRef=function(V){return{$$typeof:m,render:V}},we.isValidElement=N,we.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:Ee}},we.memo=function(V,J){return{$$typeof:p,type:V,compare:J===void 0?null:J}},we.startTransition=function(V){var J=I.T,se={};I.T=se;try{var le=V(),Se=I.S;Se!==null&&Se(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(de,Be)}catch(Ce){Be(Ce)}finally{J!==null&&se.types!==null&&(J.types=se.types),I.T=J}},we.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},we.use=function(V){return I.H.use(V)},we.useActionState=function(V,J,se){return I.H.useActionState(V,J,se)},we.useCallback=function(V,J){return I.H.useCallback(V,J)},we.useContext=function(V){return I.H.useContext(V)},we.useDebugValue=function(){},we.useDeferredValue=function(V,J){return I.H.useDeferredValue(V,J)},we.useEffect=function(V,J){return I.H.useEffect(V,J)},we.useEffectEvent=function(V){return I.H.useEffectEvent(V)},we.useId=function(){return I.H.useId()},we.useImperativeHandle=function(V,J,se){return I.H.useImperativeHandle(V,J,se)},we.useInsertionEffect=function(V,J){return I.H.useInsertionEffect(V,J)},we.useLayoutEffect=function(V,J){return I.H.useLayoutEffect(V,J)},we.useMemo=function(V,J){return I.H.useMemo(V,J)},we.useOptimistic=function(V,J){return I.H.useOptimistic(V,J)},we.useReducer=function(V,J,se){return I.H.useReducer(V,J,se)},we.useRef=function(V){return I.H.useRef(V)},we.useState=function(V){return I.H.useState(V)},we.useSyncExternalStore=function(V,J,se){return I.H.useSyncExternalStore(V,J,se)},we.useTransition=function(){return I.H.useTransition()},we.version="19.2.3",we}var WE;function Sp(){return WE||(WE=1,vg.exports=fI()),vg.exports}var rt=Sp(),Eg={exports:{}},_u={},Tg={exports:{}},bg={};var eT;function dI(){return eT||(eT=1,(function(s){function e(K,re){var Ee=K.length;K.push(re);e:for(;0<Ee;){var Be=Ee-1>>>1,Ke=K[Be];if(0<o(Ke,re))K[Be]=re,K[Ee]=Ke,Ee=Be;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var re=K[0],Ee=K.pop();if(Ee!==re){K[0]=Ee;e:for(var Be=0,Ke=K.length,V=Ke>>>1;Be<V;){var J=2*(Be+1)-1,se=K[J],le=J+1,Se=K[le];if(0>o(se,Ee))le<Ke&&0>o(Se,se)?(K[Be]=Se,K[le]=Ee,Be=le):(K[Be]=se,K[J]=Ee,Be=J);else if(le<Ke&&0>o(Se,Ee))K[Be]=Se,K[le]=Ee,Be=le;else break e}}return re}function o(K,re){var Ee=K.sortIndex-re.sortIndex;return Ee!==0?Ee:K.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,b=null,A=3,z=!1,W=!1,ne=!1,te=!1,fe=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function he(K){for(var re=t(p);re!==null;){if(re.callback===null)r(p);else if(re.startTime<=K)r(p),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(p)}}function ye(K){if(ne=!1,he(K),!W)if(t(g)!==null)W=!0,de||(de=!0,P());else{var re=t(p);re!==null&&Pt(ye,re.startTime-K)}}var de=!1,I=-1,w=5,R=-1;function O(){return te?!0:!(s.unstable_now()-R<w)}function N(){if(te=!1,de){var K=s.unstable_now();R=K;var re=!0;try{e:{W=!1,ne&&(ne=!1,Z(I),I=-1),z=!0;var Ee=A;try{t:{for(he(K),b=t(g);b!==null&&!(b.expirationTime>K&&O());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,A=b.priorityLevel;var Ke=Be(b.expirationTime<=K);if(K=s.unstable_now(),typeof Ke=="function"){b.callback=Ke,he(K),re=!0;break t}b===t(g)&&r(g),he(K)}else r(g);b=t(g)}if(b!==null)re=!0;else{var V=t(p);V!==null&&Pt(ye,V.startTime-K),re=!1}}break e}finally{b=null,A=Ee,z=!1}re=void 0}}finally{re?P():de=!1}}}var P;if(typeof Q=="function")P=function(){Q(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,lt=C.port2;C.port1.onmessage=N,P=function(){lt.postMessage(null)}}else P=function(){fe(N,0)};function Pt(K,re){I=fe(function(){K(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(K){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var Ee=A;A=re;try{return K()}finally{A=Ee}},s.unstable_requestPaint=function(){te=!0},s.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ee=A;A=K;try{return re()}finally{A=Ee}},s.unstable_scheduleCallback=function(K,re,Ee){var Be=s.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Be+Ee:Be):Ee=Be,K){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=Ee+Ke,K={id:E++,callback:re,priorityLevel:K,startTime:Ee,expirationTime:Ke,sortIndex:-1},Ee>Be?(K.sortIndex=Ee,e(p,K),t(g)===null&&K===t(p)&&(ne?(Z(I),I=-1):ne=!0,Pt(ye,Ee-Be))):(K.sortIndex=Ke,e(g,K),W||z||(W=!0,de||(de=!0,P()))),K},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(K){var re=A;return function(){var Ee=A;A=re;try{return K.apply(this,arguments)}finally{A=Ee}}}})(bg)),bg}var tT;function mI(){return tT||(tT=1,Tg.exports=dI()),Tg.exports}var Sg={exports:{}},en={};var nT;function gI(){if(nT)return en;nT=1;var s=Sp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,en.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},en.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},en.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},en.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},en.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,b=m(E,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,z=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:z}):E==="script"&&r.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:z,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},en.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,b=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},en.requestFormReset=function(g){r.d.r(g)},en.unstable_batchedUpdates=function(g,p){return g(p)},en.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.3",en}var iT;function pI(){if(iT)return Sg.exports;iT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sg.exports=gI(),Sg.exports}var rT;function yI(){if(rT)return _u;rT=1;var s=mI(),e=Sp(),t=pI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function lt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ne:return"Fragment";case fe:return"Profiler";case te:return"StrictMode";case ye:return"Suspense";case de:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case W:return"Portal";case Q:return n.displayName||"Context";case Z:return(n._context.displayName||"Context")+".Consumer";case he:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:lt(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return lt(n(i))}catch{}}return null}var Pt=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Be=[],Ke=-1;function V(n){return{current:n}}function J(n){0>Ke||(n.current=Be[Ke],Be[Ke]=null,Ke--)}function se(n,i){Ke++,Be[Ke]=n.current,n.current=i}var le=V(null),Se=V(null),Ce=V(null),Ue=V(null);function kt(n,i){switch(se(Ce,i),se(Se,n),se(le,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?vE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=vE(i),n=EE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(le),se(le,n)}function ut(){J(le),J(Se),J(Ce)}function ws(n){n.memoizedState!==null&&se(Ue,n);var i=le.current,a=EE(i,n.type);i!==a&&(se(Se,n),se(le,a))}function Na(n){Se.current===n&&(J(le),J(Se)),Ue.current===n&&(J(Ue),du._currentValue=Ee)}var Va,Oa;function ci(n){if(Va===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Va=i&&i[1]||"",Oa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Va+n+Oa}var dl=!1;function Is(n,i){if(!n||dl)return"";dl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var q=H}Reflect.construct(n,[],$)}else{try{$.call()}catch(H){q=H}n.call($.prototype)}}else{try{throw Error()}catch(H){q=H}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var x=_.split(`
`),B=T.split(`
`);for(f=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===x.length||f===B.length)for(l=x.length-1,f=B.length-1;1<=l&&0<=f&&x[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(x[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||x[l]!==B[f]){var G=`
`+x[l].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=l&&0<=f);break}}}finally{dl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ci(a):""}function ml(n,i){switch(n.tag){case 26:case 27:case 5:return ci(n.type);case 16:return ci("Lazy");case 13:return n.child!==i&&i!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Is(n.type,!1);case 11:return Is(n.type.render,!1);case 1:return Is(n.type,!0);case 31:return ci("Activity");default:return""}}function gl(n){try{var i="",a=null;do i+=ml(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,Lt=s.unstable_scheduleCallback,Er=s.unstable_cancelCallback,Ed=s.unstable_shouldYield,_c=s.unstable_requestPaint,ln=s.unstable_now,Rs=s.unstable_getCurrentPriorityLevel,pl=s.unstable_ImmediatePriority,yl=s.unstable_UserBlockingPriority,Tr=s.unstable_NormalPriority,Td=s.unstable_LowPriority,vc=s.unstable_IdlePriority,Ec=s.log,Tc=s.unstable_setDisableYieldValue,Xn=null,Kt=null;function Mn(n){if(typeof Ec=="function"&&Tc(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Xn,n)}catch{}}var yt=Math.clz32?Math.clz32:Sc,bc=Math.log,Ma=Math.LN2;function Sc(n){return n>>>=0,n===0?32:31-(bc(n)/Ma|0)|0}var hi=256,Cs=262144,At=4194304;function fi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function di(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=fi(l):(_&=T,_!==0?f=fi(_):a||(a=T&~n,a!==0&&(f=fi(a))))):(T=l&~d,T!==0?f=fi(T):_!==0?f=fi(_):a||(a=l&~n,a!==0&&(f=fi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function $n(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function bd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ac(){var n=At;return At<<=1,(At&62914560)===0&&(At=4194304),n}function mi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function xs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Sd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,x=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var G=31-yt(a),$=1<<G;T[G]=0,x[G]=-1;var q=B[G];if(q!==null)for(B[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~$}l!==0&&Ds(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Ds(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-yt(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function _l(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-yt(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function vl(n,i){var a=i&-i;return a=(a&42)!==0?1:Ns(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ns(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function wc(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:FE(n.type))}function Jn(n,i){var a=re.p;try{return re.p=n,i()}finally{re.p=a}}var Zn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Zn,qt="__reactProps$"+Zn,gi="__reactContainer$"+Zn,Pa="__reactEvents$"+Zn,Ad="__reactListeners$"+Zn,Ic="__reactHandles$"+Zn,Rc="__reactResources$"+Zn,pi="__reactMarker$"+Zn;function ka(n){delete n[wt],delete n[qt],delete n[Pa],delete n[Ad],delete n[Ic]}function yi(n){var i=n[wt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[gi]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=RE(n);n!==null;){if(a=n[wt])return a;n=RE(n)}return i}n=a,a=n.parentNode}return null}function Pn(n){if(n=n[wt]||n[gi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Tn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function _i(n){var i=n[Rc];return i||(i=n[Rc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(n){n[pi]=!0}var El=new Set,Tl={};function vi(n,i){Ei(n,i),Ei(n+"Capture",i)}function Ei(n,i){for(Tl[n]=i,n=0;n<i.length;n++)El.add(i[n])}var bl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sl={},Al={};function Cc(n){return St.call(Al,n)?!0:St.call(Sl,n)?!1:bl.test(n)?Al[n]=!0:(Sl[n]=!0,!1)}function La(n,i,a){if(Cc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function bn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Rt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function br(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Qe(n){if(!n._valueTracker){var i=br(n)?"checked":"value";n._valueTracker=wl(n,i,""+n[i])}}function Vs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=br(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ti(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Os=/[\n"\\]/g;function fn(n){return n.replace(Os,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ua(n,i,a,l,f,d,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ft(i)):n.value!==""+Ft(i)&&(n.value=""+Ft(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Il(n,_,Ft(i)):a!=null?Il(n,_,Ft(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Ft(T):n.removeAttribute("name")}function xc(n,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qe(n);return}a=a!=null?""+Ft(a):"",i=i!=null?""+Ft(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Qe(n)}function Il(n,i,a){i==="number"&&Ti(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Sr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Ft(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Dc(n,i,a){if(i!=null&&(i=""+Ft(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Ft(a):""}function Ar(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Pt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ft(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Qe(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Nc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Cl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Rl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Rl(n,d,i[d])}function za(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(n){return wr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Wn(){}var xl=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ir=null,bi=null;function Ms(n){var i=Pn(n);if(i&&(n=i.stateNode)){var a=n[qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ua(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qt]||null;if(!f)throw Error(r(90));Ua(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Vs(l)}break e;case"textarea":Dc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Sr(n,!!a.multiple,i,!1)}}}var ja=!1;function Rr(n,i,a){if(ja)return n(i,a);ja=!0;try{var l=n(i);return l}finally{if(ja=!1,(Ir!==null||bi!==null)&&(wh(),Ir&&(i=Ir,n=bi,bi=Ir=null,Ms(i),n)))for(i=0;i<n.length;i++)Ms(n[i])}}function ei(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(Ln)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Ps=!1}var Si=null,Dl=null,ks=null;function Nl(){if(ks)return ks;var n,i=Dl,a=i.length,l,f="value"in Si?Si.value:Si.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return ks=f.slice(n,1<l?1-l:void 0)}function Ls(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Hi(){return!0}function ti(){return!1}function Qt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Hi:ti,this.isPropagationStopped=ti,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),i}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Qt(Gi),Cr=b({},Gi,{view:0,detail:0}),Vl=Qt(Cr),xr,qa,wi,Fa=b({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(xr=n.screenX-wi.screenX,qa=n.screenY-wi.screenY):qa=xr=0,wi=n),xr)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),Ol=Qt(Fa),Us=b({},Fa,{dataTransfer:0}),Oc=Qt(Us),Mc=b({},Cr,{relatedTarget:0}),zs=Qt(Mc),Ml=b({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Pc=Qt(Ml),Ha=b({},Gi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kc=Qt(Ha),Lc=b({},Gi,{data:0}),Ii=Qt(Lc),Uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Bc[n])?!!i[n]:!1}function Dr(){return jc}var un=b({},Cr,{key:function(n){if(n.key){var i=Uc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ls(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(n){return n.type==="keypress"?Ls(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ls(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qc=Qt(un),Fc=b({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Qt(Fc),h=b({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),y=Qt(h),v=b({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qt(v),L=b({},Fa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Qt(L),ie=b({},Gi,{newState:0,oldState:0}),Ie=Qt(ie),_t=[9,13,27,32],Fe=Ln&&"CompositionEvent"in window,ct=null;Ln&&"documentMode"in document&&(ct=document.documentMode);var Un=Ln&&"TextEvent"in window&&!ct,Ri=Ln&&(!Fe||ct&&8<ct&&11>=ct),ni=" ",ii=!1;function Bs(n,i){switch(n){case"keyup":return _t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ga(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ka=!1;function M1(n,i){switch(n){case"compositionend":return Ga(i);case"keypress":return i.which!==32?null:(ii=!0,ni);case"textInput":return n=i.data,n===ni&&ii?null:n;default:return null}}function P1(n,i){if(Ka)return n==="compositionend"||!Fe&&Bs(n,i)?(n=Nl(),ks=Dl=Si=null,Ka=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var k1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!k1[n.type]:i==="textarea"}function Ny(n,i,a,l){Ir?bi?bi.push(l):bi=[l]:Ir=l,i=Vh(i,"onChange"),0<i.length&&(a=new Ai("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Pl=null,kl=null;function L1(n){dE(n,0)}function Hc(n){var i=Tn(n);if(Vs(i))return n}function Vy(n,i){if(n==="change")return i}var Oy=!1;if(Ln){var wd;if(Ln){var Id="oninput"in document;if(!Id){var My=document.createElement("div");My.setAttribute("oninput","return;"),Id=typeof My.oninput=="function"}wd=Id}else wd=!1;Oy=wd&&(!document.documentMode||9<document.documentMode)}function Py(){Pl&&(Pl.detachEvent("onpropertychange",ky),kl=Pl=null)}function ky(n){if(n.propertyName==="value"&&Hc(kl)){var i=[];Ny(i,kl,n,kn(n)),Rr(L1,i)}}function U1(n,i,a){n==="focusin"?(Py(),Pl=i,kl=a,Pl.attachEvent("onpropertychange",ky)):n==="focusout"&&Py()}function z1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hc(kl)}function B1(n,i){if(n==="click")return Hc(i)}function j1(n,i){if(n==="input"||n==="change")return Hc(i)}function q1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:q1;function Ll(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function Ly(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uy(n,i){var a=Ly(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ly(a)}}function zy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function By(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ti(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ti(n.document)}return i}function Rd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var F1=Ln&&"documentMode"in document&&11>=document.documentMode,Qa=null,Cd=null,Ul=null,xd=!1;function jy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xd||Qa==null||Qa!==Ti(l)||(l=Qa,"selectionStart"in l&&Rd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ul&&Ll(Ul,l)||(Ul=l,l=Vh(Cd,"onSelect"),0<l.length&&(i=new Ai("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Qa)))}function js(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ya={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},Dd={},qy={};Ln&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function qs(n){if(Dd[n])return Dd[n];if(!Ya[n])return n;var i=Ya[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in qy)return Dd[n]=i[a];return n}var Fy=qs("animationend"),Hy=qs("animationiteration"),Gy=qs("animationstart"),H1=qs("transitionrun"),G1=qs("transitionstart"),K1=qs("transitioncancel"),Ky=qs("transitionend"),Qy=new Map,Nd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nd.push("scrollEnd");function ri(n,i){Qy.set(n,i),vi(i,[n])}var Gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Xa=0,Vd=0;function Kc(){for(var n=Xa,i=Vd=Xa=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Yy(a,f,d)}}function Qc(n,i,a,l){zn[Xa++]=n,zn[Xa++]=i,zn[Xa++]=a,zn[Xa++]=l,Vd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Od(n,i,a,l){return Qc(n,i,a,l),Yc(n)}function Fs(n,i){return Qc(n,null,null,i),Yc(n)}function Yy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-yt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Yc(n){if(50<au)throw au=0,qm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var $a={};function Q1(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,l){return new Q1(n,i,a,l)}function Md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qi(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Xy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Xc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")Md(n)&&(_=1);else if(typeof n=="string")_=Zw(n,a,le.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=An(31,a,i,f),n.elementType=R,n.lanes=d,n;case ne:return Hs(a.children,f,d,i);case te:_=8,f|=24;break;case fe:return n=An(12,a,i,f|2),n.elementType=fe,n.lanes=d,n;case ye:return n=An(13,a,i,f),n.elementType=ye,n.lanes=d,n;case de:return n=An(19,a,i,f),n.elementType=de,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:_=10;break e;case Z:_=9;break e;case he:_=11;break e;case I:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=An(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Hs(n,i,a,l){return n=An(7,n,l,i),n.lanes=a,n}function Pd(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function $y(n){var i=An(18,null,null,0);return i.stateNode=n,i}function kd(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Jy=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=Jy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:gl(i)},Jy.set(n,i),i)}return{value:n,source:i,stack:gl(i)}}var Ja=[],Za=0,$c=null,zl=0,jn=[],qn=0,Nr=null,Ci=1,xi="";function Yi(n,i){Ja[Za++]=zl,Ja[Za++]=$c,$c=n,zl=i}function Zy(n,i,a){jn[qn++]=Ci,jn[qn++]=xi,jn[qn++]=Nr,Nr=n;var l=Ci;n=xi;var f=32-yt(l)-1;l&=~(1<<f),a+=1;var d=32-yt(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ci=1<<32-yt(i)+f|a<<f|l,xi=d+n}else Ci=1<<d|a<<f|l,xi=n}function Ld(n){n.return!==null&&(Yi(n,1),Zy(n,1,0))}function Ud(n){for(;n===$c;)$c=Ja[--Za],Ja[Za]=null,zl=Ja[--Za],Ja[Za]=null;for(;n===Nr;)Nr=jn[--qn],jn[qn]=null,xi=jn[--qn],jn[qn]=null,Ci=jn[--qn],jn[qn]=null}function Wy(n,i){jn[qn++]=Ci,jn[qn++]=xi,jn[qn++]=Nr,Ci=i.id,xi=i.overflow,Nr=n}var Yt=null,at=null,ke=!1,Vr=null,Fn=!1,zd=Error(r(519));function Or(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl(Bn(i,n)),zd}function e_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[wt]=n,i[qt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<lu.length;a++)Ve(lu[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),xc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),Ar(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||yE(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=Wn),i=!0):i=!1,i||Or(n,!0)}function t_(n){for(Yt=n.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Yt=Yt.return}}function Wa(n){if(n!==Yt)return!1;if(!ke)return t_(n),ke=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||ig(n.type,n.memoizedProps)),a=!a),a&&at&&Or(n),t_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));at=IE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));at=IE(n)}else i===27?(i=at,Qr(n.type)?(n=lg,lg=null,at=n):at=i):at=Yt?Gn(n.stateNode.nextSibling):null;return!0}function Gs(){at=Yt=null,ke=!1}function Bd(){var n=Vr;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Vr=null),n}function Bl(n){Vr===null?Vr=[n]:Vr.push(n)}var jd=V(null),Ks=null,Xi=null;function Mr(n,i,a){se(jd,i._currentValue),i._currentValue=a}function $i(n){n._currentValue=jd.current,J(jd)}function qd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Fd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var x=0;x<i.length;x++)if(T.context===i[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),qd(d.return,a,n),l||(_=null);break e}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),qd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function eo(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Ue.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(du):n=[du])}f=f.return}n!==null&&Fd(i,n,a,l),i.flags|=262144}function Jc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qs(n){Ks=n,Xi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return n_(Ks,n)}function Zc(n,i){return Ks===null&&Qs(n),n_(n,i)}function n_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Xi===null){if(n===null)throw Error(r(308));Xi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Xi=Xi.next=i;return a}var Y1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},X1=s.unstable_scheduleCallback,$1=s.unstable_NormalPriority,Ct={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hd(){return{controller:new Y1,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&X1($1,function(){n.controller.abort()})}var ql=null,Gd=0,to=0,no=null;function J1(n,i){if(ql===null){var a=ql=[];Gd=0,to=Ym(),no={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Gd++,i.then(i_,i_),i}function i_(){if(--Gd===0&&ql!==null){no!==null&&(no.status="fulfilled");var n=ql;ql=null,to=0,no=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Z1(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var r_=K.S;K.S=function(n,i){jv=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&J1(n,i),r_!==null&&r_(n,i)};var Ys=V(null);function Kd(){var n=Ys.current;return n!==null?n:it.pooledCache}function Wc(n,i){i===null?se(Ys,Ys.current):se(Ys,i.pool)}function s_(){var n=Kd();return n===null?null:{parent:Ct._currentValue,pool:n}}var io=Error(r(460)),Qd=Error(r(474)),eh=Error(r(542)),th={then:function(){}};function a_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function o_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Wn,Wn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,u_(n),n;default:if(typeof i.status=="string")i.then(Wn,Wn);else{if(n=it,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,u_(n),n}throw $s=i,io}}function Xs(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($s=a,io):a}}var $s=null;function l_(){if($s===null)throw Error(r(459));var n=$s;return $s=null,n}function u_(n){if(n===io||n===eh)throw Error(r(483))}var ro=null,Fl=0;function nh(n){var i=Fl;return Fl+=1,ro===null&&(ro=[]),o_(ro,n,i)}function Hl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function ih(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function c_(n){function i(M,D){if(n){var U=M.deletions;U===null?(M.deletions=[D],M.flags|=16):U.push(D)}}function a(M,D){if(!n)return null;for(;D!==null;)i(M,D),D=D.sibling;return null}function l(M){for(var D=new Map;M!==null;)M.key!==null?D.set(M.key,M):D.set(M.index,M),M=M.sibling;return D}function f(M,D){return M=Qi(M,D),M.index=0,M.sibling=null,M}function d(M,D,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<D?(M.flags|=67108866,D):U):(M.flags|=67108866,D)):(M.flags|=1048576,D)}function _(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function T(M,D,U,Y){return D===null||D.tag!==6?(D=Pd(U,M.mode,Y),D.return=M,D):(D=f(D,U),D.return=M,D)}function x(M,D,U,Y){var _e=U.type;return _e===ne?G(M,D,U.props.children,Y,U.key):D!==null&&(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Xs(_e)===D.type)?(D=f(D,U.props),Hl(D,U),D.return=M,D):(D=Xc(U.type,U.key,U.props,null,M.mode,Y),Hl(D,U),D.return=M,D)}function B(M,D,U,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=kd(U,M.mode,Y),D.return=M,D):(D=f(D,U.children||[]),D.return=M,D)}function G(M,D,U,Y,_e){return D===null||D.tag!==7?(D=Hs(U,M.mode,Y,_e),D.return=M,D):(D=f(D,U),D.return=M,D)}function $(M,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Pd(""+D,M.mode,U),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case z:return U=Xc(D.type,D.key,D.props,null,M.mode,U),Hl(U,D),U.return=M,U;case W:return D=kd(D,M.mode,U),D.return=M,D;case w:return D=Xs(D),$(M,D,U)}if(Pt(D)||P(D))return D=Hs(D,M.mode,U,null),D.return=M,D;if(typeof D.then=="function")return $(M,nh(D),U);if(D.$$typeof===Q)return $(M,Zc(M,D),U);ih(M,D)}return null}function q(M,D,U,Y){var _e=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return _e!==null?null:T(M,D,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return U.key===_e?x(M,D,U,Y):null;case W:return U.key===_e?B(M,D,U,Y):null;case w:return U=Xs(U),q(M,D,U,Y)}if(Pt(U)||P(U))return _e!==null?null:G(M,D,U,Y,null);if(typeof U.then=="function")return q(M,D,nh(U),Y);if(U.$$typeof===Q)return q(M,D,Zc(M,U),Y);ih(M,U)}return null}function H(M,D,U,Y,_e){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return M=M.get(U)||null,T(D,M,""+Y,_e);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return M=M.get(Y.key===null?U:Y.key)||null,x(D,M,Y,_e);case W:return M=M.get(Y.key===null?U:Y.key)||null,B(D,M,Y,_e);case w:return Y=Xs(Y),H(M,D,U,Y,_e)}if(Pt(Y)||P(Y))return M=M.get(U)||null,G(D,M,Y,_e,null);if(typeof Y.then=="function")return H(M,D,U,nh(Y),_e);if(Y.$$typeof===Q)return H(M,D,U,Zc(D,Y),_e);ih(D,Y)}return null}function ce(M,D,U,Y){for(var _e=null,je=null,ge=D,xe=D=0,Me=null;ge!==null&&xe<U.length;xe++){ge.index>xe?(Me=ge,ge=null):Me=ge.sibling;var qe=q(M,ge,U[xe],Y);if(qe===null){ge===null&&(ge=Me);break}n&&ge&&qe.alternate===null&&i(M,ge),D=d(qe,D,xe),je===null?_e=qe:je.sibling=qe,je=qe,ge=Me}if(xe===U.length)return a(M,ge),ke&&Yi(M,xe),_e;if(ge===null){for(;xe<U.length;xe++)ge=$(M,U[xe],Y),ge!==null&&(D=d(ge,D,xe),je===null?_e=ge:je.sibling=ge,je=ge);return ke&&Yi(M,xe),_e}for(ge=l(ge);xe<U.length;xe++)Me=H(ge,M,xe,U[xe],Y),Me!==null&&(n&&Me.alternate!==null&&ge.delete(Me.key===null?xe:Me.key),D=d(Me,D,xe),je===null?_e=Me:je.sibling=Me,je=Me);return n&&ge.forEach(function(Zr){return i(M,Zr)}),ke&&Yi(M,xe),_e}function Te(M,D,U,Y){if(U==null)throw Error(r(151));for(var _e=null,je=null,ge=D,xe=D=0,Me=null,qe=U.next();ge!==null&&!qe.done;xe++,qe=U.next()){ge.index>xe?(Me=ge,ge=null):Me=ge.sibling;var Zr=q(M,ge,qe.value,Y);if(Zr===null){ge===null&&(ge=Me);break}n&&ge&&Zr.alternate===null&&i(M,ge),D=d(Zr,D,xe),je===null?_e=Zr:je.sibling=Zr,je=Zr,ge=Me}if(qe.done)return a(M,ge),ke&&Yi(M,xe),_e;if(ge===null){for(;!qe.done;xe++,qe=U.next())qe=$(M,qe.value,Y),qe!==null&&(D=d(qe,D,xe),je===null?_e=qe:je.sibling=qe,je=qe);return ke&&Yi(M,xe),_e}for(ge=l(ge);!qe.done;xe++,qe=U.next())qe=H(ge,M,xe,qe.value,Y),qe!==null&&(n&&qe.alternate!==null&&ge.delete(qe.key===null?xe:qe.key),D=d(qe,D,xe),je===null?_e=qe:je.sibling=qe,je=qe);return n&&ge.forEach(function(uI){return i(M,uI)}),ke&&Yi(M,xe),_e}function tt(M,D,U,Y){if(typeof U=="object"&&U!==null&&U.type===ne&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case z:e:{for(var _e=U.key;D!==null;){if(D.key===_e){if(_e=U.type,_e===ne){if(D.tag===7){a(M,D.sibling),Y=f(D,U.props.children),Y.return=M,M=Y;break e}}else if(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Xs(_e)===D.type){a(M,D.sibling),Y=f(D,U.props),Hl(Y,U),Y.return=M,M=Y;break e}a(M,D);break}else i(M,D);D=D.sibling}U.type===ne?(Y=Hs(U.props.children,M.mode,Y,U.key),Y.return=M,M=Y):(Y=Xc(U.type,U.key,U.props,null,M.mode,Y),Hl(Y,U),Y.return=M,M=Y)}return _(M);case W:e:{for(_e=U.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(M,D.sibling),Y=f(D,U.children||[]),Y.return=M,M=Y;break e}else{a(M,D);break}else i(M,D);D=D.sibling}Y=kd(U,M.mode,Y),Y.return=M,M=Y}return _(M);case w:return U=Xs(U),tt(M,D,U,Y)}if(Pt(U))return ce(M,D,U,Y);if(P(U)){if(_e=P(U),typeof _e!="function")throw Error(r(150));return U=_e.call(U),Te(M,D,U,Y)}if(typeof U.then=="function")return tt(M,D,nh(U),Y);if(U.$$typeof===Q)return tt(M,D,Zc(M,U),Y);ih(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(M,D.sibling),Y=f(D,U),Y.return=M,M=Y):(a(M,D),Y=Pd(U,M.mode,Y),Y.return=M,M=Y),_(M)):a(M,D)}return function(M,D,U,Y){try{Fl=0;var _e=tt(M,D,U,Y);return ro=null,_e}catch(ge){if(ge===io||ge===eh)throw ge;var je=An(29,ge,null,M.mode);return je.lanes=Y,je.return=M,je}}}var Js=c_(!0),h_=c_(!1),Pr=!1;function Yd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function kr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Yc(n),Yy(n,null,a),i}return Qc(n,l,i,a),Yc(n)}function Gl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,_l(n,a)}}function $d(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Jd=!1;function Kl(){if(Jd){var n=no;if(n!==null)throw n}}function Ql(n,i,a,l){Jd=!1;var f=n.updateQueue;Pr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var x=T,B=x.next;x.next=null,_===null?d=B:_.next=B,_=x;var G=n.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==_&&(T===null?G.firstBaseUpdate=B:T.next=B,G.lastBaseUpdate=x))}if(d!==null){var $=f.baseState;_=0,G=B=x=null,T=d;do{var q=T.lane&-536870913,H=q!==T.lane;if(H?(Oe&q)===q:(l&q)===q){q!==0&&q===to&&(Jd=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=n,Te=T;q=i;var tt=a;switch(Te.tag){case 1:if(ce=Te.payload,typeof ce=="function"){$=ce.call(tt,$,q);break e}$=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Te.payload,q=typeof ce=="function"?ce.call(tt,$,q):ce,q==null)break e;$=b({},$,q);break e;case 2:Pr=!0}}q=T.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[q]:H.push(q))}else H={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(B=G=H,x=$):G=G.next=H,_|=q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;H=T,T=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);G===null&&(x=$),f.baseState=x,f.firstBaseUpdate=B,f.lastBaseUpdate=G,d===null&&(f.shared.lanes=0),qr|=_,n.lanes=_,n.memoizedState=$}}function f_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function d_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)f_(a[n],i)}var so=V(null),rh=V(0);function m_(n,i){n=sr,se(rh,n),se(so,i),sr=n|i.baseLanes}function Zd(){se(rh,sr),se(so,so.current)}function Wd(){sr=rh.current,J(so),J(rh)}var wn=V(null),Hn=null;function Ur(n){var i=n.alternate;se(vt,vt.current&1),se(wn,n),Hn===null&&(i===null||so.current!==null||i.memoizedState!==null)&&(Hn=n)}function em(n){se(vt,vt.current),se(wn,n),Hn===null&&(Hn=n)}function g_(n){n.tag===22?(se(vt,vt.current),se(wn,n),Hn===null&&(Hn=n)):zr()}function zr(){se(vt,vt.current),se(wn,wn.current)}function In(n){J(wn),Hn===n&&(Hn=null),J(vt)}var vt=V(0);function sh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ag(a)||og(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,Re=null,We=null,xt=null,ah=!1,ao=!1,Zs=!1,oh=0,Yl=0,oo=null,W1=0;function mt(){throw Error(r(321))}function tm(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function nm(n,i,a,l,f,d){return Ji=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?Z_:ym,Zs=!1,d=a(l,f),Zs=!1,ao&&(d=y_(i,a,l,f)),p_(n),d}function p_(n){K.H=Jl;var i=We!==null&&We.next!==null;if(Ji=0,xt=We=Re=null,ah=!1,Yl=0,oo=null,i)throw Error(r(300));n===null||Dt||(n=n.dependencies,n!==null&&Jc(n)&&(Dt=!0))}function y_(n,i,a,l){Re=n;var f=0;do{if(ao&&(oo=null),Yl=0,ao=!1,25<=f)throw Error(r(301));if(f+=1,xt=We=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=W_,d=i(a,l)}while(ao);return d}function ew(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Xl(i):i,n=n.useState()[0],(We!==null?We.memoizedState:null)!==n&&(Re.flags|=1024),i}function im(){var n=oh!==0;return oh=0,n}function rm(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function sm(n){if(ah){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ah=!1}Ji=0,xt=We=Re=null,ao=!1,Yl=oh=0,oo=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Re.memoizedState=xt=n:xt=xt.next=n,xt}function Et(){if(We===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=We.next;var i=xt===null?Re.memoizedState:xt.next;if(i!==null)xt=i,We=n;else{if(n===null)throw Re.alternate===null?Error(r(467)):Error(r(310));We=n,n={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},xt===null?Re.memoizedState=xt=n:xt=xt.next=n}return xt}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(n){var i=Yl;return Yl+=1,oo===null&&(oo=[]),n=o_(oo,n,i),i=Re,(xt===null?i.memoizedState:xt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Z_:ym),n}function uh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Xl(n);if(n.$$typeof===Q)return Xt(n)}throw Error(r(438,String(n)))}function am(n){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=lh(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function Zi(n,i){return typeof i=="function"?i(n):i}function ch(n){var i=Et();return om(i,We,n)}function om(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=_=null,x=null,B=i,G=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Oe&$)===$:(Ji&$)===$){var q=B.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===to&&(G=!0);else if((Ji&q)===q){B=B.next,q===to&&(G=!0);continue}else $={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(T=x=$,_=d):x=x.next=$,Re.lanes|=q,qr|=q;$=B.action,Zs&&a(d,$),d=B.hasEagerState?B.eagerState:a(d,$)}else q={lane:$,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(T=x=q,_=d):x=x.next=q,Re.lanes|=$,qr|=$;B=B.next}while(B!==null&&B!==i);if(x===null?_=d:x.next=T,!Sn(d,n.memoizedState)&&(Dt=!0,G&&(a=no,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=x,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function lm(n){var i=Et(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,i.memoizedState)||(Dt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function __(n,i,a){var l=Re,f=Et(),d=ke;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Sn((We||f).memoizedState,a);if(_&&(f.memoizedState=a,Dt=!0),f=f.queue,hm(T_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,lo(9,{destroy:void 0},E_.bind(null,l,f,a,i),null),it===null)throw Error(r(349));d||(Ji&127)!==0||v_(l,i,a)}return a}function v_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=lh(),Re.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function E_(n,i,a,l){i.value=a,i.getSnapshot=l,b_(i)&&S_(n)}function T_(n,i,a){return a(function(){b_(i)&&S_(n)})}function b_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function S_(n){var i=Fs(n,2);i!==null&&_n(i,n,2)}function um(n){var i=cn();if(typeof n=="function"){var a=n;if(n=a(),Zs){Mn(!0);try{a()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},i}function A_(n,i,a,l){return n.baseState=a,om(n,We,typeof l=="function"?l:Zi)}function tw(n,i,a,l,f){if(dh(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,w_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function w_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var T=a(f,l),x=K.S;x!==null&&x(_,T),I_(n,i,T)}catch(B){cm(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(f,l),I_(n,i,d)}catch(B){cm(n,i,B)}}function I_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){R_(n,i,l)},function(l){return cm(n,i,l)}):R_(n,i,a)}function R_(n,i,a){i.status="fulfilled",i.value=a,C_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,w_(n,a)))}function cm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,C_(i),i=i.next;while(i!==l)}n.action=null}function C_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function x_(n,i){return i}function D_(n,i){if(ke){var a=it.formState;if(a!==null){e:{var l=Re;if(ke){if(at){t:{for(var f=at,d=Fn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){at=Gn(f.nextSibling),l=f.data==="F!";break e}}Or(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:i},a.queue=l,a=X_.bind(null,Re,l),l.dispatch=a,l=um(!1),d=pm.bind(null,Re,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=tw.bind(null,Re,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function N_(n){var i=Et();return V_(i,We,n)}function V_(n,i,a){if(i=om(n,i,x_)[0],n=ch(Zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Xl(i)}catch(_){throw _===io?eh:_}else l=i;i=Et();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,lo(9,{destroy:void 0},nw.bind(null,f,a),null)),[l,d,n]}function nw(n,i){n.action=i}function O_(n){var i=Et(),a=We;if(a!==null)return V_(i,a,n);Et(),i=i.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function lo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=lh(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function M_(){return Et().memoizedState}function hh(n,i,a,l){var f=cn();Re.flags|=n,f.memoizedState=lo(1|i,{destroy:void 0},a,l===void 0?null:l)}function fh(n,i,a,l){var f=Et();l=l===void 0?null:l;var d=f.memoizedState.inst;We!==null&&l!==null&&tm(l,We.memoizedState.deps)?f.memoizedState=lo(i,d,a,l):(Re.flags|=n,f.memoizedState=lo(1|i,d,a,l))}function P_(n,i){hh(8390656,8,n,i)}function hm(n,i){fh(2048,8,n,i)}function iw(n){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=lh(),Re.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function k_(n){var i=Et().memoizedState;return iw({ref:i,nextImpl:n}),function(){if((He&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function L_(n,i){return fh(4,2,n,i)}function U_(n,i){return fh(4,4,n,i)}function z_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function B_(n,i,a){a=a!=null?a.concat([n]):null,fh(4,4,z_.bind(null,i,n),a)}function fm(){}function j_(n,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&tm(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function q_(n,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&tm(i,l[1]))return l[0];if(l=n(),Zs){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l}function dm(n,i,a){return a===void 0||(Ji&1073741824)!==0&&(Oe&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Fv(),Re.lanes|=n,qr|=n,a)}function F_(n,i,a,l){return Sn(a,i)?a:so.current!==null?(n=dm(n,a,l),Sn(n,i)||(Dt=!0),n):(Ji&42)===0||(Ji&1073741824)!==0&&(Oe&261930)===0?(Dt=!0,n.memoizedState=a):(n=Fv(),Re.lanes|=n,qr|=n,i)}function H_(n,i,a,l,f){var d=re.p;re.p=d!==0&&8>d?d:8;var _=K.T,T={};K.T=T,pm(n,!1,i,a);try{var x=f(),B=K.S;if(B!==null&&B(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var G=Z1(x,l);$l(n,i,G,xn(n))}else $l(n,i,l,xn(n))}catch($){$l(n,i,{then:function(){},status:"rejected",reason:$},xn())}finally{re.p=d,_!==null&&T.types!==null&&(_.types=T.types),K.T=_}}function rw(){}function mm(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=G_(n).queue;H_(n,f,i,Ee,a===null?rw:function(){return K_(n),a(l)})}function G_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:Ee},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function K_(n){var i=G_(n);i.next===null&&(i=n.alternate.memoizedState),$l(n,i.next.queue,{},xn())}function gm(){return Xt(du)}function Q_(){return Et().memoizedState}function Y_(){return Et().memoizedState}function sw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();n=kr(a);var l=Lr(i,n,a);l!==null&&(_n(l,i,a),Gl(l,i,a)),i={cache:Hd()},n.payload=i;return}i=i.return}}function aw(n,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},dh(n)?$_(i,a):(a=Od(n,i,a,l),a!==null&&(_n(a,n,l),J_(a,i,l)))}function X_(n,i,a){var l=xn();$l(n,i,a,l)}function $l(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(dh(n))$_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,Sn(T,_))return Qc(n,i,f,0),it===null&&Kc(),!1}catch{}if(a=Od(n,i,f,l),a!==null)return _n(a,n,l),J_(a,i,l),!0}return!1}function pm(n,i,a,l){if(l={lane:2,revertLane:Ym(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},dh(n)){if(i)throw Error(r(479))}else i=Od(n,a,l,2),i!==null&&_n(i,n,2)}function dh(n){var i=n.alternate;return n===Re||i!==null&&i===Re}function $_(n,i){ao=ah=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function J_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,_l(n,a)}}var Jl={readContext:Xt,use:uh,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Jl.useEffectEvent=mt;var Z_={readContext:Xt,use:uh,useCallback:function(n,i){return cn().memoizedState=[n,i===void 0?null:i],n},useContext:Xt,useEffect:P_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,hh(4194308,4,z_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return hh(4194308,4,n,i)},useInsertionEffect:function(n,i){hh(4,2,n,i)},useMemo:function(n,i){var a=cn();i=i===void 0?null:i;var l=n();if(Zs){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=cn();if(a!==void 0){var f=a(i);if(Zs){Mn(!0);try{a(i)}finally{Mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=aw.bind(null,Re,n),[l.memoizedState,n]},useRef:function(n){var i=cn();return n={current:n},i.memoizedState=n},useState:function(n){n=um(n);var i=n.queue,a=X_.bind(null,Re,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:fm,useDeferredValue:function(n,i){var a=cn();return dm(a,n,i)},useTransition:function(){var n=um(!1);return n=H_.bind(null,Re,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Re,f=cn();if(ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),it===null)throw Error(r(349));(Oe&127)!==0||v_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,P_(T_.bind(null,l,d,n),[n]),l.flags|=2048,lo(9,{destroy:void 0},E_.bind(null,l,d,a,i),null),a},useId:function(){var n=cn(),i=it.identifierPrefix;if(ke){var a=xi,l=Ci;a=(l&~(1<<32-yt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=oh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=W1++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:gm,useFormState:D_,useActionState:D_,useOptimistic:function(n){var i=cn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=pm.bind(null,Re,!0,a),a.dispatch=i,[n,i]},useMemoCache:am,useCacheRefresh:function(){return cn().memoizedState=sw.bind(null,Re)},useEffectEvent:function(n){var i=cn(),a={impl:n};return i.memoizedState=a,function(){if((He&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},ym={readContext:Xt,use:uh,useCallback:j_,useContext:Xt,useEffect:hm,useImperativeHandle:B_,useInsertionEffect:L_,useLayoutEffect:U_,useMemo:q_,useReducer:ch,useRef:M_,useState:function(){return ch(Zi)},useDebugValue:fm,useDeferredValue:function(n,i){var a=Et();return F_(a,We.memoizedState,n,i)},useTransition:function(){var n=ch(Zi)[0],i=Et().memoizedState;return[typeof n=="boolean"?n:Xl(n),i]},useSyncExternalStore:__,useId:Q_,useHostTransitionStatus:gm,useFormState:N_,useActionState:N_,useOptimistic:function(n,i){var a=Et();return A_(a,We,n,i)},useMemoCache:am,useCacheRefresh:Y_};ym.useEffectEvent=k_;var W_={readContext:Xt,use:uh,useCallback:j_,useContext:Xt,useEffect:hm,useImperativeHandle:B_,useInsertionEffect:L_,useLayoutEffect:U_,useMemo:q_,useReducer:lm,useRef:M_,useState:function(){return lm(Zi)},useDebugValue:fm,useDeferredValue:function(n,i){var a=Et();return We===null?dm(a,n,i):F_(a,We.memoizedState,n,i)},useTransition:function(){var n=lm(Zi)[0],i=Et().memoizedState;return[typeof n=="boolean"?n:Xl(n),i]},useSyncExternalStore:__,useId:Q_,useHostTransitionStatus:gm,useFormState:O_,useActionState:O_,useOptimistic:function(n,i){var a=Et();return We!==null?A_(a,We,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:am,useCacheRefresh:Y_};W_.useEffectEvent=k_;function _m(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var vm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=xn(),f=kr(l);f.payload=i,a!=null&&(f.callback=a),i=Lr(n,f,l),i!==null&&(_n(i,n,l),Gl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=xn(),f=kr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Lr(n,f,l),i!==null&&(_n(i,n,l),Gl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=xn(),l=kr(a);l.tag=2,i!=null&&(l.callback=i),i=Lr(n,l,a),i!==null&&(_n(i,n,a),Gl(i,n,a))}};function ev(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ll(a,l)||!Ll(f,d):!0}function tv(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&vm.enqueueReplaceState(i,i.state,null)}function Ws(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=b({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function nv(n){Gc(n)}function iv(n){console.error(n)}function rv(n){Gc(n)}function mh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function sv(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Em(n,i,a){return a=kr(a),a.tag=3,a.payload={element:null},a.callback=function(){mh(n,i)},a}function av(n){return n=kr(n),n.tag=3,n}function ov(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){sv(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){sv(i,a,l),typeof f!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function ow(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&eo(i,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Ih():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===th?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Gm(n,l,f)),!1;case 22:return a.flags|=65536,l===th?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Gm(n,l,f)),!1}throw Error(r(435,a.tag))}return Gm(n,l,f),Ih(),!1}if(ke)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==zd&&(n=Error(r(422),{cause:l}),Bl(Bn(n,a)))):(l!==zd&&(i=Error(r(423),{cause:l}),Bl(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=Em(n.stateNode,l,f),$d(n,f),gt!==4&&(gt=2)),!1;var d=Error(r(520),{cause:l});if(d=Bn(d,a),su===null?su=[d]:su.push(d),gt!==4&&(gt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Em(a.stateNode,l,n),$d(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Fr===null||!Fr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=av(f),ov(f,n,a,l),$d(a,f),!1}a=a.return}while(a!==null);return!1}var Tm=Error(r(461)),Dt=!1;function $t(n,i,a,l){i.child=n===null?h_(i,null,a,l):Js(i,n.child,a,l)}function lv(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Qs(i),l=nm(n,i,a,_,d,f),T=im(),n!==null&&!Dt?(rm(n,i,f),Wi(n,i,f)):(ke&&T&&Ld(i),i.flags|=1,$t(n,i,l,f),i.child)}function uv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Md(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,cv(n,i,d,l,f)):(n=Xc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!xm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ll,a(_,l)&&n.ref===i.ref)return Wi(n,i,f)}return i.flags|=1,n=Qi(d,l),n.ref=i.ref,n.return=i,i.child=n}function cv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Ll(d,l)&&n.ref===i.ref)if(Dt=!1,i.pendingProps=l=d,xm(n,f))(n.flags&131072)!==0&&(Dt=!0);else return i.lanes=n.lanes,Wi(n,i,f)}return bm(n,i,a,l,f)}function hv(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return fv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Wc(i,d!==null?d.cachePool:null),d!==null?m_(i,d):Zd(),g_(i);else return l=i.lanes=536870912,fv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Wc(i,d.cachePool),m_(i,d),zr(),i.memoizedState=null):(n!==null&&Wc(i,null),Zd(),zr());return $t(n,i,f,a),i.child}function Zl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function fv(n,i,a,l,f){var d=Kd();return d=d===null?null:{parent:Ct._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Wc(i,null),Zd(),g_(i),n!==null&&eo(n,i,l,!0),i.childLanes=f,null}function gh(n,i){return i=yh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function dv(n,i,a){return Js(i,n.child,null,a),n=gh(i,i.pendingProps),n.flags|=2,In(i),i.memoizedState=null,n}function lw(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(ke){if(l.mode==="hidden")return n=gh(i,l),i.lanes=536870912,Zl(null,n);if(em(i),(n=at)?(n=wE(n,Fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Nr!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=$y(n),a.return=i,i.child=a,Yt=i,at=null)):n=null,n===null)throw Or(i);return i.lanes=536870912,null}return gh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(em(i),f)if(i.flags&256)i.flags&=-257,i=dv(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Dt||eo(n,i,a,!1),f=(a&n.childLanes)!==0,Dt||f){if(l=it,l!==null&&(_=vl(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Fs(n,_),_n(l,n,_),Tm;Ih(),i=dv(n,i,a)}else n=d.treeContext,at=Gn(_.nextSibling),Yt=i,ke=!0,Vr=null,Fn=!1,n!==null&&Wy(i,n),i=gh(i,l),i.flags|=4096;return i}return n=Qi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function ph(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function bm(n,i,a,l,f){return Qs(i),a=nm(n,i,a,l,void 0,f),l=im(),n!==null&&!Dt?(rm(n,i,f),Wi(n,i,f)):(ke&&l&&Ld(i),i.flags|=1,$t(n,i,a,f),i.child)}function mv(n,i,a,l,f,d){return Qs(i),i.updateQueue=null,a=y_(i,l,a,f),p_(n),l=im(),n!==null&&!Dt?(rm(n,i,d),Wi(n,i,d)):(ke&&l&&Ld(i),i.flags|=1,$t(n,i,a,d),i.child)}function gv(n,i,a,l,f){if(Qs(i),i.stateNode===null){var d=$a,_=a.contextType;typeof _=="object"&&_!==null&&(d=Xt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=vm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Yd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Xt(_):$a,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(_m(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&vm.enqueueReplaceState(d,d.state,null),Ql(i,l,d,f),Kl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,x=Ws(a,T);d.props=x;var B=d.context,G=a.contextType;_=$a,typeof G=="object"&&G!==null&&(_=Xt(G));var $=a.getDerivedStateFromProps;G=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||B!==_)&&tv(i,d,l,_),Pr=!1;var q=i.memoizedState;d.state=q,Ql(i,l,d,f),Kl(),B=i.memoizedState,T||q!==B||Pr?(typeof $=="function"&&(_m(i,a,$,l),B=i.memoizedState),(x=Pr||ev(i,a,x,l,q,B,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Xd(n,i),_=i.memoizedProps,G=Ws(a,_),d.props=G,$=i.pendingProps,q=d.context,B=a.contextType,x=$a,typeof B=="object"&&B!==null&&(x=Xt(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||q!==x)&&tv(i,d,l,x),Pr=!1,q=i.memoizedState,d.state=q,Ql(i,l,d,f),Kl();var H=i.memoizedState;_!==$||q!==H||Pr||n!==null&&n.dependencies!==null&&Jc(n.dependencies)?(typeof T=="function"&&(_m(i,a,T,l),H=i.memoizedState),(G=Pr||ev(i,a,G,l,q,H,x)||n!==null&&n.dependencies!==null&&Jc(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=x,l=G):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,ph(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Js(i,n.child,null,f),i.child=Js(i,null,a,f)):$t(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Wi(n,i,f),n}function pv(n,i,a,l){return Gs(),i.flags|=256,$t(n,i,a,l),i.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(n){return{baseLanes:n,cachePool:s_()}}function wm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function yv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(vt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(ke){if(f?Ur(i):zr(),(n=at)?(n=wE(n,Fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Nr!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=$y(n),a.return=i,i.child=a,Yt=i,at=null)):n=null,n===null)throw Or(i);return og(n)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(zr(),f=i.mode,T=yh({mode:"hidden",children:T},f),l=Hs(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Am(a),l.childLanes=wm(n,_,a),i.memoizedState=Sm,Zl(null,l)):(Ur(i),Im(i,T))}var x=n.memoizedState;if(x!==null&&(T=x.dehydrated,T!==null)){if(d)i.flags&256?(Ur(i),i.flags&=-257,i=Rm(n,i,a)):i.memoizedState!==null?(zr(),i.child=n.child,i.flags|=128,i=null):(zr(),T=l.fallback,f=i.mode,l=yh({mode:"visible",children:l.children},f),T=Hs(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Js(i,n.child,null,a),l=i.child,l.memoizedState=Am(a),l.childLanes=wm(n,_,a),i.memoizedState=Sm,i=Zl(null,l));else if(Ur(i),og(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,Bl({value:l,source:null,stack:null}),i=Rm(n,i,a)}else if(Dt||eo(n,i,a,!1),_=(a&n.childLanes)!==0,Dt||_){if(_=it,_!==null&&(l=vl(_,a),l!==0&&l!==x.retryLane))throw x.retryLane=l,Fs(n,l),_n(_,n,l),Tm;ag(T)||Ih(),i=Rm(n,i,a)}else ag(T)?(i.flags|=192,i.child=n.child,i=null):(n=x.treeContext,at=Gn(T.nextSibling),Yt=i,ke=!0,Vr=null,Fn=!1,n!==null&&Wy(i,n),i=Im(i,l.children),i.flags|=4096);return i}return f?(zr(),T=l.fallback,f=i.mode,x=n.child,B=x.sibling,l=Qi(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,B!==null?T=Qi(B,T):(T=Hs(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Zl(null,l),l=i.child,T=n.child.memoizedState,T===null?T=Am(a):(f=T.cachePool,f!==null?(x=Ct._currentValue,f=f.parent!==x?{parent:x,pool:x}:f):f=s_(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=wm(n,_,a),i.memoizedState=Sm,Zl(n.child,l)):(Ur(i),a=n.child,n=a.sibling,a=Qi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Im(n,i){return i=yh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function yh(n,i){return n=An(22,n,null,i),n.lanes=0,n}function Rm(n,i,a){return Js(i,n.child,null,a),n=Im(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function _v(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),qd(n.return,i,a)}function Cm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function vv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=vt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,se(vt,_),$t(n,i,l,a),l=ke?zl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_v(n,a,i);else if(n.tag===19)_v(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&sh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Cm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&sh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Cm(i,!0,a,null,d,l);break;case"together":Cm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Wi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),qr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(eo(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Qi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Qi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function xm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Jc(n)))}function uw(n,i,a){switch(i.tag){case 3:kt(i,i.stateNode.containerInfo),Mr(i,Ct,n.memoizedState.cache),Gs();break;case 27:case 5:ws(i);break;case 4:kt(i,i.stateNode.containerInfo);break;case 10:Mr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,em(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?yv(n,i,a):(Ur(i),n=Wi(n,i,a),n!==null?n.sibling:null);Ur(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(eo(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return vv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(vt,vt.current),l)break;return null;case 22:return i.lanes=0,hv(n,i,a,i.pendingProps);case 24:Mr(i,Ct,n.memoizedState.cache)}return Wi(n,i,a)}function Ev(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Dt=!0;else{if(!xm(n,a)&&(i.flags&128)===0)return Dt=!1,uw(n,i,a);Dt=(n.flags&131072)!==0}else Dt=!1,ke&&(i.flags&1048576)!==0&&Zy(i,zl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Xs(i.elementType),i.type=n,typeof n=="function")Md(n)?(l=Ws(n,l),i.tag=1,i=gv(null,i,n,l,a)):(i.tag=0,i=bm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===he){i.tag=11,i=lv(null,i,n,l,a);break e}else if(f===I){i.tag=14,i=uv(null,i,n,l,a);break e}}throw i=lt(n)||n,Error(r(306,i,""))}}return i;case 0:return bm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ws(l,i.pendingProps),gv(n,i,l,f,a);case 3:e:{if(kt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Xd(n,i),Ql(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Mr(i,Ct,l),l!==d.cache&&Fd(i,[Ct],a,!0),Kl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=pv(n,i,l,a);break e}else if(l!==f){f=Bn(Error(r(424)),i),Bl(f),i=pv(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,at=Gn(n.firstChild),Yt=i,ke=!0,Vr=null,Fn=!0,a=h_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gs(),l===f){i=Wi(n,i,a);break e}$t(n,i,l,a)}i=i.child}return i;case 26:return ph(n,i),n===null?(a=NE(i.type,null,i.pendingProps,null))?i.memoizedState=a:ke||(a=i.type,n=i.pendingProps,l=Oh(Ce.current).createElement(a),l[wt]=i,l[qt]=n,Jt(l,a,n),It(l),i.stateNode=l):i.memoizedState=NE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ws(i),n===null&&ke&&(l=i.stateNode=CE(i.type,i.pendingProps,Ce.current),Yt=i,Fn=!0,f=at,Qr(i.type)?(lg=f,at=Gn(l.firstChild)):at=f),$t(n,i,i.pendingProps.children,a),ph(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ke&&((f=l=at)&&(l=zw(l,i.type,i.pendingProps,Fn),l!==null?(i.stateNode=l,Yt=i,at=Gn(l.firstChild),Fn=!1,f=!0):f=!1),f||Or(i)),ws(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,ig(f,d)?l=null:_!==null&&ig(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=nm(n,i,ew,null,null,a),du._currentValue=f),ph(n,i),$t(n,i,l,a),i.child;case 6:return n===null&&ke&&((n=a=at)&&(a=Bw(a,i.pendingProps,Fn),a!==null?(i.stateNode=a,Yt=i,at=null,n=!0):n=!1),n||Or(i)),null;case 13:return yv(n,i,a);case 4:return kt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Js(i,null,l,a):$t(n,i,l,a),i.child;case 11:return lv(n,i,i.type,i.pendingProps,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Mr(i,i.type,l.value),$t(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Qs(i),f=Xt(f),l=l(f),i.flags|=1,$t(n,i,l,a),i.child;case 14:return uv(n,i,i.type,i.pendingProps,a);case 15:return cv(n,i,i.type,i.pendingProps,a);case 19:return vv(n,i,a);case 31:return lw(n,i,a);case 22:return hv(n,i,a,i.pendingProps);case 24:return Qs(i),l=Xt(Ct),n===null?(f=Kd(),f===null&&(f=it,d=Hd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Yd(i),Mr(i,Ct,f)):((n.lanes&a)!==0&&(Xd(n,i),Ql(i,null,null,a),Kl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Mr(i,Ct,l)):(l=d.cache,Mr(i,Ct,l),l!==f.cache&&Fd(i,[Ct],a,!0))),$t(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function er(n){n.flags|=4}function Dm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Qv())n.flags|=8192;else throw $s=th,Qd}else n.flags&=-16777217}function Tv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!kE(i))if(Qv())n.flags|=8192;else throw $s=th,Qd}function _h(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ac():536870912,n.lanes|=i,fo|=i)}function Wl(n,i){if(!ke)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function cw(n,i,a){var l=i.pendingProps;switch(Ud(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return ot(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),$i(Ct),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Wa(i)?er(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bd())),ot(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(er(i),d!==null?(ot(i),Tv(i,d)):(ot(i),Dm(i,f,null,l,a))):d?d!==n.memoizedState?(er(i),ot(i),Tv(i,d)):(ot(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&er(i),ot(i),Dm(i,f,n,l,a)),null;case 27:if(Na(i),a=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ot(i),null}n=le.current,Wa(i)?e_(i):(n=CE(f,l,a),i.stateNode=n,er(i))}return ot(i),null;case 5:if(Na(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ot(i),null}if(d=le.current,Wa(i))e_(i);else{var _=Oh(Ce.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[wt]=i,d[qt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Jt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&er(i)}}return ot(i),Dm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ce.current,Wa(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Yt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[wt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||yE(n.nodeValue,a)),n||Or(i,!0)}else n=Oh(n).createTextNode(l),n[wt]=i,i.stateNode=n}return ot(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=Wa(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[wt]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),n=!1}else a=Bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ot(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Wa(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[wt]=i}else Gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),f=!1}else f=Bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),_h(i,i.updateQueue),ot(i),null);case 4:return ut(),n===null&&Zm(i.stateNode.containerInfo),ot(i),null;case 10:return $i(i.type),ot(i),null;case 19:if(J(vt),l=i.memoizedState,l===null)return ot(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Wl(l,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=sh(n),d!==null){for(i.flags|=128,Wl(l,!1),n=d.updateQueue,i.updateQueue=n,_h(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Xy(a,n),a=a.sibling;return se(vt,vt.current&1|2),ke&&Yi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&ln()>Sh&&(i.flags|=128,f=!0,Wl(l,!1),i.lanes=4194304)}else{if(!f)if(n=sh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,_h(i,n),Wl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!ke)return ot(i),null}else 2*ln()-l.renderingStartTime>Sh&&a!==536870912&&(i.flags|=128,f=!0,Wl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ln(),n.sibling=null,a=vt.current,se(vt,f?a&1|2:a&1),ke&&Yi(i,l.treeForkCount),n):(ot(i),null);case 22:case 23:return In(i),Wd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),a=i.updateQueue,a!==null&&_h(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&J(Ys),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),$i(Ct),ot(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function hw(n,i){switch(Ud(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return $i(Ct),ut(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Na(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(r(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(In(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(vt),null;case 4:return ut(),null;case 10:return $i(i.type),null;case 22:case 23:return In(i),Wd(),n!==null&&J(Ys),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return $i(Ct),null;case 25:return null;default:return null}}function bv(n,i){switch(Ud(i),i.tag){case 3:$i(Ct),ut();break;case 26:case 27:case 5:Na(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:J(vt);break;case 10:$i(i.type);break;case 22:case 23:In(i),Wd(),n!==null&&J(Ys);break;case 24:$i(Ct)}}function eu(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){Xe(i,i.return,T)}}function Br(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var x=a,B=T;try{B()}catch(G){Xe(f,x,G)}}}l=l.next}while(l!==d)}}catch(G){Xe(i,i.return,G)}}function Sv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{d_(i,a)}catch(l){Xe(n,n.return,l)}}}function Av(n,i,a){a.props=Ws(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(n,i,l)}}function tu(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Xe(n,i,f)}}function Di(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xe(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xe(n,i,f)}else a.current=null}function wv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xe(n,n.return,f)}}function Nm(n,i,a){try{var l=n.stateNode;Ow(l,n.type,a,i),l[qt]=i}catch(f){Xe(n,n.return,f)}}function Iv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qr(n.type)||n.tag===4}function Vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Iv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Om(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wn));else if(l!==4&&(l===27&&Qr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Om(n,i,a),n=n.sibling;n!==null;)Om(n,i,a),n=n.sibling}function vh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Qr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(vh(n,i,a),n=n.sibling;n!==null;)vh(n,i,a),n=n.sibling}function Rv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Jt(i,l,a),i[wt]=n,i[qt]=a}catch(d){Xe(n,n.return,d)}}var tr=!1,Nt=!1,Mm=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function fw(n,i){if(n=n.containerInfo,tg=Bh,n=By(n),Rd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,x=-1,B=0,G=0,$=n,q=null;t:for(;;){for(var H;$!==a||f!==0&&$.nodeType!==3||(T=_+f),$!==d||l!==0&&$.nodeType!==3||(x=_+l),$.nodeType===3&&(_+=$.nodeValue.length),(H=$.firstChild)!==null;)q=$,$=H;for(;;){if($===n)break t;if(q===a&&++B===f&&(T=_),q===d&&++G===l&&(x=_),(H=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=H}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(ng={focusedElem:n,selectionRange:a},Bh=!1,Ht=i;Ht!==null;)if(i=Ht,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ht=n;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ce=Ws(a.type,f);n=l.getSnapshotBeforeUpdate(ce,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){Xe(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)sg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ht=n;break}Ht=i.return}}function xv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ir(n,a),l&4&&eu(5,a);break;case 1:if(ir(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var f=Ws(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}l&64&&Sv(a),l&512&&tu(a,a.return);break;case 3:if(ir(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{d_(n,i)}catch(_){Xe(a,a.return,_)}}break;case 27:i===null&&l&4&&Rv(a);case 26:case 5:ir(n,a),i===null&&l&4&&wv(a),l&512&&tu(a,a.return);break;case 12:ir(n,a);break;case 31:ir(n,a),l&4&&Vv(n,a);break;case 13:ir(n,a),l&4&&Ov(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Tw.bind(null,a),jw(n,a))));break;case 22:if(l=a.memoizedState!==null||tr,!l){i=i!==null&&i.memoizedState!==null||Nt,f=tr;var d=Nt;tr=l,(Nt=i)&&!d?rr(n,a,(a.subtreeFlags&8772)!==0):ir(n,a),tr=f,Nt=d}break;case 30:break;default:ir(n,a)}}function Dv(n){var i=n.alternate;i!==null&&(n.alternate=null,Dv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ka(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,mn=!1;function nr(n,i,a){for(a=a.child;a!==null;)Nv(n,i,a),a=a.sibling}function Nv(n,i,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Nt||Di(a,i),nr(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||Di(a,i);var l=ht,f=mn;Qr(a.type)&&(ht=a.stateNode,mn=!1),nr(n,i,a),cu(a.stateNode),ht=l,mn=f;break;case 5:Nt||Di(a,i);case 6:if(l=ht,f=mn,ht=null,nr(n,i,a),ht=l,mn=f,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){Xe(a,i,d)}else try{ht.removeChild(a.stateNode)}catch(d){Xe(a,i,d)}break;case 18:ht!==null&&(mn?(n=ht,SE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),To(n)):SE(ht,a.stateNode));break;case 4:l=ht,f=mn,ht=a.stateNode.containerInfo,mn=!0,nr(n,i,a),ht=l,mn=f;break;case 0:case 11:case 14:case 15:Br(2,a,i),Nt||Br(4,a,i),nr(n,i,a);break;case 1:Nt||(Di(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Av(a,i,l)),nr(n,i,a);break;case 21:nr(n,i,a);break;case 22:Nt=(l=Nt)||a.memoizedState!==null,nr(n,i,a),Nt=l;break;default:nr(n,i,a)}}function Vv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{To(n)}catch(a){Xe(i,i.return,a)}}}function Ov(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{To(n)}catch(a){Xe(i,i.return,a)}}function dw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Cv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Cv),i;default:throw Error(r(435,n.tag))}}function Eh(n,i){var a=dw(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=bw.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Qr(T.type)){ht=T.stateNode,mn=!1;break e}break;case 5:ht=T.stateNode,mn=!1;break e;case 3:case 4:ht=T.stateNode.containerInfo,mn=!0;break e}T=T.return}if(ht===null)throw Error(r(160));Nv(d,_,f),ht=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Mv(i,n),i=i.sibling}var si=null;function Mv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(Br(3,n,n.return),eu(3,n),Br(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),l&64&&tr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=si;if(gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pi]||d[wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Jt(d,l,a),d[wt]=n,It(d),l=d;break e;case"link":var _=ME("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;case"meta":if(_=ME("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[wt]=n,It(d),l=d}n.stateNode=l}else PE(f,n.type,n.stateNode);else n.stateNode=OE(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?PE(f,n.type,n.stateNode):OE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Nm(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),a!==null&&l&4&&Nm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(ce){Xe(n,n.return,ce)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Nm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Mm=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ce){Xe(n,n.return,ce)}}break;case 3:if(kh=null,f=si,si=Mh(i.containerInfo),gn(i,n),si=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{To(i.containerInfo)}catch(ce){Xe(n,n.return,ce)}Mm&&(Mm=!1,Pv(n));break;case 4:l=si,si=Mh(n.stateNode.containerInfo),gn(i,n),pn(n),si=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Eh(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(bh=ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Eh(n,l)));break;case 22:f=n.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,B=tr,G=Nt;if(tr=B||f,Nt=G||x,gn(i,n),Nt=G,tr=B,pn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||x||tr||Nt||ea(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=x.stateNode;var $=x.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ce){Xe(x,x.return,ce)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(ce){Xe(x,x.return,ce)}}}else if(i.tag===18){if(a===null){x=i;try{var H=x.stateNode;f?AE(H,!0):AE(x.stateNode,!1)}catch(ce){Xe(x,x.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Eh(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Eh(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(Iv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Vm(n);vh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var T=Vm(n);vh(n,T,_);break;case 3:case 4:var x=a.stateNode.containerInfo,B=Vm(n);Om(n,B,x);break;default:throw Error(r(161))}}catch(G){Xe(n,n.return,G)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Pv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Pv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ir(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)xv(n,i.alternate,i),i=i.sibling}function ea(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Br(4,i,i.return),ea(i);break;case 1:Di(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Av(i,i.return,a),ea(i);break;case 27:cu(i.stateNode);case 26:case 5:Di(i,i.return),ea(i);break;case 22:i.memoizedState===null&&ea(i);break;case 30:ea(i);break;default:ea(i)}n=n.sibling}}function rr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:rr(f,d,a),eu(4,d);break;case 1:if(rr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){Xe(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)f_(x[f],T)}catch(B){Xe(l,l.return,B)}}a&&_&64&&Sv(d),tu(d,d.return);break;case 27:Rv(d);case 26:case 5:rr(f,d,a),a&&l===null&&_&4&&wv(d),tu(d,d.return);break;case 12:rr(f,d,a);break;case 31:rr(f,d,a),a&&_&4&&Vv(f,d);break;case 13:rr(f,d,a),a&&_&4&&Ov(f,d);break;case 22:d.memoizedState===null&&rr(f,d,a),tu(d,d.return);break;case 30:break;default:rr(f,d,a)}i=i.sibling}}function Pm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&jl(a))}function km(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n))}function ai(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)kv(n,i,a,l),i=i.sibling}function kv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(n,i,a,l),f&2048&&eu(9,i);break;case 1:ai(n,i,a,l);break;case 3:ai(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n)));break;case 12:if(f&2048){ai(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){Xe(i,i.return,x)}}else ai(n,i,a,l);break;case 31:ai(n,i,a,l);break;case 13:ai(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ai(n,i,a,l):nu(n,i):d._visibility&2?ai(n,i,a,l):(d._visibility|=2,uo(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Pm(_,i);break;case 24:ai(n,i,a,l),f&2048&&km(i.alternate,i);break;default:ai(n,i,a,l)}}function uo(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,T=a,x=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:uo(d,_,T,x,f),eu(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?uo(d,_,T,x,f):nu(d,_):(G._visibility|=2,uo(d,_,T,x,f)),f&&B&2048&&Pm(_.alternate,_);break;case 24:uo(d,_,T,x,f),f&&B&2048&&km(_.alternate,_);break;default:uo(d,_,T,x,f)}i=i.sibling}}function nu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:nu(a,l),f&2048&&Pm(l.alternate,l);break;case 24:nu(a,l),f&2048&&km(l.alternate,l);break;default:nu(a,l)}i=i.sibling}}var iu=8192;function co(n,i,a){if(n.subtreeFlags&iu)for(n=n.child;n!==null;)Lv(n,i,a),n=n.sibling}function Lv(n,i,a){switch(n.tag){case 26:co(n,i,a),n.flags&iu&&n.memoizedState!==null&&Ww(a,si,n.memoizedState,n.memoizedProps);break;case 5:co(n,i,a);break;case 3:case 4:var l=si;si=Mh(n.stateNode.containerInfo),co(n,i,a),si=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=iu,iu=16777216,co(n,i,a),iu=l):co(n,i,a));break;default:co(n,i,a)}}function Uv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ru(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,Bv(l,n)}Uv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zv(n),n=n.sibling}function zv(n){switch(n.tag){case 0:case 11:case 15:ru(n),n.flags&2048&&Br(9,n,n.return);break;case 3:ru(n);break;case 12:ru(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Th(n)):ru(n);break;default:ru(n)}}function Th(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,Bv(l,n)}Uv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Br(8,i,i.return),Th(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Th(i));break;default:Th(i)}n=n.sibling}}function Bv(n,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Br(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=n;Ht!==null;){l=Ht;var f=l.sibling,d=l.return;if(Dv(l),l===a){Ht=null;break e}if(f!==null){f.return=d,Ht=f;break e}Ht=d}}}var mw={getCacheForType:function(n){var i=Xt(Ct),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xt(Ct).controller.signal}},gw=typeof WeakMap=="function"?WeakMap:Map,He=0,it=null,Ne=null,Oe=0,Ye=0,Rn=null,jr=!1,ho=!1,Lm=!1,sr=0,gt=0,qr=0,ta=0,Um=0,Cn=0,fo=0,su=null,yn=null,zm=!1,bh=0,jv=0,Sh=1/0,Ah=null,Fr=null,Ut=0,Hr=null,mo=null,ar=0,Bm=0,jm=null,qv=null,au=0,qm=null;function xn(){return(He&2)!==0&&Oe!==0?Oe&-Oe:K.T!==null?Ym():wc()}function Fv(){if(Cn===0)if((Oe&536870912)===0||ke){var n=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),Cn=n}else Cn=536870912;return n=wn.current,n!==null&&(n.flags|=32),Cn}function _n(n,i,a){(n===it&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&(go(n,0),Gr(n,Oe,Cn,!1)),xs(n,a),((He&2)===0||n!==it)&&(n===it&&((He&2)===0&&(ta|=a),gt===4&&Gr(n,Oe,Cn,!1)),Ni(n))}function Hv(n,i,a){if((He&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||$n(n,i),f=l?_w(n,i):Hm(n,i,!0),d=l;do{if(f===0){ho&&!l&&Gr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!pw(a)){f=Hm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=su;var x=T.current.memoizedState.isDehydrated;if(x&&(go(T,_).flags|=256),_=Hm(T,_,!1),_!==2){if(Lm&&!x){T.errorRecoveryDisabledLanes|=d,ta|=d,f=4;break e}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){go(n,0),Gr(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Gr(l,i,Cn,!jr);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=bh+300-ln(),10<f)){if(Gr(l,i,Cn,!jr),di(l,0,!0)!==0)break e;ar=i,l.timeoutHandle=TE(Gv.bind(null,l,a,yn,Ah,zm,i,Cn,ta,fo,jr,d,"Throttled",-0,0),f);break e}Gv(l,a,yn,Ah,zm,i,Cn,ta,fo,jr,d,null,-0,0)}}break}while(!0);Ni(n)}function Gv(n,i,a,l,f,d,_,T,x,B,G,$,q,H){if(n.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Lv(i,d,$);var ce=(d&62914560)===d?bh-ln():(d&4194048)===d?jv-ln():0;if(ce=eI($,ce),ce!==null){ar=d,n.cancelPendingCommit=ce(Wv.bind(null,n,i,d,a,l,f,_,T,x,G,$,null,q,H)),Gr(n,d,_,!B);return}}Wv(n,i,d,a,l,f,_,T,x)}function pw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gr(n,i,a,l){i&=~Um,i&=~ta,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-yt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Ds(n,a,i)}function wh(){return(He&6)===0?(ou(0),!1):!0}function Fm(){if(Ne!==null){if(Ye===0)var n=Ne.return;else n=Ne,Xi=Ks=null,sm(n),ro=null,Fl=0,n=Ne;for(;n!==null;)bv(n.alternate,n),n=n.return;Ne=null}}function go(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,kw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ar=0,Fm(),it=n,Ne=a=Qi(n.current,null),Oe=i,Ye=0,Rn=null,jr=!1,ho=$n(n,i),Lm=!1,fo=Cn=Um=ta=qr=gt=0,yn=su=null,zm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-yt(l),d=1<<f;i|=n[f],l&=~d}return sr=i,Kc(),a}function Kv(n,i){Re=null,K.H=Jl,i===io||i===eh?(i=l_(),Ye=3):i===Qd?(i=l_(),Ye=4):Ye=i===Tm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Ne===null&&(gt=1,mh(n,Bn(i,n.current)))}function Qv(){var n=wn.current;return n===null?!0:(Oe&4194048)===Oe?Hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?n===Hn:!1}function Yv(){var n=K.H;return K.H=Jl,n===null?Jl:n}function Xv(){var n=K.A;return K.A=mw,n}function Ih(){gt=4,jr||(Oe&4194048)!==Oe&&wn.current!==null||(ho=!0),(qr&134217727)===0&&(ta&134217727)===0||it===null||Gr(it,Oe,Cn,!1)}function Hm(n,i,a){var l=He;He|=2;var f=Yv(),d=Xv();(it!==n||Oe!==i)&&(Ah=null,go(n,i)),i=!1;var _=gt;e:do try{if(Ye!==0&&Ne!==null){var T=Ne,x=Rn;switch(Ye){case 8:Fm(),_=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var B=Ye;if(Ye=0,Rn=null,po(n,T,x,B),a&&ho){_=0;break e}break;default:B=Ye,Ye=0,Rn=null,po(n,T,x,B)}}yw(),_=gt;break}catch(G){Kv(n,G)}while(!0);return i&&n.shellSuspendCounter++,Xi=Ks=null,He=l,K.H=f,K.A=d,Ne===null&&(it=null,Oe=0,Kc()),_}function yw(){for(;Ne!==null;)$v(Ne)}function _w(n,i){var a=He;He|=2;var l=Yv(),f=Xv();it!==n||Oe!==i?(Ah=null,Sh=ln()+500,go(n,i)):ho=$n(n,i);e:do try{if(Ye!==0&&Ne!==null){i=Ne;var d=Rn;t:switch(Ye){case 1:Ye=0,Rn=null,po(n,i,d,1);break;case 2:case 9:if(a_(d)){Ye=0,Rn=null,Jv(i);break}i=function(){Ye!==2&&Ye!==9||it!==n||(Ye=7),Ni(n)},d.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:a_(d)?(Ye=0,Rn=null,Jv(i)):(Ye=0,Rn=null,po(n,i,d,7));break;case 5:var _=null;switch(Ne.tag){case 26:_=Ne.memoizedState;case 5:case 27:var T=Ne;if(_?kE(_):T.stateNode.complete){Ye=0,Rn=null;var x=T.sibling;if(x!==null)Ne=x;else{var B=T.return;B!==null?(Ne=B,Rh(B)):Ne=null}break t}}Ye=0,Rn=null,po(n,i,d,5);break;case 6:Ye=0,Rn=null,po(n,i,d,6);break;case 8:Fm(),gt=6;break e;default:throw Error(r(462))}}vw();break}catch(G){Kv(n,G)}while(!0);return Xi=Ks=null,K.H=l,K.A=f,He=a,Ne!==null?0:(it=null,Oe=0,Kc(),gt)}function vw(){for(;Ne!==null&&!Ed();)$v(Ne)}function $v(n){var i=Ev(n.alternate,n,sr);n.memoizedProps=n.pendingProps,i===null?Rh(n):Ne=i}function Jv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=mv(a,i,i.pendingProps,i.type,void 0,Oe);break;case 11:i=mv(a,i,i.pendingProps,i.type.render,i.ref,Oe);break;case 5:sm(i);default:bv(a,i),i=Ne=Xy(i,sr),i=Ev(a,i,sr)}n.memoizedProps=n.pendingProps,i===null?Rh(n):Ne=i}function po(n,i,a,l){Xi=Ks=null,sm(i),ro=null,Fl=0;var f=i.return;try{if(ow(n,f,i,a,Oe)){gt=1,mh(n,Bn(a,n.current)),Ne=null;return}}catch(d){if(f!==null)throw Ne=f,d;gt=1,mh(n,Bn(a,n.current)),Ne=null;return}i.flags&32768?(ke||l===1?n=!0:ho||(Oe&536870912)!==0?n=!1:(jr=n=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zv(i,n)):Rh(i)}function Rh(n){var i=n;do{if((i.flags&32768)!==0){Zv(i,jr);return}n=i.return;var a=cw(i.alternate,i,sr);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=n}while(i!==null);gt===0&&(gt=5)}function Zv(n,i){do{var a=hw(n.alternate,n);if(a!==null){a.flags&=32767,Ne=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ne=n;return}Ne=n=a}while(n!==null);gt=6,Ne=null}function Wv(n,i,a,l,f,d,_,T,x){n.cancelPendingCommit=null;do Ch();while(Ut!==0);if((He&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Vd,Sd(n,a,d,_,T,x),n===it&&(Ne=it=null,Oe=0),mo=i,Hr=n,ar=a,Bm=d,jm=f,qv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Sw(Tr,function(){return rE(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=re.p,re.p=2,_=He,He|=4;try{fw(n,i,a)}finally{He=_,re.p=f,K.T=l}}Ut=1,eE(),tE(),nE()}}function eE(){if(Ut===1){Ut=0;var n=Hr,i=mo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var f=He;He|=4;try{Mv(i,n);var d=ng,_=By(n.containerInfo),T=d.focusedElem,x=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&zy(T.ownerDocument.documentElement,T)){if(x!==null&&Rd(T)){var B=x.start,G=x.end;if(G===void 0&&(G=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(G,T.value.length);else{var $=T.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var H=q.getSelection(),ce=T.textContent.length,Te=Math.min(x.start,ce),tt=x.end===void 0?Te:Math.min(x.end,ce);!H.extend&&Te>tt&&(_=tt,tt=Te,Te=_);var M=Uy(T,Te),D=Uy(T,tt);if(M&&D&&(H.rangeCount!==1||H.anchorNode!==M.node||H.anchorOffset!==M.offset||H.focusNode!==D.node||H.focusOffset!==D.offset)){var U=$.createRange();U.setStart(M.node,M.offset),H.removeAllRanges(),Te>tt?(H.addRange(U),H.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),H.addRange(U))}}}}for($=[],H=T;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Y=$[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Bh=!!tg,ng=tg=null}finally{He=f,re.p=l,K.T=a}}n.current=i,Ut=2}}function tE(){if(Ut===2){Ut=0;var n=Hr,i=mo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var f=He;He|=4;try{xv(n,i.alternate,i)}finally{He=f,re.p=l,K.T=a}}Ut=3}}function nE(){if(Ut===4||Ut===3){Ut=0,_c();var n=Hr,i=mo,a=ar,l=qv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,mo=Hr=null,iE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Fr=null),Fi(a),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=re.p,re.p=2,K.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{K.T=i,re.p=f}}(ar&3)!==0&&Ch(),Ni(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===qm?au++:(au=0,qm=n):au=0,ou(0)}}function iE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jl(i)))}function Ch(){return eE(),tE(),nE(),rE()}function rE(){if(Ut!==5)return!1;var n=Hr,i=Bm;Bm=0;var a=Fi(ar),l=K.T,f=re.p;try{re.p=32>a?32:a,K.T=null,a=jm,jm=null;var d=Hr,_=ar;if(Ut=0,mo=Hr=null,ar=0,(He&6)!==0)throw Error(r(331));var T=He;if(He|=4,zv(d.current),kv(d,d.current,_,a),He=T,ou(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Xn,d)}catch{}return!0}finally{re.p=f,K.T=l,iE(n,i)}}function sE(n,i,a){i=Bn(a,i),i=Em(n.stateNode,i,2),n=Lr(n,i,2),n!==null&&(xs(n,2),Ni(n))}function Xe(n,i,a){if(n.tag===3)sE(n,n,a);else for(;i!==null;){if(i.tag===3){sE(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fr===null||!Fr.has(l))){n=Bn(a,n),a=av(2),l=Lr(i,a,2),l!==null&&(ov(a,l,i,n),xs(l,2),Ni(l));break}}i=i.return}}function Gm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new gw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Lm=!0,f.add(a),n=Ew.bind(null,n,i,a),i.then(n,n))}function Ew(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,it===n&&(Oe&a)===a&&(gt===4||gt===3&&(Oe&62914560)===Oe&&300>ln()-bh?(He&2)===0&&go(n,0):Um|=a,fo===Oe&&(fo=0)),Ni(n)}function aE(n,i){i===0&&(i=Ac()),n=Fs(n,i),n!==null&&(xs(n,i),Ni(n))}function Tw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),aE(n,a)}function bw(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),aE(n,a)}function Sw(n,i){return Lt(n,i)}var xh=null,yo=null,Km=!1,Dh=!1,Qm=!1,Kr=0;function Ni(n){n!==yo&&n.next===null&&(yo===null?xh=yo=n:yo=yo.next=n),Dh=!0,Km||(Km=!0,ww())}function ou(n,i){if(!Qm&&Dh){Qm=!0;do for(var a=!1,l=xh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-yt(42|n)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,cE(l,d))}else d=Oe,d=di(l,l===it?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,cE(l,d));l=l.next}while(a);Qm=!1}}function Aw(){oE()}function oE(){Dh=Km=!1;var n=0;Kr!==0&&Pw()&&(n=Kr);for(var i=ln(),a=null,l=xh;l!==null;){var f=l.next,d=lE(l,i);d===0?(l.next=null,a===null?xh=f:a.next=f,f===null&&(yo=a)):(a=l,(n!==0||(d&3)!==0)&&(Dh=!0)),l=f}Ut!==0&&Ut!==5||ou(n),Kr!==0&&(Kr=0)}function lE(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-yt(d),T=1<<_,x=f[_];x===-1?((T&a)===0||(T&l)!==0)&&(f[_]=bd(T,i)):x<=i&&(n.expiredLanes|=T),d&=~T}if(i=it,a=Oe,a=di(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Er(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||$n(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Er(l),Fi(a)){case 2:case 8:a=yl;break;case 32:a=Tr;break;case 268435456:a=vc;break;default:a=Tr}return l=uE.bind(null,n),a=Lt(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Er(l),n.callbackPriority=2,n.callbackNode=null,2}function uE(n,i){if(Ut!==0&&Ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ch()&&n.callbackNode!==a)return null;var l=Oe;return l=di(n,n===it?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Hv(n,l,i),lE(n,ln()),n.callbackNode!=null&&n.callbackNode===a?uE.bind(null,n):null)}function cE(n,i){if(Ch())return null;Hv(n,i,!0)}function ww(){Lw(function(){(He&6)!==0?Lt(pl,Aw):oE()})}function Ym(){if(Kr===0){var n=to;n===0&&(n=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Kr=n}return Kr}function hE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ba(""+n)}function fE(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Iw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=hE((f[qt]||null).action),_=l.submitter;_&&(i=(i=_[qt]||null)?hE(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new Ai("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Kr!==0){var x=_?fE(f,_):new FormData(f);mm(a,{pending:!0,data:x,method:f.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=_?fE(f,_):new FormData(f),mm(a,{pending:!0,data:x,method:f.method,action:d},d,x))},currentTarget:f}]})}}for(var Xm=0;Xm<Nd.length;Xm++){var $m=Nd[Xm],Rw=$m.toLowerCase(),Cw=$m[0].toUpperCase()+$m.slice(1);ri(Rw,"on"+Cw)}ri(Fy,"onAnimationEnd"),ri(Hy,"onAnimationIteration"),ri(Gy,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(H1,"onTransitionRun"),ri(G1,"onTransitionStart"),ri(K1,"onTransitionCancel"),ri(Ky,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function dE(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],x=T.instance,B=T.currentTarget;if(T=T.listener,x!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=B;try{d(f)}catch(G){Gc(G)}f.currentTarget=null,d=x}else for(_=0;_<l.length;_++){if(T=l[_],x=T.instance,B=T.currentTarget,T=T.listener,x!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=B;try{d(f)}catch(G){Gc(G)}f.currentTarget=null,d=x}}}}function Ve(n,i){var a=i[Pa];a===void 0&&(a=i[Pa]=new Set);var l=n+"__bubble";a.has(l)||(mE(i,n,2,!1),a.add(l))}function Jm(n,i,a){var l=0;i&&(l|=4),mE(a,n,l,i)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function Zm(n){if(!n[Nh]){n[Nh]=!0,El.forEach(function(a){a!=="selectionchange"&&(xw.has(a)||Jm(a,!1,n),Jm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Nh]||(i[Nh]=!0,Jm("selectionchange",!1,i))}}function mE(n,i,a,l){switch(FE(i)){case 2:var f=iI;break;case 8:f=rI;break;default:f=dg}a=f.bind(null,i,a,n),f=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Wm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=yi(T),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){l=d=_;continue e}T=T.parentNode}}l=l.return}Rr(function(){var B=d,G=kn(a),$=[];e:{var q=Qy.get(n);if(q!==void 0){var H=Ai,ce=n;switch(n){case"keypress":if(Ls(a)===0)break e;case"keydown":case"keyup":H=qc;break;case"focusin":ce="focus",H=zs;break;case"focusout":ce="blur",H=zs;break;case"beforeblur":case"afterblur":H=zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=y;break;case Fy:case Hy:case Gy:H=Pc;break;case Ky:H=S;break;case"scroll":case"scrollend":H=Vl;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ki;break;case"toggle":case"beforetoggle":H=Ie}var Te=(i&4)!==0,tt=!Te&&(n==="scroll"||n==="scrollend"),M=Te?q!==null?q+"Capture":null:q;Te=[];for(var D=B,U;D!==null;){var Y=D;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||M===null||(Y=ei(D,M),Y!=null&&Te.push(uu(D,Y,U))),tt)break;D=D.return}0<Te.length&&(q=new H(q,ce,null,a,G),$.push({event:q,listeners:Te}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==xl&&(ce=a.relatedTarget||a.fromElement)&&(yi(ce)||ce[gi]))break e;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ce=a.relatedTarget||a.toElement,H=B,ce=ce?yi(ce):null,ce!==null&&(tt=u(ce),Te=ce.tag,ce!==tt||Te!==5&&Te!==27&&Te!==6)&&(ce=null)):(H=null,ce=B),H!==ce)){if(Te=Ol,Y="onMouseLeave",M="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(Te=Ki,Y="onPointerLeave",M="onPointerEnter",D="pointer"),tt=H==null?q:Tn(H),U=ce==null?q:Tn(ce),q=new Te(Y,D+"leave",H,a,G),q.target=tt,q.relatedTarget=U,Y=null,yi(G)===B&&(Te=new Te(M,D+"enter",ce,a,G),Te.target=U,Te.relatedTarget=tt,Y=Te),tt=Y,H&&ce)t:{for(Te=Dw,M=H,D=ce,U=0,Y=M;Y;Y=Te(Y))U++;Y=0;for(var _e=D;_e;_e=Te(_e))Y++;for(;0<U-Y;)M=Te(M),U--;for(;0<Y-U;)D=Te(D),Y--;for(;U--;){if(M===D||D!==null&&M===D.alternate){Te=M;break t}M=Te(M),D=Te(D)}Te=null}else Te=null;H!==null&&gE($,q,H,Te,!1),ce!==null&&tt!==null&&gE($,tt,ce,Te,!0)}}e:{if(q=B?Tn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var je=Vy;else if(Dy(q))if(Oy)je=j1;else{je=z1;var ge=U1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&za(B.elementType)&&(je=Vy):je=B1;if(je&&(je=je(n,B))){Ny($,je,a,G);break e}ge&&ge(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Il(q,"number",q.value)}switch(ge=B?Tn(B):window,n){case"focusin":(Dy(ge)||ge.contentEditable==="true")&&(Qa=ge,Cd=B,Ul=null);break;case"focusout":Ul=Cd=Qa=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,jy($,a,G);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":jy($,a,G)}var xe;if(Fe)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ka?Bs(n,a)&&(Me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Ri&&a.locale!=="ko"&&(Ka||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ka&&(xe=Nl()):(Si=G,Dl="value"in Si?Si.value:Si.textContent,Ka=!0)),ge=Vh(B,Me),0<ge.length&&(Me=new Ii(Me,n,null,a,G),$.push({event:Me,listeners:ge}),xe?Me.data=xe:(xe=Ga(a),xe!==null&&(Me.data=xe)))),(xe=Un?M1(n,a):P1(n,a))&&(Me=Vh(B,"onBeforeInput"),0<Me.length&&(ge=new Ii("onBeforeInput","beforeinput",null,a,G),$.push({event:ge,listeners:Me}),ge.data=xe)),Iw($,n,B,a,G)}dE($,i)})}function uu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Vh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ei(n,a),f!=null&&l.unshift(uu(n,f,d)),f=ei(n,i),f!=null&&l.push(uu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Dw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function gE(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,x=T.alternate,B=T.stateNode;if(T=T.tag,x!==null&&x===l)break;T!==5&&T!==26&&T!==27||B===null||(x=B,f?(B=ei(a,d),B!=null&&_.unshift(uu(a,B,x))):f||(B=ei(a,d),B!=null&&_.push(uu(a,B,x)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Nw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function pE(n){return(typeof n=="string"?n:""+n).replace(Nw,`
`).replace(Vw,"")}function yE(n,i){return i=pE(i),pE(n)===i}function et(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":bn(n,"class",l);break;case"tabIndex":bn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(n,a,l);break;case"style":Cl(n,l,d);break;case"data":if(i!=="object"){bn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ba(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&et(n,i,"name",f.name,f,null),et(n,i,"formEncType",f.formEncType,f,null),et(n,i,"formMethod",f.formMethod,f,null),et(n,i,"formTarget",f.formTarget,f,null)):(et(n,i,"encType",f.encType,f,null),et(n,i,"method",f.method,f,null),et(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ba(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ba(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),La(n,"popover",l);break;case"xlinkActuate":Rt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":La(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vc.get(a)||a,La(n,a,l))}}function eg(n,i,a,l,f,d){switch(a){case"style":Cl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):La(n,a,l)}}}function Jt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:et(n,i,d,_,a,null)}}f&&et(n,i,"srcSet",a.srcSet,a,null),l&&et(n,i,"src",a.src,a,null);return;case"input":Ve("invalid",n);var T=d=_=f=null,x=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":f=G;break;case"type":_=G;break;case"checked":x=G;break;case"defaultChecked":B=G;break;case"value":d=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:et(n,i,l,G,a,null)}}xc(n,d,T,x,B,_,f,!1);return;case"select":Ve("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:et(n,i,f,T,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Sr(n,!!l,i,!1):a!=null&&Sr(n,!!l,a,!0);return;case"textarea":Ve("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:et(n,i,_,T,a,null)}Ar(n,l,f,d);return;case"option":for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null)&&(x==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":et(n,i,x,l,a,null));return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(l=0;l<lu.length;l++)Ve(lu[l],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:et(n,i,B,l,a,null)}return;default:if(za(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&eg(n,i,G,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&et(n,i,T,l,a,null))}function Ow(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,x=null,B=null,G=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":x=$;default:l.hasOwnProperty(H)||et(n,i,H,null,l,$)}}for(var q in l){var H=l[q];if($=a[q],l.hasOwnProperty(q)&&(H!=null||$!=null))switch(q){case"type":d=H;break;case"name":f=H;break;case"checked":B=H;break;case"defaultChecked":G=H;break;case"value":_=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==$&&et(n,i,q,H,l,$)}}Ua(n,_,T,x,B,G,d,f);return;case"select":H=_=T=q=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":H=x;default:l.hasOwnProperty(d)||et(n,i,d,null,l,x)}for(f in l)if(d=l[f],x=a[f],l.hasOwnProperty(f)&&(d!=null||x!=null))switch(f){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==x&&et(n,i,f,d,l,x)}i=T,a=_,l=H,q!=null?Sr(n,!!a,q,!1):!!l!=!!a&&(i!=null?Sr(n,!!a,i,!0):Sr(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(n,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&et(n,i,_,f,l,d)}Dc(n,q,H);return;case"option":for(var ce in a)q=a[ce],a.hasOwnProperty(ce)&&q!=null&&!l.hasOwnProperty(ce)&&(ce==="selected"?n.selected=!1:et(n,i,ce,null,l,q));for(x in l)q=l[x],H=a[x],l.hasOwnProperty(x)&&q!==H&&(q!=null||H!=null)&&(x==="selected"?n.selected=q&&typeof q!="function"&&typeof q!="symbol":et(n,i,x,q,l,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)q=a[Te],a.hasOwnProperty(Te)&&q!=null&&!l.hasOwnProperty(Te)&&et(n,i,Te,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:et(n,i,B,q,l,H)}return;default:if(za(i)){for(var tt in a)q=a[tt],a.hasOwnProperty(tt)&&q!==void 0&&!l.hasOwnProperty(tt)&&eg(n,i,tt,void 0,l,q);for(G in l)q=l[G],H=a[G],!l.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||eg(n,i,G,q,l,H);return}}for(var M in a)q=a[M],a.hasOwnProperty(M)&&q!=null&&!l.hasOwnProperty(M)&&et(n,i,M,null,l,q);for($ in l)q=l[$],H=a[$],!l.hasOwnProperty($)||q===H||q==null&&H==null||et(n,i,$,q,l,H)}function _E(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&_E(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var x=a[l],B=x.startTime;if(B>T)break;var G=x.transferSize,$=x.initiatorType;G&&_E($)&&(x=x.responseEnd,_+=G*(x<T?1:(T-B)/(x-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var tg=null,ng=null;function Oh(n){return n.nodeType===9?n:n.ownerDocument}function vE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function EE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ig(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var rg=null;function Pw(){var n=window.event;return n&&n.type==="popstate"?n===rg?!1:(rg=n,!0):(rg=null,!1)}var TE=typeof setTimeout=="function"?setTimeout:void 0,kw=typeof clearTimeout=="function"?clearTimeout:void 0,bE=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof bE<"u"?function(n){return bE.resolve(null).then(n).catch(Uw)}:TE;function Uw(n){setTimeout(function(){throw n})}function Qr(n){return n==="head"}function SE(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),To(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")cu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,cu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[pi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&cu(n.ownerDocument.body);a=f}while(a);To(i)}function AE(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function sg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sg(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function zw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[pi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Gn(n.nextSibling),n===null)break}return null}function Bw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Gn(n.nextSibling),n===null))return null;return n}function wE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Gn(n.nextSibling),n===null))return null;return n}function ag(n){return n.data==="$?"||n.data==="$~"}function og(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function jw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Gn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var lg=null;function IE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Gn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function RE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function CE(n,i,a){switch(i=Oh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function cu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ka(n)}var Kn=new Map,xE=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var or=re.d;re.d={f:qw,r:Fw,D:Hw,C:Gw,L:Kw,m:Qw,X:Xw,S:Yw,M:$w};function qw(){var n=or.f(),i=wh();return n||i}function Fw(n){var i=Pn(n);i!==null&&i.tag===5&&i.type==="form"?K_(i):or.r(n)}var _o=typeof document>"u"?null:document;function DE(n,i,a){var l=_o;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),xE.has(f)||(xE.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Jt(i,"link",n),It(i),l.head.appendChild(i)))}}function Hw(n){or.D(n),DE("dns-prefetch",n,null)}function Gw(n,i){or.C(n,i),DE("preconnect",n,i)}function Kw(n,i,a){or.L(n,i,a);var l=_o;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=vo(n);break;case"script":d=Eo(n)}Kn.has(d)||(n=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Kn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(hu(d))||i==="script"&&l.querySelector(fu(d))||(i=l.createElement("link"),Jt(i,"link",n),It(i),l.head.appendChild(i)))}}function Qw(n,i){or.m(n,i);var a=_o;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Eo(n)}if(!Kn.has(d)&&(n=b({rel:"modulepreload",href:n},i),Kn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(fu(d)))return}l=a.createElement("link"),Jt(l,"link",n),It(l),a.head.appendChild(l)}}}function Yw(n,i,a){or.S(n,i,a);var l=_o;if(l&&n){var f=_i(l).hoistableStyles,d=vo(n);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(hu(d)))T.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Kn.get(d))&&ug(n,a);var x=_=l.createElement("link");It(x),Jt(x,"link",n),x._p=new Promise(function(B,G){x.onload=B,x.onerror=G}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ph(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function Xw(n,i){or.X(n,i);var a=_o;if(a&&n){var l=_i(a).hoistableScripts,f=Eo(n),d=l.get(f);d||(d=a.querySelector(fu(f)),d||(n=b({src:n,async:!0},i),(i=Kn.get(f))&&cg(n,i),d=a.createElement("script"),It(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function $w(n,i){or.M(n,i);var a=_o;if(a&&n){var l=_i(a).hoistableScripts,f=Eo(n),d=l.get(f);d||(d=a.querySelector(fu(f)),d||(n=b({src:n,async:!0,type:"module"},i),(i=Kn.get(f))&&cg(n,i),d=a.createElement("script"),It(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function NE(n,i,a,l){var f=(f=Ce.current)?Mh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=vo(a.href),a=_i(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=vo(a.href);var d=_i(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(hu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Kn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(n,a),d||Jw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Eo(a),a=_i(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function vo(n){return'href="'+fn(n)+'"'}function hu(n){return'link[rel="stylesheet"]['+n+"]"}function VE(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function Jw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Jt(i,"link",a),It(i),n.head.appendChild(i))}function Eo(n){return'[src="'+fn(n)+'"]'}function fu(n){return"script[async]"+n}function OE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,It(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),It(l),Jt(l,"style",f),Ph(l,a.precedence,n),i.instance=l;case"stylesheet":f=vo(a.href);var d=n.querySelector(hu(f));if(d)return i.state.loading|=4,i.instance=d,It(d),d;l=VE(a),(f=Kn.get(f))&&ug(l,f),d=(n.ownerDocument||n).createElement("link"),It(d);var _=d;return _._p=new Promise(function(T,x){_.onload=T,_.onerror=x}),Jt(d,"link",l),i.state.loading|=4,Ph(d,a.precedence,n),i.instance=d;case"script":return d=Eo(a.src),(f=n.querySelector(fu(d)))?(i.instance=f,It(f),f):(l=a,(f=Kn.get(d))&&(l=b({},a),cg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),It(f),Jt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Ph(l,a.precedence,n));return i.instance}function Ph(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function ug(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function cg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var kh=null;function ME(n,i,a){if(kh===null){var l=new Map,f=kh=new Map;f.set(a,l)}else f=kh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[pi]||d[wt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function PE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Zw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function kE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Ww(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=vo(l.href),d=i.querySelector(hu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Lh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,It(d);return}d=i.ownerDocument||i,l=VE(l),(f=Kn.get(f))&&ug(l,f),d=d.createElement("link"),It(d);var _=d;_._p=new Promise(function(T,x){_.onload=T,_.onerror=x}),Jt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Lh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var hg=0;function eI(n,i){return n.stylesheets&&n.count===0&&zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&hg===0&&(hg=62500*Mw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>hg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Uh=null;function zh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Uh=new Map,i.forEach(tI,n),Uh=null,Lh.call(n))}function tI(n,i){if(!(i.state.loading&4)){var a=Uh.get(n);if(a)var l=a.get(null);else{a=new Map,Uh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Lh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var du={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function nI(n,i,a,l,f,d,_,T,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function LE(n,i,a,l,f,d,_,T,x,B,G,$){return n=new nI(n,i,a,_,x,B,G,$,T),i=1,d===!0&&(i|=24),d=An(3,null,null,i),n.current=d,d.stateNode=n,i=Hd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Yd(d),n}function UE(n){return n?(n=$a,n):$a}function zE(n,i,a,l,f,d){f=UE(f),l.context===null?l.context=f:l.pendingContext=f,l=kr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Lr(n,l,i),a!==null&&(_n(a,n,i),Gl(a,n,i))}function BE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function fg(n,i){BE(n,i),(n=n.alternate)&&BE(n,i)}function jE(n){if(n.tag===13||n.tag===31){var i=Fs(n,67108864);i!==null&&_n(i,n,67108864),fg(n,67108864)}}function qE(n){if(n.tag===13||n.tag===31){var i=xn();i=Ns(i);var a=Fs(n,i);a!==null&&_n(a,n,i),fg(n,i)}}var Bh=!0;function iI(n,i,a,l){var f=K.T;K.T=null;var d=re.p;try{re.p=2,dg(n,i,a,l)}finally{re.p=d,K.T=f}}function rI(n,i,a,l){var f=K.T;K.T=null;var d=re.p;try{re.p=8,dg(n,i,a,l)}finally{re.p=d,K.T=f}}function dg(n,i,a,l){if(Bh){var f=mg(l);if(f===null)Wm(n,i,l,jh,a),HE(n,l);else if(aI(f,n,i,a,l))l.stopPropagation();else if(HE(n,l),i&4&&-1<sI.indexOf(n)){for(;f!==null;){var d=Pn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=fi(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var x=1<<31-yt(_);T.entanglements[1]|=x,_&=~x}Ni(d),(He&6)===0&&(Sh=ln()+500,ou(0))}}break;case 31:case 13:T=Fs(d,2),T!==null&&_n(T,d,2),wh(),fg(d,2)}if(d=mg(l),d===null&&Wm(n,i,l,jh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Wm(n,i,l,null,a)}}function mg(n){return n=kn(n),gg(n)}var jh=null;function gg(n){if(jh=null,n=yi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return jh=n,null}function FE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rs()){case pl:return 2;case yl:return 8;case Tr:case Td:return 32;case vc:return 268435456;default:return 32}default:return 32}}var pg=!1,Yr=null,Xr=null,$r=null,mu=new Map,gu=new Map,Jr=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HE(n,i){switch(n){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":mu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(i.pointerId)}}function pu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&jE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function aI(n,i,a,l,f){switch(i){case"focusin":return Yr=pu(Yr,n,i,a,l,f),!0;case"dragenter":return Xr=pu(Xr,n,i,a,l,f),!0;case"mouseover":return $r=pu($r,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return mu.set(d,pu(mu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,gu.set(d,pu(gu.get(d)||null,n,i,a,l,f)),!0}return!1}function GE(n){var i=yi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){qE(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){qE(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=mg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);xl=l,a.target.dispatchEvent(l),xl=null}else return i=Pn(a),i!==null&&jE(i),n.blockedOn=a,!1;i.shift()}return!0}function KE(n,i,a){qh(n)&&a.delete(i)}function oI(){pg=!1,Yr!==null&&qh(Yr)&&(Yr=null),Xr!==null&&qh(Xr)&&(Xr=null),$r!==null&&qh($r)&&($r=null),mu.forEach(KE),gu.forEach(KE)}function Fh(n,i){n.blockedOn===i&&(n.blockedOn=null,pg||(pg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,oI)))}var Hh=null;function QE(n){Hh!==n&&(Hh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hh===n&&(Hh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(gg(l||a)===null)continue;break}var d=Pn(a);d!==null&&(n.splice(i,3),i-=3,mm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function To(n){function i(x){return Fh(x,n)}Yr!==null&&Fh(Yr,n),Xr!==null&&Fh(Xr,n),$r!==null&&Fh($r,n),mu.forEach(i),gu.forEach(i);for(var a=0;a<Jr.length;a++){var l=Jr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Jr.length&&(a=Jr[0],a.blockedOn===null);)GE(a),a.blockedOn===null&&Jr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qt]||null;if(typeof d=="function")_||QE(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qt]||null)T=_.formAction;else if(gg(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),QE(a)}}}function YE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function yg(n){this._internalRoot=n}Gh.prototype.render=yg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=xn();zE(a,l,n,i,null,null)},Gh.prototype.unmount=yg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;zE(n.current,2,null,n,null,null),wh(),i[gi]=null}};function Gh(n){this._internalRoot=n}Gh.prototype.unstable_scheduleHydration=function(n){if(n){var i=wc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Jr.length&&i!==0&&i<Jr[a].priority;a++);Jr.splice(a,0,n),a===0&&GE(n)}};var XE=e.version;if(XE!=="19.2.3")throw Error(r(527,XE,"19.2.3"));re.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var lI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{Xn=Kh.inject(lI),Kt=Kh}catch{}}return _u.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=nv,d=iv,_=rv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=LE(n,1,!1,null,null,a,l,null,f,d,_,YE),n[gi]=i.current,Zm(n),new yg(i)},_u.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=nv,_=iv,T=rv,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=LE(n,1,!0,i,a??null,l,f,x,d,_,T,YE),i.context=UE(null),a=i.current,l=xn(),l=Ns(l),f=kr(l),f.callback=null,Lr(a,f,l),a=l,i.current.lanes=a,xs(i,a),Ni(i),n[gi]=i.current,Zm(n),new Gh(i)},_u.version="19.2.3",_u}var sT;function _I(){if(sT)return Eg.exports;sT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Eg.exports=yI(),Eg.exports}var vI=_I();const EI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),aT=s=>{const e=TI(s);return e.charAt(0).toUpperCase()+e.slice(1)},sb=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),bI=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var SI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AI=rt.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>rt.createElement("svg",{ref:g,...SI,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:sb("lucide",o),...!u&&!bI(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>rt.createElement(p,E)),...Array.isArray(u)?u:[u]]));const Bt=(s,e)=>{const t=rt.forwardRef(({className:r,...o},u)=>rt.createElement(AI,{ref:u,iconNode:e,className:sb(`lucide-${EI(aT(s))}`,`lucide-${s}`,r),...o}));return t.displayName=aT(s),t};const wI=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Ag=Bt("arrow-up-down",wI);const II=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],RI=Bt("award",II);const CI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xI=Bt("calendar",CI);const DI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],NI=Bt("chevron-left",DI);const VI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],OI=Bt("circle-check",VI);const MI=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],PI=Bt("coffee",MI);const kI=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],LI=Bt("funnel",kI);const UI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],zI=Bt("layout-dashboard",UI);const BI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jI=Bt("lock",BI);const qI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],FI=Bt("log-out",qI);const HI=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],GI=Bt("mail",HI);const KI=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],QI=Bt("package",KI);const YI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ab=Bt("plus",YI);const XI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$I=Bt("search",XI);const JI=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],oT=Bt("settings-2",JI);const ZI=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],WI=Bt("sparkles",ZI);const eR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tR=Bt("trash-2",eR);const nR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],iR=Bt("user",nR);const rR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ob=Bt("x",rR),sR=()=>{};var lT={};const lb=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aR=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,z=p&63;g||(z=64,c||(A=64)),r.push(t[E],t[b],t[A],t[z])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(lb(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):aR(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||b==null)throw new oR;const A=u<<2|m>>4;if(r.push(A),p!==64){const z=m<<4&240|p>>2;if(r.push(z),b!==64){const W=p<<6&192|b;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lR=function(s){const e=lb(s);return ub.encodeByteArray(e,!0)},cb=function(s){return lR(s).replace(/\./g,"")},hb=function(s){try{return ub.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const uR=()=>fb().__FIREBASE_DEFAULTS__,cR=()=>{if(typeof process>"u"||typeof lT>"u")return;const s=lT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&hb(s[1]);return e&&JSON.parse(e)},Gf=()=>{try{return sR()||uR()||cR()||hR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},fR=s=>Gf()?.emulatorHosts?.[s],db=()=>Gf()?.config,mb=s=>Gf()?.[`_${s}`];class dR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function il(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gb(s){return(await fetch(s,{credentials:"include"})).ok}const Nu={};function mR(){const s={prod:[],emulator:[]};for(const e of Object.keys(Nu))Nu[e]?s.emulator.push(e):s.prod.push(e);return s}function gR(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let uT=!1;function pR(s,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||Nu[s]===e||Nu[s]||uT)return;Nu[s]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=mR().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,z){A.setAttribute("width","24"),A.setAttribute("id",z),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{uT=!0,c()},A}function E(A,z){A.setAttribute("id",z),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=gR(r),z=t("text"),W=document.getElementById(z)||document.createElement("span"),ne=t("learnmore"),te=document.getElementById(ne)||document.createElement("a"),fe=t("preprendIcon"),Z=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Q=A.element;m(Q),E(te,ne);const he=p();g(Z,fe),Q.append(Z,W,te,he),document.body.appendChild(Q)}u?(W.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function pb(){const s=Gf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _R(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ER(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TR(){const s=zt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function yb(){return!pb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _b(){return!pb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function vb(){try{return typeof indexedDB=="object"}catch{return!1}}function bR(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const SR="FirebaseError";class yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=SR,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ic.prototype.create)}}class ic{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?AR(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new yr(o,m,r)}}function AR(s,e){return s.replace(wR,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const wR=/\{\$([^}]+)}/g;function IR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fr(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(cT(u)&&cT(c)){if(!fr(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function cT(s){return s!==null&&typeof s=="object"}function rc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Au(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function wu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function RR(s,e){const t=new CR(s,e);return t.subscribe.bind(t)}class CR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=wg),o.error===void 0&&(o.error=wg),o.complete===void 0&&(o.complete=wg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function wg(){}function Wt(s){return s&&s._delegate?s._delegate:s}class ga{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class DR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VR(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NR(s){return s===ia?void 0:s}function VR(s){return s.instantiationMode==="EAGER"}class OR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const MR={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},PR=Pe.INFO,kR={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},LR=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=kR[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ap{constructor(e){this.name=e,this._logLevel=PR,this._logHandler=LR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const UR=(s,e)=>e.some(t=>s instanceof t);let hT,fT;function zR(){return hT||(hT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BR(){return fT||(fT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Eb=new WeakMap,jg=new WeakMap,Tb=new WeakMap,Ig=new WeakMap,wp=new WeakMap;function jR(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(us(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Eb.set(t,s)}).catch(()=>{}),wp.set(e,s),e}function qR(s){if(jg.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});jg.set(s,e)}let qg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return jg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Tb.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return us(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function FR(s){qg=s(qg)}function HR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Rg(this),e,...t);return Tb.set(r,e.sort?e.sort():[e]),us(r)}:BR().includes(s)?function(...e){return s.apply(Rg(this),e),us(Eb.get(this))}:function(...e){return us(s.apply(Rg(this),e))}}function GR(s){return typeof s=="function"?HR(s):(s instanceof IDBTransaction&&qR(s),UR(s,zR())?new Proxy(s,qg):s)}function us(s){if(s instanceof IDBRequest)return jR(s);if(Ig.has(s))return Ig.get(s);const e=GR(s);return e!==s&&(Ig.set(s,e),wp.set(e,s)),e}const Rg=s=>wp.get(s);function KR(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=us(c);return r&&c.addEventListener("upgradeneeded",g=>{r(us(c.result),g.oldVersion,g.newVersion,us(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const QR=["get","getKey","getAll","getAllKeys","count"],YR=["put","add","delete","clear"],Cg=new Map;function dT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Cg.get(e))return Cg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=YR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||QR.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Cg.set(e,u),u}FR(s=>({...s,get:(e,t,r)=>dT(e,t)||s.get(e,t,r),has:(e,t)=>!!dT(e,t)||s.has(e,t)}));class XR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($R(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $R(s){return s.getComponent()?.type==="VERSION"}const Fg="@firebase/app",mT="0.14.6";const dr=new Ap("@firebase/app"),JR="@firebase/app-compat",ZR="@firebase/analytics-compat",WR="@firebase/analytics",eC="@firebase/app-check-compat",tC="@firebase/app-check",nC="@firebase/auth",iC="@firebase/auth-compat",rC="@firebase/database",sC="@firebase/data-connect",aC="@firebase/database-compat",oC="@firebase/functions",lC="@firebase/functions-compat",uC="@firebase/installations",cC="@firebase/installations-compat",hC="@firebase/messaging",fC="@firebase/messaging-compat",dC="@firebase/performance",mC="@firebase/performance-compat",gC="@firebase/remote-config",pC="@firebase/remote-config-compat",yC="@firebase/storage",_C="@firebase/storage-compat",vC="@firebase/firestore",EC="@firebase/ai",TC="@firebase/firestore-compat",bC="firebase",SC="12.6.0";const Hg="[DEFAULT]",AC={[Fg]:"fire-core",[JR]:"fire-core-compat",[WR]:"fire-analytics",[ZR]:"fire-analytics-compat",[tC]:"fire-app-check",[eC]:"fire-app-check-compat",[nC]:"fire-auth",[iC]:"fire-auth-compat",[rC]:"fire-rtdb",[sC]:"fire-data-connect",[aC]:"fire-rtdb-compat",[oC]:"fire-fn",[lC]:"fire-fn-compat",[uC]:"fire-iid",[cC]:"fire-iid-compat",[hC]:"fire-fcm",[fC]:"fire-fcm-compat",[dC]:"fire-perf",[mC]:"fire-perf-compat",[gC]:"fire-rc",[pC]:"fire-rc-compat",[yC]:"fire-gcs",[_C]:"fire-gcs-compat",[vC]:"fire-fst",[TC]:"fire-fst-compat",[EC]:"fire-vertex","fire-js":"fire-js",[bC]:"fire-js-all"};const _f=new Map,wC=new Map,Gg=new Map;function gT(s,e){try{s.container.addComponent(e)}catch(t){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function zo(s){const e=s.name;if(Gg.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,s);for(const t of _f.values())gT(t,s);for(const t of wC.values())gT(t,s);return!0}function Ip(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Qn(s){return s==null?!1:s.settings!==void 0}const IC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new ic("app","Firebase",IC);class RC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}const rl=SC;function bb(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:Hg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(t||(t=db()),!t)throw cs.create("no-options");const u=_f.get(o);if(u){if(fr(t,u.options)&&fr(r,u.config))return u;throw cs.create("duplicate-app",{appName:o})}const c=new OR(o);for(const g of Gg.values())c.addComponent(g);const m=new RC(t,r,c);return _f.set(o,m),m}function CC(s=Hg){const e=_f.get(s);if(!e&&s===Hg&&db())return bb();if(!e)throw cs.create("no-app",{appName:s});return e}function hs(s,e,t){let r=AC[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(c.join(" "));return}zo(new ga(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const xC="firebase-heartbeat-database",DC=1,qu="firebase-heartbeat-store";let xg=null;function Sb(){return xg||(xg=KR(xC,DC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(s=>{throw cs.create("idb-open",{originalErrorMessage:s.message})})),xg}async function NC(s){try{const t=(await Sb()).transaction(qu),r=await t.objectStore(qu).get(Ab(s));return await t.done,r}catch(e){if(e instanceof yr)dr.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e?.message});dr.warn(t.message)}}}async function pT(s,e){try{const r=(await Sb()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,Ab(s)),await r.done}catch(t){if(t instanceof yr)dr.warn(t.message);else{const r=cs.create("idb-set",{originalErrorMessage:t?.message});dr.warn(r.message)}}}function Ab(s){return`${s.name}!${s.options.appId}`}const VC=1024,OC=30;class MC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>OC){const o=LC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yT(),{heartbeatsToSend:t,unsentEntries:r}=PC(this._heartbeatsCache.heartbeats),o=cb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return dr.warn(e),""}}}function yT(){return new Date().toISOString().substring(0,10)}function PC(s,e=VC){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),_T(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),_T(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class kC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vb()?bR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _T(s){return cb(JSON.stringify({version:2,heartbeats:s})).length}function LC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function UC(s){zo(new ga("platform-logger",e=>new XR(e),"PRIVATE")),zo(new ga("heartbeat",e=>new MC(e),"PRIVATE")),hs(Fg,mT,s),hs(Fg,mT,"esm2020"),hs("fire-js","")}UC("");var zC="firebase",BC="12.7.0";hs(zC,BC,"app");function wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jC=wb,Ib=new ic("auth","Firebase",wb());const vf=new Ap("@firebase/auth");function qC(s,...e){vf.logLevel<=Pe.WARN&&vf.warn(`Auth (${rl}): ${s}`,...e)}function tf(s,...e){vf.logLevel<=Pe.ERROR&&vf.error(`Auth (${rl}): ${s}`,...e)}function ui(s,...e){throw Rp(s,...e)}function ki(s,...e){return Rp(s,...e)}function Rb(s,e,t){const r={...jC(),[e]:t};return new ic("auth","Firebase",r).create(e,{appName:s.name})}function hr(s){return Rb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return Ib.create(s,...e)}function be(s,e,...t){if(!s)throw Rp(e,...t)}function lr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw tf(e),new Error(e)}function mr(s,e){s||lr(e)}function Kg(){return typeof self<"u"&&self.location?.href||""}function FC(){return vT()==="http:"||vT()==="https:"}function vT(){return typeof self<"u"&&self.location?.protocol||null}function HC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FC()||vR()||"connection"in navigator)?navigator.onLine:!0}function GC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class sc{constructor(e,t){this.shortDelay=e,this.longDelay=t,mr(t>e,"Short delay should be less than long delay!"),this.isMobile=yR()||ER()}get(){return HC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cp(s,e){mr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Cb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const KC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const QC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YC=new sc(3e4,6e4);function vs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Es(s,e,t,r,o={}){return xb(s,o,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=rc({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return _R()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&il(s.emulatorConfig.host)&&(p.credentials="include"),Cb.fetch()(await Db(s,s.config.apiHost,t,m),p)})}async function xb(s,e,t){s._canInitEmulator=!1;const r={...KC,...e};try{const o=new $C(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Qh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Qh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw Qh(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Rb(s,E,p);ui(s,E)}}catch(o){if(o instanceof yr)throw o;ui(s,"network-request-failed",{message:String(o)})}}async function ac(s,e,t,r,o={}){const u=await Es(s,e,t,r,o);return"mfaPendingCredential"in u&&ui(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Db(s,e,t,r){const o=`${e}${t}?${r}`,u=s,c=u.config.emulator?Cp(s.config,o):`${s.config.apiScheme}://${o}`;return QC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function XC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $C{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),YC.get())})}}function Qh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=ki(s,e,r);return o.customData._tokenResponse=t,o}function ET(s){return s!==void 0&&s.enterprise!==void 0}class JC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return XC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZC(s,e){return Es(s,"GET","/v2/recaptchaConfig",vs(s,e))}async function WC(s,e){return Es(s,"POST","/v1/accounts:delete",e)}async function Ef(s,e){return Es(s,"POST","/v1/accounts:lookup",e)}function Vu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e2(s,e=!1){const t=Wt(s),r=await t.getIdToken(e),o=xp(r);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:r,authTime:Vu(Dg(o.auth_time)),issuedAtTime:Vu(Dg(o.iat)),expirationTime:Vu(Dg(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Dg(s){return Number(s)*1e3}function xp(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const o=hb(t);return o?JSON.parse(o):(tf("Failed to decode base64 JWT payload"),null)}catch(o){return tf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function TT(s){const e=xp(s);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Fu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof yr&&t2(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function t2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class n2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Qg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tf(s){const e=s.auth,t=await s.getIdToken(),r=await Fu(s,Ef(e,{idToken:t}));be(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?Nb(o.providerUserInfo):[],c=r2(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!c?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Qg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,E)}async function i2(s){const e=Wt(s);await Tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r2(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Nb(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function s2(s,e){const t=await xb(s,{},async()=>{const r=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await Db(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&il(s.emulatorConfig.host)&&(g.credentials="include"),Cb.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function a2(s,e){return Es(s,"POST","/v2/accounts:revokeToken",vs(s,e))}class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=TT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await s2(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,c=new Mo;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(be(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return lr("not implemented")}}function Wr(s,e){be(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new n2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Qg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Fu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return e2(this,e)}reload(){return i2(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await Fu(this,WC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:z,providerData:W,stsTokenManager:ne}=t;be(b&&ne,e,"internal-error");const te=Mo.fromJSON(this.name,ne);be(typeof b=="string",e,"internal-error"),Wr(r,e.name),Wr(o,e.name),be(typeof A=="boolean",e,"internal-error"),be(typeof z=="boolean",e,"internal-error"),Wr(u,e.name),Wr(c,e.name),Wr(m,e.name),Wr(g,e.name),Wr(p,e.name),Wr(E,e.name);const fe=new li({uid:b,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:z,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:te,createdAt:p,lastLoginAt:E});return W&&Array.isArray(W)&&(fe.providerData=W.map(Z=>({...Z}))),g&&(fe._redirectEventId=g),fe}static async _fromIdTokenResponse(e,t,r=!1){const o=new Mo;o.updateFromServerResponse(t);const u=new li({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Tf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Nb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Mo;m.updateFromIdToken(r);const g=new li({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Qg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const bT=new Map;function ur(s){mr(s instanceof Function,"Expected a class definition");let e=bT.get(s);return e?(mr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,bT.set(s,e),e)}class Vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vb.type="NONE";const ST=Vb;function nf(s,e,t){return`firebase:${s}:${e}:${t}`}class Po{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=nf(this.userKey,o.apiKey,u),this.fullPersistenceKey=nf("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Po(ur(ST),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||ur(ST);const c=nf(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const E=await p._get(c);if(E){let b;if(typeof E=="string"){const A=await Ef(e,{idToken:E}).catch(()=>{});if(!A)break;b=await li._fromGetAccountInfoResponse(e,A,E)}else b=li._fromJSON(e,E);p!==u&&(m=b),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Po(u,e,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Po(u,e,r))}}function AT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ub(e))return"Blackberry";if(zb(e))return"Webos";if(Mb(e))return"Safari";if((e.includes("chrome/")||Pb(e))&&!e.includes("edge/"))return"Chrome";if(Lb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function Ob(s=zt()){return/firefox\//i.test(s)}function Mb(s=zt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pb(s=zt()){return/crios\//i.test(s)}function kb(s=zt()){return/iemobile/i.test(s)}function Lb(s=zt()){return/android/i.test(s)}function Ub(s=zt()){return/blackberry/i.test(s)}function zb(s=zt()){return/webos/i.test(s)}function Dp(s=zt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function o2(s=zt()){return Dp(s)&&!!window.navigator?.standalone}function l2(){return TR()&&document.documentMode===10}function Bb(s=zt()){return Dp(s)||Lb(s)||zb(s)||Ub(s)||/windows phone/i.test(s)||kb(s)}function jb(s,e=[]){let t;switch(s){case"Browser":t=AT(zt());break;case"Worker":t=`${AT(zt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rl}/${r}`}class u2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function c2(s,e={}){return Es(s,"GET","/v2/passwordPolicy",vs(s,e))}const h2=6;class f2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??h2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class d2{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wT(this),this.idTokenSubscription=new wT(this),this.beforeStateQueue=new u2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(hr(this));const t=e?Wt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c2(this),t=new f2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ic("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await a2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ur(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ra(s){return Wt(s)}class wT{constructor(e){this.auth=e,this.observer=null,this.addObserver=RR(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m2(s){Kf=s}function qb(s){return Kf.loadJS(s)}function g2(){return Kf.recaptchaEnterpriseScript}function p2(){return Kf.gapiScript}function y2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class _2{constructor(){this.enterprise=new v2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class v2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const E2="recaptcha-enterprise",Fb="NO_RECAPTCHA";class T2{constructor(e){this.type=E2,this.auth=Ra(e)}async verify(e="verify",t=!1){async function r(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{ZC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new JC(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,c(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,c,m){const g=window.grecaptcha;ET(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{c(p)}).catch(()=>{c(Fb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _2().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{r(this.auth).then(m=>{if(!t&&ET(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=g2();g.length!==0&&(g+=m),qb(g).then(()=>{o(m,u,c)}).catch(p=>{c(p)})}}).catch(m=>{c(m)})})}}async function IT(s,e,t,r=!1,o=!1){const u=new T2(s);let c;if(o)c=Fb;else try{c=await u.verify(t)}catch{c=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Yg(s,e,t,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await IT(s,e,t,t==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await IT(s,e,t,t==="getOobCode");return r(s,c)}else return Promise.reject(u)})}function b2(s,e){const t=Ip(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(fr(u,e??{}))return o;ui(o,"already-initialized")}return t.initialize({options:e})}function S2(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ur);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function A2(s,e,t){const r=Ra(s);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Hb(e),{host:c,port:m}=w2(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(fr(p,r.config.emulator)&&fr(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,il(c)?(gb(`${u}//${c}${g}`),pR("Auth",!0)):I2()}function Hb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function w2(s){const e=Hb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:RT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:RT(c)}}}function RT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function I2(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Np{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function R2(s,e){return Es(s,"POST","/v1/accounts:signUp",e)}async function C2(s,e){return ac(s,"POST","/v1/accounts:signInWithPassword",vs(s,e))}async function x2(s,e){return ac(s,"POST","/v1/accounts:signInWithEmailLink",vs(s,e))}async function D2(s,e){return ac(s,"POST","/v1/accounts:signInWithEmailLink",vs(s,e))}class Hu extends Np{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Hu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Hu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yg(e,t,"signInWithPassword",C2);case"emailLink":return x2(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yg(e,r,"signUpPassword",R2);case"emailLink":return D2(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ko(s,e){return ac(s,"POST","/v1/accounts:signInWithIdp",vs(s,e))}const N2="http://localhost";class pa extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const c=new pa(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ko(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:N2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rc(t)}return e}}function V2(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function O2(s){const e=Au(wu(s)).link,t=e?Au(wu(e)).deep_link_id:null,r=Au(wu(s)).deep_link_id;return(r?Au(wu(r)).link:null)||r||t||e||s}class Vp{constructor(e){const t=Au(wu(e)),r=t.apiKey??null,o=t.oobCode??null,u=V2(t.mode??null);be(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=O2(e);try{return new Vp(t)}catch{return null}}}class sl{constructor(){this.providerId=sl.PROVIDER_ID}static credential(e,t){return Hu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vp.parseLink(t);return be(r,"argument-error"),Hu._fromEmailAndCode(e,r.code,r.tenantId)}}sl.PROVIDER_ID="password";sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oc extends Gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class is extends oc{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";class rs extends oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pa._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return rs.credential(t,r)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";class ss extends oc{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";class as extends oc{constructor(){super("twitter.com")}static credential(e,t){return pa._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return as.credential(t,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";async function M2(s,e){return ac(s,"POST","/v1/accounts:signUp",vs(s,e))}class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await li._fromIdTokenResponse(e,r,o),c=CT(r);return new ya({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=CT(r);return new ya({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function CT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class bf extends yr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new bf(e,t,r,o)}}function Kb(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(s,u,e,r):u})}async function P2(s,e,t=!1){const r=await Fu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return ya._forOperation(s,"link",r)}async function k2(s,e,t=!1){const{auth:r}=s;if(Qn(r.app))return Promise.reject(hr(r));const o="reauthenticate";try{const u=await Fu(s,Kb(r,o,e,s),t);be(u.idToken,r,"internal-error");const c=xp(u.idToken);be(c,r,"internal-error");const{sub:m}=c;return be(s.uid===m,r,"user-mismatch"),ya._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ui(r,"user-mismatch"),u}}async function Qb(s,e,t=!1){if(Qn(s.app))return Promise.reject(hr(s));const r="signIn",o=await Kb(s,r,e),u=await ya._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}async function L2(s,e){return Qb(Ra(s),e)}async function Yb(s){const e=Ra(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function U2(s,e,t){if(Qn(s.app))return Promise.reject(hr(s));const r=Ra(s),c=await Yg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M2).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Yb(s),g}),m=await ya._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(m.user),m}function z2(s,e,t){return Qn(s.app)?Promise.reject(hr(s)):L2(Wt(s),sl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yb(s),r})}function B2(s,e,t,r){return Wt(s).onIdTokenChanged(e,t,r)}function j2(s,e,t){return Wt(s).beforeAuthStateChanged(e,t)}function q2(s,e,t,r){return Wt(s).onAuthStateChanged(e,t,r)}function F2(s){return Wt(s).signOut()}const Sf="__sak";class Xb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const H2=1e3,G2=10;class $b extends Xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);l2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,G2):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},H2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$b.type="LOCAL";const K2=$b;class Jb extends Xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jb.type="SESSION";const Zb=Jb;function Q2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Qf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await Q2(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];function Op(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class Y2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Op("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Li(){return window}function X2(s){Li().location.href=s}function Wb(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function $2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J2(){return navigator?.serviceWorker?.controller||null}function Z2(){return Wb()?self:null}const eS="firebaseLocalStorageDb",W2=1,Af="firebaseLocalStorage",tS="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(s,e){return s.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function ex(){const s=indexedDB.deleteDatabase(eS);return new lc(s).toPromise()}function Xg(){const s=indexedDB.open(eS,W2);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Af,{keyPath:tS})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Af)?e(r):(r.close(),await ex(),e(await Xg()))})})}async function xT(s,e,t){const r=Yf(s,!0).put({[tS]:e,value:t});return new lc(r).toPromise()}async function tx(s,e){const t=Yf(s,!1).get(e),r=await new lc(t).toPromise();return r===void 0?null:r.value}function DT(s,e){const t=Yf(s,!0).delete(e);return new lc(t).toPromise()}const nx=800,ix=3;class nS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ix)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(Z2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $2(),!this.activeServiceWorker)return;this.sender=new Y2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await xT(e,Sf,"1"),await DT(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tx(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Yf(o,!1).getAll();return new lc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nS.type="LOCAL";const rx=nS;new sc(3e4,6e4);function sx(s,e){return e?ur(e):(be(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Mp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ax(s){return Qb(s.auth,new Mp(s),s.bypassAuthState)}function ox(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),k2(t,new Mp(s),s.bypassAuthState)}async function lx(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),P2(t,new Mp(s),s.bypassAuthState)}class iS{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ax;case"linkViaPopup":case"linkViaRedirect":return lx;case"reauthViaPopup":case"reauthViaRedirect":return ox;default:ui(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ux=new sc(2e3,1e4);class Oo extends iS{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ux.get())};e()}}Oo.currentPopupAction=null;const cx="pendingRedirect",rf=new Map;class hx extends iS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const r=await fx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fx(s,e){const t=gx(e),r=mx(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function dx(s,e){rf.set(s._key(),e)}function mx(s){return ur(s._redirectPersistence)}function gx(s){return nf(cx,s.config.apiKey,s.name)}async function px(s,e,t=!1){if(Qn(s.app))return Promise.reject(hr(s));const r=Ra(s),o=sx(r,e),c=await new hx(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const yx=600*1e3;class _x{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ki(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yx&&this.cachedEventUids.clear(),this.cachedEventUids.has(NT(e))}saveEventToCache(e){this.cachedEventUids.add(NT(e)),this.lastProcessedEventTime=Date.now()}}function NT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function rS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function vx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rS(s);default:return!1}}async function Ex(s,e={}){return Es(s,"GET","/v1/projects",e)}const Tx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bx=/^https?/;async function Sx(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Ex(s);for(const t of e)try{if(Ax(t))return}catch{}ui(s,"unauthorized-domain")}function Ax(s){const e=Kg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!bx.test(t))return!1;if(Tx.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const wx=new sc(3e4,6e4);function VT(){const s=Li().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Ix(s){return new Promise((e,t)=>{function r(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),t(ki(s,"network-request-failed"))},timeout:wx.get()})}if(Li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Li().gapi?.load)r();else{const o=y2("iframefcb");return Li()[o]=()=>{gapi.load?r():t(ki(s,"network-request-failed"))},qb(`${p2()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw sf=null,e})}let sf=null;function Rx(s){return sf=sf||Ix(s),sf}const Cx=new sc(5e3,15e3),xx="__/auth/iframe",Dx="emulator/auth/iframe",Nx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ox(s){const e=s.config;be(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Cp(e,Dx):`https://${s.config.authDomain}/${xx}`,r={apiKey:e.apiKey,appName:s.name,v:rl},o=Vx.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${rc(r).slice(1)}`}async function Mx(s){const e=await Rx(s),t=Li().gapi;return be(t,s,"internal-error"),e.open({where:document.body,url:Ox(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=ki(s,"network-request-failed"),m=Li().setTimeout(()=>{u(c)},Cx.get());function g(){Li().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}const Px={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kx=500,Lx=600,Ux="_blank",zx="http://localhost";class OT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bx(s,e,t,r=kx,o=Lx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...Px,width:r.toString(),height:o.toString(),top:u,left:c},p=zt().toLowerCase();t&&(m=Pb(p)?Ux:t),Ob(p)&&(e=e||zx,g.scrollbars="yes");const E=Object.entries(g).reduce((A,[z,W])=>`${A}${z}=${W},`,"");if(o2(p)&&m!=="_self")return jx(e||"",m),new OT(null);const b=window.open(e||"",m,E);be(b,s,"popup-blocked");try{b.focus()}catch{}return new OT(b)}function jx(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const qx="__/auth/handler",Fx="emulator/auth/handler",Hx=encodeURIComponent("fac");async function MT(s,e,t,r,o,u){be(s.config.authDomain,s,"auth-domain-config-required"),be(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:rl,eventId:o};if(e instanceof Gb){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",IR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))c[E]=b}if(e instanceof oc){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),p=g?`#${Hx}=${encodeURIComponent(g)}`:"";return`${Gx(s)}?${rc(m).slice(1)}${p}`}function Gx({config:s}){return s.emulator?Cp(s,Fx):`https://${s.authDomain}/${qx}`}const Ng="webStorageSupport";class Kx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zb,this._completeRedirectFn=px,this._overrideRedirectResult=dx}async _openPopup(e,t,r,o){mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await MT(e,t,r,Kg(),o);return Bx(e,u,Op())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await MT(e,t,r,Kg(),o);return X2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Mx(e),r=new _x(e);return t.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ng,{type:Ng},o=>{const u=o?.[0]?.[Ng];u!==void 0&&t(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Sx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bb()||Mb()||Dp()}}const Qx=Kx;var PT="@firebase/auth",kT="1.12.0";class Yx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $x(s){zo(new ga("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jb(s)},p=new d2(r,o,u,g);return S2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zo(new ga("auth-internal",e=>{const t=Ra(e.getProvider("auth").getImmediate());return(r=>new Yx(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(PT,kT,Xx(s)),hs(PT,kT,"esm2020")}const Jx=300,Zx=mb("authIdTokenMaxAge")||Jx;let LT=null;const Wx=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zx)return;const o=t?.token;LT!==o&&(LT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eD(s=CC()){const e=Ip(s,"auth");if(e.isInitialized())return e.getImmediate();const t=b2(s,{popupRedirectResolver:Qx,persistence:[rx,K2,Zb]}),r=mb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=Wx(u.toString());j2(t,c,()=>c(t.currentUser)),B2(t,m=>c(m))}}const o=fR("auth");return o&&A2(t,`http://${o}`),t}function tD(){return document.getElementsByTagName("head")?.[0]??document}m2({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=ki("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",tD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$x("Browser");var UT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fs,sS;(function(){var s;function e(I,w){function R(){}R.prototype=w.prototype,I.F=w.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(O,N,P){for(var C=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)C[lt-2]=arguments[lt];return w.prototype[N].apply(O,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,R){R||(R=0);const O=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)O[N]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(N=0;N<16;++N)O[N]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=I.g[0],R=I.g[1],N=I.g[2];let P=I.g[3],C;C=w+(P^R&(N^P))+O[0]+3614090360&4294967295,w=R+(C<<7&4294967295|C>>>25),C=P+(N^w&(R^N))+O[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(R^P&(w^R))+O[2]+606105819&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(w^N&(P^w))+O[3]+3250441966&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(P^R&(N^P))+O[4]+4118548399&4294967295,w=R+(C<<7&4294967295|C>>>25),C=P+(N^w&(R^N))+O[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(R^P&(w^R))+O[6]+2821735955&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(w^N&(P^w))+O[7]+4249261313&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(P^R&(N^P))+O[8]+1770035416&4294967295,w=R+(C<<7&4294967295|C>>>25),C=P+(N^w&(R^N))+O[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(R^P&(w^R))+O[10]+4294925233&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(w^N&(P^w))+O[11]+2304563134&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(P^R&(N^P))+O[12]+1804603682&4294967295,w=R+(C<<7&4294967295|C>>>25),C=P+(N^w&(R^N))+O[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=N+(R^P&(w^R))+O[14]+2792965006&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(w^N&(P^w))+O[15]+1236535329&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(N^P&(R^N))+O[1]+4129170786&4294967295,w=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(w^R))+O[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(P^w))+O[11]+643717713&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^w&(N^P))+O[0]+3921069994&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(N^P&(R^N))+O[5]+3593408605&4294967295,w=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(w^R))+O[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(P^w))+O[15]+3634488961&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^w&(N^P))+O[4]+3889429448&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(N^P&(R^N))+O[9]+568446438&4294967295,w=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(w^R))+O[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(P^w))+O[3]+4107603335&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^w&(N^P))+O[8]+1163531501&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(N^P&(R^N))+O[13]+2850285829&4294967295,w=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(w^R))+O[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(P^w))+O[7]+1735328473&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^w&(N^P))+O[12]+2368359562&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(R^N^P)+O[5]+4294588738&4294967295,w=R+(C<<4&4294967295|C>>>28),C=P+(w^R^N)+O[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^R)+O[11]+1839030562&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^w)+O[14]+4259657740&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(R^N^P)+O[1]+2763975236&4294967295,w=R+(C<<4&4294967295|C>>>28),C=P+(w^R^N)+O[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^R)+O[7]+4139469664&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^w)+O[10]+3200236656&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(R^N^P)+O[13]+681279174&4294967295,w=R+(C<<4&4294967295|C>>>28),C=P+(w^R^N)+O[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^R)+O[3]+3572445317&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^w)+O[6]+76029189&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(R^N^P)+O[9]+3654602809&4294967295,w=R+(C<<4&4294967295|C>>>28),C=P+(w^R^N)+O[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=N+(P^w^R)+O[15]+530742520&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^w)+O[2]+3299628645&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(N^(R|~P))+O[0]+4096336452&4294967295,w=R+(C<<6&4294967295|C>>>26),C=P+(R^(w|~N))+O[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~R))+O[14]+2878612391&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~w))+O[5]+4237533241&4294967295,R=N+(C<<21&4294967295|C>>>11),C=w+(N^(R|~P))+O[12]+1700485571&4294967295,w=R+(C<<6&4294967295|C>>>26),C=P+(R^(w|~N))+O[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~R))+O[10]+4293915773&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~w))+O[1]+2240044497&4294967295,R=N+(C<<21&4294967295|C>>>11),C=w+(N^(R|~P))+O[8]+1873313359&4294967295,w=R+(C<<6&4294967295|C>>>26),C=P+(R^(w|~N))+O[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~R))+O[6]+2734768916&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~w))+O[13]+1309151649&4294967295,R=N+(C<<21&4294967295|C>>>11),C=w+(N^(R|~P))+O[4]+4149444226&4294967295,w=R+(C<<6&4294967295|C>>>26),C=P+(R^(w|~N))+O[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=N+(w^(P|~R))+O[2]+718787259&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~w))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.v=function(I,w){w===void 0&&(w=I.length);const R=w-this.blockSize,O=this.C;let N=this.h,P=0;for(;P<w;){if(N==0)for(;P<=R;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(O[N++]=I.charCodeAt(P++),N==this.blockSize){o(this,O),N=0;break}}else for(;P<w;)if(O[N++]=I[P++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=w},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)I[w++]=this.g[R]>>>O&255;return I};function u(I,w){var R=m;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=w(I)}function c(I,w){this.h=w;const R=[];let O=!0;for(let N=I.length-1;N>=0;N--){const P=I[N]|0;O&&P==w||(R[N]=P,O=!1)}this.g=R}var m={};function g(I){return-128<=I&&I<128?u(I,function(w){return new c([w|0],w<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return b;if(I<0)return te(p(-I));const w=[];let R=1;for(let O=0;I>=R;O++)w[O]=I/R|0,R*=4294967296;return new c(w,0)}function E(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return te(E(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(w,8));let O=b;for(let P=0;P<I.length;P+=8){var N=Math.min(8,I.length-P);const C=parseInt(I.substring(P,P+N),w);N<8?(N=p(Math.pow(w,N)),O=O.j(N).add(p(C))):(O=O.j(R),O=O.add(p(C)))}return O}var b=g(0),A=g(1),z=g(16777216);s=c.prototype,s.m=function(){if(ne(this))return-te(this).m();let I=0,w=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);I+=(O>=0?O:4294967296+O)*w,w*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(W(this))return"0";if(ne(this))return"-"+te(this).toString(I);const w=p(Math.pow(I,6));var R=this;let O="";for(;;){const N=he(R,w).g;R=fe(R,N.j(w));let P=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=N,W(R))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function W(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function ne(I){return I.h==-1}s.l=function(I){return I=fe(this,I),ne(I)?-1:W(I)?0:1};function te(I){const w=I.g.length,R=[];for(let O=0;O<w;O++)R[O]=~I.g[O];return new c(R,~I.h).add(A)}s.abs=function(){return ne(this)?te(this):this},s.add=function(I){const w=Math.max(this.g.length,I.g.length),R=[];let O=0;for(let N=0;N<=w;N++){let P=O+(this.i(N)&65535)+(I.i(N)&65535),C=(P>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);O=C>>>16,P&=65535,C&=65535,R[N]=C<<16|P}return new c(R,R[R.length-1]&-2147483648?-1:0)};function fe(I,w){return I.add(te(w))}s.j=function(I){if(W(this)||W(I))return b;if(ne(this))return ne(I)?te(this).j(te(I)):te(te(this).j(I));if(ne(I))return te(this.j(te(I)));if(this.l(z)<0&&I.l(z)<0)return p(this.m()*I.m());const w=this.g.length+I.g.length,R=[];for(var O=0;O<2*w;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<I.g.length;N++){const P=this.i(O)>>>16,C=this.i(O)&65535,lt=I.i(N)>>>16,Pt=I.i(N)&65535;R[2*O+2*N]+=C*Pt,Z(R,2*O+2*N),R[2*O+2*N+1]+=P*Pt,Z(R,2*O+2*N+1),R[2*O+2*N+1]+=C*lt,Z(R,2*O+2*N+1),R[2*O+2*N+2]+=P*lt,Z(R,2*O+2*N+2)}for(I=0;I<w;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=w;I<2*w;I++)R[I]=0;return new c(R,0)};function Z(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function Q(I,w){this.g=I,this.h=w}function he(I,w){if(W(w))throw Error("division by zero");if(W(I))return new Q(b,b);if(ne(I))return w=he(te(I),w),new Q(te(w.g),te(w.h));if(ne(w))return w=he(I,te(w)),new Q(te(w.g),w.h);if(I.g.length>30){if(ne(I)||ne(w))throw Error("slowDivide_ only works with positive integers.");for(var R=A,O=w;O.l(I)<=0;)R=ye(R),O=ye(O);var N=de(R,1),P=de(O,1);for(O=de(O,2),R=de(R,2);!W(O);){var C=P.add(O);C.l(I)<=0&&(N=N.add(R),P=C),O=de(O,1),R=de(R,1)}return w=fe(I,N.j(w)),new Q(N,w)}for(N=b;I.l(w)>=0;){for(R=Math.max(1,Math.floor(I.m()/w.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=p(R),C=P.j(w);ne(C)||C.l(I)>0;)R-=O,P=p(R),C=P.j(w);W(P)&&(P=A),N=N.add(P),I=fe(I,C)}return new Q(N,I)}s.B=function(I){return he(this,I).h},s.and=function(I){const w=Math.max(this.g.length,I.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)&I.i(O);return new c(R,this.h&I.h)},s.or=function(I){const w=Math.max(this.g.length,I.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)|I.i(O);return new c(R,this.h|I.h)},s.xor=function(I){const w=Math.max(this.g.length,I.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)^I.i(O);return new c(R,this.h^I.h)};function ye(I){const w=I.g.length+1,R=[];for(let O=0;O<w;O++)R[O]=I.i(O)<<1|I.i(O-1)>>>31;return new c(R,I.h)}function de(I,w){const R=w>>5;w%=32;const O=I.g.length-R,N=[];for(let P=0;P<O;P++)N[P]=w>0?I.i(P+R)>>>w|I.i(P+R+1)<<32-w:I.i(P+R);return new c(N,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,fs=c}).apply(typeof UT<"u"?UT:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var aS,Iu,oS,af,$g,lS,uS,cS;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var L=h[S];if(!(L in v))break e;v=v[L]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function b(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,L,F){for(var ie=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ie[Ie-2]=arguments[Ie];return y.prototype[L].apply(S,ie)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function z(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function W(h,y){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=h.length||0;const F=L.length||0;h.length=v+F;for(let ie=0;ie<F;ie++)h[v+ie]=L[ie]}else h.push(L)}}class ne{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){c.setTimeout(()=>{throw h},0)}function fe(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,v){const S=Q.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Q=new ne(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,de=!1,I=new Z,w=()=>{const h=Promise.resolve(void 0);ye=()=>{h.then(R)}};function R(){for(var h;h=fe();){try{h.h.call(h.g)}catch(v){te(v)}var y=Q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}de=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function lt(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(lt,N),lt.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pt="closure_listenable_"+(Math.random()*1e6|0),K=0;function re(h,y,v,S,L){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=L,this.key=++K,this.da=this.fa=!1}function Ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Ke(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function V(h){const y={};for(const v in h)y[v]=h[v];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(h,y){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)h[v]=S[v];for(let F=0;F<J.length;F++)v=J[F],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,y,v,S,L){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const ie=Ce(h,y,S,L);return ie>-1?(y=h[ie],v||(y.fa=!1)):(y=new re(y,this.src,F,!!S,L),y.fa=v,h.push(y)),y};function Se(h,y){const v=y.type;if(v in h.g){var S=h.g[v],L=Array.prototype.indexOf.call(S,y,void 0),F;(F=L>=0)&&Array.prototype.splice.call(S,L,1),F&&(Ee(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ce(h,y,v,S){for(let L=0;L<h.length;++L){const F=h[L];if(!F.da&&F.listener==y&&F.capture==!!v&&F.ha==S)return L}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),kt={};function ut(h,y,v,S,L){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ut(h,y[F],v,S,L);return null}return v=gl(v),h&&h[Pt]?h.J(y,v,m(S)?!!S.capture:!1,L):ws(h,y,v,!1,S,L)}function ws(h,y,v,S,L,F){if(!y)throw Error("Invalid event type");const ie=m(L)?!!L.capture:!!L;let Ie=Is(h);if(Ie||(h[Ue]=Ie=new le(h)),v=Ie.add(y,v,S,ie,F),v.proxy)return v;if(S=Na(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)P||(L=ie),L===void 0&&(L=!1),h.addEventListener(y.toString(),S,L);else if(h.attachEvent)h.attachEvent(ci(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Na(){function h(v){return y.call(h.src,h.listener,v)}const y=dl;return h}function Va(h,y,v,S,L){if(Array.isArray(y))for(var F=0;F<y.length;F++)Va(h,y[F],v,S,L);else S=m(S)?!!S.capture:!!S,v=gl(v),h&&h[Pt]?(h=h.i,F=String(y).toString(),F in h.g&&(y=h.g[F],v=Ce(y,v,S,L),v>-1&&(Ee(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[F],h.h--)))):h&&(h=Is(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ce(y,v,S,L)),(v=h>-1?y[h]:null)&&Oa(v))}function Oa(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Pt])Se(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(ci(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Is(y))?(Se(v,h),v.h==0&&(v.src=null,y[Ue]=null)):Ee(h)}}}function ci(h){return h in kt?kt[h]:kt[h]="on"+h}function dl(h,y){if(h.da)h=!0;else{y=new lt(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Oa(h),h=v.call(S,y)}return h}function Is(h){return h=h[Ue],h instanceof le?h:null}var ml="__closure_events_fn_"+(Math.random()*1e9>>>0);function gl(h){return typeof h=="function"?h:(h[ml]||(h[ml]=function(y){return h.handleEvent(y)}),h[ml])}function St(){O.call(this),this.i=new le(this),this.M=this,this.G=null}b(St,O),St.prototype[Pt]=!0,St.prototype.removeEventListener=function(h,y,v,S){Va(this,h,y,v,S)};function Lt(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var L=y;y=new N(S,h),se(y,L)}L=!0;let F,ie;if(v)for(ie=v.length-1;ie>=0;ie--)F=y.g=v[ie],L=Er(F,S,!0,y)&&L;if(F=y.g=h,L=Er(F,S,!0,y)&&L,L=Er(F,S,!1,y)&&L,v)for(ie=0;ie<v.length;ie++)F=y.g=v[ie],L=Er(F,S,!1,y)&&L}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)Ee(v[S]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},St.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Er(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let L=!0;for(let F=0;F<y.length;++F){const ie=y[F];if(ie&&!ie.da&&ie.capture==v){const Ie=ie.listener,_t=ie.ha||ie.src;ie.fa&&Se(h.i,ie),L=Ie.call(_t,S)!==!1&&L}}return L&&!S.defaultPrevented}function Ed(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function _c(h){h.g=Ed(()=>{h.g=null,h.i&&(h.i=!1,_c(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:_c(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(h){O.call(this),this.h=h,this.g={}}b(Rs,O);var pl=[];function yl(h){Be(h.g,function(y,v){this.g.hasOwnProperty(v)&&Oa(y)},h),h.g={}}Rs.prototype.N=function(){Rs.Z.N.call(this),yl(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=c.JSON.stringify,Td=c.JSON.parse,vc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ec(){}function Tc(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){N.call(this,"d")}b(Kt,N);function Mn(){N.call(this,"c")}b(Mn,N);var yt={},bc=null;function Ma(){return bc=bc||new St}yt.Ia="serverreachability";function Sc(h){N.call(this,yt.Ia,h)}b(Sc,N);function hi(h){const y=Ma();Lt(y,new Sc(y))}yt.STAT_EVENT="statevent";function Cs(h,y){N.call(this,yt.STAT_EVENT,h),this.stat=y}b(Cs,N);function At(h){const y=Ma();Lt(y,new Cs(y,h))}yt.Ja="timingevent";function fi(h,y){N.call(this,yt.Ja,h),this.size=y}b(fi,N);function di(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function bd(h,y,v,S,L,F){h.info(function(){if(h.g)if(F){var ie="",Ie=F.split("&");for(let Fe=0;Fe<Ie.length;Fe++){var _t=Ie[Fe].split("=");if(_t.length>1){const ct=_t[0];_t=_t[1];const Un=ct.split("_");ie=Un.length>=2&&Un[1]=="type"?ie+(ct+"="+_t+"&"):ie+(ct+"=redacted&")}}}else ie=null;else ie=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+y+`
`+v+`
`+ie})}function Ac(h,y,v,S,L,F,ie){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+y+`
`+v+`
`+F+" "+ie})}function mi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Sd(h,v)+(S?" "+S:"")})}function xs(h,y){h.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function Sd(h,y){if(!h.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var v=F[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return Tr(F)}catch{return y}}var Ds={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_l={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vl;function Ns(){}b(Ns,Ec),Ns.prototype.g=function(){return new XMLHttpRequest},vl=new Ns;function Fi(h){return encodeURIComponent(String(h))}function wc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Jn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var wt={},qt={};function gi(h,y,v){h.M=1,h.A=Vs(Rt(y)),h.u=v,h.R=!0,Pa(h,null)}function Pa(h,y){h.F=Date.now(),pi(h),h.B=Rt(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),za(v.i,"t",S),h.C=0,v=h.j.L,h.h=new Zn,h.g=Bc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(pl[0]=L.toString()),L=pl);for(let F=0;F<L.length;F++){const ie=ut(v,L[F],S||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),hi(),bd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ti(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=ti(this.g),_t=this.g.ya(),Fe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Ie!=4||_t==7||(_t==8||Fe<=0?hi(3):hi(2)),yi(this);var y=this.g.ca();this.X=y;var v=Ad(this);if(this.o=y==200,Ac(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var F=S;break t}}F=null}if(h=F)mi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,h);else{this.o=!1,this.m=3,At(12),Tn(this),Pn(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<v.length;)if(ct=Rc(this,v),ct==qt){Ie==4&&(this.m=4,At(14),h=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==wt){this.m=4,At(15),mi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else mi(this.i,this.l,ct,null),_i(this,ct);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||v.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)mi(this.i,this.l,v,"[Invalid Chunked Response]"),Tn(this),Pn(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ml(ie),ie.P=!0,At(11))}}else mi(this.i,this.l,v,null),_i(this,v);Ie==4&&Tn(this),this.o&&!this.K&&(Ie==4?kc(this.j,this):(this.o=!1,pi(this)))}else Gi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Tn(this),Pn(this)}}}catch{}};function Ad(h){if(!Ic(h))return h.g.la();const y=Qt(h.g);if(y==="")return"";let v="";const S=y.length,L=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Tn(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let F=0;F<S;F++)h.h.h=!0,v+=h.h.i.decode(y[F],{stream:!(L&&F==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Ic(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Rc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qt:(v=Number(y.substring(v,S)),isNaN(v)?wt:(S+=1,S+v>y.length?qt:(y=y.slice(S,S+v),h.C=S+v,y)))}Jn.prototype.cancel=function(){this.K=!0,Tn(this)};function pi(h){h.T=Date.now()+h.H,ka(h,h.H)}function ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=di(p(h.aa,h),y)}function yi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(xs(this.i,this.B),this.M!=2&&(hi(),At(17)),Tn(this),this.m=2,Pn(this)):ka(this,this.T-h)};function Pn(h){h.j.I==0||h.K||kc(h.j,h)}function Tn(h){yi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,yl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function _i(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ei(v.h,h))){if(!h.L&&Ei(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ha(v),xr(v);else break e;zs(v),At(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=di(p(v.Va,v),6e3));vi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ii(v,11)}else if((h.L||v.g==h)&&Ha(v),!C(y))for(L=v.Ba.g.parse(y),y=0;y<L.length;y++){let Fe=L[y];const ct=Fe[0];if(!(ct<=v.K))if(v.K=ct,Fe=Fe[1],v.I==2)if(Fe[0]=="c"){v.M=Fe[1],v.ba=Fe[2];const Un=Fe[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const Ri=Fe[4];Ri!=null&&(v.za=Ri,v.j.info("SVER="+v.za));const ni=Fe[5];ni!=null&&typeof ni=="number"&&ni>0&&(S=1.5*ni,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ii=h.g;if(ii){const Bs=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var F=S.h;F.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(bl(F,F.h),F.h=null))}if(S.G){const Ga=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Ga&&(S.wa=Ga,Qe(S.J,S.G,Ga))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ie=h;if(S.na=zc(S,S.L?S.ba:null,S.W),ie.L){Sl(S.h,ie);var Ie=ie,_t=S.O;_t&&(Ie.H=_t),Ie.D&&(yi(Ie),pi(Ie)),S.g=ie}else Mc(S);v.i.length>0&&wi(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Ii(v,7);else v.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ii(v,7):Vl(v):Fe[0]!="noop"&&v.l&&v.l.qa(Fe),v.A=0)}}hi(4)}catch{}}var It=class{constructor(h,y){this.g=h,this.map=y}};function El(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vi(h){return h.h?1:h.g?h.g.size:0}function Ei(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function bl(h,y){h.g?h.g.add(y):h.h=y}function Sl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}El.prototype.cancel=function(){if(this.i=Al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Al(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return z(h.i)}var Cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let L,F=null;S>=0?(L=h[v].substring(0,S),F=h[v].substring(S+1)):L=h[v],y(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bn?(this.l=h.l,Ft(this,h.j),this.o=h.o,this.g=h.g,br(this,h.u),this.h=h.h,wl(this,Vc(h.i)),this.m=h.m):h&&(y=String(h).match(Cc))?(this.l=!1,Ft(this,y[1]||"",!0),this.o=Ti(y[2]||""),this.g=Ti(y[3]||"",!0),br(this,y[4]),this.h=Ti(y[5]||"",!0),wl(this,y[6]||"",!0),this.m=Ti(y[7]||"")):(this.l=!1,this.i=new Ar(null,this.l))}bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Os(y,Ua,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Os(y,Ua,!0),"@"),h.push(Fi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Os(v,v.charAt(0)=="/"?Il:xc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Os(v,Dc)),h.join("")},bn.prototype.resolve=function(h){const y=Rt(this);let v=!!h.j;v?Ft(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)br(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=y.h.lastIndexOf("/");L!=-1&&(S=y.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let ie=0;ie<L.length;){const Ie=L[ie++];Ie=="."?S&&ie==L.length&&F.push(""):Ie==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&ie==L.length&&F.push("")):(F.push(Ie),S=!0)}S=F.join("/")}else S=L}return v?y.h=S:v=h.i.toString()!=="",v?wl(y,Vc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Rt(h){return new bn(h)}function Ft(h,y,v){h.j=v?Ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function br(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function wl(h,y,v){y instanceof Ar?(h.i=y,Ba(h.i,h.l)):(v||(y=Os(y,Sr)),h.i=new Ar(y,h.l))}function Qe(h,y,v){h.i.set(y,v)}function Vs(h){return Qe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ua=/[#\/\?@]/g,xc=/[#\?:]/g,Il=/[#\?]/g,Sr=/[#\?@]/g,Dc=/#/g;function Ar(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&La(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Ar.prototype,s.add=function(h,y){dn(this),this.i=null,h=wr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Nc(h,y){dn(h),y=wr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Rl(h,y){return dn(h),y=wr(h,y),h.g.has(y)}s.forEach=function(h,y){dn(this),this.g.forEach(function(v,S){v.forEach(function(L){h.call(y,L,S,this)},this)},this)};function Cl(h,y){dn(h);let v=[];if(typeof y=="string")Rl(h,y)&&(v=v.concat(h.g.get(wr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return dn(this),this.i=null,h=wr(this,h),Rl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Cl(this,h),h.length>0?String(h[0]):y):y};function za(h,y,v){Nc(h,y),v.length>0&&(h.i=null,h.g.set(wr(h,y),z(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const L=Fi(v);v=Cl(this,v);for(let F=0;F<v.length;F++){let ie=L;v[F]!==""&&(ie+="="+Fi(v[F])),h.push(ie)}}return this.i=h.join("&")};function Vc(h){const y=new Ar;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function wr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ba(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(Nc(this,S),za(this,L,v))},h)),h.j=y}function Wn(h,y){const v=new $n;if(c.Image){const S=new Image;S.onload=E(kn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(kn,v,"TestLoadImage: error",!1,y,S),S.onabort=E(kn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(kn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function xl(h,y){const v=new $n,S=new AbortController,L=setTimeout(()=>{S.abort(),kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?kn(v,"TestPingServer: ok",!0,y):kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),kn(v,"TestPingServer: error",!1,y)})}function kn(h,y,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function Ir(){this.g=new vc}function bi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(bi,Ec),bi.prototype.g=function(){return new Ms(this.i,this.h)};function Ms(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ms,St),s=Ms.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ei(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rr(this):ei(this),this.readyState==3&&ja(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Rr(this))},s.Na=function(h){this.g&&(this.response=h,Rr(this))},s.ga=function(){this.g&&Rr(this)};function Rr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ms.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Be(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ps(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ln(v),typeof h=="string"?v!=null&&Fi(v):Qe(h,y,v))}function Ze(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Ze,St);var Si=/^https?$/i,Dl=["POST","PUT"];s=Ze.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(F){ks(this,F);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())v.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Dl,y,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ie]of v)this.g.setRequestHeader(F,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){ks(this,F)}};function ks(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nl(h),Hi(h)}function Nl(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),Hi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),Ze.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ls(this):this.Xa())},s.Xa=function(){Ls(this)};function Ls(h){if(h.h&&typeof u<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),ti(h)==4){h.h=!1;try{const F=h.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=F===0){let ie=String(h.D).match(Cc)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),S=!Si.test(ie?ie.toLowerCase():"")}v=S}if(v)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var L=ti(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",Nl(h)}}finally{Hi(h)}}}}function Hi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Lt(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Td(y)}};function Qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(h){const y={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(C(h[S]))continue;var v=wc(h[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=y[L]||[];y[L]=F,F.push(v)}Ke(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Cr(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,h),this.Za=Ai("retryDelaySeedMs",1e4,h),this.Ta=Ai("forwardChannelMaxRetries",2,h),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new El(h&&h.concurrentRequestLimit),this.Ba=new Ir,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Cr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){At(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=zc(this,null,this.W),wi(this)};function Vl(h){if(qa(h),h.I==3){var y=h.V++,v=Rt(h.J);if(Qe(v,"SID",h.M),Qe(v,"RID",y),Qe(v,"TYPE","terminate"),Us(h,v),y=new Jn(h,h.j,y),y.M=2,y.A=Vs(Rt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Bc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),pi(y)}Uc(h)}function xr(h){h.g&&(Ml(h),h.g.cancel(),h.g=null)}function qa(h){xr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ha(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function wi(h){if(!Tl(h.h)&&!h.m){h.m=!0;var y=h.Ea;ye||w(),de||(ye(),de=!0),I.add(y,h),h.D=0}}function Fa(h,y){return vi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=di(p(h.Ea,h,y),Lc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new Jn(this,this.j,h);let F=this.o;if(this.U&&(F?(F=V(F),se(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Oc(this,L,y),v=Rt(this.J),Qe(v,"RID",h),Qe(v,"CVER",22),this.G&&Qe(v,"X-HTTP-Session-Id",this.G),Us(this,v),F&&(this.R?y="headers="+Fi(Ln(F))+"&"+y:this.u&&Ps(v,this.u,F)),bl(this.h,L),this.Ra&&Qe(v,"TYPE","init"),this.S?(Qe(v,"$req",y),Qe(v,"SID","null"),L.U=!0,gi(L,v,null)):gi(L,v,y),this.I=2}}else this.I==3&&(h?Ol(this,h):this.i.length==0||Tl(this.h)||Ol(this))};function Ol(h,y){var v;y?v=y.l:v=h.V++;const S=Rt(h.J);Qe(S,"SID",h.M),Qe(S,"RID",v),Qe(S,"AID",h.K),Us(h,S),h.u&&h.o&&Ps(S,h.u,h.o),v=new Jn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Oc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),bl(h.h,v),gi(v,S,y)}function Us(h,y){h.H&&Be(h.H,function(v,S){Qe(y,S,v)}),h.l&&Be({},function(v,S){Qe(y,S,v)})}function Oc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var L=h.i;let Ie=-1;for(;;){const _t=["count="+v];Ie==-1?v>0?(Ie=L[0].g,_t.push("ofs="+Ie)):Ie=0:_t.push("ofs="+Ie);let Fe=!0;for(let ct=0;ct<v;ct++){var F=L[ct].g;const Un=L[ct].map;if(F-=Ie,F<0)Ie=Math.max(0,L[ct].g-100),Fe=!1;else try{F="req"+F+"_"||"";try{var ie=Un instanceof Map?Un:Object.entries(Un);for(const[Ri,ni]of ie){let ii=ni;m(ni)&&(ii=Tr(ni)),_t.push(F+Ri+"="+encodeURIComponent(ii))}}catch(Ri){throw _t.push(F+"type="+encodeURIComponent("_badmap")),Ri}}catch{S&&S(Un)}}if(Fe){ie=_t.join("&");break e}}ie=void 0}return h=h.i.splice(0,v),y.G=h,ie}function Mc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ye||w(),de||(ye(),de=!0),I.add(y,h),h.A=0}}function zs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=di(p(h.Da,h),Lc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Pc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=di(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),xr(this),Pc(this))};function Ml(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Pc(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Rt(h.na);Qe(y,"RID","rpc"),Qe(y,"SID",h.M),Qe(y,"AID",h.K),Qe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qe(y,"TO",h.ia),Qe(y,"TYPE","xmlhttp"),Us(h,y),h.u&&h.o&&Ps(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Vs(Rt(y)),v.u=null,v.R=!0,Pa(v,h)}s.Va=function(){this.C!=null&&(this.C=null,xr(this),zs(this),At(19))};function Ha(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function kc(h,y){var v=null;if(h.g==y){Ha(h),Ml(h),h.g=null;var S=2}else if(Ei(h.h,y))v=y.G,Sl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var L=h.D;S=Ma(),Lt(S,new fi(S,v)),wi(h)}else Mc(h);else if(L=y.m,L==3||L==0&&y.X>0||!(S==1&&Fa(h,y)||S==2&&zs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),L){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function Lc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ii(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const L=!S;S=new bn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(S,"https"),Vs(S),L?Wn(S.toString(),v):xl(S.toString(),v)}else At(2);h.I=0,h.l&&h.l.pa(y),Uc(h),qa(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Uc(h){if(h.I=0,h.ja=[],h.l){const y=Al(h.h);(y.length!=0||h.i.length!=0)&&(W(h.ja,y),W(h.ja,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.oa()}}function zc(h,y,v){var S=v instanceof bn?Rt(v):new bn(v);if(S.g!="")y&&(S.g=y+"."+S.g),br(S,S.u);else{var L=c.location;S=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;const F=new bn(null);S&&Ft(F,S),y&&(F.g=y),L&&br(F,L),v&&(F.h=v),S=F}return v=h.G,y=h.wa,v&&y&&Qe(S,v,y),Qe(S,"VER",h.ka),Us(h,S),S}function Bc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ze(new bi({ab:v})):new Ze(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function jc(){}s=jc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Dr(){}Dr.prototype.g=function(h,y){return new un(h,y)};function un(h,y){St.call(this),this.g=new Cr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ki(this)}b(un,St),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Vl(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Tr(h),h=v);y.i.push(new It(y.Ya++,h)),y.I==3&&wi(y)},un.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,un.Z.N.call(this)};function qc(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(qc,Kt);function Fc(){Mn.call(this),this.status=1}b(Fc,Mn);function Ki(h){this.g=h}b(Ki,jc),Ki.prototype.ra=function(){Lt(this.g,"a")},Ki.prototype.qa=function(h){Lt(this.g,new qc(h))},Ki.prototype.pa=function(h){Lt(this.g,new Fc)},Ki.prototype.oa=function(){Lt(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,cS=function(){return new Dr},uS=function(){return Ma()},lS=yt,$g={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,af=Ds,_l.COMPLETE="complete",oS=_l,Tc.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",St.prototype.listen=St.prototype.J,Iu=Tc,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,aS=Ze}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});const zT="@firebase/firestore",BT="4.9.3";class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let al="12.7.0";const _a=new Ap("@firebase/firestore");function Co(){return _a.logLevel}function ee(s,...e){if(_a.logLevel<=Pe.DEBUG){const t=e.map(Pp);_a.debug(`Firestore (${al}): ${s}`,...t)}}function Tt(s,...e){if(_a.logLevel<=Pe.ERROR){const t=e.map(Pp);_a.error(`Firestore (${al}): ${s}`,...t)}}function Gu(s,...e){if(_a.logLevel<=Pe.WARN){const t=e.map(Pp);_a.warn(`Firestore (${al}): ${s}`,...t)}}function Pp(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function ue(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,hS(s,r,t)}function hS(s,e,t){let r=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tt(r),new Error(r)}function pe(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||hS(e,o,r)}function me(s,e){return s}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class nD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class rD{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ui,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ui)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new nD(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class sD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0,3512);const r=u=>{u.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lD(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class kp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=lD(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function Ae(s,e){return s<e?-1:s>e?1:0}function Jg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Vg(o)===Vg(u)?Ae(o,u):Vg(o)?1:-1}return Ae(s.length,e.length)}const uD=55296,cD=57343;function Vg(s){const e=s.charCodeAt(0);return e>=uD&&e<=cD}function Bo(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function fS(s){return s+"\0"}const qT="__name__";class Vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Vi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ae(e.length,t.length)}static compareSegments(e,t){const r=Vi.isNumericId(e),o=Vi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class Ge extends Vi{construct(e,t,r){return new Ge(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const hD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Vi{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return hD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qT}static keyField(){return new dt([qT])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ae(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ae(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ae(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ge.fromString(e))}static fromName(e){return new oe(Ge.fromString(e).popFirst(5))}static empty(){return new oe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ge(e.slice()))}}function dS(s,e,t){if(!t)throw new ae(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function fD(s,e,t,r){if(e===!0&&r===!0)throw new ae(X.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function FT(s){if(!oe.isDocumentKey(s))throw new ae(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function HT(s){if(oe.isDocumentKey(s))throw new ae(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function mS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Lp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ue(12329,{type:typeof s})}function ji(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ae(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lp(s);throw new ae(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ot(s,e){const t={typeString:s};return e&&(t.value=e),t}function uc(s,e){if(!mS(s))throw new ae(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new ae(X.INVALID_ARGUMENT,t);return!0}const GT=-62135596800,KT=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*KT);return new $e(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<GT)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KT}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uc(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Ot("string",$e._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new $e(0,0))}static max(){return new ve(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const jo=-1;class wf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Zg(s){return s.fields.find((e=>e.kind===2))}function ra(s){return s.fields.filter((e=>e.kind!==2))}wf.UNKNOWN_ID=-1;class of{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ku{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ku(0,On.min())}}function gS(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=ve.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new On(o,oe.empty(),e)}function pS(s){return new On(s.readTime,s.key,jo)}class On{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new On(ve.min(),oe.empty(),jo)}static max(){return new On(ve.max(),oe.empty(),jo)}}function Up(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(s.documentKey,e.documentKey),t!==0?t:Ae(s.largestBatchId,e.largestBatchId))}const yS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _S{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ts(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==yS)throw s;ee("LocalStore","Unexpectedly lost primary lease")}class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new k(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof k?t:k.resolve(t)}catch(t){return k.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):k.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):k.reject(t)}static resolve(e){return new k(((t,r)=>{t(e)}))}static reject(e){return new k(((t,r)=>{r(e)}))}static waitFor(e){return new k(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>r(g)))})),c=!0,u===o&&t()}))}static or(e){let t=k.resolve(!1);for(const r of e)t=t.next((o=>o?k.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new k(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new k(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}const Dn="SimpleDb";class Xf{static open(e,t,r,o){try{return new Xf(t,e.transaction(o,r))}catch(u){throw new Ou(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ui,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ou(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=zp(r.target.error);this.S.reject(new Ou(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mD(t)}}class ds{static delete(e){return ee(Dn,"Removing database:",e),aa(fb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!vb())return!1;if(ds.F())return!0;const e=zt(),t=ds.M(e),r=0<t&&t<10,o=vS(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ds.M(zt())===12.2&&Tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Dn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{r(new Ou(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new ae(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ae(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ou(e,c))},o.onupgradeneeded=u=>{ee(Dn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ee(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Xf.open(this.db,e,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),k.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ee(Dn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class dD{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class Ou extends ae{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bs(s){return s.name==="IndexedDbTransactionError"}class mD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ee(Dn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ee(Dn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return ee(Dn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Dn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Dn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return ee(Dn,"COUNT",this.store.name),aa(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new k(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new k(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){ee(Dn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new k(((r,o)=>{t.onerror=u=>{const c=zp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(e,t){const r=[];return new k(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new dD(m),p=t(m.primaryKey,m.value,g);if(p instanceof k){const E=p.catch((b=>(g.done(),k.reject(b))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>k.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function aa(s){return new k(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=zp(r.target.error);t(o)}}))}let QT=!1;function zp(s){const e=ds.M(zt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QT||(QT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Mu="IndexBackfiller";class gD{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(Mu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ee(Mu,`Documents written: ${t}`)}catch(t){bs(t)?ee(Mu,"Ignoring IndexedDB error during index backfill: ",t):await Ts(t)}await this.re(6e4)}))}}class pD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return k.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ee(Mu,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ee(Mu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const c=pS(u);Up(c,r)>0&&(r=c)})),new On(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vn.ce=-1;const ha=-1;function $f(s){return s==null}function Qu(s){return s===0&&1/s==-1/0}function ES(s){return typeof s=="number"&&Number.isInteger(s)&&!Qu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const If="";function on(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=YT(e)),e=yD(s.get(t),e);return YT(e)}function yD(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case If:t+="";break;default:t+=u}}return t}function YT(s){return s+If+""}function Mi(s){const e=s.length;if(pe(e>=2,64408,{path:s}),e===2)return pe(s.charAt(0)===If&&s.charAt(1)==="",56145,{path:s}),Ge.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=s.indexOf(If,u);switch((c<0||c>t)&&ue(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ue(61167,{path:s})}u=c+2}return new Ge(r)}const sa="remoteDocuments",cc="owner",bo="owner",Yu="mutationQueues",_D="userId",oi="mutations",XT="batchId",ca="userMutationsIndex",$T=["userId","batchId"];function lf(s,e){return[s,on(e)]}function TS(s,e,t){return[s,on(e),t]}const vD={},qo="documentMutations",Rf="remoteDocumentsV14",ED=["prefixPath","collectionGroup","readTime","documentId"],uf="documentKeyIndex",TD=["prefixPath","collectionGroup","documentId"],bS="collectionGroupIndex",bD=["collectionGroup","readTime","prefixPath","documentId"],Xu="remoteDocumentGlobal",Wg="remoteDocumentGlobalKey",Fo="targets",SS="queryTargetsIndex",SD=["canonicalId","targetId"],Ho="targetDocuments",AD=["targetId","path"],Bp="documentTargetsIndex",wD=["path","targetId"],Cf="targetGlobalKey",fa="targetGlobal",$u="collectionParents",ID=["collectionId","parent"],Go="clientMetadata",RD="clientId",Jf="bundles",CD="bundleId",Zf="namedQueries",xD="name",jp="indexConfiguration",DD="indexId",ep="collectionGroupIndex",ND="collectionGroup",Pu="indexState",VD=["indexId","uid"],AS="sequenceNumberIndex",OD=["uid","sequenceNumber"],ku="indexEntries",MD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wS="documentKeyIndex",PD=["indexId","uid","orderedDocumentKey"],Wf="documentOverlays",kD=["userId","collectionPath","documentId"],tp="collectionPathOverlayIndex",LD=["userId","collectionPath","largestBatchId"],IS="collectionGroupOverlayIndex",UD=["userId","collectionGroup","largestBatchId"],qp="globals",zD="name",RS=[Yu,oi,qo,sa,Fo,cc,fa,Ho,Go,Xu,$u,Jf,Zf],BD=[...RS,Wf],CS=[Yu,oi,qo,Rf,Fo,cc,fa,Ho,Go,Xu,$u,Jf,Zf,Wf],xS=CS,Fp=[...xS,jp,Pu,ku],jD=Fp,DS=[...Fp,qp],qD=DS;class np extends _S{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function jt(s,e){const t=me(s);return ds.O(t.le,e)}function JT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ss(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function NS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Zt(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Je{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZT(this.data.getIterator())}getIteratorFrom(e){return new ZT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class ZT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function So(s){return s.hasNext()?s.getNext():void 0}class En{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new En([])}unionWith(e){let t=new Je(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class VS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new VS("Invalid base64 string: "+u):u}})(e);return new bt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const FD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(s){if(pe(!!s,39018),typeof s=="string"){let e=0;const t=FD.exec(s);if(pe(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(s.seconds),nanos:ft(s.nanos)}}function ft(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pr(s){return typeof s=="string"?bt.fromBase64String(s):bt.fromUint8Array(s)}const OS="server_timestamp",MS="__type__",PS="__previous_value__",kS="__local_write_time__";function Hp(s){return(s?.mapValue?.fields||{})[MS]?.stringValue===OS}function ed(s){const e=s.mapValue.fields[PS];return Hp(e)?ed(e):e}function Ju(s){const e=gr(s.mapValue.fields[kS].timestampValue);return new $e(e.seconds,e.nanos)}class HD{constructor(e,t,r,o,u,c,m,g,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const xf="(default)";class va{constructor(e,t){this.projectId=e,this.database=t||xf}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const Gp="__type__",LS="__max__",ls={mapValue:{fields:{__type__:{stringValue:LS}}}},Kp="__vector__",Ko="value",cf={nullValue:"NULL_VALUE"};function gs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Hp(s)?4:US(s)?9007199254740991:td(s)?10:11:ue(28295,{value:s})}function qi(s,e){if(s===e)return!0;const t=gs(s);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ju(s).isEqual(Ju(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=gr(o.timestampValue),m=gr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return pr(o.bytesValue).isEqual(pr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return ft(o.geoPointValue.latitude)===ft(u.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ft(o.integerValue)===ft(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=ft(o.doubleValue),m=ft(u.doubleValue);return c===m?Qu(c)===Qu(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Bo(s.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(JT(c)!==JT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!qi(c[g],m[g])))return!1;return!0})(s,e);default:return ue(52216,{left:s})}}function Zu(s,e){return(s.values||[]).find((t=>qi(t,e)))!==void 0}function ps(s,e){if(s===e)return 0;const t=gs(s),r=gs(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=ft(u.integerValue||u.doubleValue),g=ft(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return WT(s.timestampValue,e.timestampValue);case 4:return WT(Ju(s),Ju(e));case 5:return Jg(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=pr(u),g=pr(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Ae(m[p],g[p]);if(E!==0)return E}return Ae(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Ae(ft(u.latitude),ft(c.latitude));return m!==0?m:Ae(ft(u.longitude),ft(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return e0(s.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Ko]?.arrayValue,E=g[Ko]?.arrayValue,b=Ae(p?.values?.length||0,E?.values?.length||0);return b!==0?b:e0(p,E)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===ls.mapValue&&c===ls.mapValue)return 0;if(u===ls.mapValue)return 1;if(c===ls.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let b=0;b<g.length&&b<E.length;++b){const A=Jg(g[b],E[b]);if(A!==0)return A;const z=ps(m[g[b]],p[E[b]]);if(z!==0)return z}return Ae(g.length,E.length)})(s.mapValue,e.mapValue);default:throw ue(23264,{he:t})}}function WT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ae(s,e);const t=gr(s),r=gr(e),o=Ae(t.seconds,r.seconds);return o!==0?o:Ae(t.nanos,r.nanos)}function e0(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=ps(t[o],r[o]);if(u)return u}return Ae(t.length,r.length)}function Qo(s){return ip(s)}function ip(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=gr(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return pr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return oe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=ip(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${ip(t.fields[c])}`;return o+"}"})(s.mapValue):ue(61005,{value:s})}function hf(s){switch(gs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(s);return e?16+hf(e):16;case 5:return 2*s.stringValue.length;case 6:return pr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+hf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ss(r.fields,((u,c)=>{o+=u.length+hf(c)})),o})(s.mapValue);default:throw ue(13486,{value:s})}}function Qp(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function rp(s){return!!s&&"integerValue"in s}function Wu(s){return!!s&&"arrayValue"in s}function t0(s){return!!s&&"nullValue"in s}function n0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ff(s){return!!s&&"mapValue"in s}function td(s){return(s?.mapValue?.fields||{})[Gp]?.stringValue===Kp}function Lu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ss(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Lu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lu(s.arrayValue.values[t]);return e}return{...s}}function US(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===LS}const zS={mapValue:{fields:{[Gp]:{stringValue:Kp},[Ko]:{arrayValue:{}}}}};function GD(s){return"nullValue"in s?cf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Qp(va.empty(),oe.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?td(s)?zS:{mapValue:{}}:ue(35942,{value:s})}function KD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Qp(va.empty(),oe.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?zS:"mapValue"in s?td(s)?{mapValue:{}}:ls:ue(61959,{value:s})}function i0(s,e){const t=ps(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function r0(s,e){const t=ps(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(t)}setAll(e){let t=dt.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Lu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ff(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ss(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new sn(Lu(this.value))}}function BS(s){const e=[];return Ss(s.fields,((t,r)=>{const o=new dt([t]);if(ff(r)){const u=BS(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new En(e)}class pt{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new pt(e,0,ve.min(),ve.min(),ve.min(),sn.empty(),0)}static newFoundDocument(e,t,r,o){return new pt(e,1,t,ve.min(),r,o,0)}static newNoDocument(e,t){return new pt(e,2,t,ve.min(),ve.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,ve.min(),ve.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yo{constructor(e,t){this.position=e,this.inclusive=t}}function s0(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=oe.comparator(oe.fromName(c.referenceValue),t.key):r=ps(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function a0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!qi(s.position[t],e.position[t]))return!1;return!0}class Df{constructor(e,t="asc"){this.field=e,this.dir=t}}function QD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class jS{}class Le extends jS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YD(e,t,r):t==="array-contains"?new JD(e,r):t==="in"?new QS(e,r):t==="not-in"?new ZD(e,r):t==="array-contains-any"?new WD(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new XD(e,r):new $D(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ps(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(ps(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends jS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nt(e,t)}matches(e){return Xo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xo(s){return s.op==="and"}function sp(s){return s.op==="or"}function Yp(s){return qS(s)&&Xo(s)}function qS(s){for(const e of s.filters)if(e instanceof nt)return!1;return!0}function ap(s){if(s instanceof Le)return s.field.canonicalString()+s.op.toString()+Qo(s.value);if(Yp(s))return s.filters.map((e=>ap(e))).join(",");{const e=s.filters.map((t=>ap(t))).join(",");return`${s.op}(${e})`}}function FS(s,e){return s instanceof Le?(function(r,o){return o instanceof Le&&r.op===o.op&&r.field.isEqual(o.field)&&qi(r.value,o.value)})(s,e):s instanceof nt?(function(r,o){return o instanceof nt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&FS(c,o.filters[m])),!0):!1})(s,e):void ue(19439)}function HS(s,e){const t=s.filters.concat(e);return nt.create(t,s.op)}function GS(s){return s instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(s):s instanceof nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(GS).join(" ,")+"}"})(s):"Filter"}class YD extends Le{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class XD extends Le{constructor(e,t){super(e,"in",t),this.keys=KS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $D extends Le{constructor(e,t){super(e,"not-in",t),this.keys=KS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function KS(s,e){return(e.arrayValue?.values||[]).map((t=>oe.fromName(t.referenceValue)))}class JD extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wu(t)&&Zu(t.arrayValue,this.value)}}class QS extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zu(this.value.arrayValue,t)}}class ZD extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zu(this.value.arrayValue,t)}}class WD extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Zu(this.value.arrayValue,r)))}}class eN{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function op(s,e=null,t=[],r=[],o=null,u=null,c=null){return new eN(s,e,t,r,o,u,c)}function Ea(s){const e=me(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ap(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),$f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Qo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Qo(r))).join(",")),e.Te=t}return e.Te}function hc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!QD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!FS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!a0(s.startAt,e.startAt)&&a0(s.endAt,e.endAt)}function Nf(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Vf(s,e){return s.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function o0(s,e,t){let r=cf,o=!0;for(const u of Vf(s,e)){let c=cf,m=!0;switch(u.op){case"<":case"<=":c=GD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=cf}i0({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];i0({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function l0(s,e,t){let r=ls,o=!0;for(const u of Vf(s,e)){let c=ls,m=!0;switch(u.op){case">=":case">":c=KD(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=ls}r0({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];r0({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}class nd{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YS(s,e,t,r,o,u,c,m){return new nd(s,e,t,r,o,u,c,m)}function id(s){return new nd(s)}function u0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function tN(s){return s.collectionGroup!==null}function Uu(s){const e=me(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Je(dt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Df(u,r))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new Df(dt.keyField(),r))}return e.Ie}function Vn(s){const e=me(s);return e.Ee||(e.Ee=nN(e,Uu(s))),e.Ee}function nN(s,e){if(s.limitType==="F")return op(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Df(o.field,u)}));const t=s.endAt?new Yo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Yo(s.startAt.position,s.startAt.inclusive):null;return op(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function lp(s,e,t){return new nd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function rd(s,e){return hc(Vn(s),Vn(e))&&s.limitType===e.limitType}function XS(s){return`${Ea(Vn(s))}|lt:${s.limitType}`}function xo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>GS(o))).join(", ")}]`),$f(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Qo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Qo(o))).join(",")),`Target(${r})`})(Vn(s))}; limitType=${s.limitType})`}function fc(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):oe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Uu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=s0(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Uu(r),o)||r.endAt&&!(function(c,m,g){const p=s0(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Uu(r),o))})(s,e)}function $S(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function JS(s){return(e,t)=>{let r=!1;for(const o of Uu(s)){const u=iN(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function iN(s,e,t){const r=s.field.isKeyField()?oe.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?ps(g,p):ue(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:s.dir})}}class _r{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return NS(this.inner)}size(){return this.innerSize}}const rN=new st(oe.comparator);function Nn(){return rN}const ZS=new st(oe.comparator);function Ru(...s){let e=ZS;for(const t of s)e=e.insert(t.key,t);return e}function WS(s){let e=ZS;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Pi(){return zu()}function eA(){return zu()}function zu(){return new _r((s=>s.toString()),((s,e)=>s.isEqual(e)))}const sN=new st(oe.comparator),aN=new Je(oe.comparator);function De(...s){let e=aN;for(const t of s)e=e.add(t);return e}const oN=new Je(Ae);function Xp(){return oN}function $p(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qu(e)?"-0":e}}function tA(s){return{integerValue:""+s}}function nA(s,e){return ES(e)?tA(e):$p(s,e)}class sd{constructor(){this._=void 0}}function lN(s,e,t){return s instanceof $o?(function(o,u){const c={fields:{[MS]:{stringValue:OS},[kS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Hp(u)&&(u=ed(u)),u&&(c.fields[PS]=u),{mapValue:c}})(t,e):s instanceof Ta?rA(s,e):s instanceof ba?sA(s,e):(function(o,u){const c=iA(o,u),m=c0(c)+c0(o.Ae);return rp(c)&&rp(o.Ae)?tA(m):$p(o.serializer,m)})(s,e)}function uN(s,e,t){return s instanceof Ta?rA(s,e):s instanceof ba?sA(s,e):t}function iA(s,e){return s instanceof Jo?(function(r){return rp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class $o extends sd{}class Ta extends sd{constructor(e){super(),this.elements=e}}function rA(s,e){const t=aA(e);for(const r of s.elements)t.some((o=>qi(o,r)))||t.push(r);return{arrayValue:{values:t}}}class ba extends sd{constructor(e){super(),this.elements=e}}function sA(s,e){let t=aA(e);for(const r of s.elements)t=t.filter((o=>!qi(o,r)));return{arrayValue:{values:t}}}class Jo extends sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function c0(s){return ft(s.integerValue||s.doubleValue)}function aA(s){return Wu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class dc{constructor(e,t){this.field=e,this.transform=t}}function cN(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Ta&&o instanceof Ta||r instanceof ba&&o instanceof ba?Bo(r.elements,o.elements,qi):r instanceof Jo&&o instanceof Jo?qi(r.Ae,o.Ae):r instanceof $o&&o instanceof $o})(s.transform,e.transform)}class hN{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ad{}function oA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new od(s.key,an.none()):new ol(s.key,s.data,an.none());{const t=s.data,r=sn.empty();let o=new Je(dt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new vr(s.key,r,new En(o.toArray()),an.none())}}function fN(s,e,t){s instanceof ol?(function(o,u,c){const m=o.value.clone(),g=f0(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof vr?(function(o,u,c){if(!df(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=f0(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(lA(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Bu(s,e,t,r){return s instanceof ol?(function(u,c,m,g){if(!df(u.precondition,c))return m;const p=u.value.clone(),E=d0(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof vr?(function(u,c,m,g){if(!df(u.precondition,c))return m;const p=d0(u.fieldTransforms,g,c),E=c.data;return E.setAll(lA(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(s,e,t,r):(function(u,c,m){return df(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function dN(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=iA(r.transform,o||null);u!=null&&(t===null&&(t=sn.empty()),t.set(r.field,u))}return t||null}function h0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Bo(r,o,((u,c)=>cN(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ol extends ad{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vr extends ad{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function f0(s,e,t){const r=new Map;pe(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,uN(c,m,t[o]))}return r}function d0(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,lN(u,c,e))}return r}class od extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uA extends ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&fN(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eA();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=oA(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(ve.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,r)=>h0(t,r)))&&Bo(this.baseMutations,e.baseMutations,((t,r)=>h0(t,r)))}}class Zp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return sN})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Zp(e,t,r,o)}}class Wp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mN{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vt,ze;function gN(s){switch(s){case X.OK:return ue(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ue(15467,{code:s})}}function cA(s){if(s===void 0)return Tt("GRPC error has no .code"),X.UNKNOWN;switch(s){case Vt.OK:return X.OK;case Vt.CANCELLED:return X.CANCELLED;case Vt.UNKNOWN:return X.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return X.INTERNAL;case Vt.UNAVAILABLE:return X.UNAVAILABLE;case Vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Vt.NOT_FOUND:return X.NOT_FOUND;case Vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Vt.ABORTED:return X.ABORTED;case Vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Vt.DATA_LOSS:return X.DATA_LOSS;default:return ue(39323,{code:s})}}(ze=Vt||(Vt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";function pN(){return new TextEncoder}const yN=new fs([4294967295,4294967295],0);function m0(s){const e=pN().encode(s),t=new sS;return t.update(e),new Uint8Array(t.digest())}function g0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fs([t,r],0),new fs([o,u],0)]}class ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cu(`Invalid padding: ${t}`);if(r<0)throw new Cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fs.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(fs.fromNumber(r)));return o.compare(yN)===1&&(o=new fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=m0(e),[r,o]=g0(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new ey(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=m0(e),[r,o]=g0(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mc{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new mc(ve.min(),o,new st(Ae),Nn(),De())}}class gc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gc(r,t,De(),De(),De())}}class mf{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class hA{constructor(e,t){this.targetId=e,this.Ce=t}}class fA{constructor(e,t,r=bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class p0{constructor(){this.ve=0,this.Fe=y0(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),r=De();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ue(38017,{changeType:u})}})),new gc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=y0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _N{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nn(),this.Je=$h(),this.He=$h(),this.Ye=new st(Ae)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Nf(u))if(r===0){const c=new oe(u.path);this.et(t,c,pt.newNoDocument(c,ve.min()))}else pe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=pr(r).toUint8Array()}catch(g){if(g instanceof VS)return Gu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ey(c,o,u)}catch(g){return Gu(g instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Nf(m.target)){const g=new oe(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,pt.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let r=De();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new mc(e,t,this.Ye,this.je,r);return this.je=Nn(),this.Je=$h(),this.He=$h(),this.Ye=new st(Ae),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new p0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Je(Ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Je(Ae),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $h(){return new st(oe.comparator)}function y0(){return new st(oe.comparator)}const vN={asc:"ASCENDING",desc:"DESCENDING"},EN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TN={and:"AND",or:"OR"};class bN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function up(s,e){return s.useProto3Json||$f(e)?e:{value:e}}function Zo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function SN(s,e){return Zo(s,e.toTimestamp())}function hn(s){return pe(!!s,49232),ve.fromTimestamp((function(t){const r=gr(t);return new $e(r.seconds,r.nanos)})(s))}function ty(s,e){return cp(s,e).canonicalString()}function cp(s,e){const t=(function(o){return new Ge(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function mA(s){const e=Ge.fromString(s);return pe(SA(e),10190,{key:e.toString()}),e}function Of(s,e){return ty(s.databaseId,e.path)}function da(s,e){const t=mA(e);if(t.get(1)!==s.databaseId.projectId)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new oe(yA(t))}function gA(s,e){return ty(s.databaseId,e)}function pA(s){const e=mA(s);return e.length===4?Ge.emptyPath():yA(e)}function hp(s){return new Ge(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function yA(s){return pe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function _0(s,e,t){return{name:Of(s,e),fields:t.value.mapValue.fields}}function AN(s,e,t){const r=da(s,e.name),o=hn(e.updateTime),u=e.createTime?hn(e.createTime):ve.min(),c=new sn({mapValue:{fields:e.fields}}),m=pt.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function wN(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ue(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(pe(E===void 0||typeof E=="string",58123),bt.fromBase64String(E||"")):(pe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),bt.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?X.UNKNOWN:cA(p.code);return new ae(E,p.message||"")})(c);t=new fA(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=da(s,r.document.name),u=hn(r.document.updateTime),c=r.document.createTime?hn(r.document.createTime):ve.min(),m=new sn({mapValue:{fields:r.document.fields}}),g=pt.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];t=new mf(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=da(s,r.document),u=r.readTime?hn(r.readTime):ve.min(),c=pt.newNoDocument(o,u),m=r.removedTargetIds||[];t=new mf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=da(s,r.document),u=r.removedTargetIds||[];t=new mf([],u,o,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new mN(o,u),m=r.targetId;t=new hA(m,c)}}return t}function Mf(s,e){let t;if(e instanceof ol)t={update:_0(s,e.key,e.value)};else if(e instanceof od)t={delete:Of(s,e.key)};else if(e instanceof vr)t={update:_0(s,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof uA))return ue(16599,{Vt:e.type});t={verify:Of(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof $o)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ta)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ba)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ue(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:SN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ue(27497)})(s,e.precondition)),t}function fp(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?an.updateTime(hn(u.updateTime)):u.exists!==void 0?an.exists(u.exists):an.none()})(e.currentDocument):an.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)pe(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new $o;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Ta(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new ba(E)}else"increment"in m?g=new Jo(c,m.increment):ue(16584,{proto:m});const p=dt.fromServerFormat(m.fieldPath);return new dc(p,g)})(s,o))):[];if(e.update){e.update.name;const o=da(s,e.update.name),u=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((E=>dt.fromServerFormat(E))))})(e.updateMask);return new vr(o,u,c,t,r)}return new ol(o,u,t,r)}if(e.delete){const o=da(s,e.delete);return new od(o,t)}if(e.verify){const o=da(s,e.verify);return new uA(o,t)}return ue(1463,{proto:e})}function IN(s,e){return s&&s.length>0?(pe(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(ve.min())&&(c=hn(u)),new hN(c,o.transformResults||[])})(t,e)))):[]}function _A(s,e){return{documents:[gA(s,e.path)]}}function vA(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gA(s,o);const u=(function(p){if(p.length!==0)return bA(nt.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(A){return{field:Do(A.field),direction:CN(A.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=up(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function EA(s){let e=pA(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){pe(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(b){const A=TA(b);return A instanceof nt&&Yp(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((A=>(function(W){return new Df(No(W.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,$f(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(b){const A=!!b.before,z=b.values||[];return new Yo(z,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const A=!b.before,z=b.values||[];return new Yo(z,A)})(t.endAt)),YS(e,o,c,u,m,"F",g,p)}function RN(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=No(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=No(t.unaryFilter.field);return Le.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Le.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return nt.create(t.compositeFilter.filters.map((r=>TA(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(t.compositeFilter.op))})(s):ue(30097,{filter:s})}function CN(s){return vN[s]}function xN(s){return EN[s]}function DN(s){return TN[s]}function Do(s){return{fieldPath:s.canonicalString()}}function No(s){return dt.fromServerFormat(s.fieldPath)}function bA(s){return s instanceof Le?(function(t){if(t.op==="=="){if(n0(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NAN"}};if(t0(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n0(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NAN"}};if(t0(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(t.field),op:xN(t.op),value:t.value}}})(s):s instanceof nt?(function(t){const r=t.getFilters().map((o=>bA(o)));return r.length===1?r[0]:{compositeFilter:{op:DN(t.op),filters:r}}})(s):ue(54877,{filter:s})}function NN(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function SA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class cr{constructor(e,t,r,o,u=ve.min(),c=ve.min(),m=bt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class AA{constructor(e){this.yt=e}}function VN(s,e){let t;if(e.document)t=AN(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),o=Aa(e.noDocument.readTime);t=pt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue(56709);{const r=oe.fromSegments(e.unknownDocument.path),o=Aa(e.unknownDocument.version);t=pt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new $e(o[0],o[1]);return ve.fromTimestamp(u)})(e.readTime)),t}function v0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,c){return{name:Of(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Zo(u,c.version.toTimestamp()),createTime:Zo(u,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sa(e.version)};else{if(!e.isUnknownDocument())return ue(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Sa(e.version)}}return r}function Pf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Sa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Aa(s){const e=new $e(s.seconds,s.nanoseconds);return ve.fromTimestamp(e)}function oa(s,e){const t=(e.baseMutations||[]).map((u=>fp(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>fp(s.yt,u))),o=$e.fromMillis(e.localWriteTimeMs);return new Jp(e.batchId,o,t,r)}function xu(s){const e=Aa(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Aa(s.lastLimboFreeSnapshotVersion):ve.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return pe(c===1,1966,{count:c}),Vn(id(pA(u.documents[0])))})(s.query):(function(u){return Vn(EA(u))})(s.query),new cr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,bt.fromBase64String(s.resumeToken))}function wA(s,e){const t=Sa(e.snapshotVersion),r=Sa(e.lastLimboFreeSnapshotVersion);let o;o=Nf(e.target)?_A(s.yt,e.target):vA(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ea(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function IA(s){const e=EA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?lp(e,e.limit,"L"):e}function Og(s,e){return new Wp(e.largestBatchId,fp(s.yt,e.overlayMutation))}function E0(s,e){const t=e.path.lastSegment();return[s,on(e.path.popLast()),t]}function T0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Sa(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}class ON{getBundleMetadata(e,t){return b0(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:Aa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return b0(e).put((function(o){return{bundleId:o.id,createTime:Sa(hn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return S0(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:IA(u.bundledQuery),readTime:Aa(u.readTime)}})(r)}))}saveNamedQuery(e,t){return S0(e).put((function(o){return{name:o.name,readTime:Sa(hn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function b0(s){return jt(s,Jf)}function S0(s){return jt(s,Zf)}class ld{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new ld(e,r)}getOverlay(e,t){return vu(e).get(E0(this.userId,t)).next((r=>r?Og(this.serializer,r):null))}getOverlays(e,t){const r=Pi();return k.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,c)=>{const m=new Wp(t,c);o.push(this.St(e,m))})),k.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(vu(e).Z(tp,m))})),k.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Pi(),u=on(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return vu(e).J(tp,c).next((m=>{for(const g of m){const p=Og(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=Pi();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vu(e).ee({index:IS,range:m},((g,p,E)=>{const b=Og(this.serializer,p);u.size()<o||b.largestBatchId===c?(u.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>u))}St(e,t){return vu(e).put((function(o,u,c){const[m,g,p]=E0(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Mf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function vu(s){return jt(s,Wf)}class MN{bt(e){return jt(e,qp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?bt.fromUint8Array(r):bt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class la{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const r=ft(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Qu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=gr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(pr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?US(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):td(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ue(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const o=Ko,u=r[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(u)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}la.Kt=new la;const Ao=255;function PN(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function A0(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=PN(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(e/8)}class kN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=A0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=A0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(Ao),this.sn(255)}_n(){this.an(Ao),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ao?(this.sn(Ao),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ao?(this.an(Ao),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class LN{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class UN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eu{constructor(){this.cn=new kN,this.ln=new LN(this.cn),this.hn=new UN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ua{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ua(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:gf(this.En),directionalValue:gf(this.dn),orderedDocumentKey:gf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function es(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=w0(s.En,e.En),t!==0?t:(t=w0(s.dn,e.dn),t!==0?t:oe.comparator(s.In,e.In)))}function w0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function gf(s){return _b()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function I0(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class R0{constructor(e){this.mn=new Je(((t,r)=>dt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Zg(e);if(t!==void 0&&!this.wn(t))return!1;const r=ra(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new Je(dt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new of(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new of(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new of(r.field,r.dir==="asc"?0:1)));return new wf(wf.UNKNOWN_ID,this.collectionId,t,Ku.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function RA(s){if(pe(s instanceof Le||s instanceof nt,20012),s instanceof Le){if(s instanceof QS){const t=s.value.arrayValue?.values?.map((r=>Le.create(s.field,"==",r)))||[];return nt.create(t,"or")}return s}const e=s.filters.map((t=>RA(t)));return nt.create(e,s.op)}function zN(s){if(s.getFilters().length===0)return[];const e=gp(RA(s));return pe(CA(e),7391),dp(e)||mp(e)?[e]:e.getFilters()}function dp(s){return s instanceof Le}function mp(s){return s instanceof nt&&Yp(s)}function CA(s){return dp(s)||mp(s)||(function(t){if(t instanceof nt&&sp(t)){for(const r of t.getFilters())if(!dp(r)&&!mp(r))return!1;return!0}return!1})(s)}function gp(s){if(pe(s instanceof Le||s instanceof nt,34018),s instanceof Le)return s;if(s.filters.length===1)return gp(s.filters[0]);const e=s.filters.map((r=>gp(r)));let t=nt.create(e,s.op);return t=kf(t),CA(t)?t:(pe(t instanceof nt,64498),pe(Xo(t),40251),pe(t.filters.length>1,57927),t.filters.reduce(((r,o)=>ny(r,o))))}function ny(s,e){let t;return pe(s instanceof Le||s instanceof nt,38388),pe(e instanceof Le||e instanceof nt,25473),t=s instanceof Le?e instanceof Le?(function(o,u){return nt.create([o,u],"and")})(s,e):C0(s,e):e instanceof Le?C0(e,s):(function(o,u){if(pe(o.filters.length>0&&u.filters.length>0,48005),Xo(o)&&Xo(u))return HS(o,u.getFilters());const c=sp(o)?o:u,m=sp(o)?u:o,g=c.filters.map((p=>ny(p,m)));return nt.create(g,"or")})(s,e),kf(t)}function C0(s,e){if(Xo(e))return HS(e,s.getFilters());{const t=e.filters.map((r=>ny(s,r)));return nt.create(t,"or")}}function kf(s){if(pe(s instanceof Le||s instanceof nt,11850),s instanceof Le)return s;const e=s.getFilters();if(e.length===1)return kf(e[0]);if(qS(s))return s;const t=e.map((o=>kf(o))),r=[];return t.forEach((o=>{o instanceof Le?r.push(o):o instanceof nt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:nt.create(r,s.op)}class BN{constructor(){this.Cn=new iy}addToCollectionParentIndex(e,t){return this.Cn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(On.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(On.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}}class iy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Je(Ge.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Je(Ge.comparator)).toArray()}}const x0="IndexedDbIndexManager",Jh=new Uint8Array(0);class jN{constructor(e,t){this.databaseId=t,this.vn=new iy,this.Fn=new _r((r=>Ea(r)),((r,o)=>hc(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:r,parent:on(o)};return D0(e).put(u)}return k.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[fS(t),""],!1,!0);return D0(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Mi(c.parent))}return r}))}addFieldIndex(e,t){const r=Tu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const c=Io(e);return u.next((m=>{c.put(T0(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=Tu(e),o=Io(e),u=wo(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Tu(e),r=wo(e),o=Io(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return k.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new R0(r).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=wo(e);let o=!0;const u=new Map;return k.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=De();const m=[];return k.forEach(u,((g,p)=>{ee(x0,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((he=>`${he.fieldPath}:${he.kind}`)).join(",")}`})(g)} to execute ${Ea(t)}`);const E=(function(Q,he){const ye=Zg(he);if(ye===void 0)return null;for(const de of Vf(Q,ye.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(p,g),b=(function(Q,he){const ye=new Map;for(const de of ra(he))for(const I of Vf(Q,de.fieldPath))switch(I.op){case"==":case"in":ye.set(de.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ye.set(de.fieldPath.canonicalString(),I.value),Array.from(ye.values())}return null})(p,g),A=(function(Q,he){const ye=[];let de=!0;for(const I of ra(he)){const w=I.kind===0?o0(Q,I.fieldPath,Q.startAt):l0(Q,I.fieldPath,Q.startAt);ye.push(w.value),de&&(de=w.inclusive)}return new Yo(ye,de)})(p,g),z=(function(Q,he){const ye=[];let de=!0;for(const I of ra(he)){const w=I.kind===0?l0(Q,I.fieldPath,Q.endAt):o0(Q,I.fieldPath,Q.endAt);ye.push(w.value),de&&(de=w.inclusive)}return new Yo(ye,de)})(p,g),W=this.On(g,p,A),ne=this.On(g,p,z),te=this.Nn(g,p,b),fe=this.Bn(g.indexId,E,W,A.inclusive,ne,z.inclusive,te);return k.forEach(fe,(Z=>r.Y(Z,t.limit).next((Q=>{Q.forEach((he=>{const ye=oe.fromSegments(he.documentKey);c.has(ye)||(c=c.add(ye),m.push(ye))}))}))))})).next((()=>m))}return k.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=zN(nt.create(e.filters,"and")).map((r=>op(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(r.length,u.length),p=g/(t!=null?t.length:1),E=[];for(let b=0;b<g;++b){const A=t?this.Ln(t[b/p]):Jh,z=this.kn(e,A,r[b%p],o),W=this.qn(e,A,u[b%p],c),ne=m.map((te=>this.kn(e,A,te,!0)));E.push(...this.createRange(z,W,ne))}return E}kn(e,t,r,o){const u=new ua(e,oe.empty(),t,r);return o?u:u.An()}qn(e,t,r,o){const u=new ua(e,oe.empty(),t,r);return o?u.An():u}xn(e,t){const r=new R0(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return k.forEach(o,(u=>this.xn(e,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new Je(dt.comparator),E=!1;for(const b of g.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?E=!0:p=p.add(A.field));for(const b of g.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new Eu;for(const o of ra(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);la.Kt.Dt(u,c)}return r.un()}Ln(e){const t=new Eu;return la.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Eu;return la.Kt.Dt(Qp(this.databaseId,t),r.Pn((function(u){const c=ra(u);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new Eu);let u=0;for(const c of ra(e)){const m=r[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&Wu(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);la.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new Eu;g.seed(m.un()),la.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Tu(e),o=Io(e);return(t?r.J(ep,IDBKeyRange.bound(t,t)):r.J()).next((u=>{const c=[];return k.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,b){const A=b?new Ku(b.sequenceNumber,new On(Aa(b.readTime),new oe(Mi(b.documentKey)),b.largestBatchId)):Ku.empty(),z=E.fields.map((([W,ne])=>new of(dt.fromServerFormat(W),ne)));return new wf(E.indexId,E.collectionGroup,z,A)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Ae(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=Tu(e),u=Io(e);return this.Gn(e).next((c=>o.J(ep,IDBKeyRange.bound(t,t)).next((m=>k.forEach(m,(g=>u.put(T0(g.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return k.forEach(t,((o,u)=>{const c=r.get(o.collectionGroup);return(c?k.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),k.forEach(m,(g=>this.zn(e,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?k.resolve():this.Jn(e,u,g,p,E)})))))))}))}Hn(e,t,r,o){return wo(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return wo(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=wo(e);let u=new Je(es);return o.ee({index:wS,range:IDBKeyRange.only([r.indexId,this.uid,gf(this.$n(r,t))])},((c,m)=>{u=u.add(new ua(r.indexId,t,I0(m.arrayValue),I0(m.directionalValue)))})).next((()=>u))}jn(e,t){let r=new Je(es);const o=this.Qn(t,e);if(o==null)return r;const u=Zg(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Wu(c))for(const m of c.arrayValue.values||[])r=r.add(new ua(t.indexId,e.key,this.Ln(m),o))}else r=r.add(new ua(t.indexId,e.key,Jh,o));return r}Jn(e,t,r,o,u){ee(x0,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,E,b,A){const z=g.getIterator(),W=p.getIterator();let ne=So(z),te=So(W);for(;ne||te;){let fe=!1,Z=!1;if(ne&&te){const Q=E(ne,te);Q<0?Z=!0:Q>0&&(fe=!0)}else ne!=null?Z=!0:fe=!0;fe?(b(te),te=So(W)):Z?(A(ne),ne=So(z)):(ne=So(z),te=So(W))}})(o,u,es,(m=>{c.push(this.Hn(e,t,r,m))}),(m=>{c.push(this.Yn(e,t,r,m))})),k.waitFor(c)}Gn(e){let t=1;return Io(e).ee({index:AS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,m)=>es(c,m))).filter(((c,m,g)=>!m||es(c,g[m-1])!==0));const o=[];o.push(e);for(const c of r){const m=es(c,e),g=es(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Jh,oe.empty()),g=o[c+1].Vn(this.uid,Jh,oe.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return es(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(N0)}getMinOffset(e,t){return k.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||ue(44426))))).next(N0)}}function D0(s){return jt(s,$u)}function wo(s){return jt(s,ku)}function Tu(s){return jt(s,jp)}function Io(s){return jt(s,Pu)}function N0(s){pe(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Up(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new On(e.readTime,e.documentKey,t)}const V0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xA=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function DA(s,e,t){const r=s.store(oi),o=s.store(qo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:c},((E,b,A)=>(m++,A.delete())));u.push(g.next((()=>{pe(m===1,47070,{batchId:t.batchId})})));const p=[];for(const E of t.mutations){const b=TS(e,E.key.path,t.batchId);u.push(o.delete(b)),p.push(E.key)}return k.waitFor(u).next((()=>p))}function Lf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ue(14731);e=s.noDocument}return JSON.stringify(e).length}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(xA,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class ud{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){pe(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new ud(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).ee({index:ca,range:r},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=Vo(e),c=ts(e);return c.add({}).next((m=>{pe(typeof m=="number",49019);const g=new Jp(m,t,r,o),p=(function(z,W,ne){const te=ne.baseMutations.map((Z=>Mf(z.yt,Z))),fe=ne.mutations.map((Z=>Mf(z.yt,Z)));return{userId:W,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:te,mutations:fe}})(this.serializer,this.userId,g),E=[];let b=new Je(((A,z)=>Ae(A.canonicalString(),z.canonicalString())));for(const A of o){const z=TS(this.userId,A.key.path,m);b=b.add(A.key.path.popLast()),E.push(c.put(p)),E.push(u.put(z,vD))}return b.forEach((A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),k.waitFor(E).next((()=>g))}))}lookupMutationBatch(e,t){return ts(e).get(t).next((r=>r?(pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),oa(this.serializer,r)):null))}er(e,t){return this.Xn[t]?k.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ts(e).ee({index:ca,range:o},((c,m,g)=>{m.userId===this.userId&&(pe(m.batchId>=r,47524,{tr:r}),u=oa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ha;return ts(e).ee({index:ca,range:t,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ha],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J(ca,t).next((r=>r.map((o=>oa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=lf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Vo(e).ee({range:o},((c,m,g)=>{const[p,E,b]=c,A=Mi(E);if(p===this.userId&&t.path.isEqual(A))return ts(e).get(b).next((z=>{if(!z)throw ue(61480,{nr:c,batchId:b});pe(z.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:z.userId,batchId:b}),u.push(oa(this.serializer,z))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Ae);const o=[];return t.forEach((u=>{const c=lf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Vo(e).ee({range:m},((p,E,b)=>{const[A,z,W]=p,ne=Mi(z);A===this.userId&&u.path.isEqual(ne)?r=r.add(W):b.done()}));o.push(g)})),k.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=lf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Je(Ae);return Vo(e).ee({range:c},((g,p,E)=>{const[b,A,z]=g,W=Mi(A);b===this.userId&&r.isPrefixOf(W)?W.length===o&&(m=m.add(z)):E.done()})).next((()=>this.rr(e,m)))}rr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(ts(e).get(u).next((c=>{if(c===null)throw ue(35274,{batchId:u});pe(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(oa(this.serializer,c))})))})),k.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return DA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),k.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return k.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Vo(e).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Mi(u[1]);o.push(g)}else m.done()})).next((()=>{pe(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return NA(e,this.userId,t)}_r(e){return VA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ha,lastStreamToken:""}))}}function NA(s,e,t){const r=lf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Vo(s).ee({range:u,X:!0},((m,g,p)=>{const[E,b,A]=m;E===e&&b===o&&(c=!0),p.done()})).next((()=>c))}function ts(s){return jt(s,oi)}function Vo(s){return jt(s,qo)}function VA(s){return jt(s,Yu)}class wa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wa(0)}static cr(){return new wa(-1)}}class qN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new wa(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ve.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ro(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(pe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return Ro(e).ee(((c,m)=>{const g=xu(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>k.waitFor(u))).next((()=>o))}forEachTarget(e,t){return Ro(e).ee(((r,o)=>{const u=xu(o);t(u)}))}lr(e){return O0(e).get(Cf).next((t=>(pe(t!==null,2888),t)))}hr(e,t){return O0(e).put(Cf,t)}Pr(e,t){return Ro(e).put(wA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ea(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ro(e).ee({range:o,index:SS},((c,m,g)=>{const p=xu(m);hc(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=os(e);return t.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))})),k.waitFor(o)}removeMatchingKeys(e,t,r){const o=os(e);return k.forEach(t,(u=>{const c=on(u.path);return k.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=os(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=os(e);let u=De();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Mi(c[1]),E=new oe(p);u=u.add(E)})).next((()=>u))}containsKey(e,t){const r=on(t.path),o=IDBKeyRange.bound([r],[fS(r)],!1,!0);let u=0;return os(e).ee({index:Bp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return Ro(e).get(t).next((r=>r?xu(r):null))}}function Ro(s){return jt(s,Fo)}function O0(s){return jt(s,fa)}function os(s){return jt(s,Ho)}const M0="LruGarbageCollector",OA=1048576;function P0([s,e],[t,r]){const o=Ae(s,t);return o===0?Ae(e,r):o}class FN{constructor(e){this.Ir=e,this.buffer=new Je(P0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();P0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(M0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bs(t)?ee(M0,"Ignoring IndexedDB error during garbage collection: ",t):await Ts(t)}await this.Vr(3e5)}))}}class HN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return k.resolve(vn.ce);const r=new FN(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(V0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,c=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,t)))).next((b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),Co()<=Pe.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function PA(s,e){return new HN(s,e)}class GN{constructor(e,t){this.db=e,this.garbageCollector=PA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return Zh(e,r)}removeReference(e,t,r){return Zh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Zh(e,t)}br(e,t){return(function(o,u){let c=!1;return VA(o).te((m=>NA(o,m,u).next((g=>(g&&(c=!0),k.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,r.getEntry(e,c).next((()=>(r.removeEntry(c,ve.min()),os(e).delete((function(b){return[0,on(b.path)]})(c)))))}));o.push(g)}})).next((()=>k.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Zh(e,t)}Sr(e,t){const r=os(e);let o,u=vn.ce;return r.ee({index:Bp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&t(new oe(Mi(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&t(new oe(Mi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zh(s,e){return os(s).put((function(r,o){return{targetId:0,path:on(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}class kA{constructor(){this.changes=new _r((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return na(e).put(r)}removeEntry(e,t,r){return na(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Pf(c),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=pt.newInvalidDocument(t);return na(e).ee({index:uf,range:IDBKeyRange.only(bu(t))},((o,u)=>{r=this.Cr(t,u)})).next((()=>r))}vr(e,t){let r={size:0,document:pt.newInvalidDocument(t)};return na(e).ee({index:uf,range:IDBKeyRange.only(bu(t))},((o,u)=>{r={document:this.Cr(t,u),size:Lf(u)}})).next((()=>r))}getEntries(e,t){let r=Nn();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(e,t){let r=Nn(),o=new st(oe.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Lf(c))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return k.resolve();let o=new Je(U0);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(bu(o.first()),bu(o.last())),c=o.getIterator();let m=c.getNext();return na(e).ee({index:uf,range:u},((g,p,E)=>{const b=oe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&U0(m,b)<0;)r(m,null),m=c.getNext();m&&m.isEqual(b)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(bu(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u?.incrementDocumentReadCount(p.length);let E=Nn();for(const b of p){const A=this.Cr(oe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(fc(t,A)||o.has(A.key))&&(E=E.insert(A.key,A))}return E}))}getAllFromCollectionGroup(e,t,r,o){let u=Nn();const c=L0(t,r),m=L0(t,On.max());return na(e).ee({index:bS,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const b=this.Cr(oe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(b.key,b),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new QN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return k0(e).get(Wg).next((t=>(pe(!!t,20021),t)))}Dr(e,t){return k0(e).put(Wg,t)}Cr(e,t){if(t){const r=VN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return pt.newInvalidDocument(e)}}function LA(s){return new KN(s)}class QN extends kA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new _r((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new Je(((u,c)=>Ae(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=v0(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Lf(g);r+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(r-=m.size,this.trackRemovals){const g=v0(this.Nr.serializer,c.convertToNoDocument(ve.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function k0(s){return jt(s,Xu)}function na(s){return jt(s,Rf)}function bu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function L0(s,e){const t=e.documentKey.path.toArray();return[s,Pf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function U0(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ae(t[u],r[u]),o)return o;return o=Ae(t.length,r.length),o||(o=Ae(t[t.length-2],r[r.length-2]),o||Ae(t[t.length-1],r[r.length-1]))}class YN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class UA{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Bu(r.mutation,o,En.empty(),$e.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const o=Pi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=Ru();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Pi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=Nn();const c=zu(),m=(function(){return zu()})();return t.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof vr)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),Bu(E.mutation,p,E.mutation.getFieldMask(),$e.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),t.forEach(((p,E)=>m.set(p,new YN(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=zu();let o=new st(((c,m)=>c-m)),u=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let E=r.get(g)||En.empty();E=m.applyToLocalView(p,E),r.set(g,E);const b=(o.get(m.batchId)||De()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,b=eA();E.forEach((A=>{if(!u.has(A)){const z=oA(t.get(A),r.get(A));z!==null&&b.set(A,z),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return k.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):k.resolve(Pi());let m=jo,g=u;return c.next((p=>k.forEach(p,((E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?k.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{g=g.insert(E,A)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,De()))).next((E=>({batchId:m,changes:WS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let o=Ru();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=Ru();return this.indexManager.getCollectionParents(e,u).next((m=>k.forEach(m,(g=>{const p=(function(b,A){return new nd(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((E=>{E.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,pt.newInvalidDocument(E)))}));let m=Ru();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Bu(E.mutation,p,En.empty(),$e.now()),fc(t,p)&&(m=m.insert(g,p))})),m}))}}class XN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return k.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:IA(o.bundledQuery),readTime:hn(o.readTime)}})(t)),k.resolve()}}class $N{constructor(){this.overlays=new st(oe.comparator),this.qr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pi();return k.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),k.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){const o=Pi(),u=t.length+1,c=new oe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return k.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new st(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Pi(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Pi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return k.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Wp(t,r));let u=this.qr.get(t);u===void 0&&(u=De(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}class JN{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}}class ry{constructor(){this.Qr=new Je(Gt.$r),this.Ur=new Je(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new oe(new Ge([])),r=new Gt(t,e),o=new Gt(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new Ge([])),r=new Gt(t,e),o=new Gt(t,e+1);let u=De();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Gt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||Ae(e.Yr,t.Yr)}static Kr(e,t){return Ae(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}class ZN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Je(Gt.$r)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Jp(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Gt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return k.resolve(c)}lookupMutationBatch(e,t){return k.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return k.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?ha:this.tr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),k.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Ae);return t.forEach((o=>{const u=new Gt(o,0),c=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;oe.isDocumentKey(u)||(u=u.child(""));const c=new Gt(new oe(u),0);let m=new Je(Ae);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),k.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(t.mutations,(o=>{const u=new Gt(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Gt(t,0),o=this.Zr.firstAfterOrEqual(r);return k.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WN{constructor(e){this.ri=e,this.docs=(function(){return new st(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=Nn();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():pt.newInvalidDocument(o))})),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Nn();const c=t.path,m=new oe(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Up(pS(E),r)<=0||(o.has(E.key)||fc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return k.resolve(u)}getAllFromCollectionGroup(e,t,r,o){ue(9500)}ii(e,t){return k.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new eV(this)}getSize(e){return k.resolve(this.size)}}class eV extends kA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),k.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class tV{constructor(e){this.persistence=e,this.si=new _r((t=>Ea(t)),hc),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new ry,this.targetCount=0,this.ai=wa.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),k.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Pr(t),k.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),k.waitFor(u).next((()=>o))}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),k.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),k.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this._i.containsKey(t))}}class sy{constructor(e,t){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new JN,this.referenceDelegate=e(this),this.Pi=new tV(this),this.indexManager=new BN,this.remoteDocumentCache=(function(o){return new WN(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new AA(t),this.Ii=new XN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $N,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ZN(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const o=new nV(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return k.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class nV extends _S{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.Ri=new ry,this.Vi=null}static mi(e){return new cd(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,(r=>{const o=oe.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return k.or([()=>k.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Uf{constructor(e,t){this.persistence=e,this.pi=new _r((r=>on(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=PA(this,t)}static mi(e,t){return new Uf(e,t)}Ei(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return k.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?k.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,u.removeEntry(c,ve.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hf(e.data.value)),t}br(e,t,r){return k.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return k.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iV{constructor(e){this.serializer=e}k(e,t,r,o){const u=new Xf("createOrUpgrade",t);r<1&&o>=1&&((function(g){g.createObjectStore(cc)})(e),(function(g){g.createObjectStore(Yu,{keyPath:_D}),g.createObjectStore(oi,{keyPath:XT,autoIncrement:!0}).createIndex(ca,$T,{unique:!0}),g.createObjectStore(qo)})(e),z0(e),(function(g){g.createObjectStore(sa)})(e));let c=k.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Ho),g.deleteObjectStore(Fo),g.deleteObjectStore(fa)})(e),z0(e)),c=c.next((()=>(function(g){const p=g.store(fa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return p.put(Cf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(oi).J().next((b=>{g.deleteObjectStore(oi),g.createObjectStore(oi,{keyPath:XT,autoIncrement:!0}).createIndex(ca,$T,{unique:!0});const A=p.store(oi),z=b.map((W=>A.put(W)));return k.waitFor(z)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Go,{keyPath:RD})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Xu)})(e),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Jf,{keyPath:CD})})(e),(function(g){g.createObjectStore(Zf,{keyPath:xD})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(Wf,{keyPath:kD});p.createIndex(tp,LD,{unique:!1}),p.createIndex(IS,UD,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Rf,{keyPath:ED});p.createIndex(uf,TD),p.createIndex(bS,bD)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(sa)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(jp,{keyPath:DD,autoIncrement:!0}).createIndex(ep,ND,{unique:!1}),g.createObjectStore(Pu,{keyPath:VD}).createIndex(AS,OD,{unique:!1}),g.createObjectStore(ku,{keyPath:MD}).createIndex(wS,PD,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(Pu).clear()})).next((()=>{t.objectStore(ku).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(qp,{keyPath:zD})})(e)}))),r<18&&o>=18&&_b()&&(c=c.next((()=>{t.objectStore(Pu).clear()})).next((()=>{t.objectStore(ku).clear()}))),c}wi(e){let t=0;return e.store(sa).ee(((r,o)=>{t+=Lf(o)})).next((()=>{const r={byteSize:t};return e.store(Xu).put(Wg,r)}))}yi(e){const t=e.store(Yu),r=e.store(oi);return t.J().next((o=>k.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ha],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ca,c).next((m=>k.forEach(m,(g=>{pe(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=oa(this.serializer,g);return DA(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ho),r=e.store(sa);return e.store(fa).get(Cf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Ge(c),p=(function(b){return[0,on(b)]})(g);u.push(t.get(p).next((E=>E?k.resolve():(b=>t.put({targetId:0,path:on(b),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>k.waitFor(u)))}))}bi(e,t){e.createObjectStore($u,{keyPath:ID});const r=t.store($u),o=new iy,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:on(g)})}};return t.store(sa).ee({X:!0},((c,m)=>{const g=new Ge(c);return u(g.popLast())})).next((()=>t.store(qo).ee({X:!0},(([c,m,g],p)=>{const E=Mi(m);return u(E.popLast())}))))}Di(e){const t=e.store(Fo);return t.ee(((r,o)=>{const u=xu(o),c=wA(this.serializer,u);return t.put(c)}))}Ci(e,t){const r=t.store(sa),o=[];return r.ee(((u,c)=>{const m=t.store(Rf),g=(function(b){return b.document?new oe(Ge.fromString(b.document.name).popFirst(5)):b.noDocument?oe.fromSegments(b.noDocument.path):b.unknownDocument?oe.fromSegments(b.unknownDocument.path):ue(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>k.waitFor(o)))}Fi(e,t){const r=t.store(oi),o=LA(this.serializer),u=new sy(cd.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??De();oa(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),k.forEach(m,((g,p)=>{const E=new nn(p),b=ld.wt(this.serializer,E),A=u.getIndexManager(E),z=ud.wt(E,this.serializer,A,u.referenceDelegate);return new UA(o,z,b,A).recalculateAndSaveOverlaysForDocumentKeys(new np(t,vn.ce),g).next()}))}))}}function z0(s){s.createObjectStore(Ho,{keyPath:AD}).createIndex(Bp,wD,{unique:!0}),s.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(SS,SD,{unique:!0}),s.createObjectStore(fa)}const ns="IndexedDbPersistence",Mg=18e5,Pg=5e3,kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rV="main";class ay{constructor(e,t,r,o,u,c,m,g,p,E,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!ay.v())throw new ae(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GN(this,o),this.$i=t+rV,this.serializer=new AA(g),this.Ui=new ds(this.$i,this.Ni,new iV(this.serializer)),this.hi=new MN,this.Pi=new qN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LA(this.serializer),this.Ii=new ON,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Tt(ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,kg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new vn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(bs(e))return ee(ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(ns,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Su(e).get(bo).next((t=>k.resolve(this.es(t))))}ts(e){return Wh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Mg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=jt(t,Go);return r.J().next((o=>{const u=this.ss(o,Mg),c=o.filter((m=>u.indexOf(m)===-1));return k.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?k.resolve(!0):Su(e).get(bo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Pg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wh(e).J().next((r=>this.ss(r,Pg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(ns,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[cc,Go],(e=>{const t=new np(e,vn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Wh(e).J().next((t=>this.ss(t,Mg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return ud.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ld.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ee(ns,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?qD:g===17?DS:g===16?jD:g===15?Fp:g===14?xS:g===13?CS:g===12?BD:g===11?RS:void ue(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new np(m,this.ci?this.ci.next():vn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ae(X.FAILED_PRECONDITION,yS);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return Su(e).get(bo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Pg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(X.FAILED_PRECONDITION,kg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Su(e).put(bo,t)}static v(){return ds.v()}Zi(e){const t=Su(e);return t.get(bo).next((r=>this.es(r)?(ee(ns,"Releasing primary lease."),t.delete(bo)):k.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;yb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ee(ns,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Tt(ns,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Tt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Su(s){return jt(s,cc)}function Wh(s){return jt(s,Go)}function zA(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class oy{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=De(),o=De();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new oy(e,t.fromCache,r,o)}}class sV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yb()?8:vS(zt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new sV;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Co()<=Pe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(Co()<=Pe.DEBUG&&ee("QueryEngine","Query:",xo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Co()<=Pe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):k.resolve())}ys(e,t){if(u0(t))return k.resolve(null);let r=Vn(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=lp(t,null,"F"),r=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=De(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,lp(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return u0(t)||o.isEqual(ve.min())?k.resolve(null):this.ps.getDocuments(e,r).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,r,o)?k.resolve(null):(Co()<=Pe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(t)),this.vs(e,c,t,gS(o,jo)).next((m=>m)))}))}Ds(e,t){let r=new Je(JS(e));return t.forEach(((o,u)=>{fc(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return Co()<=Pe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",xo(t)),this.ps.getDocumentsMatchingQuery(e,t,On.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const ly="LocalStore",aV=3e8;class oV{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(Ae),this.xs=new _r((u=>Ea(u)),hc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function jA(s,e,t,r){return new oV(s,e,t,r)}async function qA(s,e){const t=me(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=De();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function lV(s,e){const t=me(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const b=p.batch,A=b.keys();let z=k.resolve();return A.forEach((W=>{z=z.next((()=>E.getEntry(g,W))).next((ne=>{const te=p.docVersions.get(W);pe(te!==null,48541),ne.version.compareTo(te)<0&&(b.applyToRemoteDocument(ne,p),ne.isValidDocument()&&(ne.setReadTime(p.commitVersion),E.addEntry(ne)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=De();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function FA(s){const e=me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function uV(s,e){const t=me(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,b))));let z=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?z=z.withResumeToken(bt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):E.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(E.resumeToken,r)),o=o.insert(b,z),(function(ne,te,fe){return ne.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=aV?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(A,z,E)&&m.push(t.Pi.updateTargetData(u,z))}));let g=Nn(),p=De();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(cV(u,c,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(ve.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((b=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return k.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function cV(s,e,t){let r=De(),o=De();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=Nn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ve.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ee(ly,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function hV(s,e){const t=me(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ha),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zf(s,e){const t=me(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,k.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new cr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Wo(s,e,t){const r=me(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!bs(c))throw c;ee(ly,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function pp(s,e,t){const r=me(s);let o=ve.min(),u=De();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const b=me(g),A=b.xs.get(E);return A!==void 0?k.resolve(b.Ms.get(A)):b.Pi.getTargetData(p,E)})(r,c,Vn(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:ve.min(),t?u:De()))).next((m=>(KA(r,$S(e),m),{documents:m,Qs:u})))))}function HA(s,e){const t=me(s),r=me(t.Pi),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,e).next((c=>c?c.target:null))))}function GA(s,e){const t=me(s),r=t.Os.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Ns.getAllFromCollectionGroup(o,e,gS(r,jo),Number.MAX_SAFE_INTEGER))).then((o=>(KA(t,e,o),o)))}function KA(s,e,t){let r=s.Os.get(e)||ve.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}const QA="firestore_clients";function B0(s,e){return`${QA}_${s}_${e}`}const YA="firestore_mutations";function j0(s,e,t){let r=`${YA}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const XA="firestore_targets";function Lg(s,e){return`${XA}_${s}_${e}`}const Oi="SharedClientState";class Bf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ws(e,t,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new ae(o.error.code,o.error.message))),c?new Bf(e,t,o.state,u):(Tt(Oi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new ae(r.error.code,r.error.message))),u?new ju(e,r.state,o):(Tt(Oi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Xp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=ES(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new jf(e,u):(Tt(Oi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class uy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new uy(t.clientId,t.onlineState):(Tt(Oi,`Failed to parse online state: ${e}`),null)}}class yp{constructor(){this.activeTargetIds=Xp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ug{constructor(e,t,r,o,u){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new st(Ae),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=B0(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new yp),this.ro=new RegExp(`^${QA}_${c}_([^_]*)$`),this.io=new RegExp(`^${YA}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${XA}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const o=this.getItem(B0(this.persistenceKey,r));if(o){const u=jf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Lg(this.persistenceKey,e));if(o){const u=ju.Ws(e,o);u&&(r=u.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((o=>{this.Po(o)})),this.currentUser=e,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee(Oi,"READ",e,t),t}setItem(e,t){ee(Oi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee(Oi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ee(Oi,"EVENT",t.key,t.newValue),t.key===this.eo)return void Tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);pe(typeof m=="number",30636,{So:u}),c=m}catch(m){Tt(Oi,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);r!==vn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const o=new Bf(this.currentUser,e,t,r),u=j0(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Gs())}Po(e){const t=j0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const o=Lg(this.persistenceKey,e),u=new ju(e,t,r);this.setItem(o,u.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return jf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Bf.Ws(new nn(u),o,t)}yo(e,t){const r=this.so.exec(e),o=Number(r[1]);return ju.Ws(o,t)}uo(e){return uy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee(Oi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Xp();return e.forEach(((r,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class $A{constructor(){this.Mo=new yp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fV{Oo(e){}shutdown(){}}const q0="ConnectivityMonitor";class F0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(q0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(q0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ef=null;function _p(){return ef===null?ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():ef++,"0x"+ef.toString(16)}const zg="RestConnection",dV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===xf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const c=_p(),m=this.zo(e,t.toUriEncodedString());ee(zg,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=il(p);return this.Jo(e,m,g,r,E).then((b=>(ee(zg,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Gu(zg,`RPC '${e}' ${c} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(e,t,r,o,u,c){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=dV[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class gV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const tn="WebChannelConnection";class pV extends mV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const c=_p();return new Promise(((m,g)=>{const p=new aS;p.setWithCredentials(!0),p.listenOnce(oS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case af.NO_ERROR:const b=p.getResponseJson();ee(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),m(b);break;case af.TIMEOUT:ee(tn,`RPC '${e}' ${c} timed out`),g(new ae(X.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const A=p.getStatus();if(ee(tn,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let z=p.getResponseJson();Array.isArray(z)&&(z=z[0]);const W=z?.error;if(W&&W.status&&W.message){const ne=(function(fe){const Z=fe.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Z)>=0?Z:X.UNKNOWN})(W.status);g(new ae(ne,W.message))}else g(new ae(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ae(X.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ee(tn,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);ee(tn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",E,r,15)}))}T_(e,t,r){const o=_p(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=cS(),m=uS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=u.join("");ee(tn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const b=c.createWebChannel(E,g);this.I_(b);let A=!1,z=!1;const W=new gV({Yo:te=>{z?ee(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,te):(A||(ee(tn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ee(tn,`RPC '${e}' stream ${o} sending:`,te),b.send(te))},Zo:()=>b.close()}),ne=(te,fe,Z)=>{te.listen(fe,(Q=>{try{Z(Q)}catch(he){setTimeout((()=>{throw he}),0)}}))};return ne(b,Iu.EventType.OPEN,(()=>{z||(ee(tn,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),ne(b,Iu.EventType.CLOSE,(()=>{z||(z=!0,ee(tn,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(b))})),ne(b,Iu.EventType.ERROR,(te=>{z||(z=!0,Gu(tn,`RPC '${e}' stream ${o} transport errored. Name:`,te.name,"Message:",te.message),W.a_(new ae(X.UNAVAILABLE,"The operation could not be completed")))})),ne(b,Iu.EventType.MESSAGE,(te=>{if(!z){const fe=te.data[0];pe(!!fe,16349);const Z=fe,Q=Z?.error||Z[0]?.error;if(Q){ee(tn,`RPC '${e}' stream ${o} received error:`,Q);const he=Q.status;let ye=(function(w){const R=Vt[w];if(R!==void 0)return cA(R)})(he),de=Q.message;ye===void 0&&(ye=X.INTERNAL,de="Unknown error status: "+he+" with message "+Q.message),z=!0,W.a_(new ae(ye,de)),b.close()}else ee(tn,`RPC '${e}' stream ${o} received:`,fe),W.u_(fe)}})),ne(m,lS.STAT_EVENT,(te=>{te.stat===$g.PROXY?ee(tn,`RPC '${e}' stream ${o} detected buffering proxy`):te.stat===$g.NOPROXY&&ee(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function JA(){return typeof window<"u"?window:null}function pf(){return typeof document<"u"?document:null}function hd(s){return new bN(s,!0)}class ZA{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const H0="PersistentStream";class WA{constructor(e,t,r,o,u,c,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Tt(t.toString()),Tt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ae(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(H0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ee(H0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yV extends WA{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=wN(this.serializer,e),r=(function(u){if(!("targetChange"in u))return ve.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?ve.min():c.readTime?hn(c.readTime):ve.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=hp(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Nf(g)?{documents:_A(u,g)}:{query:vA(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=dA(u,c.resumeToken);const p=up(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(ve.min())>0){m.readTime=Zo(u,c.snapshotVersion.toTimestamp());const p=up(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=RN(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=hp(this.serializer),t.removeTarget=e,this.q_(t)}}class _V extends WA{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=IN(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=hp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Mf(this.serializer,r)))};this.q_(t)}}class vV{}class EV extends vV{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,cp(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(X.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,cp(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tt(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ia="RemoteStore";class bV{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ca(this)&&(ee(Ia,"Restarting streams for network reachability change."),await(async function(g){const p=me(g);p.Ea.add(4),await pc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await fd(p)})(this))}))})),this.Ra=new TV(r,o)}}async function fd(s){if(Ca(s))for(const e of s.da)await e(!0)}async function pc(s){for(const e of s.da)await e(!1)}function dd(s,e){const t=me(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),fy(t)?hy(t):ul(t).O_()&&cy(t,e))}function el(s,e){const t=me(s),r=ul(t);t.Ia.delete(e),r.O_()&&e1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ca(t)&&t.Ra.set("Unknown"))}function cy(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(s).Y_(e)}function e1(s,e){s.Va.Ue(e),ul(s).Z_(e)}function hy(s){s.Va=new _N({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ul(s).start(),s.Ra.ua()}function fy(s){return Ca(s)&&!ul(s).x_()&&s.Ia.size>0}function Ca(s){return me(s).Ea.size===0}function t1(s){s.Va=void 0}async function SV(s){s.Ra.set("Online")}async function AV(s){s.Ia.forEach(((e,t)=>{cy(s,e)}))}async function wV(s,e){t1(s),fy(s)?(s.Ra.ha(e),hy(s)):s.Ra.set("Unknown")}async function IV(s,e,t){if(s.Ra.set("Online"),e instanceof fA&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){ee(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qf(s,r)}else if(e instanceof mf?s.Va.Ze(e):e instanceof hA?s.Va.st(e):s.Va.tt(e),!t.isEqual(ve.min()))try{const r=await FA(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(bt.EMPTY_BYTE_STRING,E.snapshotVersion)),e1(u,g);const b=new cr(E.target,g,p,E.sequenceNumber);cy(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ee(Ia,"Failed to raise snapshot:",r),await qf(s,r)}}async function qf(s,e,t){if(!bs(e))throw e;s.Ea.add(1),await pc(s),s.Ra.set("Offline"),t||(t=()=>FA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ee(Ia,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await fd(s)}))}function n1(s,e){return e().catch((t=>qf(s,t,e)))}async function ll(s){const e=me(s),t=ys(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ha;for(;RV(e);)try{const o=await hV(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,CV(e,o)}catch(o){await qf(e,o)}i1(e)&&r1(e)}function RV(s){return Ca(s)&&s.Ta.length<10}function CV(s,e){s.Ta.push(e);const t=ys(s);t.O_()&&t.X_&&t.ea(e.mutations)}function i1(s){return Ca(s)&&!ys(s).x_()&&s.Ta.length>0}function r1(s){ys(s).start()}async function xV(s){ys(s).ra()}async function DV(s){const e=ys(s);for(const t of s.Ta)e.ea(t.mutations)}async function NV(s,e,t){const r=s.Ta.shift(),o=Zp.from(r,e,t);await n1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await ll(s)}async function VV(s,e){e&&ys(s).X_&&await(async function(r,o){if((function(c){return gN(c)&&c!==X.ABORTED})(o.code)){const u=r.Ta.shift();ys(r).B_(),await n1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ll(r)}})(s,e),i1(s)&&r1(s)}async function G0(s,e){const t=me(s);t.asyncQueue.verifyOperationInProgress(),ee(Ia,"RemoteStore received new credentials");const r=Ca(t);t.Ea.add(3),await pc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fd(t)}async function vp(s,e){const t=me(s);e?(t.Ea.delete(2),await fd(t)):e||(t.Ea.add(2),await pc(t),t.Ra.set("Unknown"))}function ul(s){return s.ma||(s.ma=(function(t,r,o){const u=me(t);return u.sa(),new yV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:SV.bind(null,s),t_:AV.bind(null,s),r_:wV.bind(null,s),H_:IV.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),fy(s)?hy(s):s.Ra.set("Unknown")):(await s.ma.stop(),t1(s))}))),s.ma}function ys(s){return s.fa||(s.fa=(function(t,r,o){const u=me(t);return u.sa(),new _V(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:xV.bind(null,s),r_:VV.bind(null,s),ta:DV.bind(null,s),na:NV.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await ll(s)):(await s.fa.stop(),s.Ta.length>0&&(ee(Ia,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dy{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new dy(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(s,e){if(Tt("AsyncQueue",`${e}: ${s}`),bs(s))return new ae(X.UNAVAILABLE,`${e}: ${s}`);throw s}class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=Ru(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Lo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class K0{constructor(){this.ga=new st(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class tl{constructor(e,t,r,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new tl(e,t,Lo.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class OV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class MV{constructor(){this.queries=Q0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=me(t),u=o.queries;o.queries=Q0(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ae(X.ABORTED,"Firestore shutting down"))}}function Q0(){return new _r((s=>XS(s)),rd)}async function s1(s,e){const t=me(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new OV,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=my(c,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&gy(t)}async function a1(s,e){const t=me(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function PV(s,e){const t=me(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&gy(t)}function kV(s,e,t){const r=me(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function gy(s){s.Ca.forEach((e=>{e.next()}))}var Ep,Y0;(Y0=Ep||(Ep={})).Ma="default",Y0.Cache="cache";class o1{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ep.Cache}}class l1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class LV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=JS(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new K0,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,b)=>{const A=o.get(E),z=fc(this.query,b)?b:null,W=!!A&&this.mutatedKeys.has(A.key),ne=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let te=!1;A&&z?A.data.isEqual(z.data)?W!==ne&&(r.track({type:3,doc:z}),te=!0):this.su(A,z)||(r.track({type:2,doc:z}),te=!0,(g&&this.eu(z,g)>0||p&&this.eu(z,p)<0)&&(m=!0)):!A&&z?(r.track({type:0,doc:z}),te=!0):A&&!z&&(r.track({type:1,doc:A}),te=!0,(g||p)&&(m=!0)),te&&(z?(c=c.add(z),u=ne?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,b)=>(function(z,W){const ne=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:te})}};return ne(z)-ne(W)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new tl(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new u1(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new l1(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cl="SyncEngine";class UV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class zV{constructor(e){this.key=e,this.hu=!1}}class BV{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _r((m=>XS(m)),rd),this.Iu=new Map,this.Eu=new Set,this.du=new st(oe.comparator),this.Au=new Map,this.Ru=new ry,this.Vu={},this.mu=new Map,this.fu=wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jV(s,e,t=!0){const r=md(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await c1(r,e,t,!0),o}async function qV(s,e){const t=md(s);await c1(t,e,!0,!1)}async function c1(s,e,t,r){const o=await zf(s.localStore,Vn(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await py(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&dd(s.remoteStore,o),m}async function py(s,e,t,r,o){s.pu=(b,A,z)=>(async function(ne,te,fe,Z){let Q=te.view.ru(fe);Q.Cs&&(Q=await pp(ne.localStore,te.query,!1).then((({documents:I})=>te.view.ru(I,Q))));const he=Z&&Z.targetChanges.get(te.targetId),ye=Z&&Z.targetMismatches.get(te.targetId)!=null,de=te.view.applyChanges(Q,ne.isPrimaryClient,he,ye);return Tp(ne,te.targetId,de.au),de.snapshot})(s,b,A,z);const u=await pp(s.localStore,e,!0),c=new LV(e,u.Qs),m=c.ru(u.documents),g=gc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);Tp(s,t,p.au);const E=new UV(e,t,c);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function FV(s,e,t){const r=me(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!rd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Wo(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&el(r.remoteStore,o.targetId),nl(r,o.targetId)})).catch(Ts)):(nl(r,o.targetId),await Wo(r.localStore,o.targetId,!0))}async function HV(s,e){const t=me(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),el(t.remoteStore,r.targetId))}async function GV(s,e,t){const r=Ey(s);try{const o=await(function(c,m){const g=me(c),p=$e.now(),E=m.reduce(((z,W)=>z.add(W.key)),De());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let W=Nn(),ne=De();return g.Ns.getEntries(z,E).next((te=>{W=te,W.forEach(((fe,Z)=>{Z.isValidDocument()||(ne=ne.add(fe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,W))).next((te=>{b=te;const fe=[];for(const Z of m){const Q=dN(Z,b.get(Z.key).overlayedDocument);Q!=null&&fe.push(new vr(Z.key,Q,BS(Q.value.mapValue),an.exists(!0)))}return g.mutationQueue.addMutationBatch(z,p,fe,m)})).next((te=>{A=te;const fe=te.applyToLocalDocumentSet(b,ne);return g.documentOverlayCache.saveOverlays(z,te.batchId,fe)}))})).then((()=>({batchId:A.batchId,changes:WS(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new st(Ae)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,t),await As(r,o.changes),await ll(r.remoteStore)}catch(o){const u=my(o,"Failed to persist write");t.reject(u)}}async function h1(s,e){const t=me(s);try{const r=await uV(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(pe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?pe(c.hu,14607):o.removedDocuments.size>0&&(pe(c.hu,42227),c.hu=!1))})),await As(t,r,e)}catch(r){await Ts(r)}}function X0(s,e,t){const r=me(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=me(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,b)=>{for(const A of b.Sa)A.va(m)&&(p=!0)})),p&&gy(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KV(s,e,t){const r=me(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new st(oe.comparator);c=c.insert(u,pt.newNoDocument(u,ve.min()));const m=De().add(u),g=new mc(ve.min(),new Map,new st(Ae),c,m);await h1(r,g),r.du=r.du.remove(u),r.Au.delete(e),vy(r)}else await Wo(r.localStore,e,!1).then((()=>nl(r,e,t))).catch(Ts)}async function QV(s,e){const t=me(s),r=e.batch.batchId;try{const o=await lV(t.localStore,e);_y(t,r,null),yy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await As(t,o)}catch(o){await Ts(o)}}async function YV(s,e,t){const r=me(s);try{const o=await(function(c,m){const g=me(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((b=>(pe(b!==null,37113),E=b.keys(),g.mutationQueue.removeMutationBatch(p,b)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,e);_y(r,e,t),yy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await As(r,o)}catch(o){await Ts(o)}}function yy(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function _y(s,e,t){const r=me(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function nl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||f1(s,r)}))}function f1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(el(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),vy(s))}function Tp(s,e,t){for(const r of t)r instanceof l1?(s.Ru.addReference(r.key,e),XV(s,r)):r instanceof u1?(ee(cl,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||f1(s,r.key)):ue(19791,{wu:r})}function XV(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(ee(cl,"New document in limbo: "+t),s.Eu.add(r),vy(s))}function vy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new oe(Ge.fromString(e)),r=s.fu.next();s.Au.set(r,new zV(t)),s.du=s.du.insert(t,r),dd(s.remoteStore,new cr(Vn(id(t.path)),r,"TargetPurposeLimboResolution",vn.ce))}}async function As(s,e,t){const r=me(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const E=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=oy.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=me(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>k.forEach(p,(A=>k.forEach(A.Es,(z=>E.persistence.referenceDelegate.addReference(b,A.targetId,z))).next((()=>k.forEach(A.ds,(z=>E.persistence.referenceDelegate.removeReference(b,A.targetId,z)))))))))}catch(b){if(!bs(b))throw b;ee(ly,"Failed to update sequence numbers: "+b)}for(const b of p){const A=b.targetId;if(!b.fromCache){const z=E.Ms.get(A),W=z.snapshotVersion,ne=z.withLastLimboFreeSnapshotVersion(W);E.Ms=E.Ms.insert(A,ne)}}})(r.localStore,u))}async function $V(s,e){const t=me(s);if(!t.currentUser.isEqual(e)){ee(cl,"User change. New user:",e.toKey());const r=await qA(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ae(X.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await As(t,r.Ls)}}function JV(s,e){const t=me(s),r=t.Au.get(e);if(r&&r.hu)return De().add(r.key);{let o=De();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function ZV(s,e){const t=me(s),r=await pp(t.localStore,e.query,!0),o=e.view.cu(r);return t.isPrimaryClient&&Tp(t,e.targetId,o.au),o}async function WV(s,e){const t=me(s);return GA(t.localStore,e).then((r=>As(t,r)))}async function eO(s,e,t,r){const o=me(s),u=await(function(m,g){const p=me(m),E=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.er(b,g).next((A=>A?p.localDocuments.getDocuments(b,A):k.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await ll(o.remoteStore):t==="acknowledged"||t==="rejected"?(_y(o,e,r||null),yy(o,e),(function(m,g){me(me(m).mutationQueue).ir(g)})(o.localStore,e)):ue(6720,"Unknown batchState",{Su:t}),await As(o,u)):ee(cl,"Cannot apply mutation batch with id: "+e)}async function tO(s,e){const t=me(s);if(md(t),Ey(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),o=await $0(t,r.toArray());t.gu=!0,await vp(t.remoteStore,!0);for(const u of o)dd(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const r=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(nl(t,c),Wo(t.localStore,c,!0)))),el(t.remoteStore,c)})),await o,await $0(t,r),(function(c){const m=me(c);m.Au.forEach(((g,p)=>{el(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new st(oe.comparator)})(t),t.gu=!1,await vp(t.remoteStore,!1)}}async function $0(s,e,t){const r=me(s),o=[],u=[];for(const c of e){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await zf(r.localStore,Vn(g[0]));for(const p of g){const E=r.Tu.get(p),b=await ZV(r,E);b.snapshot&&u.push(b.snapshot)}}else{const p=await HA(r.localStore,c);m=await zf(r.localStore,p),await py(r,d1(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function d1(s){return YS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function nO(s){return(function(t){return me(me(t).persistence).Ts()})(me(s).localStore)}async function iO(s,e,t,r){const o=me(s);if(o.gu)return void ee(cl,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await GA(o.localStore,$S(u[0])),m=mc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",bt.EMPTY_BYTE_STRING);await As(o,c,m);break}case"rejected":await Wo(o.localStore,e,!0),nl(o,e,r);break;default:ue(64155,t)}}async function rO(s,e,t){const r=md(s);if(r.gu){for(const o of e){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){ee(cl,"Adding an already active target "+o);continue}const u=await HA(r.localStore,o),c=await zf(r.localStore,u);await py(r,d1(u),c.targetId,!1,c.resumeToken),dd(r.remoteStore,c)}for(const o of t)r.Iu.has(o)&&await Wo(r.localStore,o,!1).then((()=>{el(r.remoteStore,o),nl(r,o)})).catch(Ts)}}function md(s){const e=me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KV.bind(null,e),e.Pu.H_=PV.bind(null,e.eventManager),e.Pu.yu=kV.bind(null,e.eventManager),e}function Ey(s){const e=me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YV.bind(null,e),e}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return jA(this.persistence,new BA,e.initialUser,this.serializer)}Cu(e){return new sy(cd.mi,this.serializer)}Du(e){return new $A}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class sO extends ec{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pe(this.persistence.referenceDelegate instanceof Uf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new sy((r=>Uf.mi(r,t)),this.serializer)}}class m1 extends ec{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Ey(this.xu.syncEngine),await ll(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return jA(this.persistence,new BA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new MA(r,e.asyncQueue,t)}Mu(e,t){const r=new pD(t,this.persistence);return new gD(e.asyncQueue,r)}Cu(e){const t=zA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ay(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JA(),pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new $A}}class aO extends m1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ug&&(this.sharedClientState.syncEngine={Co:eO.bind(null,t),vo:iO.bind(null,t),Fo:rO.bind(null,t),Ts:nO.bind(null,t),Do:WV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await tO(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=JA();if(!Ug.v(t))throw new ae(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ug(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>X0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$V.bind(null,this.syncEngine),await vp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new MV})()}createDatastore(e){const t=hd(e.databaseInfo.databaseId),r=(function(u){return new pV(u)})(e.databaseInfo);return(function(u,c,m,g){return new EV(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new bV(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>X0(this.syncEngine,t,0)),(function(){return F0.v()?new F0:new fV})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,E){const b=new BV(o,u,c,m,g,p);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=me(t);ee(Ia,"RemoteStore shutting down."),r.Ea.add(5),await pc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tc.provider={build:()=>new tc};class g1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const _s="FirestoreClient";class oO{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{ee(_s,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ee(_s,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=my(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Bg(s,e){s.asyncQueue.verifyOperationInProgress(),ee(_s,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await qA(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function J0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await lO(s);ee(_s,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>G0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>G0(e.remoteStore,o))),s._onlineComponents=e}async function lO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ee(_s,"Using user provided OfflineComponentProvider");try{await Bg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Gu("Error using user provided cache. Falling back to memory cache: "+t),await Bg(s,new ec)}}else ee(_s,"Using default OfflineComponentProvider"),await Bg(s,new sO(void 0));return s._offlineComponents}async function p1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ee(_s,"Using user provided OnlineComponentProvider"),await J0(s,s._uninitializedComponentsProvider._online)):(ee(_s,"Using default OnlineComponentProvider"),await J0(s,new tc))),s._onlineComponents}function uO(s){return p1(s).then((e=>e.syncEngine))}async function y1(s){const e=await p1(s),t=e.eventManager;return t.onListen=jV.bind(null,e.syncEngine),t.onUnlisten=FV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HV.bind(null,e.syncEngine),t}function cO(s,e,t={}){const r=new Ui;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new g1({next:A=>{E.Nu(),c.enqueueAndForget((()=>a1(u,b)));const z=A.docs.has(m);!z&&A.fromCache?p.reject(new ae(X.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&A.fromCache&&g&&g.source==="server"?p.reject(new ae(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new o1(id(m.path),E,{includeMetadataChanges:!0,qa:!0});return s1(u,b)})(await y1(s),s.asyncQueue,e,t,r))),r.promise}function hO(s,e,t={}){const r=new Ui;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new g1({next:A=>{E.Nu(),c.enqueueAndForget((()=>a1(u,b))),A.fromCache&&g.source==="server"?p.reject(new ae(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new o1(m,E,{includeMetadataChanges:!0,qa:!0});return s1(u,b)})(await y1(s),s.asyncQueue,e,t,r))),r.promise}function _1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Z0=new Map;const fO="firestore.googleapis.com",W0=!0;class eb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fO,this.ssl=W0}else this.host=e.host,this.ssl=e.ssl??W0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OA)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ty{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new iD;switch(r.type){case"firstParty":return new aD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Z0.get(t);r&&(ee("ComponentProvider","Removing Datastore"),Z0.delete(t),r.terminate())})(this),Promise.resolve()}}class gd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gd(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(uc(t,Mt._jsonSchema))return new Mt(e,r||null,new oe(Ge.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Ot("string",Mt._jsonSchemaVersion),referencePath:Ot("string")};class ms extends gd{constructor(e,t,r){super(e,t,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new oe(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function v1(s,e,...t){if(s=Wt(s),dS("collection","path",e),s instanceof Ty){const r=Ge.fromString(e,...t);return HT(r),new ms(s,null,r)}{if(!(s instanceof Mt||s instanceof ms))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ge.fromString(e,...t));return HT(r),new ms(s.firestore,null,r)}}function yc(s,e,...t){if(s=Wt(s),arguments.length===1&&(e=kp.newId()),dS("doc","path",e),s instanceof Ty){const r=Ge.fromString(e,...t);return FT(r),new Mt(s,null,new oe(r))}{if(!(s instanceof Mt||s instanceof ms))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ge.fromString(e,...t));return FT(r),new Mt(s.firestore,s instanceof ms?s.converter:null,new oe(r))}}const tb="AsyncQueue";class nb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZA(this,"async_queue_retry"),this._c=()=>{const r=pf();r&&ee(tb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ui;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bs(e))throw e;ee(tb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Tt("INTERNAL UNHANDLED ERROR: ",ib(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=dy.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ue(47125,{Pc:ib(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ib(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class xa extends Ty{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new nb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nb(e),this._firestoreClient=void 0,await e}}}function dO(s,e,t){t||(t=xf);const r=Ip(s,"firestore");if(r.isInitialized(t)){const o=r.getImmediate({identifier:t}),u=r.getOptions(t);if(fr(u,e))return o;throw new ae(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ae(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OA)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&il(e.host)&&gb(e.host),r.initialize({options:e,instanceIdentifier:t})}function by(s){if(s._terminated)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||mO(s),s._firestoreClient}function mO(s){const e=s._freezeSettings(),t=(function(o,u,c,m){return new HD(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,_1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new oO(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(bt.fromBase64String(e))}catch(t){throw new ae(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Ot("string",Yn._jsonSchemaVersion),bytes:Ot("string")};class pd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Da{constructor(e){this._methodName=e}}class zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zi._jsonSchemaVersion}}static fromJSON(e){if(uc(e,zi._jsonSchema))return new zi(e.latitude,e.longitude)}}zi._jsonSchemaVersion="firestore/geoPoint/1.0",zi._jsonSchema={type:Ot("string",zi._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};class Bi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uc(e,Bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bi(e.vectorValues);throw new ae(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:Ot("string",Bi._jsonSchemaVersion),vectorValues:Ot("object")};const gO=/^__.*__$/;class pO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ol(e,this.data,t,this.fieldTransforms)}}class E1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function T1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:s})}}class yd{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ff(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(T1(this.Ac)&&gO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hd(e)}Cc(e,t,r,o=!1){return new yd({Ac:e,methodName:t,Dc:r,path:dt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sy(s){const e=s._freezeSettings(),t=hd(s._databaseId);return new yO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function b1(s,e,t,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);Cy("Data must be an object, but it was:",c,r);const m=A1(r,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const A=bp(e,b,t);if(!c.contains(A))throw new ae(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);I1(E,A)||E.push(A)}g=new En(E),p=c.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,p=c.fieldTransforms;return new pO(new sn(m),g,p)}class _d extends Da{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function S1(s,e,t){return new yd({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ay extends Da{_toFieldTransform(e){return new dc(e.path,new $o)}isEqual(e){return e instanceof Ay}}class wy extends Da{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=S1(this,e,!0),r=this.vc.map((u=>hl(u,t))),o=new Ta(r);return new dc(e.path,o)}isEqual(e){return e instanceof wy&&fr(this.vc,e.vc)}}class Iy extends Da{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=S1(this,e,!0),r=this.vc.map((u=>hl(u,t))),o=new ba(r);return new dc(e.path,o)}isEqual(e){return e instanceof Iy&&fr(this.vc,e.vc)}}class Ry extends Da{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Jo(e.serializer,nA(e.serializer,this.Fc));return new dc(e.path,t)}isEqual(e){return e instanceof Ry&&this.Fc===e.Fc}}function _O(s,e,t,r){const o=s.Cc(1,e,t);Cy("Data must be an object, but it was:",o,r);const u=[],c=sn.empty();Ss(r,((g,p)=>{const E=xy(e,g,t);p=Wt(p);const b=o.yc(E);if(p instanceof _d)u.push(E);else{const A=hl(p,b);A!=null&&(u.push(E),c.set(E,A))}}));const m=new En(u);return new E1(c,m,o.fieldTransforms)}function vO(s,e,t,r,o,u){const c=s.Cc(1,e,t),m=[bp(e,r,t)],g=[o];if(u.length%2!=0)throw new ae(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(bp(e,u[A])),g.push(u[A+1]);const p=[],E=sn.empty();for(let A=m.length-1;A>=0;--A)if(!I1(p,m[A])){const z=m[A];let W=g[A];W=Wt(W);const ne=c.yc(z);if(W instanceof _d)p.push(z);else{const te=hl(W,ne);te!=null&&(p.push(z),E.set(z,te))}}const b=new En(p);return new E1(E,b,c.fieldTransforms)}function hl(s,e){if(w1(s=Wt(s)))return Cy("Unsupported field value:",e,s),A1(s,e);if(s instanceof Da)return(function(r,o){if(!T1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=hl(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=$e.fromDate(r);return{timestampValue:Zo(o.serializer,u)}}if(r instanceof $e){const u=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zo(o.serializer,u)}}if(r instanceof zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:dA(o.serializer,r._byteString)};if(r instanceof Mt){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ty(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Bi)return(function(c,m){return{mapValue:{fields:{[Gp]:{stringValue:Kp},[Ko]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return $p(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Lp(r)}`)})(s,e)}function A1(s,e){const t={};return NS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(s,((r,o)=>{const u=hl(o,e.mc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function w1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $e||s instanceof zi||s instanceof Yn||s instanceof Mt||s instanceof Da||s instanceof Bi)}function Cy(s,e,t){if(!w1(t)||!mS(t)){const r=Lp(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function bp(s,e,t){if((e=Wt(e))instanceof pd)return e._internalPath;if(typeof e=="string")return xy(s,e);throw Ff("Field path arguments must be of type string or ",s,!1,void 0,t)}const EO=new RegExp("[~\\*/\\[\\]]");function xy(s,e,t){if(e.search(EO)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Ff(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ae(X.INVALID_ARGUMENT,m+s+g)}function I1(s,e){return s.some((t=>t.isEqual(e)))}class R1{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(C1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TO extends R1{data(){return super.data()}}function C1(s,e){return typeof e=="string"?xy(s,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function bO(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ae(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SO{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ss(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[Ko].arrayValue?.values?.map((r=>ft(r.doubleValue)));return new Bi(t)}convertGeoPoint(e){return new zi(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ed(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=gr(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ge.fromString(e);pe(SA(r),9688,{name:e});const o=new va(r.get(1),r.get(3)),u=new oe(r.popFirst(5));return o.isEqual(t)||Tt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function x1(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class Du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ma extends R1{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(C1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ma._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Ot("string",ma._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class yf extends ma{data(e={}){return super.data(e)}}class Uo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Du(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new yf(this._firestore,this._userDataWriter,r.key,r,new Du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new yf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Du(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new yf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Du(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:AO(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:s})}}function wO(s){s=ji(s,Mt);const e=ji(s.firestore,xa);return cO(by(e),s._key).then((t=>DO(e,s,t)))}Uo._jsonSchemaVersion="firestore/querySnapshot/1.0",Uo._jsonSchema={type:Ot("string",Uo._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class D1 extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function IO(s){s=ji(s,gd);const e=ji(s.firestore,xa),t=by(e),r=new D1(e);return bO(s._query),hO(t,s._query).then((o=>new Uo(e,r,s,o)))}function RO(s,e,t){s=ji(s,Mt);const r=ji(s.firestore,xa),o=x1(s.converter,e);return vd(r,[b1(Sy(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,an.none())])}function N1(s,e,t,...r){s=ji(s,Mt);const o=ji(s.firestore,xa),u=Sy(o);let c;return c=typeof(e=Wt(e))=="string"||e instanceof pd?vO(u,"updateDoc",s._key,e,t,r):_O(u,"updateDoc",s._key,e),vd(o,[c.toMutation(s._key,an.exists(!0))])}function CO(s){return vd(ji(s.firestore,xa),[new od(s._key,an.none())])}function xO(s,e){const t=ji(s.firestore,xa),r=yc(s),o=x1(s.converter,e);return vd(t,[b1(Sy(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function vd(s,e){return(function(r,o){const u=new Ui;return r.asyncQueue.enqueueAndForget((async()=>GV(await uO(r),o,u))),u.promise})(by(s),e)}function DO(s,e,t){const r=t.docs.get(e._key),o=new D1(s);return new ma(s,o,e._key,r,new Du(t.hasPendingWrites,t.fromCache),e.converter)}class NO{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=PO(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function VO(s){return new NO(s)}class OO{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=tc.provider,this._offlineComponentProvider={build:t=>new m1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class MO{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=tc.provider,this._offlineComponentProvider={build:t=>new aO(t,e?.cacheSizeBytes)}}}function PO(s){return new OO(s?.forceOwnership)}function kO(){return new MO}function V1(){return new Ay("serverTimestamp")}function LO(...s){return new wy("arrayUnion",s)}function UO(...s){return new Iy("arrayRemove",s)}function zO(s){return new Ry("increment",s)}(function(e,t=!0){(function(o){al=o})(rl),zo(new ga("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new xa(new rD(r.getProvider("auth-internal")),new oD(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ae(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),hs(zT,BT,e),hs(zT,BT,"esm2020")})();const BO={apiKey:"AIzaSyAD3y3HNjlsSO7xykkqLWqofxU5U_6hW_Y",authDomain:"aichaku-924d0.firebaseapp.com",projectId:"aichaku-924d0",storageBucket:"aichaku-924d0.firebasestorage.app",messagingSenderId:"745993610184",appId:"1:745993610184:web:97ea4b13fef74d43d396fd"},O1=bb(BO),Hf=eD(O1),fl=dO(O1,{localCache:VO({tabManager:kO()})}),jO=()=>{const[s,e]=rt.useState(null);return rt.useEffect(()=>{const r=q2(Hf,o=>{e(o)});return()=>r()},[]),{user:s,logout:async()=>{await F2(Hf)}}},qO=async s=>{const e=yc(fl,"users",s,"metadata","categories"),t=await wO(e);if(t.exists())return t.data();const r={brands:{Closet:[],Beauty:[],Appliances:[]},subcategories:{Closet:[],Beauty:[],Appliances:[]}};return await RO(e,r),r},FO=async s=>{const e=v1(fl,"users",s,"items");return(await IO(e)).docs.map(r=>({id:r.id,...r.data()}))},HO=async(s,e)=>{const t=v1(fl,"users",s,"items"),r={...e,uses:e.uses??0,createdAt:V1()};return{id:(await xO(t,r)).id,...r}},GO=async(s,e)=>{const t=yc(fl,"users",s,"items",e);await N1(t,{uses:zO(1)})},KO=async(s,e)=>{const t=yc(fl,"users",s,"items",e);await CO(t)},QO=s=>{const[e,t]=rt.useState({brands:{},subcategories:{}});return rt.useEffect(()=>{if(!s){t({brands:{},subcategories:{}});return}(async()=>{const o=await qO(s.uid);t(o)})()},[s]),{categoriesData:e,setCategoriesData:t}},YO=s=>{const[e,t]=rt.useState([]),[r,o]=rt.useState(!1);return rt.useEffect(()=>{if(!s){t([]);return}(async()=>{o(!0);const p=await FO(s.uid);t(p),o(!1)})()},[s]),{items:e,loading:r,addItem:async g=>{if(!s)return;const p=await HO(s.uid,g);t(E=>[...E,p])},logUsage:async g=>{s&&(await GO(s.uid,g),t(p=>p.map(E=>E.id===g?{...E,uses:E.uses+1}:E)))},deleteItem:async g=>{s&&(await KO(s.uid,g),t(p=>p.filter(E=>E.id!==g)))}}},XO=({isOpen:s,onClose:e,onAuthSuccess:t})=>{const[r,o]=rt.useState(!0),[u,c]=rt.useState(""),[m,g]=rt.useState(""),[p,E]=rt.useState(!1);if(!s)return null;const b=async A=>{A.preventDefault(),E(!0);try{if(r){const z=await z2(Hf,u,m);t(z.user)}else{const z=await U2(Hf,u,m);t(z.user)}e()}catch(z){alert(z.message)}finally{E(!1)}};return j.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:j.jsxs("div",{className:"bg-white w-full max-w-md rounded-[32px] p-8 shadow-2xl relative overflow-hidden",children:[j.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-stone-400 hover:text-stone-600 transition-colors",children:j.jsx(ob,{size:20})}),j.jsxs("div",{className:"mb-8 text-center",children:[j.jsx("h3",{className:"text-2xl font-serif italic mb-2",children:r?"Welcome Back":"Create Account"}),j.jsx("p",{className:"text-sm text-stone-500 font-medium",children:"Please enter your details to continue"})]}),j.jsxs("form",{className:"space-y-5",onSubmit:b,children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Email Address"}),j.jsxs("div",{className:"relative",children:[j.jsx(GI,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),j.jsx("input",{required:!0,type:"email",value:u,onChange:A=>c(A.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:"hello@example.com"})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Password"}),j.jsxs("div",{className:"relative",children:[j.jsx(jI,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),j.jsx("input",{required:!0,type:"password",value:m,onChange:A=>g(A.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:""})]})]}),j.jsx("button",{disabled:p,type:"submit",className:"w-full py-4 bg-stone-900 text-white rounded-2xl font-bold uppercase tracking-widest text-xs shadow-lg hover:bg-stone-800 transition-all disabled:opacity-50",children:p?"Processing...":r?"Sign In":"Sign Up"})]}),j.jsx("div",{className:"mt-6 text-center",children:j.jsx("button",{onClick:()=>o(!r),className:"text-xs font-bold text-stone-400 hover:text-stone-900 transition-colors uppercase tracking-tight",children:r?"Don't have an account? Sign Up":"Already have an account? Sign In"})})]})})},rb=({title:s,list:e,onAdd:t,onRemove:r,onBack:o})=>{const[u,c]=rt.useState("");return j.jsxs("div",{className:"space-y-6",children:[j.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[j.jsx("button",{onClick:o,className:"p-2 hover:bg-stone-100 rounded-full transition-colors",children:j.jsx(NI,{size:20})}),j.jsx("h3",{className:"text-xl font-serif italic",children:s})]}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("input",{className:"flex-1 bg-stone-50 border-stone-200 border rounded-xl px-4 py-2 outline-none focus:ring-2 ring-stone-200",placeholder:`New ${s.toLowerCase()} name...`,value:u,onChange:m=>c(m.target.value)}),j.jsx("button",{onClick:()=>{t(u),c("")},className:"bg-stone-900 text-white px-4 py-2 rounded-xl hover:bg-stone-800 transition-colors",children:j.jsx(ab,{size:20})})]}),j.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:e.map(m=>j.jsxs("div",{className:"flex justify-between items-center p-3 bg-stone-50 rounded-xl border border-stone-100",children:[j.jsx("span",{className:"text-stone-700",children:m}),j.jsx("button",{onClick:()=>r(m),className:"text-stone-400 hover:text-red-500 transition-colors",children:j.jsx(tR,{size:16})})]},m))})]})},$O=({isOpen:s,onClose:e,user:t,categoriesData:r,setCategoriesData:o,addItem:u})=>{const[c,m]=rt.useState("main"),[g,p]=rt.useState(!1),[E,b]=rt.useState({category:"Closet",brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"}),A=async(Z,Q,he,ye,de)=>{if(!Z||!Q||!he||!ye)return;const I=yc(fl,"users",Z,"metadata","categories"),w=`${Q}.${he}`;let R={};de==="add"?R[w]=LO(ye):de==="remove"&&(R[w]=UO(ye)),R.updatedAt=V1();try{await N1(I,R),console.log(`Firebase ${Q} for ${he} updated successfully.`)}catch(O){console.error("Error updating Firebase categories:",O),alert("Failed to update categories in Firebase: "+O.message)}},z=async Z=>{if(!t||!Z)return;const Q=E.category,he=r.brands[Q]||[];if(Z&&!he.includes(Z)){const ye={...r.brands,[Q]:[...he,Z]};o(de=>({...de,brands:ye})),await A(t.uid,"brands",Q,Z,"add")}},W=async Z=>{if(!t||!Z)return;const Q=E.category,ye=(r.brands[Q]||[]).filter(I=>I!==Z),de={...r.brands,[Q]:ye};o(I=>({...I,brands:de})),await A(t.uid,"brands",Q,Z,"remove")},ne=async Z=>{if(!t||!Z)return;const Q=E.category,he=r.subcategories[Q]||[];if(Z&&!he.includes(Z)){const ye={...r.subcategories,[Q]:[...he,Z]};o(de=>({...de,subcategories:ye})),await A(t.uid,"subcategories",Q,Z,"add")}},te=async Z=>{if(!t||!Z)return;const Q=E.category,ye=(r.subcategories[Q]||[]).filter(I=>I!==Z),de={...r.subcategories,[Q]:ye};o(I=>({...I,subcategories:de})),await A(t.uid,"subcategories",Q,Z,"remove")},fe=async Z=>{if(Z.preventDefault(),!t){alert("Guest mode (IndexedDB) is coming soon! Please sign in for now.");return}p(!0);try{const Q={name:E.itemName,category:E.category,brand:E.brand,subcategory:E.subcategory,price:parseFloat(E.price)||0,uses:parseInt(E.timesUsed)||0};await u(Q),b({category:"Closet",brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"}),e()}catch(Q){console.error("Add item failed:",Q),alert("Failed to save item.")}finally{p(!1)}};return s?j.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:s&&j.jsx("div",{className:"bg-white w-full max-w-xl rounded-[40px] shadow-2xl overflow-hidden transition-all duration-300",children:j.jsxs("div",{className:"p-10",children:[c==="main"&&j.jsxs("div",{className:"flex justify-between items-center mb-8",children:[j.jsxs("div",{children:[j.jsx("h3",{className:"text-3xl font-serif italic text-stone-900",children:"Add to Collection"}),j.jsx("p",{className:"text-stone-400 text-sm mt-1 font-medium",children:"Capture the details of your new piece"})]}),j.jsx("button",{onClick:()=>{e(),m("main")},className:"bg-stone-100 p-2 rounded-full text-stone-400 hover:text-stone-600 transition-colors",children:j.jsx(ob,{size:24})})]}),c==="main"&&j.jsxs("form",{className:"space-y-6",onSubmit:fe,children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-3",children:"Core Category"}),j.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Closet","Beauty","Appliances"].map(Z=>j.jsx("button",{type:"button",onClick:()=>b({...E,category:Z}),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${E.category===Z?"bg-stone-900 text-white border-stone-900 shadow-lg":"bg-white text-stone-500 border-stone-100 hover:border-stone-300"}`,children:Z},Z))})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[j.jsxs("div",{children:[j.jsxs("div",{className:"flex justify-between items-center mb-2",children:[j.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Brand"}),j.jsx("button",{type:"button",onClick:()=>m("manage-brands"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:j.jsx(oT,{size:14})})]}),j.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:E.brand,onChange:Z=>b({...E,brand:Z.target.value}),children:[j.jsx("option",{value:"",children:"Select Brand"}),r.brands[E.category]?.map(Z=>j.jsx("option",{value:Z,children:Z},Z))]})]}),j.jsxs("div",{children:[j.jsxs("div",{className:"flex justify-between items-center mb-2",children:[j.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Subcategory"}),j.jsx("button",{type:"button",onClick:()=>m("manage-subs"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:j.jsx(oT,{size:14})})]}),j.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:E.subcategory,onChange:Z=>b({...E,subcategory:Z.target.value}),children:[j.jsx("option",{value:"",children:"Select Subcategory"}),r.subcategories[E.category]?.map(Z=>j.jsx("option",{value:Z,children:Z},Z))]})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Item Name"}),j.jsx("input",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"e.g. Vintage Cashmere Sweater",value:E.itemName,onChange:Z=>b({...E,itemName:Z.target.value})})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Price ($)"}),j.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0.00",value:E.price,onChange:Z=>b({...E,price:Z.target.value})})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Initial Times Used"}),j.jsx("input",{required:!0,type:"number",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0",value:E.timesUsed,onChange:Z=>b({...E,timesUsed:Z.target.value})})]})]}),j.jsx("button",{type:"submit",className:"w-full py-5 bg-stone-900 text-white rounded-[24px] font-bold uppercase tracking-[0.2em] text-sm shadow-xl hover:bg-stone-800 transition-all hover:-translate-y-1 active:translate-y-0",children:"Save to My Collection"})]}),c==="manage-brands"&&j.jsx(rb,{title:"Brands",list:r.brands[E.category]||[],onAdd:z,onRemove:W,onBack:()=>m("main")}),c==="manage-subs"&&j.jsx(rb,{title:"Subcategories",list:r.subcategories[E.category]||[],onAdd:ne,onRemove:te,onBack:()=>m("main")})]})})}):null};function nc(s,e){return typeof s!="number"||typeof e!="number"?0:e<=0?s:s/e}function JO(s){if(!Array.isArray(s)||s.length===0)return 0;let e=0;for(const t of s)e+=nc(t.price,t.uses);return e/s.length}function ZO(s,e,t="desc"){const r=nc(s.price,s.uses),o=nc(e.price,e.uses);return r<o?t==="asc"?-1:1:r>o?t==="asc"?1:-1:0}const WO=()=>{const{user:s,logout:e}=jO(),[t,r]=rt.useState(!1),[o,u]=rt.useState("All"),[c,m]=rt.useState(""),[g,p]=rt.useState({key:"price",direction:"desc"}),[E,b]=rt.useState(!1),{categoriesData:A,setCategoriesData:z}=QO(s),{items:W,logUsage:ne}=YO(s),te=rt.useMemo(()=>{let Q=W.filter(he=>(o==="All"||he.category===o)&&he.name.toLowerCase().includes(c.toLowerCase()));return g.key&&Q.sort((he,ye)=>{if(g.key==="cpu")return ZO(he,ye,g.direction);const de=he[g.key],I=ye[g.key];return de<I?g.direction==="asc"?-1:1:de>I?g.direction==="asc"?1:-1:0}),Q},[W,o,c,g]),fe=Q=>{let he="desc";g.key===Q&&g.direction==="desc"&&(he="asc"),p({key:Q,direction:he})},Z=JO(W).toFixed(2);return j.jsxs("div",{className:"flex h-screen bg-stone-50 font-sans text-stone-900 overflow-hidden",children:[j.jsxs("aside",{className:"w-64 bg-white border-r border-stone-200 flex flex-col p-6 space-y-8",children:[j.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[j.jsx("div",{className:"w-8 h-8 bg-stone-800 rounded-lg flex items-center justify-center text-white font-serif italic text-xl",children:"A"}),j.jsx("h1",{className:"text-2xl font-serif italic tracking-tight",children:"Aichaku"})]}),j.jsxs("nav",{className:"flex-1 space-y-1",children:[j.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-4 ml-2",children:"Main Menu"}),[{id:"All",icon:zI,label:"Overview"},{id:"Journal",icon:xI,label:"Daily Journal"},{id:"Closet",icon:QI,label:"Closet"},{id:"Beauty",icon:WI,label:"Beauty"},{id:"Appliances",icon:PI,label:"Appliances"}].map(Q=>j.jsxs("button",{onClick:()=>u(Q.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all ${o===Q.id?"bg-stone-900 text-white shadow-md":"text-stone-500 hover:bg-stone-100"}`,children:[j.jsx(Q.icon,{size:18}),Q.label]},Q.id))]}),j.jsx("div",{className:"pt-6 border-t border-stone-100",children:s?j.jsx("div",{className:"group relative",children:j.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-2xl hover:bg-stone-50 transition-colors cursor-pointer",children:[j.jsx("div",{className:"w-9 h-9 rounded-full bg-stone-800 flex items-center justify-center text-white text-xs font-bold uppercase",children:s.email.charAt(0)}),j.jsxs("div",{className:"flex-1 min-w-0",children:[j.jsx("p",{className:"text-xs font-bold text-stone-900 truncate",children:"My Account"}),j.jsx("p",{className:"text-[10px] text-stone-400 truncate",children:s.email})]}),j.jsx("button",{onClick:e,className:"opacity-0 group-hover:opacity-100 p-1.5 text-stone-400 hover:text-red-500 transition-all",title:"Log out",children:j.jsx(FI,{size:14})})]})}):j.jsxs("button",{onClick:()=>r(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-2xl bg-stone-100 text-stone-900 text-xs font-bold uppercase tracking-widest hover:bg-stone-200 transition-all border border-stone-200",children:[j.jsx(iR,{size:14})," Sign In"]})})]}),j.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[j.jsxs("header",{className:"h-20 bg-white border-b border-stone-200 flex items-center justify-between px-8",children:[j.jsxs("div",{className:"flex items-center bg-stone-100 px-4 py-2 rounded-full w-96",children:[j.jsx($I,{size:16,className:"text-stone-400 mr-2"}),j.jsx("input",{className:"bg-transparent border-none outline-none text-sm w-full",placeholder:"Search your collection...",value:c,onChange:Q=>m(Q.target.value)})]}),j.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-stone-900 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-sm hover:bg-stone-800 transition-all",children:[j.jsx(ab,{size:18})," Add New Item"]})]}),j.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[j.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[j.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[j.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Inventory Value"}),j.jsxs("p",{className:"text-3xl font-serif italic",children:["$",W.reduce((Q,he)=>Q+he.price,0).toLocaleString()]})]}),j.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[j.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Avg. Cost Per Use"}),j.jsxs("p",{className:"text-3xl font-serif italic",children:["$",Z]})]}),j.jsxs("div",{className:"bg-stone-900 text-white p-6 rounded-3xl shadow-lg flex items-center justify-between",children:[j.jsxs("div",{children:[j.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Reward Earned"}),j.jsx("p",{className:"text-3xl font-serif italic text-amber-400",children:"$0.00"})]}),j.jsx(RI,{size:40,className:"text-amber-400 opacity-50"})]})]}),j.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 shadow-sm overflow-hidden",children:[j.jsxs("div",{className:"px-6 py-4 border-b border-stone-100 flex items-center justify-between bg-stone-50/50",children:[j.jsxs("h2",{className:"font-serif text-lg",children:[o," Collection"]}),j.jsx("button",{className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-stone-200 transition-all",children:j.jsx(LI,{size:16})})]}),j.jsxs("table",{className:"w-full text-left",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest border-b border-stone-100",children:[j.jsx("th",{className:"px-6 py-4",children:"Item"}),j.jsx("th",{className:"px-6 py-4",children:"Brand"}),j.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>fe("price"),children:["Price ",j.jsx(Ag,{size:10,className:"inline ml-1"})]}),j.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>fe("uses"),children:["Total Uses ",j.jsx(Ag,{size:10,className:"inline ml-1"})]}),j.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>fe("cpu"),children:["Cost Per Use ",j.jsx(Ag,{size:10,className:"inline ml-1"})]}),j.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),j.jsx("tbody",{className:"divide-y divide-stone-50",children:te.map(Q=>j.jsxs("tr",{className:"hover:bg-stone-50/50 transition-colors group",children:[j.jsx("td",{className:"px-6 py-4",children:j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("img",{src:Q.image,className:"w-10 h-10 rounded-lg object-cover shadow-sm",alt:""}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-semibold",children:Q.name}),j.jsx("p",{className:"text-[10px] text-stone-400 uppercase font-bold tracking-tighter",children:Q.category})]})]})}),j.jsx("td",{className:"px-6 py-4 text-sm",children:Q.brand}),j.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",Q.price.toFixed(2)]}),j.jsx("td",{className:"px-6 py-4 text-sm",children:Q.uses}),j.jsx("td",{className:"px-6 py-4",children:j.jsxs("span",{className:`text-sm font-bold ${nc(Q.price,Q.uses)<10?"text-emerald-600":"text-stone-900"}`,children:["$",nc(Q.price,Q.uses).toFixed(2)]})}),j.jsx("td",{className:"px-6 py-4 text-right",children:j.jsxs("button",{onClick:()=>ne(Q.id),className:"opacity-0 group-hover:opacity-100 flex items-center gap-1 ml-auto bg-stone-900 text-white text-[10px] px-3 py-1.5 rounded-full font-bold uppercase transition-all hover:scale-105 shadow-md",children:[j.jsx(OI,{size:12})," Log Use"]})})]},Q.id))})]})]})]})]}),j.jsx(XO,{isOpen:t,onClose:()=>r(!1),onAuthSuccess:()=>r(!1)}),j.jsx($O,{isOpen:E,onClose:()=>b(!1),user:s,categoriesData:A,setCategoriesData:z})]})};vI.createRoot(document.getElementById("root")).render(j.jsx(rt.StrictMode,{children:j.jsx(WO,{})}));
