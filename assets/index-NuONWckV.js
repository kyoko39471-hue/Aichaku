(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var dg={exports:{}},du={};var XE;function eI(){if(XE)return du;XE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return du.Fragment=e,du.jsx=t,du.jsxs=t,du}var $E;function tI(){return $E||($E=1,dg.exports=eI()),dg.exports}var j=tI(),mg={exports:{}},we={};var JE;function nI(){if(JE)return we;JE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function z(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,te={};function J(V,$,le){this.props=V,this.context=$,this.refs=te,this.updater=le||Z}J.prototype.isReactComponent={},J.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},J.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ie(){}ie.prototype=J.prototype;function re(V,$,le){this.props=V,this.context=$,this.refs=te,this.updater=le||Z}var ye=re.prototype=new ie;ye.constructor=re,ee(ye,J.prototype),ye.isPureReactComponent=!0;var ne=Array.isArray;function ae(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(V,$,le){var he=le.ref;return{$$typeof:s,type:V,key:$,ref:he!==void 0?he:null,props:le}}function O(V,$){return R(V.type,$,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function P(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(le){return $[le]})}var C=/\/+/g;function lt(V,$){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):$.toString(36)}function Pt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ae,ae):(V.status="pending",V.then(function($){V.status==="pending"&&(V.status="fulfilled",V.value=$)},function($){V.status==="pending"&&(V.status="rejected",V.reason=$)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,$,le,he,Se){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var Ue=!1;if(V===null)Ue=!0;else switch(Ce){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(V.$$typeof){case s:case e:Ue=!0;break;case E:return Ue=V._init,K(Ue(V._payload),$,le,he,Se)}}if(Ue)return Se=Se(V),Ue=he===""?"."+lt(V,0):he,ne(Se)?(le="",Ue!=null&&(le=Ue.replace(C,"$&/")+"/"),K(Se,$,le,"",function(As){return As})):Se!=null&&(N(Se)&&(Se=O(Se,le+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(C,"$&/")+"/")+Ue)),$.push(Se)),1;Ue=0;var kt=he===""?".":he+":";if(ne(V))for(var ut=0;ut<V.length;ut++)he=V[ut],Ce=kt+lt(he,ut),Ue+=K(he,$,le,Ce,Se);else if(ut=z(V),typeof ut=="function")for(V=ut.call(V),ut=0;!(he=V.next()).done;)he=he.value,Ce=kt+lt(he,ut++),Ue+=K(he,$,le,Ce,Se);else if(Ce==="object"){if(typeof V.then=="function")return K(Pt(V),$,le,he,Se);throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function oe(V,$,le){if(V==null)return V;var he=[],Se=0;return K(V,he,"","",function(Ce){return $.call(le,Ce,Se++)}),he}function Ee(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(le){(V._status===0||V._status===-1)&&(V._status=1,V._result=le)},function(le){(V._status===0||V._status===-1)&&(V._status=2,V._result=le)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var Be=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ke={map:oe,forEach:function(V,$,le){oe(V,function(){$.apply(this,arguments)},le)},count:function(V){var $=0;return oe(V,function(){$++}),$},toArray:function(V){return oe(V,function($){return $})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return we.Activity=b,we.Children=Ke,we.Component=J,we.Fragment=t,we.Profiler=o,we.PureComponent=re,we.StrictMode=r,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,we.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},we.cache=function(V){return function(){return V.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(V,$,le){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var he=ee({},V.props),Se=V.key;if($!=null)for(Ce in $.key!==void 0&&(Se=""+$.key),$)!A.call($,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&$.ref===void 0||(he[Ce]=$[Ce]);var Ce=arguments.length-2;if(Ce===1)he.children=le;else if(1<Ce){for(var Ue=Array(Ce),kt=0;kt<Ce;kt++)Ue[kt]=arguments[kt+2];he.children=Ue}return R(V.type,Se,he)},we.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},we.createElement=function(V,$,le){var he,Se={},Ce=null;if($!=null)for(he in $.key!==void 0&&(Ce=""+$.key),$)A.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=$[he]);var Ue=arguments.length-2;if(Ue===1)Se.children=le;else if(1<Ue){for(var kt=Array(Ue),ut=0;ut<Ue;ut++)kt[ut]=arguments[ut+2];Se.children=kt}if(V&&V.defaultProps)for(he in Ue=V.defaultProps,Ue)Se[he]===void 0&&(Se[he]=Ue[he]);return R(V,Ce,Se)},we.createRef=function(){return{current:null}},we.forwardRef=function(V){return{$$typeof:m,render:V}},we.isValidElement=N,we.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:Ee}},we.memo=function(V,$){return{$$typeof:p,type:V,compare:$===void 0?null:$}},we.startTransition=function(V){var $=I.T,le={};I.T=le;try{var he=V(),Se=I.S;Se!==null&&Se(le,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ae,Be)}catch(Ce){Be(Ce)}finally{$!==null&&le.types!==null&&($.types=le.types),I.T=$}},we.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},we.use=function(V){return I.H.use(V)},we.useActionState=function(V,$,le){return I.H.useActionState(V,$,le)},we.useCallback=function(V,$){return I.H.useCallback(V,$)},we.useContext=function(V){return I.H.useContext(V)},we.useDebugValue=function(){},we.useDeferredValue=function(V,$){return I.H.useDeferredValue(V,$)},we.useEffect=function(V,$){return I.H.useEffect(V,$)},we.useEffectEvent=function(V){return I.H.useEffectEvent(V)},we.useId=function(){return I.H.useId()},we.useImperativeHandle=function(V,$,le){return I.H.useImperativeHandle(V,$,le)},we.useInsertionEffect=function(V,$){return I.H.useInsertionEffect(V,$)},we.useLayoutEffect=function(V,$){return I.H.useLayoutEffect(V,$)},we.useMemo=function(V,$){return I.H.useMemo(V,$)},we.useOptimistic=function(V,$){return I.H.useOptimistic(V,$)},we.useReducer=function(V,$,le){return I.H.useReducer(V,$,le)},we.useRef=function(V){return I.H.useRef(V)},we.useState=function(V){return I.H.useState(V)},we.useSyncExternalStore=function(V,$,le){return I.H.useSyncExternalStore(V,$,le)},we.useTransition=function(){return I.H.useTransition()},we.version="19.2.3",we}var ZE;function Ep(){return ZE||(ZE=1,mg.exports=nI()),mg.exports}var ot=Ep(),gg={exports:{}},mu={},pg={exports:{}},yg={};var WE;function iI(){return WE||(WE=1,(function(s){function e(K,oe){var Ee=K.length;K.push(oe);e:for(;0<Ee;){var Be=Ee-1>>>1,Ke=K[Be];if(0<o(Ke,oe))K[Be]=oe,K[Ee]=Ke,Ee=Be;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var oe=K[0],Ee=K.pop();if(Ee!==oe){K[0]=Ee;e:for(var Be=0,Ke=K.length,V=Ke>>>1;Be<V;){var $=2*(Be+1)-1,le=K[$],he=$+1,Se=K[he];if(0>o(le,Ee))he<Ke&&0>o(Se,le)?(K[Be]=Se,K[he]=Ee,Be=he):(K[Be]=le,K[$]=Ee,Be=$);else if(he<Ke&&0>o(Se,Ee))K[Be]=Se,K[he]=Ee,Be=he;else break e}}return oe}function o(K,oe){var Ee=K.sortIndex-oe.sortIndex;return Ee!==0?Ee:K.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,b=null,w=3,z=!1,Z=!1,ee=!1,te=!1,J=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ye(K){for(var oe=t(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=K)r(p),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(p)}}function ne(K){if(ee=!1,ye(K),!Z)if(t(g)!==null)Z=!0,ae||(ae=!0,P());else{var oe=t(p);oe!==null&&Pt(ne,oe.startTime-K)}}var ae=!1,I=-1,A=5,R=-1;function O(){return te?!0:!(s.unstable_now()-R<A)}function N(){if(te=!1,ae){var K=s.unstable_now();R=K;var oe=!0;try{e:{Z=!1,ee&&(ee=!1,ie(I),I=-1),z=!0;var Ee=w;try{t:{for(ye(K),b=t(g);b!==null&&!(b.expirationTime>K&&O());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,w=b.priorityLevel;var Ke=Be(b.expirationTime<=K);if(K=s.unstable_now(),typeof Ke=="function"){b.callback=Ke,ye(K),oe=!0;break t}b===t(g)&&r(g),ye(K)}else r(g);b=t(g)}if(b!==null)oe=!0;else{var V=t(p);V!==null&&Pt(ne,V.startTime-K),oe=!1}}break e}finally{b=null,w=Ee,z=!1}oe=void 0}}finally{oe?P():ae=!1}}}var P;if(typeof re=="function")P=function(){re(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,lt=C.port2;C.port1.onmessage=N,P=function(){lt.postMessage(null)}}else P=function(){J(N,0)};function Pt(K,oe){I=J(function(){K(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(K){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var Ee=w;w=oe;try{return K()}finally{w=Ee}},s.unstable_requestPaint=function(){te=!0},s.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ee=w;w=K;try{return oe()}finally{w=Ee}},s.unstable_scheduleCallback=function(K,oe,Ee){var Be=s.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Be+Ee:Be):Ee=Be,K){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=Ee+Ke,K={id:E++,callback:oe,priorityLevel:K,startTime:Ee,expirationTime:Ke,sortIndex:-1},Ee>Be?(K.sortIndex=Ee,e(p,K),t(g)===null&&K===t(p)&&(ee?(ie(I),I=-1):ee=!0,Pt(ne,Ee-Be))):(K.sortIndex=Ke,e(g,K),Z||z||(Z=!0,ae||(ae=!0,P()))),K},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(K){var oe=w;return function(){var Ee=w;w=oe;try{return K.apply(this,arguments)}finally{w=Ee}}}})(yg)),yg}var eT;function rI(){return eT||(eT=1,pg.exports=iI()),pg.exports}var _g={exports:{}},en={};var tT;function sI(){if(tT)return en;tT=1;var s=Ep();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,en.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},en.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},en.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},en.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},en.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,b=m(E,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,z=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:z}):E==="script"&&r.d.X(g,{crossOrigin:b,integrity:w,fetchPriority:z,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},en.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,b=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},en.requestFormReset=function(g){r.d.r(g)},en.unstable_batchedUpdates=function(g,p){return g(p)},en.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.3",en}var nT;function aI(){if(nT)return _g.exports;nT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_g.exports=sI(),_g.exports}var iT;function oI(){if(iT)return mu;iT=1;var s=rI(),e=Ep(),t=aI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function lt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ee:return"Fragment";case J:return"Profiler";case te:return"StrictMode";case ne:return"Suspense";case ae:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Z:return"Portal";case re:return n.displayName||"Context";case ie:return(n._context.displayName||"Context")+".Consumer";case ye:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:lt(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return lt(n(i))}catch{}}return null}var Pt=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Be=[],Ke=-1;function V(n){return{current:n}}function $(n){0>Ke||(n.current=Be[Ke],Be[Ke]=null,Ke--)}function le(n,i){Ke++,Be[Ke]=n.current,n.current=i}var he=V(null),Se=V(null),Ce=V(null),Ue=V(null);function kt(n,i){switch(le(Ce,i),le(Se,n),le(he,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?_E(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=_E(i),n=vE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(he),le(he,n)}function ut(){$(he),$(Se),$(Ce)}function As(n){n.memoizedState!==null&&le(Ue,n);var i=he.current,a=vE(i,n.type);i!==a&&(le(Se,n),le(he,a))}function xa(n){Se.current===n&&($(he),$(Se)),Ue.current===n&&($(Ue),uu._currentValue=Ee)}var Da,Na;function ci(n){if(Da===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Da=i&&i[1]||"",Na=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Da+n+Na}var ul=!1;function ws(n,i){if(!n||ul)return"";ul=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(H){var q=H}Reflect.construct(n,[],Y)}else{try{Y.call()}catch(H){q=H}n.call(Y.prototype)}}else{try{throw Error()}catch(H){q=H}(Y=n())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var x=_.split(`
`),B=T.split(`
`);for(f=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===x.length||f===B.length)for(l=x.length-1,f=B.length-1;1<=l&&0<=f&&x[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(x[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||x[l]!==B[f]){var G=`
`+x[l].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=l&&0<=f);break}}}finally{ul=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ci(a):""}function cl(n,i){switch(n.tag){case 26:case 27:case 5:return ci(n.type);case 16:return ci("Lazy");case 13:return n.child!==i&&i!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return ws(n.type,!1);case 11:return ws(n.type.render,!1);case 1:return ws(n.type,!0);case 31:return ci("Activity");default:return""}}function hl(n){try{var i="",a=null;do i+=cl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,Lt=s.unstable_scheduleCallback,vr=s.unstable_cancelCallback,gd=s.unstable_shouldYield,gc=s.unstable_requestPaint,on=s.unstable_now,Is=s.unstable_getCurrentPriorityLevel,fl=s.unstable_ImmediatePriority,dl=s.unstable_UserBlockingPriority,Er=s.unstable_NormalPriority,pd=s.unstable_LowPriority,pc=s.unstable_IdlePriority,yc=s.log,_c=s.unstable_setDisableYieldValue,Xn=null,Kt=null;function Mn(n){if(typeof yc=="function"&&_c(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Xn,n)}catch{}}var yt=Math.clz32?Math.clz32:Ec,vc=Math.log,Va=Math.LN2;function Ec(n){return n>>>=0,n===0?32:31-(vc(n)/Va|0)|0}var hi=256,Rs=262144,At=4194304;function fi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function di(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=fi(l):(_&=T,_!==0?f=fi(_):a||(a=T&~n,a!==0&&(f=fi(a))))):(T=l&~d,T!==0?f=fi(T):_!==0?f=fi(_):a||(a=l&~n,a!==0&&(f=fi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function $n(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function yd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tc(){var n=At;return At<<=1,(At&62914560)===0&&(At=4194304),n}function mi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Cs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function _d(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,x=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var G=31-yt(a),Y=1<<G;T[G]=0,x[G]=-1;var q=B[G];if(q!==null)for(B[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~Y}l!==0&&xs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function xs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-yt(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ml(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-yt(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function gl(n,i){var a=i&-i;return a=(a&42)!==0?1:Ds(a),(a&(n.suspendedLanes|i))!==0?0:a}function Ds(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ji(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bc(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:qE(n.type))}function Jn(n,i){var a=oe.p;try{return oe.p=n,i()}finally{oe.p=a}}var Zn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Zn,qt="__reactProps$"+Zn,gi="__reactContainer$"+Zn,Oa="__reactEvents$"+Zn,vd="__reactListeners$"+Zn,Sc="__reactHandles$"+Zn,Ac="__reactResources$"+Zn,pi="__reactMarker$"+Zn;function Ma(n){delete n[wt],delete n[qt],delete n[Oa],delete n[vd],delete n[Sc]}function yi(n){var i=n[wt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[gi]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=IE(n);n!==null;){if(a=n[wt])return a;n=IE(n)}return i}n=a,a=n.parentNode}return null}function Pn(n){if(n=n[wt]||n[gi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Tn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function _i(n){var i=n[Ac];return i||(i=n[Ac]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(n){n[pi]=!0}var pl=new Set,yl={};function vi(n,i){Ei(n,i),Ei(n+"Capture",i)}function Ei(n,i){for(yl[n]=i,n=0;n<i.length;n++)pl.add(i[n])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},El={};function wc(n){return St.call(El,n)?!0:St.call(vl,n)?!1:_l.test(n)?El[n]=!0:(vl[n]=!0,!1)}function Pa(n,i,a){if(wc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function bn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Rt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Tr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Qe(n){if(!n._valueTracker){var i=Tr(n)?"checked":"value";n._valueTracker=Tl(n,i,""+n[i])}}function Ns(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Tr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ti(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vs=/[\n"\\]/g;function fn(n){return n.replace(Vs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ka(n,i,a,l,f,d,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ft(i)):n.value!==""+Ft(i)&&(n.value=""+Ft(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?bl(n,_,Ft(i)):a!=null?bl(n,_,Ft(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Ft(T):n.removeAttribute("name")}function Ic(n,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qe(n);return}a=a!=null?""+Ft(a):"",i=i!=null?""+Ft(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Qe(n)}function bl(n,i,a){i==="number"&&Ti(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function br(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Ft(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Rc(n,i,a){if(i!=null&&(i=""+Ft(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Ft(a):""}function Sr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Pt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ft(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Qe(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Cc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Cc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Al(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Sl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Sl(n,d,i[d])}function La(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(n){return Ar.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Wn(){}var wl=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wr=null,bi=null;function Os(n){var i=Pn(n);if(i&&(n=i.stateNode)){var a=n[qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(ka(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qt]||null;if(!f)throw Error(r(90));ka(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Ns(l)}break e;case"textarea":Rc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&br(n,!!a.multiple,i,!1)}}}var za=!1;function Ir(n,i,a){if(za)return n(i,a);za=!0;try{var l=n(i);return l}finally{if(za=!1,(wr!==null||bi!==null)&&(bh(),wr&&(i=wr,n=bi,bi=wr=null,Os(i),n)))for(i=0;i<n.length;i++)Os(n[i])}}function ei(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Ln)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Ms=!1}var Si=null,Il=null,Ps=null;function Rl(){if(Ps)return Ps;var n,i=Il,a=i.length,l,f="value"in Si?Si.value:Si.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Ps=f.slice(n,1<l?1-l:void 0)}function ks(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function qi(){return!0}function ti(){return!1}function Qt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?qi:ti,this.isPropagationStopped=ti,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),i}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Qt(Fi),Rr=b({},Fi,{view:0,detail:0}),Cl=Qt(Rr),Cr,Ba,wi,ja=b({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(Cr=n.screenX-wi.screenX,Ba=n.screenY-wi.screenY):Ba=Cr=0,wi=n),Cr)},movementY:function(n){return"movementY"in n?n.movementY:Ba}}),xl=Qt(ja),Ls=b({},ja,{dataTransfer:0}),Dc=Qt(Ls),Nc=b({},Rr,{relatedTarget:0}),Us=Qt(Nc),Dl=b({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=Qt(Dl),qa=b({},Fi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Oc=Qt(qa),Mc=b({},Fi,{data:0}),Ii=Qt(Mc),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Lc[n])?!!i[n]:!1}function xr(){return Uc}var ln=b({},Rr,{key:function(n){if(n.key){var i=Pc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?kc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(n){return n.type==="keypress"?ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),zc=Qt(ln),Bc=b({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=Qt(Bc),h=b({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),y=Qt(h),v=b({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qt(v),L=b({},ja,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Qt(L),se=b({},Fi,{newState:0,oldState:0}),Ie=Qt(se),_t=[9,13,27,32],Fe=Ln&&"CompositionEvent"in window,ct=null;Ln&&"documentMode"in document&&(ct=document.documentMode);var Un=Ln&&"TextEvent"in window&&!ct,Ri=Ln&&(!Fe||ct&&8<ct&&11>=ct),ni=" ",ii=!1;function zs(n,i){switch(n){case"keyup":return _t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ha=!1;function A1(n,i){switch(n){case"compositionend":return Fa(i);case"keypress":return i.which!==32?null:(ii=!0,ni);case"textInput":return n=i.data,n===ni&&ii?null:n;default:return null}}function w1(n,i){if(Ha)return n==="compositionend"||!Fe&&zs(n,i)?(n=Rl(),Ps=Il=Si=null,Ha=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var I1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!I1[n.type]:i==="textarea"}function Dy(n,i,a,l){wr?bi?bi.push(l):bi=[l]:wr=l,i=xh(i,"onChange"),0<i.length&&(a=new Ai("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Nl=null,Vl=null;function R1(n){fE(n,0)}function jc(n){var i=Tn(n);if(Ns(i))return n}function Ny(n,i){if(n==="change")return i}var Vy=!1;if(Ln){var Ed;if(Ln){var Td="oninput"in document;if(!Td){var Oy=document.createElement("div");Oy.setAttribute("oninput","return;"),Td=typeof Oy.oninput=="function"}Ed=Td}else Ed=!1;Vy=Ed&&(!document.documentMode||9<document.documentMode)}function My(){Nl&&(Nl.detachEvent("onpropertychange",Py),Vl=Nl=null)}function Py(n){if(n.propertyName==="value"&&jc(Vl)){var i=[];Dy(i,Vl,n,kn(n)),Ir(R1,i)}}function C1(n,i,a){n==="focusin"?(My(),Nl=i,Vl=a,Nl.attachEvent("onpropertychange",Py)):n==="focusout"&&My()}function x1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jc(Vl)}function D1(n,i){if(n==="click")return jc(i)}function N1(n,i){if(n==="input"||n==="change")return jc(i)}function V1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:V1;function Ol(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function ky(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ly(n,i){var a=ky(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ky(a)}}function Uy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Uy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function zy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ti(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ti(n.document)}return i}function bd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var O1=Ln&&"documentMode"in document&&11>=document.documentMode,Ga=null,Sd=null,Ml=null,Ad=!1;function By(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ad||Ga==null||Ga!==Ti(l)||(l=Ga,"selectionStart"in l&&bd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ml&&Ol(Ml,l)||(Ml=l,l=xh(Sd,"onSelect"),0<l.length&&(i=new Ai("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ga)))}function Bs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ka={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},wd={},jy={};Ln&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function js(n){if(wd[n])return wd[n];if(!Ka[n])return n;var i=Ka[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in jy)return wd[n]=i[a];return n}var qy=js("animationend"),Fy=js("animationiteration"),Hy=js("animationstart"),M1=js("transitionrun"),P1=js("transitionstart"),k1=js("transitioncancel"),Gy=js("transitionend"),Ky=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function ri(n,i){Ky.set(n,i),vi(i,[n])}var qc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Qa=0,Rd=0;function Fc(){for(var n=Qa,i=Rd=Qa=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Qy(a,f,d)}}function Hc(n,i,a,l){zn[Qa++]=n,zn[Qa++]=i,zn[Qa++]=a,zn[Qa++]=l,Rd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Cd(n,i,a,l){return Hc(n,i,a,l),Gc(n)}function qs(n,i){return Hc(n,null,null,i),Gc(n)}function Qy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-yt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Gc(n){if(50<nu)throw nu=0,Lm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ya={};function L1(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,l){return new L1(n,i,a,l)}function xd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gi(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Yy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Kc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")xd(n)&&(_=1);else if(typeof n=="string")_=qw(n,a,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=An(31,a,i,f),n.elementType=R,n.lanes=d,n;case ee:return Fs(a.children,f,d,i);case te:_=8,f|=24;break;case J:return n=An(12,a,i,f|2),n.elementType=J,n.lanes=d,n;case ne:return n=An(13,a,i,f),n.elementType=ne,n.lanes=d,n;case ae:return n=An(19,a,i,f),n.elementType=ae,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:_=10;break e;case ie:_=9;break e;case ye:_=11;break e;case I:_=14;break e;case A:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=An(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Fs(n,i,a,l){return n=An(7,n,l,i),n.lanes=a,n}function Dd(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function Xy(n){var i=An(18,null,null,0);return i.stateNode=n,i}function Nd(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var $y=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=$y.get(n);return a!==void 0?a:(i={value:n,source:i,stack:hl(i)},$y.set(n,i),i)}return{value:n,source:i,stack:hl(i)}}var Xa=[],$a=0,Qc=null,Pl=0,jn=[],qn=0,Dr=null,Ci=1,xi="";function Ki(n,i){Xa[$a++]=Pl,Xa[$a++]=Qc,Qc=n,Pl=i}function Jy(n,i,a){jn[qn++]=Ci,jn[qn++]=xi,jn[qn++]=Dr,Dr=n;var l=Ci;n=xi;var f=32-yt(l)-1;l&=~(1<<f),a+=1;var d=32-yt(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ci=1<<32-yt(i)+f|a<<f|l,xi=d+n}else Ci=1<<d|a<<f|l,xi=n}function Vd(n){n.return!==null&&(Ki(n,1),Jy(n,1,0))}function Od(n){for(;n===Qc;)Qc=Xa[--$a],Xa[$a]=null,Pl=Xa[--$a],Xa[$a]=null;for(;n===Dr;)Dr=jn[--qn],jn[qn]=null,xi=jn[--qn],jn[qn]=null,Ci=jn[--qn],jn[qn]=null}function Zy(n,i){jn[qn++]=Ci,jn[qn++]=xi,jn[qn++]=Dr,Ci=i.id,xi=i.overflow,Dr=n}var Yt=null,st=null,ke=!1,Nr=null,Fn=!1,Md=Error(r(519));function Vr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(Bn(i,n)),Md}function Wy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[wt]=n,i[qt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<ru.length;a++)Ve(ru[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),Ic(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),Sr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||pE(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=Wn),i=!0):i=!1,i||Vr(n,!0)}function e_(n){for(Yt=n.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Yt=Yt.return}}function Ja(n){if(n!==Yt)return!1;if(!ke)return e_(n),ke=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Zm(n.type,n.memoizedProps)),a=!a),a&&st&&Vr(n),e_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));st=wE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));st=wE(n)}else i===27?(i=st,Kr(n.type)?(n=ig,ig=null,st=n):st=i):st=Yt?Gn(n.stateNode.nextSibling):null;return!0}function Hs(){st=Yt=null,ke=!1}function Pd(){var n=Nr;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Nr=null),n}function kl(n){Nr===null?Nr=[n]:Nr.push(n)}var kd=V(null),Gs=null,Qi=null;function Or(n,i,a){le(kd,i._currentValue),i._currentValue=a}function Yi(n){n._currentValue=kd.current,$(kd)}function Ld(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Ud(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var x=0;x<i.length;x++)if(T.context===i[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Ld(d.return,a,n),l||(_=null);break e}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Ld(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Za(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Ue.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(uu):n=[uu])}f=f.return}n!==null&&Ud(i,n,a,l),i.flags|=262144}function Yc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ks(n){Gs=n,Qi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return t_(Gs,n)}function Xc(n,i){return Gs===null&&Ks(n),t_(n,i)}function t_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qi===null){if(n===null)throw Error(r(308));Qi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Qi=Qi.next=i;return a}var U1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},z1=s.unstable_scheduleCallback,B1=s.unstable_NormalPriority,Ct={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new U1,data:new Map,refCount:0}}function Ll(n){n.refCount--,n.refCount===0&&z1(B1,function(){n.controller.abort()})}var Ul=null,Bd=0,Wa=0,eo=null;function j1(n,i){if(Ul===null){var a=Ul=[];Bd=0,Wa=Fm(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Bd++,i.then(n_,n_),i}function n_(){if(--Bd===0&&Ul!==null){eo!==null&&(eo.status="fulfilled");var n=Ul;Ul=null,Wa=0,eo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function q1(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var i_=K.S;K.S=function(n,i){Bv=on(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&j1(n,i),i_!==null&&i_(n,i)};var Qs=V(null);function jd(){var n=Qs.current;return n!==null?n:it.pooledCache}function $c(n,i){i===null?le(Qs,Qs.current):le(Qs,i.pool)}function r_(){var n=jd();return n===null?null:{parent:Ct._currentValue,pool:n}}var to=Error(r(460)),qd=Error(r(474)),Jc=Error(r(542)),Zc={then:function(){}};function s_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function a_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Wn,Wn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,l_(n),n;default:if(typeof i.status=="string")i.then(Wn,Wn);else{if(n=it,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,l_(n),n}throw Xs=i,to}}function Ys(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xs=a,to):a}}var Xs=null;function o_(){if(Xs===null)throw Error(r(459));var n=Xs;return Xs=null,n}function l_(n){if(n===to||n===Jc)throw Error(r(483))}var no=null,zl=0;function Wc(n){var i=zl;return zl+=1,no===null&&(no=[]),a_(no,n,i)}function Bl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function eh(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function u_(n){function i(M,D){if(n){var U=M.deletions;U===null?(M.deletions=[D],M.flags|=16):U.push(D)}}function a(M,D){if(!n)return null;for(;D!==null;)i(M,D),D=D.sibling;return null}function l(M){for(var D=new Map;M!==null;)M.key!==null?D.set(M.key,M):D.set(M.index,M),M=M.sibling;return D}function f(M,D){return M=Gi(M,D),M.index=0,M.sibling=null,M}function d(M,D,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<D?(M.flags|=67108866,D):U):(M.flags|=67108866,D)):(M.flags|=1048576,D)}function _(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function T(M,D,U,Q){return D===null||D.tag!==6?(D=Dd(U,M.mode,Q),D.return=M,D):(D=f(D,U),D.return=M,D)}function x(M,D,U,Q){var _e=U.type;return _e===ee?G(M,D,U.props.children,Q,U.key):D!==null&&(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&Ys(_e)===D.type)?(D=f(D,U.props),Bl(D,U),D.return=M,D):(D=Kc(U.type,U.key,U.props,null,M.mode,Q),Bl(D,U),D.return=M,D)}function B(M,D,U,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Nd(U,M.mode,Q),D.return=M,D):(D=f(D,U.children||[]),D.return=M,D)}function G(M,D,U,Q,_e){return D===null||D.tag!==7?(D=Fs(U,M.mode,Q,_e),D.return=M,D):(D=f(D,U),D.return=M,D)}function Y(M,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Dd(""+D,M.mode,U),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case z:return U=Kc(D.type,D.key,D.props,null,M.mode,U),Bl(U,D),U.return=M,U;case Z:return D=Nd(D,M.mode,U),D.return=M,D;case A:return D=Ys(D),Y(M,D,U)}if(Pt(D)||P(D))return D=Fs(D,M.mode,U,null),D.return=M,D;if(typeof D.then=="function")return Y(M,Wc(D),U);if(D.$$typeof===re)return Y(M,Xc(M,D),U);eh(M,D)}return null}function q(M,D,U,Q){var _e=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return _e!==null?null:T(M,D,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return U.key===_e?x(M,D,U,Q):null;case Z:return U.key===_e?B(M,D,U,Q):null;case A:return U=Ys(U),q(M,D,U,Q)}if(Pt(U)||P(U))return _e!==null?null:G(M,D,U,Q,null);if(typeof U.then=="function")return q(M,D,Wc(U),Q);if(U.$$typeof===re)return q(M,D,Xc(M,U),Q);eh(M,U)}return null}function H(M,D,U,Q,_e){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return M=M.get(U)||null,T(D,M,""+Q,_e);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return M=M.get(Q.key===null?U:Q.key)||null,x(D,M,Q,_e);case Z:return M=M.get(Q.key===null?U:Q.key)||null,B(D,M,Q,_e);case A:return Q=Ys(Q),H(M,D,U,Q,_e)}if(Pt(Q)||P(Q))return M=M.get(U)||null,G(D,M,Q,_e,null);if(typeof Q.then=="function")return H(M,D,U,Wc(Q),_e);if(Q.$$typeof===re)return H(M,D,U,Xc(D,Q),_e);eh(D,Q)}return null}function de(M,D,U,Q){for(var _e=null,je=null,ge=D,xe=D=0,Me=null;ge!==null&&xe<U.length;xe++){ge.index>xe?(Me=ge,ge=null):Me=ge.sibling;var qe=q(M,ge,U[xe],Q);if(qe===null){ge===null&&(ge=Me);break}n&&ge&&qe.alternate===null&&i(M,ge),D=d(qe,D,xe),je===null?_e=qe:je.sibling=qe,je=qe,ge=Me}if(xe===U.length)return a(M,ge),ke&&Ki(M,xe),_e;if(ge===null){for(;xe<U.length;xe++)ge=Y(M,U[xe],Q),ge!==null&&(D=d(ge,D,xe),je===null?_e=ge:je.sibling=ge,je=ge);return ke&&Ki(M,xe),_e}for(ge=l(ge);xe<U.length;xe++)Me=H(ge,M,xe,U[xe],Q),Me!==null&&(n&&Me.alternate!==null&&ge.delete(Me.key===null?xe:Me.key),D=d(Me,D,xe),je===null?_e=Me:je.sibling=Me,je=Me);return n&&ge.forEach(function(Jr){return i(M,Jr)}),ke&&Ki(M,xe),_e}function Te(M,D,U,Q){if(U==null)throw Error(r(151));for(var _e=null,je=null,ge=D,xe=D=0,Me=null,qe=U.next();ge!==null&&!qe.done;xe++,qe=U.next()){ge.index>xe?(Me=ge,ge=null):Me=ge.sibling;var Jr=q(M,ge,qe.value,Q);if(Jr===null){ge===null&&(ge=Me);break}n&&ge&&Jr.alternate===null&&i(M,ge),D=d(Jr,D,xe),je===null?_e=Jr:je.sibling=Jr,je=Jr,ge=Me}if(qe.done)return a(M,ge),ke&&Ki(M,xe),_e;if(ge===null){for(;!qe.done;xe++,qe=U.next())qe=Y(M,qe.value,Q),qe!==null&&(D=d(qe,D,xe),je===null?_e=qe:je.sibling=qe,je=qe);return ke&&Ki(M,xe),_e}for(ge=l(ge);!qe.done;xe++,qe=U.next())qe=H(ge,M,xe,qe.value,Q),qe!==null&&(n&&qe.alternate!==null&&ge.delete(qe.key===null?xe:qe.key),D=d(qe,D,xe),je===null?_e=qe:je.sibling=qe,je=qe);return n&&ge.forEach(function(Ww){return i(M,Ww)}),ke&&Ki(M,xe),_e}function tt(M,D,U,Q){if(typeof U=="object"&&U!==null&&U.type===ee&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case z:e:{for(var _e=U.key;D!==null;){if(D.key===_e){if(_e=U.type,_e===ee){if(D.tag===7){a(M,D.sibling),Q=f(D,U.props.children),Q.return=M,M=Q;break e}}else if(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&Ys(_e)===D.type){a(M,D.sibling),Q=f(D,U.props),Bl(Q,U),Q.return=M,M=Q;break e}a(M,D);break}else i(M,D);D=D.sibling}U.type===ee?(Q=Fs(U.props.children,M.mode,Q,U.key),Q.return=M,M=Q):(Q=Kc(U.type,U.key,U.props,null,M.mode,Q),Bl(Q,U),Q.return=M,M=Q)}return _(M);case Z:e:{for(_e=U.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(M,D.sibling),Q=f(D,U.children||[]),Q.return=M,M=Q;break e}else{a(M,D);break}else i(M,D);D=D.sibling}Q=Nd(U,M.mode,Q),Q.return=M,M=Q}return _(M);case A:return U=Ys(U),tt(M,D,U,Q)}if(Pt(U))return de(M,D,U,Q);if(P(U)){if(_e=P(U),typeof _e!="function")throw Error(r(150));return U=_e.call(U),Te(M,D,U,Q)}if(typeof U.then=="function")return tt(M,D,Wc(U),Q);if(U.$$typeof===re)return tt(M,D,Xc(M,U),Q);eh(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(M,D.sibling),Q=f(D,U),Q.return=M,M=Q):(a(M,D),Q=Dd(U,M.mode,Q),Q.return=M,M=Q),_(M)):a(M,D)}return function(M,D,U,Q){try{zl=0;var _e=tt(M,D,U,Q);return no=null,_e}catch(ge){if(ge===to||ge===Jc)throw ge;var je=An(29,ge,null,M.mode);return je.lanes=Q,je.return=M,je}}}var $s=u_(!0),c_=u_(!1),Mr=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Pr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function kr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Gc(n),Qy(n,null,a),i}return Hc(n,l,i,a),Gc(n)}function jl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}function Gd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Kd=!1;function ql(){if(Kd){var n=eo;if(n!==null)throw n}}function Fl(n,i,a,l){Kd=!1;var f=n.updateQueue;Mr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var x=T,B=x.next;x.next=null,_===null?d=B:_.next=B,_=x;var G=n.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==_&&(T===null?G.firstBaseUpdate=B:T.next=B,G.lastBaseUpdate=x))}if(d!==null){var Y=f.baseState;_=0,G=B=x=null,T=d;do{var q=T.lane&-536870913,H=q!==T.lane;if(H?(Oe&q)===q:(l&q)===q){q!==0&&q===Wa&&(Kd=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var de=n,Te=T;q=i;var tt=a;switch(Te.tag){case 1:if(de=Te.payload,typeof de=="function"){Y=de.call(tt,Y,q);break e}Y=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Te.payload,q=typeof de=="function"?de.call(tt,Y,q):de,q==null)break e;Y=b({},Y,q);break e;case 2:Mr=!0}}q=T.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[q]:H.push(q))}else H={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(B=G=H,x=Y):G=G.next=H,_|=q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;H=T,T=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);G===null&&(x=Y),f.baseState=x,f.firstBaseUpdate=B,f.lastBaseUpdate=G,d===null&&(f.shared.lanes=0),jr|=_,n.lanes=_,n.memoizedState=Y}}function h_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function f_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)h_(a[n],i)}var io=V(null),th=V(0);function d_(n,i){n=ir,le(th,n),le(io,i),ir=n|i.baseLanes}function Qd(){le(th,ir),le(io,io.current)}function Yd(){ir=th.current,$(io),$(th)}var wn=V(null),Hn=null;function Lr(n){var i=n.alternate;le(vt,vt.current&1),le(wn,n),Hn===null&&(i===null||io.current!==null||i.memoizedState!==null)&&(Hn=n)}function Xd(n){le(vt,vt.current),le(wn,n),Hn===null&&(Hn=n)}function m_(n){n.tag===22?(le(vt,vt.current),le(wn,n),Hn===null&&(Hn=n)):Ur()}function Ur(){le(vt,vt.current),le(wn,wn.current)}function In(n){$(wn),Hn===n&&(Hn=null),$(vt)}var vt=V(0);function nh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tg(a)||ng(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xi=0,Re=null,We=null,xt=null,ih=!1,ro=!1,Js=!1,rh=0,Hl=0,so=null,F1=0;function mt(){throw Error(r(321))}function $d(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function Jd(n,i,a,l,f,d){return Xi=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?J_:fm,Js=!1,d=a(l,f),Js=!1,ro&&(d=p_(i,a,l,f)),g_(n),d}function g_(n){K.H=Ql;var i=We!==null&&We.next!==null;if(Xi=0,xt=We=Re=null,ih=!1,Hl=0,so=null,i)throw Error(r(300));n===null||Dt||(n=n.dependencies,n!==null&&Yc(n)&&(Dt=!0))}function p_(n,i,a,l){Re=n;var f=0;do{if(ro&&(so=null),Hl=0,ro=!1,25<=f)throw Error(r(301));if(f+=1,xt=We=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=Z_,d=i(a,l)}while(ro);return d}function H1(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Gl(i):i,n=n.useState()[0],(We!==null?We.memoizedState:null)!==n&&(Re.flags|=1024),i}function Zd(){var n=rh!==0;return rh=0,n}function Wd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function em(n){if(ih){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ih=!1}Xi=0,xt=We=Re=null,ro=!1,Hl=rh=0,so=null}function un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Re.memoizedState=xt=n:xt=xt.next=n,xt}function Et(){if(We===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=We.next;var i=xt===null?Re.memoizedState:xt.next;if(i!==null)xt=i,We=n;else{if(n===null)throw Re.alternate===null?Error(r(467)):Error(r(310));We=n,n={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},xt===null?Re.memoizedState=xt=n:xt=xt.next=n}return xt}function sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(n){var i=Hl;return Hl+=1,so===null&&(so=[]),n=a_(so,n,i),i=Re,(xt===null?i.memoizedState:xt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?J_:fm),n}function ah(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===re)return Xt(n)}throw Error(r(438,String(n)))}function tm(n){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=sh(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function $i(n,i){return typeof i=="function"?i(n):i}function oh(n){var i=Et();return nm(i,We,n)}function nm(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=_=null,x=null,B=i,G=!1;do{var Y=B.lane&-536870913;if(Y!==B.lane?(Oe&Y)===Y:(Xi&Y)===Y){var q=B.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Y===Wa&&(G=!0);else if((Xi&q)===q){B=B.next,q===Wa&&(G=!0);continue}else Y={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(T=x=Y,_=d):x=x.next=Y,Re.lanes|=q,jr|=q;Y=B.action,Js&&a(d,Y),d=B.hasEagerState?B.eagerState:a(d,Y)}else q={lane:Y,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(T=x=q,_=d):x=x.next=q,Re.lanes|=Y,jr|=Y;B=B.next}while(B!==null&&B!==i);if(x===null?_=d:x.next=T,!Sn(d,n.memoizedState)&&(Dt=!0,G&&(a=eo,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=x,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function im(n){var i=Et(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,i.memoizedState)||(Dt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function y_(n,i,a){var l=Re,f=Et(),d=ke;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Sn((We||f).memoizedState,a);if(_&&(f.memoizedState=a,Dt=!0),f=f.queue,am(E_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,ao(9,{destroy:void 0},v_.bind(null,l,f,a,i),null),it===null)throw Error(r(349));d||(Xi&127)!==0||__(l,i,a)}return a}function __(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=sh(),Re.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function v_(n,i,a,l){i.value=a,i.getSnapshot=l,T_(i)&&b_(n)}function E_(n,i,a){return a(function(){T_(i)&&b_(n)})}function T_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function b_(n){var i=qs(n,2);i!==null&&_n(i,n,2)}function rm(n){var i=un();if(typeof n=="function"){var a=n;if(n=a(),Js){Mn(!0);try{a()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:n},i}function S_(n,i,a,l){return n.baseState=a,nm(n,We,typeof l=="function"?l:$i)}function G1(n,i,a,l,f){if(ch(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,A_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function A_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var T=a(f,l),x=K.S;x!==null&&x(_,T),w_(n,i,T)}catch(B){sm(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(f,l),w_(n,i,d)}catch(B){sm(n,i,B)}}function w_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){I_(n,i,l)},function(l){return sm(n,i,l)}):I_(n,i,a)}function I_(n,i,a){i.status="fulfilled",i.value=a,R_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,A_(n,a)))}function sm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,R_(i),i=i.next;while(i!==l)}n.action=null}function R_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function C_(n,i){return i}function x_(n,i){if(ke){var a=it.formState;if(a!==null){e:{var l=Re;if(ke){if(st){t:{for(var f=st,d=Fn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){st=Gn(f.nextSibling),l=f.data==="F!";break e}}Vr(l)}l=!1}l&&(i=a[0])}}return a=un(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C_,lastRenderedState:i},a.queue=l,a=Y_.bind(null,Re,l),l.dispatch=a,l=rm(!1),d=hm.bind(null,Re,!1,l.queue),l=un(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=G1.bind(null,Re,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function D_(n){var i=Et();return N_(i,We,n)}function N_(n,i,a){if(i=nm(n,i,C_)[0],n=oh($i)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Gl(i)}catch(_){throw _===to?Jc:_}else l=i;i=Et();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,ao(9,{destroy:void 0},K1.bind(null,f,a),null)),[l,d,n]}function K1(n,i){n.action=i}function V_(n){var i=Et(),a=We;if(a!==null)return N_(i,a,n);Et(),i=i.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function ao(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=sh(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function O_(){return Et().memoizedState}function lh(n,i,a,l){var f=un();Re.flags|=n,f.memoizedState=ao(1|i,{destroy:void 0},a,l===void 0?null:l)}function uh(n,i,a,l){var f=Et();l=l===void 0?null:l;var d=f.memoizedState.inst;We!==null&&l!==null&&$d(l,We.memoizedState.deps)?f.memoizedState=ao(i,d,a,l):(Re.flags|=n,f.memoizedState=ao(1|i,d,a,l))}function M_(n,i){lh(8390656,8,n,i)}function am(n,i){uh(2048,8,n,i)}function Q1(n){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=sh(),Re.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function P_(n){var i=Et().memoizedState;return Q1({ref:i,nextImpl:n}),function(){if((He&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function k_(n,i){return uh(4,2,n,i)}function L_(n,i){return uh(4,4,n,i)}function U_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function z_(n,i,a){a=a!=null?a.concat([n]):null,uh(4,4,U_.bind(null,i,n),a)}function om(){}function B_(n,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&$d(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function j_(n,i){var a=Et();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&$d(i,l[1]))return l[0];if(l=n(),Js){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l}function lm(n,i,a){return a===void 0||(Xi&1073741824)!==0&&(Oe&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=qv(),Re.lanes|=n,jr|=n,a)}function q_(n,i,a,l){return Sn(a,i)?a:io.current!==null?(n=lm(n,a,l),Sn(n,i)||(Dt=!0),n):(Xi&42)===0||(Xi&1073741824)!==0&&(Oe&261930)===0?(Dt=!0,n.memoizedState=a):(n=qv(),Re.lanes|=n,jr|=n,i)}function F_(n,i,a,l,f){var d=oe.p;oe.p=d!==0&&8>d?d:8;var _=K.T,T={};K.T=T,hm(n,!1,i,a);try{var x=f(),B=K.S;if(B!==null&&B(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var G=q1(x,l);Kl(n,i,G,xn(n))}else Kl(n,i,l,xn(n))}catch(Y){Kl(n,i,{then:function(){},status:"rejected",reason:Y},xn())}finally{oe.p=d,_!==null&&T.types!==null&&(_.types=T.types),K.T=_}}function Y1(){}function um(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=H_(n).queue;F_(n,f,i,Ee,a===null?Y1:function(){return G_(n),a(l)})}function H_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:Ee},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function G_(n){var i=H_(n);i.next===null&&(i=n.alternate.memoizedState),Kl(n,i.next.queue,{},xn())}function cm(){return Xt(uu)}function K_(){return Et().memoizedState}function Q_(){return Et().memoizedState}function X1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();n=Pr(a);var l=kr(i,n,a);l!==null&&(_n(l,i,a),jl(l,i,a)),i={cache:zd()},n.payload=i;return}i=i.return}}function $1(n,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ch(n)?X_(i,a):(a=Cd(n,i,a,l),a!==null&&(_n(a,n,l),$_(a,i,l)))}function Y_(n,i,a){var l=xn();Kl(n,i,a,l)}function Kl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ch(n))X_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,Sn(T,_))return Hc(n,i,f,0),it===null&&Fc(),!1}catch{}if(a=Cd(n,i,f,l),a!==null)return _n(a,n,l),$_(a,i,l),!0}return!1}function hm(n,i,a,l){if(l={lane:2,revertLane:Fm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ch(n)){if(i)throw Error(r(479))}else i=Cd(n,a,l,2),i!==null&&_n(i,n,2)}function ch(n){var i=n.alternate;return n===Re||i!==null&&i===Re}function X_(n,i){ro=ih=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function $_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ml(n,a)}}var Ql={readContext:Xt,use:ah,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Ql.useEffectEvent=mt;var J_={readContext:Xt,use:ah,useCallback:function(n,i){return un().memoizedState=[n,i===void 0?null:i],n},useContext:Xt,useEffect:M_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,lh(4194308,4,U_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return lh(4194308,4,n,i)},useInsertionEffect:function(n,i){lh(4,2,n,i)},useMemo:function(n,i){var a=un();i=i===void 0?null:i;var l=n();if(Js){Mn(!0);try{n()}finally{Mn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=un();if(a!==void 0){var f=a(i);if(Js){Mn(!0);try{a(i)}finally{Mn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=$1.bind(null,Re,n),[l.memoizedState,n]},useRef:function(n){var i=un();return n={current:n},i.memoizedState=n},useState:function(n){n=rm(n);var i=n.queue,a=Y_.bind(null,Re,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:om,useDeferredValue:function(n,i){var a=un();return lm(a,n,i)},useTransition:function(){var n=rm(!1);return n=F_.bind(null,Re,n.queue,!0,!1),un().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Re,f=un();if(ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),it===null)throw Error(r(349));(Oe&127)!==0||__(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,M_(E_.bind(null,l,d,n),[n]),l.flags|=2048,ao(9,{destroy:void 0},v_.bind(null,l,d,a,i),null),a},useId:function(){var n=un(),i=it.identifierPrefix;if(ke){var a=xi,l=Ci;a=(l&~(1<<32-yt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=rh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=F1++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:cm,useFormState:x_,useActionState:x_,useOptimistic:function(n){var i=un();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=hm.bind(null,Re,!0,a),a.dispatch=i,[n,i]},useMemoCache:tm,useCacheRefresh:function(){return un().memoizedState=X1.bind(null,Re)},useEffectEvent:function(n){var i=un(),a={impl:n};return i.memoizedState=a,function(){if((He&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},fm={readContext:Xt,use:ah,useCallback:B_,useContext:Xt,useEffect:am,useImperativeHandle:z_,useInsertionEffect:k_,useLayoutEffect:L_,useMemo:j_,useReducer:oh,useRef:O_,useState:function(){return oh($i)},useDebugValue:om,useDeferredValue:function(n,i){var a=Et();return q_(a,We.memoizedState,n,i)},useTransition:function(){var n=oh($i)[0],i=Et().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:y_,useId:K_,useHostTransitionStatus:cm,useFormState:D_,useActionState:D_,useOptimistic:function(n,i){var a=Et();return S_(a,We,n,i)},useMemoCache:tm,useCacheRefresh:Q_};fm.useEffectEvent=P_;var Z_={readContext:Xt,use:ah,useCallback:B_,useContext:Xt,useEffect:am,useImperativeHandle:z_,useInsertionEffect:k_,useLayoutEffect:L_,useMemo:j_,useReducer:im,useRef:O_,useState:function(){return im($i)},useDebugValue:om,useDeferredValue:function(n,i){var a=Et();return We===null?lm(a,n,i):q_(a,We.memoizedState,n,i)},useTransition:function(){var n=im($i)[0],i=Et().memoizedState;return[typeof n=="boolean"?n:Gl(n),i]},useSyncExternalStore:y_,useId:K_,useHostTransitionStatus:cm,useFormState:V_,useActionState:V_,useOptimistic:function(n,i){var a=Et();return We!==null?S_(a,We,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:tm,useCacheRefresh:Q_};Z_.useEffectEvent=P_;function dm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var mm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=xn(),f=Pr(l);f.payload=i,a!=null&&(f.callback=a),i=kr(n,f,l),i!==null&&(_n(i,n,l),jl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=xn(),f=Pr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=kr(n,f,l),i!==null&&(_n(i,n,l),jl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=xn(),l=Pr(a);l.tag=2,i!=null&&(l.callback=i),i=kr(n,l,a),i!==null&&(_n(i,n,a),jl(i,n,a))}};function W_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ol(a,l)||!Ol(f,d):!0}function ev(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&mm.enqueueReplaceState(i,i.state,null)}function Zs(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=b({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function tv(n){qc(n)}function nv(n){console.error(n)}function iv(n){qc(n)}function hh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function rv(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function gm(n,i,a){return a=Pr(a),a.tag=3,a.payload={element:null},a.callback=function(){hh(n,i)},a}function sv(n){return n=Pr(n),n.tag=3,n}function av(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){rv(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){rv(i,a,l),typeof f!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function J1(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Za(i,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Sh():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Zc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Bm(n,l,f)),!1;case 22:return a.flags|=65536,l===Zc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Bm(n,l,f)),!1}throw Error(r(435,a.tag))}return Bm(n,l,f),Sh(),!1}if(ke)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Md&&(n=Error(r(422),{cause:l}),kl(Bn(n,a)))):(l!==Md&&(i=Error(r(423),{cause:l}),kl(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=gm(n.stateNode,l,f),Gd(n,f),gt!==4&&(gt=2)),!1;var d=Error(r(520),{cause:l});if(d=Bn(d,a),tu===null?tu=[d]:tu.push(d),gt!==4&&(gt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=gm(a.stateNode,l,n),Gd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(qr===null||!qr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=sv(f),av(f,n,a,l),Gd(a,f),!1}a=a.return}while(a!==null);return!1}var pm=Error(r(461)),Dt=!1;function $t(n,i,a,l){i.child=n===null?c_(i,null,a,l):$s(i,n.child,a,l)}function ov(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Ks(i),l=Jd(n,i,a,_,d,f),T=Zd(),n!==null&&!Dt?(Wd(n,i,f),Ji(n,i,f)):(ke&&T&&Vd(i),i.flags|=1,$t(n,i,l,f),i.child)}function lv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!xd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,uv(n,i,d,l,f)):(n=Kc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Am(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ol,a(_,l)&&n.ref===i.ref)return Ji(n,i,f)}return i.flags|=1,n=Gi(d,l),n.ref=i.ref,n.return=i,i.child=n}function uv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Ol(d,l)&&n.ref===i.ref)if(Dt=!1,i.pendingProps=l=d,Am(n,f))(n.flags&131072)!==0&&(Dt=!0);else return i.lanes=n.lanes,Ji(n,i,f)}return ym(n,i,a,l,f)}function cv(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return hv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&$c(i,d!==null?d.cachePool:null),d!==null?d_(i,d):Qd(),m_(i);else return l=i.lanes=536870912,hv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?($c(i,d.cachePool),d_(i,d),Ur(),i.memoizedState=null):(n!==null&&$c(i,null),Qd(),Ur());return $t(n,i,f,a),i.child}function Yl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function hv(n,i,a,l,f){var d=jd();return d=d===null?null:{parent:Ct._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&$c(i,null),Qd(),m_(i),n!==null&&Za(n,i,l,!0),i.childLanes=f,null}function fh(n,i){return i=mh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function fv(n,i,a){return $s(i,n.child,null,a),n=fh(i,i.pendingProps),n.flags|=2,In(i),i.memoizedState=null,n}function Z1(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(ke){if(l.mode==="hidden")return n=fh(i,l),i.lanes=536870912,Yl(null,n);if(Xd(i),(n=st)?(n=AE(n,Fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Dr!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=Xy(n),a.return=i,i.child=a,Yt=i,st=null)):n=null,n===null)throw Vr(i);return i.lanes=536870912,null}return fh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Xd(i),f)if(i.flags&256)i.flags&=-257,i=fv(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Dt||Za(n,i,a,!1),f=(a&n.childLanes)!==0,Dt||f){if(l=it,l!==null&&(_=gl(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,qs(n,_),_n(l,n,_),pm;Sh(),i=fv(n,i,a)}else n=d.treeContext,st=Gn(_.nextSibling),Yt=i,ke=!0,Nr=null,Fn=!1,n!==null&&Zy(i,n),i=fh(i,l),i.flags|=4096;return i}return n=Gi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function dh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function ym(n,i,a,l,f){return Ks(i),a=Jd(n,i,a,l,void 0,f),l=Zd(),n!==null&&!Dt?(Wd(n,i,f),Ji(n,i,f)):(ke&&l&&Vd(i),i.flags|=1,$t(n,i,a,f),i.child)}function dv(n,i,a,l,f,d){return Ks(i),i.updateQueue=null,a=p_(i,l,a,f),g_(n),l=Zd(),n!==null&&!Dt?(Wd(n,i,d),Ji(n,i,d)):(ke&&l&&Vd(i),i.flags|=1,$t(n,i,a,d),i.child)}function mv(n,i,a,l,f){if(Ks(i),i.stateNode===null){var d=Ya,_=a.contextType;typeof _=="object"&&_!==null&&(d=Xt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=mm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Fd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Xt(_):Ya,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(dm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&mm.enqueueReplaceState(d,d.state,null),Fl(i,l,d,f),ql(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,x=Zs(a,T);d.props=x;var B=d.context,G=a.contextType;_=Ya,typeof G=="object"&&G!==null&&(_=Xt(G));var Y=a.getDerivedStateFromProps;G=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||B!==_)&&ev(i,d,l,_),Mr=!1;var q=i.memoizedState;d.state=q,Fl(i,l,d,f),ql(),B=i.memoizedState,T||q!==B||Mr?(typeof Y=="function"&&(dm(i,a,Y,l),B=i.memoizedState),(x=Mr||W_(i,a,x,l,q,B,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Hd(n,i),_=i.memoizedProps,G=Zs(a,_),d.props=G,Y=i.pendingProps,q=d.context,B=a.contextType,x=Ya,typeof B=="object"&&B!==null&&(x=Xt(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Y||q!==x)&&ev(i,d,l,x),Mr=!1,q=i.memoizedState,d.state=q,Fl(i,l,d,f),ql();var H=i.memoizedState;_!==Y||q!==H||Mr||n!==null&&n.dependencies!==null&&Yc(n.dependencies)?(typeof T=="function"&&(dm(i,a,T,l),H=i.memoizedState),(G=Mr||W_(i,a,G,l,q,H,x)||n!==null&&n.dependencies!==null&&Yc(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=x,l=G):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,dh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=$s(i,n.child,null,f),i.child=$s(i,null,a,f)):$t(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Ji(n,i,f),n}function gv(n,i,a,l){return Hs(),i.flags|=256,$t(n,i,a,l),i.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(n){return{baseLanes:n,cachePool:r_()}}function Em(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function pv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(vt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(ke){if(f?Lr(i):Ur(),(n=st)?(n=AE(n,Fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Dr!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=Xy(n),a.return=i,i.child=a,Yt=i,st=null)):n=null,n===null)throw Vr(i);return ng(n)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(Ur(),f=i.mode,T=mh({mode:"hidden",children:T},f),l=Fs(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=vm(a),l.childLanes=Em(n,_,a),i.memoizedState=_m,Yl(null,l)):(Lr(i),Tm(i,T))}var x=n.memoizedState;if(x!==null&&(T=x.dehydrated,T!==null)){if(d)i.flags&256?(Lr(i),i.flags&=-257,i=bm(n,i,a)):i.memoizedState!==null?(Ur(),i.child=n.child,i.flags|=128,i=null):(Ur(),T=l.fallback,f=i.mode,l=mh({mode:"visible",children:l.children},f),T=Fs(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,$s(i,n.child,null,a),l=i.child,l.memoizedState=vm(a),l.childLanes=Em(n,_,a),i.memoizedState=_m,i=Yl(null,l));else if(Lr(i),ng(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,kl({value:l,source:null,stack:null}),i=bm(n,i,a)}else if(Dt||Za(n,i,a,!1),_=(a&n.childLanes)!==0,Dt||_){if(_=it,_!==null&&(l=gl(_,a),l!==0&&l!==x.retryLane))throw x.retryLane=l,qs(n,l),_n(_,n,l),pm;tg(T)||Sh(),i=bm(n,i,a)}else tg(T)?(i.flags|=192,i.child=n.child,i=null):(n=x.treeContext,st=Gn(T.nextSibling),Yt=i,ke=!0,Nr=null,Fn=!1,n!==null&&Zy(i,n),i=Tm(i,l.children),i.flags|=4096);return i}return f?(Ur(),T=l.fallback,f=i.mode,x=n.child,B=x.sibling,l=Gi(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,B!==null?T=Gi(B,T):(T=Fs(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Yl(null,l),l=i.child,T=n.child.memoizedState,T===null?T=vm(a):(f=T.cachePool,f!==null?(x=Ct._currentValue,f=f.parent!==x?{parent:x,pool:x}:f):f=r_(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=Em(n,_,a),i.memoizedState=_m,Yl(n.child,l)):(Lr(i),a=n.child,n=a.sibling,a=Gi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Tm(n,i){return i=mh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function mh(n,i){return n=An(22,n,null,i),n.lanes=0,n}function bm(n,i,a){return $s(i,n.child,null,a),n=Tm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function yv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Ld(n.return,i,a)}function Sm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function _v(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=vt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,le(vt,_),$t(n,i,l,a),l=ke?Pl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yv(n,a,i);else if(n.tag===19)yv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&nh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Sm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&nh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Sm(i,!0,a,null,d,l);break;case"together":Sm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Ji(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),jr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Za(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Gi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Gi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Am(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Yc(n)))}function W1(n,i,a){switch(i.tag){case 3:kt(i,i.stateNode.containerInfo),Or(i,Ct,n.memoizedState.cache),Hs();break;case 27:case 5:As(i);break;case 4:kt(i,i.stateNode.containerInfo);break;case 10:Or(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Lr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?pv(n,i,a):(Lr(i),n=Ji(n,i,a),n!==null?n.sibling:null);Lr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Za(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return _v(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(vt,vt.current),l)break;return null;case 22:return i.lanes=0,cv(n,i,a,i.pendingProps);case 24:Or(i,Ct,n.memoizedState.cache)}return Ji(n,i,a)}function vv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Dt=!0;else{if(!Am(n,a)&&(i.flags&128)===0)return Dt=!1,W1(n,i,a);Dt=(n.flags&131072)!==0}else Dt=!1,ke&&(i.flags&1048576)!==0&&Jy(i,Pl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Ys(i.elementType),i.type=n,typeof n=="function")xd(n)?(l=Zs(n,l),i.tag=1,i=mv(null,i,n,l,a)):(i.tag=0,i=ym(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===ye){i.tag=11,i=ov(null,i,n,l,a);break e}else if(f===I){i.tag=14,i=lv(null,i,n,l,a);break e}}throw i=lt(n)||n,Error(r(306,i,""))}}return i;case 0:return ym(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Zs(l,i.pendingProps),mv(n,i,l,f,a);case 3:e:{if(kt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Hd(n,i),Fl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Or(i,Ct,l),l!==d.cache&&Ud(i,[Ct],a,!0),ql(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=gv(n,i,l,a);break e}else if(l!==f){f=Bn(Error(r(424)),i),kl(f),i=gv(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,st=Gn(n.firstChild),Yt=i,ke=!0,Nr=null,Fn=!0,a=c_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Hs(),l===f){i=Ji(n,i,a);break e}$t(n,i,l,a)}i=i.child}return i;case 26:return dh(n,i),n===null?(a=DE(i.type,null,i.pendingProps,null))?i.memoizedState=a:ke||(a=i.type,n=i.pendingProps,l=Dh(Ce.current).createElement(a),l[wt]=i,l[qt]=n,Jt(l,a,n),It(l),i.stateNode=l):i.memoizedState=DE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return As(i),n===null&&ke&&(l=i.stateNode=RE(i.type,i.pendingProps,Ce.current),Yt=i,Fn=!0,f=st,Kr(i.type)?(ig=f,st=Gn(l.firstChild)):st=f),$t(n,i,i.pendingProps.children,a),dh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ke&&((f=l=st)&&(l=xw(l,i.type,i.pendingProps,Fn),l!==null?(i.stateNode=l,Yt=i,st=Gn(l.firstChild),Fn=!1,f=!0):f=!1),f||Vr(i)),As(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Zm(f,d)?l=null:_!==null&&Zm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Jd(n,i,H1,null,null,a),uu._currentValue=f),dh(n,i),$t(n,i,l,a),i.child;case 6:return n===null&&ke&&((n=a=st)&&(a=Dw(a,i.pendingProps,Fn),a!==null?(i.stateNode=a,Yt=i,st=null,n=!0):n=!1),n||Vr(i)),null;case 13:return pv(n,i,a);case 4:return kt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=$s(i,null,l,a):$t(n,i,l,a),i.child;case 11:return ov(n,i,i.type,i.pendingProps,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Or(i,i.type,l.value),$t(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ks(i),f=Xt(f),l=l(f),i.flags|=1,$t(n,i,l,a),i.child;case 14:return lv(n,i,i.type,i.pendingProps,a);case 15:return uv(n,i,i.type,i.pendingProps,a);case 19:return _v(n,i,a);case 31:return Z1(n,i,a);case 22:return cv(n,i,a,i.pendingProps);case 24:return Ks(i),l=Xt(Ct),n===null?(f=jd(),f===null&&(f=it,d=zd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Fd(i),Or(i,Ct,f)):((n.lanes&a)!==0&&(Hd(n,i),Fl(i,null,null,a),ql()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Or(i,Ct,l)):(l=d.cache,Or(i,Ct,l),l!==f.cache&&Ud(i,[Ct],a,!0))),$t(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Zi(n){n.flags|=4}function wm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Kv())n.flags|=8192;else throw Xs=Zc,qd}else n.flags&=-16777217}function Ev(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!PE(i))if(Kv())n.flags|=8192;else throw Xs=Zc,qd}function gh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Tc():536870912,n.lanes|=i,co|=i)}function Xl(n,i){if(!ke)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function at(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function ew(n,i,a){var l=i.pendingProps;switch(Od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return at(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Yi(Ct),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ja(i)?Zi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pd())),at(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(Zi(i),d!==null?(at(i),Ev(i,d)):(at(i),wm(i,f,null,l,a))):d?d!==n.memoizedState?(Zi(i),at(i),Ev(i,d)):(at(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&Zi(i),at(i),wm(i,f,n,l,a)),null;case 27:if(xa(i),a=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Zi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return at(i),null}n=he.current,Ja(i)?Wy(i):(n=RE(f,l,a),i.stateNode=n,Zi(i))}return at(i),null;case 5:if(xa(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Zi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return at(i),null}if(d=he.current,Ja(i))Wy(i);else{var _=Dh(Ce.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[wt]=i,d[qt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Jt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Zi(i)}}return at(i),wm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Zi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ce.current,Ja(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Yt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[wt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||pE(n.nodeValue,a)),n||Vr(i,!0)}else n=Dh(n).createTextNode(l),n[wt]=i,i.stateNode=n}return at(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=Ja(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[wt]=i}else Hs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),n=!1}else a=Pd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(r(558))}return at(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ja(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[wt]=i}else Hs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),f=!1}else f=Pd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),gh(i,i.updateQueue),at(i),null);case 4:return ut(),n===null&&Qm(i.stateNode.containerInfo),at(i),null;case 10:return Yi(i.type),at(i),null;case 19:if($(vt),l=i.memoizedState,l===null)return at(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)Xl(l,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=nh(n),d!==null){for(i.flags|=128,Xl(l,!1),n=d.updateQueue,i.updateQueue=n,gh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Yy(a,n),a=a.sibling;return le(vt,vt.current&1|2),ke&&Ki(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&on()>Eh&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304)}else{if(!f)if(n=nh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,gh(i,n),Xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!ke)return at(i),null}else 2*on()-l.renderingStartTime>Eh&&a!==536870912&&(i.flags|=128,f=!0,Xl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=on(),n.sibling=null,a=vt.current,le(vt,f?a&1|2:a&1),ke&&Ki(i,l.treeForkCount),n):(at(i),null);case 22:case 23:return In(i),Yd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),a=i.updateQueue,a!==null&&gh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&$(Qs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Yi(Ct),at(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function tw(n,i){switch(Od(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Yi(Ct),ut(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xa(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(r(340));Hs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(In(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Hs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return $(vt),null;case 4:return ut(),null;case 10:return Yi(i.type),null;case 22:case 23:return In(i),Yd(),n!==null&&$(Qs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Yi(Ct),null;case 25:return null;default:return null}}function Tv(n,i){switch(Od(i),i.tag){case 3:Yi(Ct),ut();break;case 26:case 27:case 5:xa(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:$(vt);break;case 10:Yi(i.type);break;case 22:case 23:In(i),Yd(),n!==null&&$(Qs);break;case 24:Yi(Ct)}}function $l(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){Xe(i,i.return,T)}}function zr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var x=a,B=T;try{B()}catch(G){Xe(f,x,G)}}}l=l.next}while(l!==d)}}catch(G){Xe(i,i.return,G)}}function bv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{f_(i,a)}catch(l){Xe(n,n.return,l)}}}function Sv(n,i,a){a.props=Zs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(n,i,l)}}function Jl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Xe(n,i,f)}}function Di(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xe(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xe(n,i,f)}else a.current=null}function Av(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xe(n,n.return,f)}}function Im(n,i,a){try{var l=n.stateNode;Sw(l,n.type,a,i),l[qt]=i}catch(f){Xe(n,n.return,f)}}function wv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Kr(n.type)||n.tag===4}function Rm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Kr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wn));else if(l!==4&&(l===27&&Kr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Cm(n,i,a),n=n.sibling;n!==null;)Cm(n,i,a),n=n.sibling}function ph(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Kr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ph(n,i,a),n=n.sibling;n!==null;)ph(n,i,a),n=n.sibling}function Iv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Jt(i,l,a),i[wt]=n,i[qt]=a}catch(d){Xe(n,n.return,d)}}var Wi=!1,Nt=!1,xm=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function nw(n,i){if(n=n.containerInfo,$m=Lh,n=zy(n),bd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,x=-1,B=0,G=0,Y=n,q=null;t:for(;;){for(var H;Y!==a||f!==0&&Y.nodeType!==3||(T=_+f),Y!==d||l!==0&&Y.nodeType!==3||(x=_+l),Y.nodeType===3&&(_+=Y.nodeValue.length),(H=Y.firstChild)!==null;)q=Y,Y=H;for(;;){if(Y===n)break t;if(q===a&&++B===f&&(T=_),q===d&&++G===l&&(x=_),(H=Y.nextSibling)!==null)break;Y=q,q=Y.parentNode}Y=H}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jm={focusedElem:n,selectionRange:a},Lh=!1,Ht=i;Ht!==null;)if(i=Ht,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ht=n;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var de=Zs(a.type,f);n=l.getSnapshotBeforeUpdate(de,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){Xe(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)eg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":eg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ht=n;break}Ht=i.return}}function Cv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:tr(n,a),l&4&&$l(5,a);break;case 1:if(tr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var f=Zs(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}l&64&&bv(a),l&512&&Jl(a,a.return);break;case 3:if(tr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{f_(n,i)}catch(_){Xe(a,a.return,_)}}break;case 27:i===null&&l&4&&Iv(a);case 26:case 5:tr(n,a),i===null&&l&4&&Av(a),l&512&&Jl(a,a.return);break;case 12:tr(n,a);break;case 31:tr(n,a),l&4&&Nv(n,a);break;case 13:tr(n,a),l&4&&Vv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=hw.bind(null,a),Nw(n,a))));break;case 22:if(l=a.memoizedState!==null||Wi,!l){i=i!==null&&i.memoizedState!==null||Nt,f=Wi;var d=Nt;Wi=l,(Nt=i)&&!d?nr(n,a,(a.subtreeFlags&8772)!==0):tr(n,a),Wi=f,Nt=d}break;case 30:break;default:tr(n,a)}}function xv(n){var i=n.alternate;i!==null&&(n.alternate=null,xv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ma(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,mn=!1;function er(n,i,a){for(a=a.child;a!==null;)Dv(n,i,a),a=a.sibling}function Dv(n,i,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Nt||Di(a,i),er(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||Di(a,i);var l=ht,f=mn;Kr(a.type)&&(ht=a.stateNode,mn=!1),er(n,i,a),au(a.stateNode),ht=l,mn=f;break;case 5:Nt||Di(a,i);case 6:if(l=ht,f=mn,ht=null,er(n,i,a),ht=l,mn=f,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){Xe(a,i,d)}else try{ht.removeChild(a.stateNode)}catch(d){Xe(a,i,d)}break;case 18:ht!==null&&(mn?(n=ht,bE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),vo(n)):bE(ht,a.stateNode));break;case 4:l=ht,f=mn,ht=a.stateNode.containerInfo,mn=!0,er(n,i,a),ht=l,mn=f;break;case 0:case 11:case 14:case 15:zr(2,a,i),Nt||zr(4,a,i),er(n,i,a);break;case 1:Nt||(Di(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Sv(a,i,l)),er(n,i,a);break;case 21:er(n,i,a);break;case 22:Nt=(l=Nt)||a.memoizedState!==null,er(n,i,a),Nt=l;break;default:er(n,i,a)}}function Nv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{vo(n)}catch(a){Xe(i,i.return,a)}}}function Vv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{vo(n)}catch(a){Xe(i,i.return,a)}}function iw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Rv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Rv),i;default:throw Error(r(435,n.tag))}}function yh(n,i){var a=iw(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=fw.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Kr(T.type)){ht=T.stateNode,mn=!1;break e}break;case 5:ht=T.stateNode,mn=!1;break e;case 3:case 4:ht=T.stateNode.containerInfo,mn=!0;break e}T=T.return}if(ht===null)throw Error(r(160));Dv(d,_,f),ht=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ov(i,n),i=i.sibling}var si=null;function Ov(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(zr(3,n,n.return),$l(3,n),zr(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),l&64&&Wi&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=si;if(gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pi]||d[wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Jt(d,l,a),d[wt]=n,It(d),l=d;break e;case"link":var _=OE("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;case"meta":if(_=OE("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[wt]=n,It(d),l=d}n.stateNode=l}else ME(f,n.type,n.stateNode);else n.stateNode=VE(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?ME(f,n.type,n.stateNode):VE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Im(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),a!==null&&l&4&&Im(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Nt||a===null||Di(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(de){Xe(n,n.return,de)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Im(n,f,a!==null?a.memoizedProps:f)),l&1024&&(xm=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(de){Xe(n,n.return,de)}}break;case 3:if(Oh=null,f=si,si=Nh(i.containerInfo),gn(i,n),si=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{vo(i.containerInfo)}catch(de){Xe(n,n.return,de)}xm&&(xm=!1,Mv(n));break;case 4:l=si,si=Nh(n.stateNode.containerInfo),gn(i,n),pn(n),si=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vh=on()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 22:f=n.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,B=Wi,G=Nt;if(Wi=B||f,Nt=G||x,gn(i,n),Nt=G,Wi=B,pn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||x||Wi||Nt||Ws(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=x.stateNode;var Y=x.memoizedProps.style,q=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(de){Xe(x,x.return,de)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(de){Xe(x,x.return,de)}}}else if(i.tag===18){if(a===null){x=i;try{var H=x.stateNode;f?SE(H,!0):SE(x.stateNode,!1)}catch(de){Xe(x,x.return,de)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,yh(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,yh(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(wv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Rm(n);ph(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var T=Rm(n);ph(n,T,_);break;case 3:case 4:var x=a.stateNode.containerInfo,B=Rm(n);Cm(n,B,x);break;default:throw Error(r(161))}}catch(G){Xe(n,n.return,G)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Mv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Mv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function tr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cv(n,i.alternate,i),i=i.sibling}function Ws(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:zr(4,i,i.return),Ws(i);break;case 1:Di(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Sv(i,i.return,a),Ws(i);break;case 27:au(i.stateNode);case 26:case 5:Di(i,i.return),Ws(i);break;case 22:i.memoizedState===null&&Ws(i);break;case 30:Ws(i);break;default:Ws(i)}n=n.sibling}}function nr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:nr(f,d,a),$l(4,d);break;case 1:if(nr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){Xe(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)h_(x[f],T)}catch(B){Xe(l,l.return,B)}}a&&_&64&&bv(d),Jl(d,d.return);break;case 27:Iv(d);case 26:case 5:nr(f,d,a),a&&l===null&&_&4&&Av(d),Jl(d,d.return);break;case 12:nr(f,d,a);break;case 31:nr(f,d,a),a&&_&4&&Nv(f,d);break;case 13:nr(f,d,a),a&&_&4&&Vv(f,d);break;case 22:d.memoizedState===null&&nr(f,d,a),Jl(d,d.return);break;case 30:break;default:nr(f,d,a)}i=i.sibling}}function Dm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ll(a))}function Nm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n))}function ai(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pv(n,i,a,l),i=i.sibling}function Pv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(n,i,a,l),f&2048&&$l(9,i);break;case 1:ai(n,i,a,l);break;case 3:ai(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n)));break;case 12:if(f&2048){ai(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){Xe(i,i.return,x)}}else ai(n,i,a,l);break;case 31:ai(n,i,a,l);break;case 13:ai(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ai(n,i,a,l):Zl(n,i):d._visibility&2?ai(n,i,a,l):(d._visibility|=2,oo(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Dm(_,i);break;case 24:ai(n,i,a,l),f&2048&&Nm(i.alternate,i);break;default:ai(n,i,a,l)}}function oo(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,T=a,x=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:oo(d,_,T,x,f),$l(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?oo(d,_,T,x,f):Zl(d,_):(G._visibility|=2,oo(d,_,T,x,f)),f&&B&2048&&Dm(_.alternate,_);break;case 24:oo(d,_,T,x,f),f&&B&2048&&Nm(_.alternate,_);break;default:oo(d,_,T,x,f)}i=i.sibling}}function Zl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Zl(a,l),f&2048&&Dm(l.alternate,l);break;case 24:Zl(a,l),f&2048&&Nm(l.alternate,l);break;default:Zl(a,l)}i=i.sibling}}var Wl=8192;function lo(n,i,a){if(n.subtreeFlags&Wl)for(n=n.child;n!==null;)kv(n,i,a),n=n.sibling}function kv(n,i,a){switch(n.tag){case 26:lo(n,i,a),n.flags&Wl&&n.memoizedState!==null&&Fw(a,si,n.memoizedState,n.memoizedProps);break;case 5:lo(n,i,a);break;case 3:case 4:var l=si;si=Nh(n.stateNode.containerInfo),lo(n,i,a),si=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,lo(n,i,a),Wl=l):lo(n,i,a));break;default:lo(n,i,a)}}function Lv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function eu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,zv(l,n)}Lv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Uv(n),n=n.sibling}function Uv(n){switch(n.tag){case 0:case 11:case 15:eu(n),n.flags&2048&&zr(9,n,n.return);break;case 3:eu(n);break;case 12:eu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,_h(n)):eu(n);break;default:eu(n)}}function _h(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,zv(l,n)}Lv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:zr(8,i,i.return),_h(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,_h(i));break;default:_h(i)}n=n.sibling}}function zv(n,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:zr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=n;Ht!==null;){l=Ht;var f=l.sibling,d=l.return;if(xv(l),l===a){Ht=null;break e}if(f!==null){f.return=d,Ht=f;break e}Ht=d}}}var rw={getCacheForType:function(n){var i=Xt(Ct),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Xt(Ct).controller.signal}},sw=typeof WeakMap=="function"?WeakMap:Map,He=0,it=null,Ne=null,Oe=0,Ye=0,Rn=null,Br=!1,uo=!1,Vm=!1,ir=0,gt=0,jr=0,ea=0,Om=0,Cn=0,co=0,tu=null,yn=null,Mm=!1,vh=0,Bv=0,Eh=1/0,Th=null,qr=null,Ut=0,Fr=null,ho=null,rr=0,Pm=0,km=null,jv=null,nu=0,Lm=null;function xn(){return(He&2)!==0&&Oe!==0?Oe&-Oe:K.T!==null?Fm():bc()}function qv(){if(Cn===0)if((Oe&536870912)===0||ke){var n=Rs;Rs<<=1,(Rs&3932160)===0&&(Rs=262144),Cn=n}else Cn=536870912;return n=wn.current,n!==null&&(n.flags|=32),Cn}function _n(n,i,a){(n===it&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&(fo(n,0),Hr(n,Oe,Cn,!1)),Cs(n,a),((He&2)===0||n!==it)&&(n===it&&((He&2)===0&&(ea|=a),gt===4&&Hr(n,Oe,Cn,!1)),Ni(n))}function Fv(n,i,a){if((He&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||$n(n,i),f=l?lw(n,i):zm(n,i,!0),d=l;do{if(f===0){uo&&!l&&Hr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!aw(a)){f=zm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=tu;var x=T.current.memoizedState.isDehydrated;if(x&&(fo(T,_).flags|=256),_=zm(T,_,!1),_!==2){if(Vm&&!x){T.errorRecoveryDisabledLanes|=d,ea|=d,f=4;break e}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){fo(n,0),Hr(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Hr(l,i,Cn,!Br);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=vh+300-on(),10<f)){if(Hr(l,i,Cn,!Br),di(l,0,!0)!==0)break e;rr=i,l.timeoutHandle=EE(Hv.bind(null,l,a,yn,Th,Mm,i,Cn,ea,co,Br,d,"Throttled",-0,0),f);break e}Hv(l,a,yn,Th,Mm,i,Cn,ea,co,Br,d,null,-0,0)}}break}while(!0);Ni(n)}function Hv(n,i,a,l,f,d,_,T,x,B,G,Y,q,H){if(n.timeoutHandle=-1,Y=i.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},kv(i,d,Y);var de=(d&62914560)===d?vh-on():(d&4194048)===d?Bv-on():0;if(de=Hw(Y,de),de!==null){rr=d,n.cancelPendingCommit=de(Zv.bind(null,n,i,d,a,l,f,_,T,x,G,Y,null,q,H)),Hr(n,d,_,!B);return}}Zv(n,i,d,a,l,f,_,T,x)}function aw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hr(n,i,a,l){i&=~Om,i&=~ea,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-yt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&xs(n,a,i)}function bh(){return(He&6)===0?(iu(0),!1):!0}function Um(){if(Ne!==null){if(Ye===0)var n=Ne.return;else n=Ne,Qi=Gs=null,em(n),no=null,zl=0,n=Ne;for(;n!==null;)Tv(n.alternate,n),n=n.return;Ne=null}}function fo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Iw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),rr=0,Um(),it=n,Ne=a=Gi(n.current,null),Oe=i,Ye=0,Rn=null,Br=!1,uo=$n(n,i),Vm=!1,co=Cn=Om=ea=jr=gt=0,yn=tu=null,Mm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-yt(l),d=1<<f;i|=n[f],l&=~d}return ir=i,Fc(),a}function Gv(n,i){Re=null,K.H=Ql,i===to||i===Jc?(i=o_(),Ye=3):i===qd?(i=o_(),Ye=4):Ye=i===pm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Ne===null&&(gt=1,hh(n,Bn(i,n.current)))}function Kv(){var n=wn.current;return n===null?!0:(Oe&4194048)===Oe?Hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?n===Hn:!1}function Qv(){var n=K.H;return K.H=Ql,n===null?Ql:n}function Yv(){var n=K.A;return K.A=rw,n}function Sh(){gt=4,Br||(Oe&4194048)!==Oe&&wn.current!==null||(uo=!0),(jr&134217727)===0&&(ea&134217727)===0||it===null||Hr(it,Oe,Cn,!1)}function zm(n,i,a){var l=He;He|=2;var f=Qv(),d=Yv();(it!==n||Oe!==i)&&(Th=null,fo(n,i)),i=!1;var _=gt;e:do try{if(Ye!==0&&Ne!==null){var T=Ne,x=Rn;switch(Ye){case 8:Um(),_=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var B=Ye;if(Ye=0,Rn=null,mo(n,T,x,B),a&&uo){_=0;break e}break;default:B=Ye,Ye=0,Rn=null,mo(n,T,x,B)}}ow(),_=gt;break}catch(G){Gv(n,G)}while(!0);return i&&n.shellSuspendCounter++,Qi=Gs=null,He=l,K.H=f,K.A=d,Ne===null&&(it=null,Oe=0,Fc()),_}function ow(){for(;Ne!==null;)Xv(Ne)}function lw(n,i){var a=He;He|=2;var l=Qv(),f=Yv();it!==n||Oe!==i?(Th=null,Eh=on()+500,fo(n,i)):uo=$n(n,i);e:do try{if(Ye!==0&&Ne!==null){i=Ne;var d=Rn;t:switch(Ye){case 1:Ye=0,Rn=null,mo(n,i,d,1);break;case 2:case 9:if(s_(d)){Ye=0,Rn=null,$v(i);break}i=function(){Ye!==2&&Ye!==9||it!==n||(Ye=7),Ni(n)},d.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:s_(d)?(Ye=0,Rn=null,$v(i)):(Ye=0,Rn=null,mo(n,i,d,7));break;case 5:var _=null;switch(Ne.tag){case 26:_=Ne.memoizedState;case 5:case 27:var T=Ne;if(_?PE(_):T.stateNode.complete){Ye=0,Rn=null;var x=T.sibling;if(x!==null)Ne=x;else{var B=T.return;B!==null?(Ne=B,Ah(B)):Ne=null}break t}}Ye=0,Rn=null,mo(n,i,d,5);break;case 6:Ye=0,Rn=null,mo(n,i,d,6);break;case 8:Um(),gt=6;break e;default:throw Error(r(462))}}uw();break}catch(G){Gv(n,G)}while(!0);return Qi=Gs=null,K.H=l,K.A=f,He=a,Ne!==null?0:(it=null,Oe=0,Fc(),gt)}function uw(){for(;Ne!==null&&!gd();)Xv(Ne)}function Xv(n){var i=vv(n.alternate,n,ir);n.memoizedProps=n.pendingProps,i===null?Ah(n):Ne=i}function $v(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=dv(a,i,i.pendingProps,i.type,void 0,Oe);break;case 11:i=dv(a,i,i.pendingProps,i.type.render,i.ref,Oe);break;case 5:em(i);default:Tv(a,i),i=Ne=Yy(i,ir),i=vv(a,i,ir)}n.memoizedProps=n.pendingProps,i===null?Ah(n):Ne=i}function mo(n,i,a,l){Qi=Gs=null,em(i),no=null,zl=0;var f=i.return;try{if(J1(n,f,i,a,Oe)){gt=1,hh(n,Bn(a,n.current)),Ne=null;return}}catch(d){if(f!==null)throw Ne=f,d;gt=1,hh(n,Bn(a,n.current)),Ne=null;return}i.flags&32768?(ke||l===1?n=!0:uo||(Oe&536870912)!==0?n=!1:(Br=n=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Jv(i,n)):Ah(i)}function Ah(n){var i=n;do{if((i.flags&32768)!==0){Jv(i,Br);return}n=i.return;var a=ew(i.alternate,i,ir);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=n}while(i!==null);gt===0&&(gt=5)}function Jv(n,i){do{var a=tw(n.alternate,n);if(a!==null){a.flags&=32767,Ne=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ne=n;return}Ne=n=a}while(n!==null);gt=6,Ne=null}function Zv(n,i,a,l,f,d,_,T,x){n.cancelPendingCommit=null;do wh();while(Ut!==0);if((He&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Rd,_d(n,a,d,_,T,x),n===it&&(Ne=it=null,Oe=0),ho=i,Fr=n,rr=a,Pm=d,km=f,jv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,dw(Er,function(){return iE(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=oe.p,oe.p=2,_=He,He|=4;try{nw(n,i,a)}finally{He=_,oe.p=f,K.T=l}}Ut=1,Wv(),eE(),tE()}}function Wv(){if(Ut===1){Ut=0;var n=Fr,i=ho,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var f=He;He|=4;try{Ov(i,n);var d=Jm,_=zy(n.containerInfo),T=d.focusedElem,x=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Uy(T.ownerDocument.documentElement,T)){if(x!==null&&bd(T)){var B=x.start,G=x.end;if(G===void 0&&(G=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(G,T.value.length);else{var Y=T.ownerDocument||document,q=Y&&Y.defaultView||window;if(q.getSelection){var H=q.getSelection(),de=T.textContent.length,Te=Math.min(x.start,de),tt=x.end===void 0?Te:Math.min(x.end,de);!H.extend&&Te>tt&&(_=tt,tt=Te,Te=_);var M=Ly(T,Te),D=Ly(T,tt);if(M&&D&&(H.rangeCount!==1||H.anchorNode!==M.node||H.anchorOffset!==M.offset||H.focusNode!==D.node||H.focusOffset!==D.offset)){var U=Y.createRange();U.setStart(M.node,M.offset),H.removeAllRanges(),Te>tt?(H.addRange(U),H.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),H.addRange(U))}}}}for(Y=[],H=T;H=H.parentNode;)H.nodeType===1&&Y.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Y.length;T++){var Q=Y[T];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Lh=!!$m,Jm=$m=null}finally{He=f,oe.p=l,K.T=a}}n.current=i,Ut=2}}function eE(){if(Ut===2){Ut=0;var n=Fr,i=ho,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var f=He;He|=4;try{Cv(n,i.alternate,i)}finally{He=f,oe.p=l,K.T=a}}Ut=3}}function tE(){if(Ut===4||Ut===3){Ut=0,gc();var n=Fr,i=ho,a=rr,l=jv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,ho=Fr=null,nE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(qr=null),ji(a),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=oe.p,oe.p=2,K.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{K.T=i,oe.p=f}}(rr&3)!==0&&wh(),Ni(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Lm?nu++:(nu=0,Lm=n):nu=0,iu(0)}}function nE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ll(i)))}function wh(){return Wv(),eE(),tE(),iE()}function iE(){if(Ut!==5)return!1;var n=Fr,i=Pm;Pm=0;var a=ji(rr),l=K.T,f=oe.p;try{oe.p=32>a?32:a,K.T=null,a=km,km=null;var d=Fr,_=rr;if(Ut=0,ho=Fr=null,rr=0,(He&6)!==0)throw Error(r(331));var T=He;if(He|=4,Uv(d.current),Pv(d,d.current,_,a),He=T,iu(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Xn,d)}catch{}return!0}finally{oe.p=f,K.T=l,nE(n,i)}}function rE(n,i,a){i=Bn(a,i),i=gm(n.stateNode,i,2),n=kr(n,i,2),n!==null&&(Cs(n,2),Ni(n))}function Xe(n,i,a){if(n.tag===3)rE(n,n,a);else for(;i!==null;){if(i.tag===3){rE(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(qr===null||!qr.has(l))){n=Bn(a,n),a=sv(2),l=kr(i,a,2),l!==null&&(av(a,l,i,n),Cs(l,2),Ni(l));break}}i=i.return}}function Bm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new sw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Vm=!0,f.add(a),n=cw.bind(null,n,i,a),i.then(n,n))}function cw(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,it===n&&(Oe&a)===a&&(gt===4||gt===3&&(Oe&62914560)===Oe&&300>on()-vh?(He&2)===0&&fo(n,0):Om|=a,co===Oe&&(co=0)),Ni(n)}function sE(n,i){i===0&&(i=Tc()),n=qs(n,i),n!==null&&(Cs(n,i),Ni(n))}function hw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),sE(n,a)}function fw(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),sE(n,a)}function dw(n,i){return Lt(n,i)}var Ih=null,go=null,jm=!1,Rh=!1,qm=!1,Gr=0;function Ni(n){n!==go&&n.next===null&&(go===null?Ih=go=n:go=go.next=n),Rh=!0,jm||(jm=!0,gw())}function iu(n,i){if(!qm&&Rh){qm=!0;do for(var a=!1,l=Ih;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-yt(42|n)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,uE(l,d))}else d=Oe,d=di(l,l===it?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,uE(l,d));l=l.next}while(a);qm=!1}}function mw(){aE()}function aE(){Rh=jm=!1;var n=0;Gr!==0&&ww()&&(n=Gr);for(var i=on(),a=null,l=Ih;l!==null;){var f=l.next,d=oE(l,i);d===0?(l.next=null,a===null?Ih=f:a.next=f,f===null&&(go=a)):(a=l,(n!==0||(d&3)!==0)&&(Rh=!0)),l=f}Ut!==0&&Ut!==5||iu(n),Gr!==0&&(Gr=0)}function oE(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-yt(d),T=1<<_,x=f[_];x===-1?((T&a)===0||(T&l)!==0)&&(f[_]=yd(T,i)):x<=i&&(n.expiredLanes|=T),d&=~T}if(i=it,a=Oe,a=di(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&vr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||$n(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&vr(l),ji(a)){case 2:case 8:a=dl;break;case 32:a=Er;break;case 268435456:a=pc;break;default:a=Er}return l=lE.bind(null,n),a=Lt(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&vr(l),n.callbackPriority=2,n.callbackNode=null,2}function lE(n,i){if(Ut!==0&&Ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(wh()&&n.callbackNode!==a)return null;var l=Oe;return l=di(n,n===it?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Fv(n,l,i),oE(n,on()),n.callbackNode!=null&&n.callbackNode===a?lE.bind(null,n):null)}function uE(n,i){if(wh())return null;Fv(n,i,!0)}function gw(){Rw(function(){(He&6)!==0?Lt(fl,mw):aE()})}function Fm(){if(Gr===0){var n=Wa;n===0&&(n=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Gr=n}return Gr}function cE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ua(""+n)}function hE(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function pw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=cE((f[qt]||null).action),_=l.submitter;_&&(i=(i=_[qt]||null)?cE(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new Ai("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Gr!==0){var x=_?hE(f,_):new FormData(f);um(a,{pending:!0,data:x,method:f.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=_?hE(f,_):new FormData(f),um(a,{pending:!0,data:x,method:f.method,action:d},d,x))},currentTarget:f}]})}}for(var Hm=0;Hm<Id.length;Hm++){var Gm=Id[Hm],yw=Gm.toLowerCase(),_w=Gm[0].toUpperCase()+Gm.slice(1);ri(yw,"on"+_w)}ri(qy,"onAnimationEnd"),ri(Fy,"onAnimationIteration"),ri(Hy,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(M1,"onTransitionRun"),ri(P1,"onTransitionStart"),ri(k1,"onTransitionCancel"),ri(Gy,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function fE(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],x=T.instance,B=T.currentTarget;if(T=T.listener,x!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=B;try{d(f)}catch(G){qc(G)}f.currentTarget=null,d=x}else for(_=0;_<l.length;_++){if(T=l[_],x=T.instance,B=T.currentTarget,T=T.listener,x!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=B;try{d(f)}catch(G){qc(G)}f.currentTarget=null,d=x}}}}function Ve(n,i){var a=i[Oa];a===void 0&&(a=i[Oa]=new Set);var l=n+"__bubble";a.has(l)||(dE(i,n,2,!1),a.add(l))}function Km(n,i,a){var l=0;i&&(l|=4),dE(a,n,l,i)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function Qm(n){if(!n[Ch]){n[Ch]=!0,pl.forEach(function(a){a!=="selectionchange"&&(vw.has(a)||Km(a,!1,n),Km(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ch]||(i[Ch]=!0,Km("selectionchange",!1,i))}}function dE(n,i,a,l){switch(qE(i)){case 2:var f=Qw;break;case 8:f=Yw;break;default:f=lg}a=f.bind(null,i,a,n),f=void 0,!Ms||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Ym(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=yi(T),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){l=d=_;continue e}T=T.parentNode}}l=l.return}Ir(function(){var B=d,G=kn(a),Y=[];e:{var q=Ky.get(n);if(q!==void 0){var H=Ai,de=n;switch(n){case"keypress":if(ks(a)===0)break e;case"keydown":case"keyup":H=zc;break;case"focusin":de="focus",H=Us;break;case"focusout":de="blur",H=Us;break;case"beforeblur":case"afterblur":H=Us;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=y;break;case qy:case Fy:case Hy:H=Vc;break;case Gy:H=S;break;case"scroll":case"scrollend":H=Cl;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=Oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Hi;break;case"toggle":case"beforetoggle":H=Ie}var Te=(i&4)!==0,tt=!Te&&(n==="scroll"||n==="scrollend"),M=Te?q!==null?q+"Capture":null:q;Te=[];for(var D=B,U;D!==null;){var Q=D;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||M===null||(Q=ei(D,M),Q!=null&&Te.push(su(D,Q,U))),tt)break;D=D.return}0<Te.length&&(q=new H(q,de,null,a,G),Y.push({event:q,listeners:Te}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==wl&&(de=a.relatedTarget||a.fromElement)&&(yi(de)||de[gi]))break e;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(de=a.relatedTarget||a.toElement,H=B,de=de?yi(de):null,de!==null&&(tt=u(de),Te=de.tag,de!==tt||Te!==5&&Te!==27&&Te!==6)&&(de=null)):(H=null,de=B),H!==de)){if(Te=xl,Q="onMouseLeave",M="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(Te=Hi,Q="onPointerLeave",M="onPointerEnter",D="pointer"),tt=H==null?q:Tn(H),U=de==null?q:Tn(de),q=new Te(Q,D+"leave",H,a,G),q.target=tt,q.relatedTarget=U,Q=null,yi(G)===B&&(Te=new Te(M,D+"enter",de,a,G),Te.target=U,Te.relatedTarget=tt,Q=Te),tt=Q,H&&de)t:{for(Te=Ew,M=H,D=de,U=0,Q=M;Q;Q=Te(Q))U++;Q=0;for(var _e=D;_e;_e=Te(_e))Q++;for(;0<U-Q;)M=Te(M),U--;for(;0<Q-U;)D=Te(D),Q--;for(;U--;){if(M===D||D!==null&&M===D.alternate){Te=M;break t}M=Te(M),D=Te(D)}Te=null}else Te=null;H!==null&&mE(Y,q,H,Te,!1),de!==null&&tt!==null&&mE(Y,tt,de,Te,!0)}}e:{if(q=B?Tn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var je=Ny;else if(xy(q))if(Vy)je=N1;else{je=x1;var ge=C1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&La(B.elementType)&&(je=Ny):je=D1;if(je&&(je=je(n,B))){Dy(Y,je,a,G);break e}ge&&ge(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&bl(q,"number",q.value)}switch(ge=B?Tn(B):window,n){case"focusin":(xy(ge)||ge.contentEditable==="true")&&(Ga=ge,Sd=B,Ml=null);break;case"focusout":Ml=Sd=Ga=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,By(Y,a,G);break;case"selectionchange":if(O1)break;case"keydown":case"keyup":By(Y,a,G)}var xe;if(Fe)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ha?zs(n,a)&&(Me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Ri&&a.locale!=="ko"&&(Ha||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ha&&(xe=Rl()):(Si=G,Il="value"in Si?Si.value:Si.textContent,Ha=!0)),ge=xh(B,Me),0<ge.length&&(Me=new Ii(Me,n,null,a,G),Y.push({event:Me,listeners:ge}),xe?Me.data=xe:(xe=Fa(a),xe!==null&&(Me.data=xe)))),(xe=Un?A1(n,a):w1(n,a))&&(Me=xh(B,"onBeforeInput"),0<Me.length&&(ge=new Ii("onBeforeInput","beforeinput",null,a,G),Y.push({event:ge,listeners:Me}),ge.data=xe)),pw(Y,n,B,a,G)}fE(Y,i)})}function su(n,i,a){return{instance:n,listener:i,currentTarget:a}}function xh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ei(n,a),f!=null&&l.unshift(su(n,f,d)),f=ei(n,i),f!=null&&l.push(su(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Ew(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function mE(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,x=T.alternate,B=T.stateNode;if(T=T.tag,x!==null&&x===l)break;T!==5&&T!==26&&T!==27||B===null||(x=B,f?(B=ei(a,d),B!=null&&_.unshift(su(a,B,x))):f||(B=ei(a,d),B!=null&&_.push(su(a,B,x)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Tw=/\r\n?/g,bw=/\u0000|\uFFFD/g;function gE(n){return(typeof n=="string"?n:""+n).replace(Tw,`
`).replace(bw,"")}function pE(n,i){return i=gE(i),gE(n)===i}function et(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":bn(n,"class",l);break;case"tabIndex":bn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(n,a,l);break;case"style":Al(n,l,d);break;case"data":if(i!=="object"){bn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&et(n,i,"name",f.name,f,null),et(n,i,"formEncType",f.formEncType,f,null),et(n,i,"formMethod",f.formMethod,f,null),et(n,i,"formTarget",f.formTarget,f,null)):(et(n,i,"encType",f.encType,f,null),et(n,i,"method",f.method,f,null),et(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ua(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ua(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),Pa(n,"popover",l);break;case"xlinkActuate":Rt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pa(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xc.get(a)||a,Pa(n,a,l))}}function Xm(n,i,a,l,f,d){switch(a){case"style":Al(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Ve("scroll",n);break;case"onScrollEnd":l!=null&&Ve("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Pa(n,a,l)}}}function Jt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:et(n,i,d,_,a,null)}}f&&et(n,i,"srcSet",a.srcSet,a,null),l&&et(n,i,"src",a.src,a,null);return;case"input":Ve("invalid",n);var T=d=_=f=null,x=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":f=G;break;case"type":_=G;break;case"checked":x=G;break;case"defaultChecked":B=G;break;case"value":d=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:et(n,i,l,G,a,null)}}Ic(n,d,T,x,B,_,f,!1);return;case"select":Ve("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:et(n,i,f,T,a,null)}i=d,a=_,n.multiple=!!l,i!=null?br(n,!!l,i,!1):a!=null&&br(n,!!l,a,!0);return;case"textarea":Ve("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:et(n,i,_,T,a,null)}Sr(n,l,f,d);return;case"option":for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null)&&(x==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":et(n,i,x,l,a,null));return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(l=0;l<ru.length;l++)Ve(ru[l],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:et(n,i,B,l,a,null)}return;default:if(La(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Xm(n,i,G,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&et(n,i,T,l,a,null))}function Sw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,x=null,B=null,G=null;for(H in a){var Y=a[H];if(a.hasOwnProperty(H)&&Y!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":x=Y;default:l.hasOwnProperty(H)||et(n,i,H,null,l,Y)}}for(var q in l){var H=l[q];if(Y=a[q],l.hasOwnProperty(q)&&(H!=null||Y!=null))switch(q){case"type":d=H;break;case"name":f=H;break;case"checked":B=H;break;case"defaultChecked":G=H;break;case"value":_=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==Y&&et(n,i,q,H,l,Y)}}ka(n,_,T,x,B,G,d,f);return;case"select":H=_=T=q=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":H=x;default:l.hasOwnProperty(d)||et(n,i,d,null,l,x)}for(f in l)if(d=l[f],x=a[f],l.hasOwnProperty(f)&&(d!=null||x!=null))switch(f){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==x&&et(n,i,f,d,l,x)}i=T,a=_,l=H,q!=null?br(n,!!a,q,!1):!!l!=!!a&&(i!=null?br(n,!!a,i,!0):br(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(n,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&et(n,i,_,f,l,d)}Rc(n,q,H);return;case"option":for(var de in a)q=a[de],a.hasOwnProperty(de)&&q!=null&&!l.hasOwnProperty(de)&&(de==="selected"?n.selected=!1:et(n,i,de,null,l,q));for(x in l)q=l[x],H=a[x],l.hasOwnProperty(x)&&q!==H&&(q!=null||H!=null)&&(x==="selected"?n.selected=q&&typeof q!="function"&&typeof q!="symbol":et(n,i,x,q,l,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)q=a[Te],a.hasOwnProperty(Te)&&q!=null&&!l.hasOwnProperty(Te)&&et(n,i,Te,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:et(n,i,B,q,l,H)}return;default:if(La(i)){for(var tt in a)q=a[tt],a.hasOwnProperty(tt)&&q!==void 0&&!l.hasOwnProperty(tt)&&Xm(n,i,tt,void 0,l,q);for(G in l)q=l[G],H=a[G],!l.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Xm(n,i,G,q,l,H);return}}for(var M in a)q=a[M],a.hasOwnProperty(M)&&q!=null&&!l.hasOwnProperty(M)&&et(n,i,M,null,l,q);for(Y in l)q=l[Y],H=a[Y],!l.hasOwnProperty(Y)||q===H||q==null&&H==null||et(n,i,Y,q,l,H)}function yE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Aw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&yE(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var x=a[l],B=x.startTime;if(B>T)break;var G=x.transferSize,Y=x.initiatorType;G&&yE(Y)&&(x=x.responseEnd,_+=G*(x<T?1:(T-B)/(x-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var $m=null,Jm=null;function Dh(n){return n.nodeType===9?n:n.ownerDocument}function _E(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Zm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wm=null;function ww(){var n=window.event;return n&&n.type==="popstate"?n===Wm?!1:(Wm=n,!0):(Wm=null,!1)}var EE=typeof setTimeout=="function"?setTimeout:void 0,Iw=typeof clearTimeout=="function"?clearTimeout:void 0,TE=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof TE<"u"?function(n){return TE.resolve(null).then(n).catch(Cw)}:EE;function Cw(n){setTimeout(function(){throw n})}function Kr(n){return n==="head"}function bE(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),vo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")au(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,au(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[pi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&au(n.ownerDocument.body);a=f}while(a);vo(i)}function SE(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function eg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":eg(a),Ma(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function xw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[pi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Gn(n.nextSibling),n===null)break}return null}function Dw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Gn(n.nextSibling),n===null))return null;return n}function AE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Gn(n.nextSibling),n===null))return null;return n}function tg(n){return n.data==="$?"||n.data==="$~"}function ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Nw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Gn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ig=null;function wE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Gn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function IE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function RE(n,i,a){switch(i=Dh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function au(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ma(n)}var Kn=new Map,CE=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var sr=oe.d;oe.d={f:Vw,r:Ow,D:Mw,C:Pw,L:kw,m:Lw,X:zw,S:Uw,M:Bw};function Vw(){var n=sr.f(),i=bh();return n||i}function Ow(n){var i=Pn(n);i!==null&&i.tag===5&&i.type==="form"?G_(i):sr.r(n)}var po=typeof document>"u"?null:document;function xE(n,i,a){var l=po;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),CE.has(f)||(CE.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Jt(i,"link",n),It(i),l.head.appendChild(i)))}}function Mw(n){sr.D(n),xE("dns-prefetch",n,null)}function Pw(n,i){sr.C(n,i),xE("preconnect",n,i)}function kw(n,i,a){sr.L(n,i,a);var l=po;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=yo(n);break;case"script":d=_o(n)}Kn.has(d)||(n=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Kn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(ou(d))||i==="script"&&l.querySelector(lu(d))||(i=l.createElement("link"),Jt(i,"link",n),It(i),l.head.appendChild(i)))}}function Lw(n,i){sr.m(n,i);var a=po;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=_o(n)}if(!Kn.has(d)&&(n=b({rel:"modulepreload",href:n},i),Kn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(lu(d)))return}l=a.createElement("link"),Jt(l,"link",n),It(l),a.head.appendChild(l)}}}function Uw(n,i,a){sr.S(n,i,a);var l=po;if(l&&n){var f=_i(l).hoistableStyles,d=yo(n);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(ou(d)))T.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Kn.get(d))&&rg(n,a);var x=_=l.createElement("link");It(x),Jt(x,"link",n),x._p=new Promise(function(B,G){x.onload=B,x.onerror=G}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Vh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function zw(n,i){sr.X(n,i);var a=po;if(a&&n){var l=_i(a).hoistableScripts,f=_o(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=b({src:n,async:!0},i),(i=Kn.get(f))&&sg(n,i),d=a.createElement("script"),It(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Bw(n,i){sr.M(n,i);var a=po;if(a&&n){var l=_i(a).hoistableScripts,f=_o(n),d=l.get(f);d||(d=a.querySelector(lu(f)),d||(n=b({src:n,async:!0,type:"module"},i),(i=Kn.get(f))&&sg(n,i),d=a.createElement("script"),It(d),Jt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function DE(n,i,a,l){var f=(f=Ce.current)?Nh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=yo(a.href),a=_i(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=yo(a.href);var d=_i(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(ou(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Kn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(n,a),d||jw(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_o(a),a=_i(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function yo(n){return'href="'+fn(n)+'"'}function ou(n){return'link[rel="stylesheet"]['+n+"]"}function NE(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function jw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Jt(i,"link",a),It(i),n.head.appendChild(i))}function _o(n){return'[src="'+fn(n)+'"]'}function lu(n){return"script[async]"+n}function VE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,It(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),It(l),Jt(l,"style",f),Vh(l,a.precedence,n),i.instance=l;case"stylesheet":f=yo(a.href);var d=n.querySelector(ou(f));if(d)return i.state.loading|=4,i.instance=d,It(d),d;l=NE(a),(f=Kn.get(f))&&rg(l,f),d=(n.ownerDocument||n).createElement("link"),It(d);var _=d;return _._p=new Promise(function(T,x){_.onload=T,_.onerror=x}),Jt(d,"link",l),i.state.loading|=4,Vh(d,a.precedence,n),i.instance=d;case"script":return d=_o(a.src),(f=n.querySelector(lu(d)))?(i.instance=f,It(f),f):(l=a,(f=Kn.get(d))&&(l=b({},a),sg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),It(f),Jt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Vh(l,a.precedence,n));return i.instance}function Vh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function sg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Oh=null;function OE(n,i,a){if(Oh===null){var l=new Map,f=Oh=new Map;f.set(a,l)}else f=Oh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[pi]||d[wt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function ME(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function qw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function PE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Fw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=yo(l.href),d=i.querySelector(ou(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Mh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,It(d);return}d=i.ownerDocument||i,l=NE(l),(f=Kn.get(f))&&rg(l,f),d=d.createElement("link"),It(d);var _=d;_._p=new Promise(function(T,x){_.onload=T,_.onerror=x}),Jt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Mh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var ag=0;function Hw(n,i){return n.stylesheets&&n.count===0&&kh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&kh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&ag===0&&(ag=62500*Aw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&kh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>ag?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ph=null;function kh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ph=new Map,i.forEach(Gw,n),Ph=null,Mh.call(n))}function Gw(n,i){if(!(i.state.loading&4)){var a=Ph.get(n);if(a)var l=a.get(null);else{a=new Map,Ph.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Mh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var uu={$$typeof:re,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function Kw(n,i,a,l,f,d,_,T,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function kE(n,i,a,l,f,d,_,T,x,B,G,Y){return n=new Kw(n,i,a,_,x,B,G,Y,T),i=1,d===!0&&(i|=24),d=An(3,null,null,i),n.current=d,d.stateNode=n,i=zd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Fd(d),n}function LE(n){return n?(n=Ya,n):Ya}function UE(n,i,a,l,f,d){f=LE(f),l.context===null?l.context=f:l.pendingContext=f,l=Pr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=kr(n,l,i),a!==null&&(_n(a,n,i),jl(a,n,i))}function zE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function og(n,i){zE(n,i),(n=n.alternate)&&zE(n,i)}function BE(n){if(n.tag===13||n.tag===31){var i=qs(n,67108864);i!==null&&_n(i,n,67108864),og(n,67108864)}}function jE(n){if(n.tag===13||n.tag===31){var i=xn();i=Ds(i);var a=qs(n,i);a!==null&&_n(a,n,i),og(n,i)}}var Lh=!0;function Qw(n,i,a,l){var f=K.T;K.T=null;var d=oe.p;try{oe.p=2,lg(n,i,a,l)}finally{oe.p=d,K.T=f}}function Yw(n,i,a,l){var f=K.T;K.T=null;var d=oe.p;try{oe.p=8,lg(n,i,a,l)}finally{oe.p=d,K.T=f}}function lg(n,i,a,l){if(Lh){var f=ug(l);if(f===null)Ym(n,i,l,Uh,a),FE(n,l);else if($w(f,n,i,a,l))l.stopPropagation();else if(FE(n,l),i&4&&-1<Xw.indexOf(n)){for(;f!==null;){var d=Pn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=fi(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var x=1<<31-yt(_);T.entanglements[1]|=x,_&=~x}Ni(d),(He&6)===0&&(Eh=on()+500,iu(0))}}break;case 31:case 13:T=qs(d,2),T!==null&&_n(T,d,2),bh(),og(d,2)}if(d=ug(l),d===null&&Ym(n,i,l,Uh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Ym(n,i,l,null,a)}}function ug(n){return n=kn(n),cg(n)}var Uh=null;function cg(n){if(Uh=null,n=yi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Uh=n,null}function qE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Is()){case fl:return 2;case dl:return 8;case Er:case pd:return 32;case pc:return 268435456;default:return 32}default:return 32}}var hg=!1,Qr=null,Yr=null,Xr=null,cu=new Map,hu=new Map,$r=[],Xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FE(n,i){switch(n){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(i.pointerId)}}function fu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&BE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function $w(n,i,a,l,f){switch(i){case"focusin":return Qr=fu(Qr,n,i,a,l,f),!0;case"dragenter":return Yr=fu(Yr,n,i,a,l,f),!0;case"mouseover":return Xr=fu(Xr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return cu.set(d,fu(cu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,hu.set(d,fu(hu.get(d)||null,n,i,a,l,f)),!0}return!1}function HE(n){var i=yi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){jE(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){jE(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ug(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);wl=l,a.target.dispatchEvent(l),wl=null}else return i=Pn(a),i!==null&&BE(i),n.blockedOn=a,!1;i.shift()}return!0}function GE(n,i,a){zh(n)&&a.delete(i)}function Jw(){hg=!1,Qr!==null&&zh(Qr)&&(Qr=null),Yr!==null&&zh(Yr)&&(Yr=null),Xr!==null&&zh(Xr)&&(Xr=null),cu.forEach(GE),hu.forEach(GE)}function Bh(n,i){n.blockedOn===i&&(n.blockedOn=null,hg||(hg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jw)))}var jh=null;function KE(n){jh!==n&&(jh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){jh===n&&(jh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(cg(l||a)===null)continue;break}var d=Pn(a);d!==null&&(n.splice(i,3),i-=3,um(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function vo(n){function i(x){return Bh(x,n)}Qr!==null&&Bh(Qr,n),Yr!==null&&Bh(Yr,n),Xr!==null&&Bh(Xr,n),cu.forEach(i),hu.forEach(i);for(var a=0;a<$r.length;a++){var l=$r[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<$r.length&&(a=$r[0],a.blockedOn===null);)HE(a),a.blockedOn===null&&$r.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qt]||null;if(typeof d=="function")_||KE(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qt]||null)T=_.formAction;else if(cg(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),KE(a)}}}function QE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function fg(n){this._internalRoot=n}qh.prototype.render=fg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=xn();UE(a,l,n,i,null,null)},qh.prototype.unmount=fg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;UE(n.current,2,null,n,null,null),bh(),i[gi]=null}};function qh(n){this._internalRoot=n}qh.prototype.unstable_scheduleHydration=function(n){if(n){var i=bc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<$r.length&&i!==0&&i<$r[a].priority;a++);$r.splice(a,0,n),a===0&&HE(n)}};var YE=e.version;if(YE!=="19.2.3")throw Error(r(527,YE,"19.2.3"));oe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var Zw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{Xn=Fh.inject(Zw),Kt=Fh}catch{}}return mu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=tv,d=nv,_=iv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=kE(n,1,!1,null,null,a,l,null,f,d,_,QE),n[gi]=i.current,Qm(n),new fg(i)},mu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=tv,_=nv,T=iv,x=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),i=kE(n,1,!0,i,a??null,l,f,x,d,_,T,QE),i.context=LE(null),a=i.current,l=xn(),l=Ds(l),f=Pr(l),f.callback=null,kr(a,f,l),a=l,i.current.lanes=a,Cs(i,a),Ni(i),n[gi]=i.current,Qm(n),new qh(i)},mu.version="19.2.3",mu}var rT;function lI(){if(rT)return gg.exports;rT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gg.exports=oI(),gg.exports}var uI=lI();const cI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),sT=s=>{const e=hI(s);return e.charAt(0).toUpperCase()+e.slice(1)},rb=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),fI=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var dI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mI=ot.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>ot.createElement("svg",{ref:g,...dI,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:rb("lucide",o),...!u&&!fI(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>ot.createElement(p,E)),...Array.isArray(u)?u:[u]]));const Bt=(s,e)=>{const t=ot.forwardRef(({className:r,...o},u)=>ot.createElement(mI,{ref:u,iconNode:e,className:rb(`lucide-${cI(sT(s))}`,`lucide-${s}`,r),...o}));return t.displayName=sT(s),t};const gI=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],vg=Bt("arrow-up-down",gI);const pI=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],yI=Bt("award",pI);const _I=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vI=Bt("calendar",_I);const EI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],TI=Bt("chevron-left",EI);const bI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SI=Bt("circle-check",bI);const AI=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],wI=Bt("coffee",AI);const II=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],RI=Bt("funnel",II);const CI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],xI=Bt("layout-dashboard",CI);const DI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],NI=Bt("lock",DI);const VI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],OI=Bt("log-out",VI);const MI=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],PI=Bt("mail",MI);const kI=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],LI=Bt("package",kI);const UI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sb=Bt("plus",UI);const zI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],BI=Bt("search",zI);const jI=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],aT=Bt("settings-2",jI);const qI=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],FI=Bt("sparkles",qI);const HI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],GI=Bt("trash-2",HI);const KI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],QI=Bt("user",KI);const YI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ab=Bt("x",YI),XI=()=>{};var oT={};const ob=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},$I=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let w=(m&15)<<2|p>>6,z=p&63;g||(z=64,c||(w=64)),r.push(t[E],t[b],t[w],t[z])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ob(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):$I(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const p=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||b==null)throw new JI;const w=u<<2|m>>4;if(r.push(w),p!==64){const z=m<<4&240|p>>2;if(r.push(z),b!==64){const Z=p<<6&192|b;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class JI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZI=function(s){const e=ob(s);return lb.encodeByteArray(e,!0)},ub=function(s){return ZI(s).replace(/\./g,"")},cb=function(s){try{return lb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WI=()=>hb().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof oT>"u")return;const s=oT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},tR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&cb(s[1]);return e&&JSON.parse(e)},qf=()=>{try{return XI()||WI()||eR()||tR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},nR=s=>qf()?.emulatorHosts?.[s],fb=()=>qf()?.config,db=s=>qf()?.[`_${s}`];class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Wo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mb(s){return(await fetch(s,{credentials:"include"})).ok}const Ru={};function rR(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?s.emulator.push(e):s.prod.push(e);return s}function sR(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let lT=!1;function aR(s,e){if(typeof window>"u"||typeof document>"u"||!Wo(window.location.host)||Ru[s]===e||Ru[s]||lT)return;Ru[s]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=rR().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,z){w.setAttribute("width","24"),w.setAttribute("id",z),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{lT=!0,c()},w}function E(w,z){w.setAttribute("id",z),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=sR(r),z=t("text"),Z=document.getElementById(z)||document.createElement("span"),ee=t("learnmore"),te=document.getElementById(ee)||document.createElement("a"),J=t("preprendIcon"),ie=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const re=w.element;m(re),E(te,ee);const ye=p();g(ie,J),re.append(ie,Z,te,ye),document.body.appendChild(re)}u?(Z.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function gb(){const s=qf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hR(){const s=zt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function pb(){return!gb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yb(){return!gb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _b(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const dR="FirebaseError";class pr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dR,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tc.prototype.create)}}class tc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?mR(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new pr(o,m,r)}}function mR(s,e){return s.replace(gR,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const gR=/\{\$([^}]+)}/g;function pR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function hr(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(uT(u)&&uT(c)){if(!hr(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function uT(s){return s!==null&&typeof s=="object"}function nc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Tu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function yR(s,e){const t=new _R(s,e);return t.subscribe.bind(t)}class _R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Eg),o.error===void 0&&(o.error=Eg),o.complete===void 0&&(o.complete=Eg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Eg(){}function Wt(s){return s&&s._delegate?s._delegate:s}class ma{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const na="[DEFAULT]";class ER{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new iR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bR(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(s){return s===na?void 0:s}function bR(s){return s.instantiationMode==="EAGER"}class SR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ER(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const AR={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},wR=Pe.INFO,IR={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},RR=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=IR[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=wR,this._logHandler=RR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const CR=(s,e)=>e.some(t=>s instanceof t);let cT,hT;function xR(){return cT||(cT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DR(){return hT||(hT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vb=new WeakMap,Lg=new WeakMap,Eb=new WeakMap,Tg=new WeakMap,bp=new WeakMap;function NR(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(ls(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&vb.set(t,s)}).catch(()=>{}),bp.set(e,s),e}function VR(s){if(Lg.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Lg.set(s,e)}let Ug={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Lg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Eb.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function OR(s){Ug=s(Ug)}function MR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(bg(this),e,...t);return Eb.set(r,e.sort?e.sort():[e]),ls(r)}:DR().includes(s)?function(...e){return s.apply(bg(this),e),ls(vb.get(this))}:function(...e){return ls(s.apply(bg(this),e))}}function PR(s){return typeof s=="function"?MR(s):(s instanceof IDBTransaction&&VR(s),CR(s,xR())?new Proxy(s,Ug):s)}function ls(s){if(s instanceof IDBRequest)return NR(s);if(Tg.has(s))return Tg.get(s);const e=PR(s);return e!==s&&(Tg.set(s,e),bp.set(e,s)),e}const bg=s=>bp.get(s);function kR(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=ls(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ls(c.result),g.oldVersion,g.newVersion,ls(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const LR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],Sg=new Map;function fT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Sg.get(e))return Sg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=UR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||LR.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Sg.set(e,u),u}OR(s=>({...s,get:(e,t,r)=>fT(e,t)||s.get(e,t,r),has:(e,t)=>!!fT(e,t)||s.has(e,t)}));class zR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function BR(s){return s.getComponent()?.type==="VERSION"}const zg="@firebase/app",dT="0.14.6";const fr=new Tp("@firebase/app"),jR="@firebase/app-compat",qR="@firebase/analytics-compat",FR="@firebase/analytics",HR="@firebase/app-check-compat",GR="@firebase/app-check",KR="@firebase/auth",QR="@firebase/auth-compat",YR="@firebase/database",XR="@firebase/data-connect",$R="@firebase/database-compat",JR="@firebase/functions",ZR="@firebase/functions-compat",WR="@firebase/installations",eC="@firebase/installations-compat",tC="@firebase/messaging",nC="@firebase/messaging-compat",iC="@firebase/performance",rC="@firebase/performance-compat",sC="@firebase/remote-config",aC="@firebase/remote-config-compat",oC="@firebase/storage",lC="@firebase/storage-compat",uC="@firebase/firestore",cC="@firebase/ai",hC="@firebase/firestore-compat",fC="firebase",dC="12.6.0";const Bg="[DEFAULT]",mC={[zg]:"fire-core",[jR]:"fire-core-compat",[FR]:"fire-analytics",[qR]:"fire-analytics-compat",[GR]:"fire-app-check",[HR]:"fire-app-check-compat",[KR]:"fire-auth",[QR]:"fire-auth-compat",[YR]:"fire-rtdb",[XR]:"fire-data-connect",[$R]:"fire-rtdb-compat",[JR]:"fire-fn",[ZR]:"fire-fn-compat",[WR]:"fire-iid",[eC]:"fire-iid-compat",[tC]:"fire-fcm",[nC]:"fire-fcm-compat",[iC]:"fire-perf",[rC]:"fire-perf-compat",[sC]:"fire-rc",[aC]:"fire-rc-compat",[oC]:"fire-gcs",[lC]:"fire-gcs-compat",[uC]:"fire-fst",[hC]:"fire-fst-compat",[cC]:"fire-vertex","fire-js":"fire-js",[fC]:"fire-js-all"};const gf=new Map,gC=new Map,jg=new Map;function mT(s,e){try{s.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ko(s){const e=s.name;if(jg.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;jg.set(e,s);for(const t of gf.values())mT(t,s);for(const t of gC.values())mT(t,s);return!0}function Sp(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Qn(s){return s==null?!1:s.settings!==void 0}const pC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new tc("app","Firebase",pC);class yC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}const el=dC;function Tb(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:Bg,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw us.create("bad-app-name",{appName:String(o)});if(t||(t=fb()),!t)throw us.create("no-options");const u=gf.get(o);if(u){if(hr(t,u.options)&&hr(r,u.config))return u;throw us.create("duplicate-app",{appName:o})}const c=new SR(o);for(const g of jg.values())c.addComponent(g);const m=new yC(t,r,c);return gf.set(o,m),m}function _C(s=Bg){const e=gf.get(s);if(!e&&s===Bg&&fb())return Tb();if(!e)throw us.create("no-app",{appName:s});return e}function cs(s,e,t){let r=mC[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(c.join(" "));return}ko(new ma(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const vC="firebase-heartbeat-database",EC=1,zu="firebase-heartbeat-store";let Ag=null;function bb(){return Ag||(Ag=kR(vC,EC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(zu)}catch(t){console.warn(t)}}}}).catch(s=>{throw us.create("idb-open",{originalErrorMessage:s.message})})),Ag}async function TC(s){try{const t=(await bb()).transaction(zu),r=await t.objectStore(zu).get(Sb(s));return await t.done,r}catch(e){if(e instanceof pr)fr.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e?.message});fr.warn(t.message)}}}async function gT(s,e){try{const r=(await bb()).transaction(zu,"readwrite");await r.objectStore(zu).put(e,Sb(s)),await r.done}catch(t){if(t instanceof pr)fr.warn(t.message);else{const r=us.create("idb-set",{originalErrorMessage:t?.message});fr.warn(r.message)}}}function Sb(s){return`${s.name}!${s.options.appId}`}const bC=1024,SC=30;class AC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>SC){const o=RC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pT(),{heartbeatsToSend:t,unsentEntries:r}=wC(this._heartbeatsCache.heartbeats),o=ub(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fr.warn(e),""}}}function pT(){return new Date().toISOString().substring(0,10)}function wC(s,e=bC){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),yT(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),yT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class IC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _b()?fR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yT(s){return ub(JSON.stringify({version:2,heartbeats:s})).length}function RC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function CC(s){ko(new ma("platform-logger",e=>new zR(e),"PRIVATE")),ko(new ma("heartbeat",e=>new AC(e),"PRIVATE")),cs(zg,dT,s),cs(zg,dT,"esm2020"),cs("fire-js","")}CC("");var xC="firebase",DC="12.7.0";cs(xC,DC,"app");function Ab(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NC=Ab,wb=new tc("auth","Firebase",Ab());const pf=new Tp("@firebase/auth");function VC(s,...e){pf.logLevel<=Pe.WARN&&pf.warn(`Auth (${el}): ${s}`,...e)}function Zh(s,...e){pf.logLevel<=Pe.ERROR&&pf.error(`Auth (${el}): ${s}`,...e)}function ui(s,...e){throw Ap(s,...e)}function ki(s,...e){return Ap(s,...e)}function Ib(s,e,t){const r={...NC(),[e]:t};return new tc("auth","Firebase",r).create(e,{appName:s.name})}function ur(s){return Ib(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ap(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return wb.create(s,...e)}function be(s,e,...t){if(!s)throw Ap(e,...t)}function ar(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Zh(e),new Error(e)}function dr(s,e){s||ar(e)}function qg(){return typeof self<"u"&&self.location?.href||""}function OC(){return _T()==="http:"||_T()==="https:"}function _T(){return typeof self<"u"&&self.location?.protocol||null}function MC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OC()||uR()||"connection"in navigator)?navigator.onLine:!0}function PC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,dr(t>e,"Short delay should be less than long delay!"),this.isMobile=oR()||cR()}get(){return MC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wp(s,e){dr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Rb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const LC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UC=new ic(3e4,6e4);function _s(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function vs(s,e,t,r,o={}){return Cb(s,o,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=nc({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...u};return lR()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Wo(s.emulatorConfig.host)&&(p.credentials="include"),Rb.fetch()(await xb(s,s.config.apiHost,t,m),p)})}async function Cb(s,e,t){s._canInitEmulator=!1;const r={...kC,...e};try{const o=new BC(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Hh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Hh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw Hh(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Ib(s,E,p);ui(s,E)}}catch(o){if(o instanceof pr)throw o;ui(s,"network-request-failed",{message:String(o)})}}async function rc(s,e,t,r,o={}){const u=await vs(s,e,t,r,o);return"mfaPendingCredential"in u&&ui(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function xb(s,e,t,r){const o=`${e}${t}?${r}`,u=s,c=u.config.emulator?wp(s.config,o):`${s.config.apiScheme}://${o}`;return LC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function zC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),UC.get())})}}function Hh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=ki(s,e,r);return o.customData._tokenResponse=t,o}function vT(s){return s!==void 0&&s.enterprise!==void 0}class jC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qC(s,e){return vs(s,"GET","/v2/recaptchaConfig",_s(s,e))}async function FC(s,e){return vs(s,"POST","/v1/accounts:delete",e)}async function yf(s,e){return vs(s,"POST","/v1/accounts:lookup",e)}function Cu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HC(s,e=!1){const t=Wt(s),r=await t.getIdToken(e),o=Ip(r);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:r,authTime:Cu(wg(o.auth_time)),issuedAtTime:Cu(wg(o.iat)),expirationTime:Cu(wg(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function wg(s){return Number(s)*1e3}function Ip(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const o=cb(t);return o?JSON.parse(o):(Zh("Failed to decode base64 JWT payload"),null)}catch(o){return Zh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ET(s){const e=Ip(s);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pr&&GC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function GC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class KC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Fg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _f(s){const e=s.auth,t=await s.getIdToken(),r=await Bu(s,yf(e,{idToken:t}));be(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?Db(o.providerUserInfo):[],c=YC(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!c?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fg(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,E)}async function QC(s){const e=Wt(s);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YC(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Db(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function XC(s,e){const t=await Cb(s,{},async()=>{const r=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await xb(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Wo(s.emulatorConfig.host)&&(g.credentials="include"),Rb.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $C(s,e){return vs(s,"POST","/v2/accounts:revokeToken",_s(s,e))}class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ET(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=ET(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await XC(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,c=new Vo;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(be(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return ar("not implemented")}}function Zr(s,e){be(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new KC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return HC(this,e)}reload(){return QC(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _f(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await Bu(this,FC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:z,providerData:Z,stsTokenManager:ee}=t;be(b&&ee,e,"internal-error");const te=Vo.fromJSON(this.name,ee);be(typeof b=="string",e,"internal-error"),Zr(r,e.name),Zr(o,e.name),be(typeof w=="boolean",e,"internal-error"),be(typeof z=="boolean",e,"internal-error"),Zr(u,e.name),Zr(c,e.name),Zr(m,e.name),Zr(g,e.name),Zr(p,e.name),Zr(E,e.name);const J=new li({uid:b,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:z,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:te,createdAt:p,lastLoginAt:E});return Z&&Array.isArray(Z)&&(J.providerData=Z.map(ie=>({...ie}))),g&&(J._redirectEventId=g),J}static async _fromIdTokenResponse(e,t,r=!1){const o=new Vo;o.updateFromServerResponse(t);const u=new li({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await _f(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Db(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Vo;m.updateFromIdToken(r);const g=new li({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const TT=new Map;function or(s){dr(s instanceof Function,"Expected a class definition");let e=TT.get(s);return e?(dr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,TT.set(s,e),e)}class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Nb.type="NONE";const bT=Nb;function Wh(s,e,t){return`firebase:${s}:${e}:${t}`}class Oo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Wh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Wh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yf(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Oo(or(bT),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||or(bT);const c=Wh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const E=await p._get(c);if(E){let b;if(typeof E=="string"){const w=await yf(e,{idToken:E}).catch(()=>{});if(!w)break;b=await li._fromGetAccountInfoResponse(e,w,E)}else b=li._fromJSON(e,E);p!==u&&(m=b),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Oo(u,e,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Oo(u,e,r))}}function ST(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lb(e))return"Blackberry";if(Ub(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Mb(e))&&!e.includes("edge/"))return"Chrome";if(kb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function Vb(s=zt()){return/firefox\//i.test(s)}function Ob(s=zt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mb(s=zt()){return/crios\//i.test(s)}function Pb(s=zt()){return/iemobile/i.test(s)}function kb(s=zt()){return/android/i.test(s)}function Lb(s=zt()){return/blackberry/i.test(s)}function Ub(s=zt()){return/webos/i.test(s)}function Rp(s=zt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function JC(s=zt()){return Rp(s)&&!!window.navigator?.standalone}function ZC(){return hR()&&document.documentMode===10}function zb(s=zt()){return Rp(s)||kb(s)||Ub(s)||Lb(s)||/windows phone/i.test(s)||Pb(s)}function Bb(s,e=[]){let t;switch(s){case"Browser":t=ST(zt());break;case"Worker":t=`${ST(zt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${el}/${r}`}class WC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function e2(s,e={}){return vs(s,"GET","/v2/passwordPolicy",_s(s,e))}const t2=6;class n2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??t2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class i2{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AT(this),this.idTokenSubscription=new AT(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=or(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yf(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(ur(this));const t=e?Wt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e2(this),t=new n2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $C(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&or(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&VC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ra(s){return Wt(s)}class AT{constructor(e){this.auth=e,this.observer=null,this.addObserver=yR(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r2(s){Ff=s}function jb(s){return Ff.loadJS(s)}function s2(){return Ff.recaptchaEnterpriseScript}function a2(){return Ff.gapiScript}function o2(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class l2{constructor(){this.enterprise=new u2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class u2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c2="recaptcha-enterprise",qb="NO_RECAPTCHA";class h2{constructor(e){this.type=c2,this.auth=Ra(e)}async verify(e="verify",t=!1){async function r(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{qC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new jC(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,c(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,c,m){const g=window.grecaptcha;vT(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{c(p)}).catch(()=>{c(qb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l2().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{r(this.auth).then(m=>{if(!t&&vT(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=s2();g.length!==0&&(g+=m),jb(g).then(()=>{o(m,u,c)}).catch(p=>{c(p)})}}).catch(m=>{c(m)})})}}async function wT(s,e,t,r=!1,o=!1){const u=new h2(s);let c;if(o)c=qb;else try{c=await u.verify(t)}catch{c=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Hg(s,e,t,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await wT(s,e,t,t==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wT(s,e,t,t==="getOobCode");return r(s,c)}else return Promise.reject(u)})}function f2(s,e){const t=Sp(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(hr(u,e??{}))return o;ui(o,"already-initialized")}return t.initialize({options:e})}function d2(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(or);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function m2(s,e,t){const r=Ra(s);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Fb(e),{host:c,port:m}=g2(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(hr(p,r.config.emulator)&&hr(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Wo(c)?(mb(`${u}//${c}${g}`),aR("Auth",!0)):p2()}function Fb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function g2(s){const e=Fb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:IT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:IT(c)}}}function IT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function p2(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Cp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,t){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}async function y2(s,e){return vs(s,"POST","/v1/accounts:signUp",e)}async function _2(s,e){return rc(s,"POST","/v1/accounts:signInWithPassword",_s(s,e))}async function v2(s,e){return rc(s,"POST","/v1/accounts:signInWithEmailLink",_s(s,e))}async function E2(s,e){return rc(s,"POST","/v1/accounts:signInWithEmailLink",_s(s,e))}class ju extends Cp{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ju(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ju(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hg(e,t,"signInWithPassword",_2);case"emailLink":return v2(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hg(e,r,"signUpPassword",y2);case"emailLink":return E2(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Mo(s,e){return rc(s,"POST","/v1/accounts:signInWithIdp",_s(s,e))}const T2="http://localhost";class ga extends Cp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const c=new ga(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Mo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:T2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nc(t)}return e}}function b2(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S2(s){const e=Eu(Tu(s)).link,t=e?Eu(Tu(e)).deep_link_id:null,r=Eu(Tu(s)).deep_link_id;return(r?Eu(Tu(r)).link:null)||r||t||e||s}class xp{constructor(e){const t=Eu(Tu(e)),r=t.apiKey??null,o=t.oobCode??null,u=b2(t.mode??null);be(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=S2(e);try{return new xp(t)}catch{return null}}}class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,t){return ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=xp.parseLink(t);return be(r,"argument-error"),ju._fromEmailAndCode(e,r.code,r.tenantId)}}tl.PROVIDER_ID="password";tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Hb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sc extends Hb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ns extends sc{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";class is extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ga._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return is.credential(t,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";class rs extends sc{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";class ss extends sc{constructor(){super("twitter.com")}static credential(e,t){return ga._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ss.credential(t,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";async function A2(s,e){return rc(s,"POST","/v1/accounts:signUp",_s(s,e))}class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await li._fromIdTokenResponse(e,r,o),c=RT(r);return new pa({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=RT(r);return new pa({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function RT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class vf extends pr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new vf(e,t,r,o)}}function Gb(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(s,u,e,r):u})}async function w2(s,e,t=!1){const r=await Bu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return pa._forOperation(s,"link",r)}async function I2(s,e,t=!1){const{auth:r}=s;if(Qn(r.app))return Promise.reject(ur(r));const o="reauthenticate";try{const u=await Bu(s,Gb(r,o,e,s),t);be(u.idToken,r,"internal-error");const c=Ip(u.idToken);be(c,r,"internal-error");const{sub:m}=c;return be(s.uid===m,r,"user-mismatch"),pa._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ui(r,"user-mismatch"),u}}async function Kb(s,e,t=!1){if(Qn(s.app))return Promise.reject(ur(s));const r="signIn",o=await Gb(s,r,e),u=await pa._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}async function R2(s,e){return Kb(Ra(s),e)}async function Qb(s){const e=Ra(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C2(s,e,t){if(Qn(s.app))return Promise.reject(ur(s));const r=Ra(s),c=await Hg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",A2).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Qb(s),g}),m=await pa._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(m.user),m}function x2(s,e,t){return Qn(s.app)?Promise.reject(ur(s)):R2(Wt(s),tl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Qb(s),r})}function D2(s,e,t,r){return Wt(s).onIdTokenChanged(e,t,r)}function N2(s,e,t){return Wt(s).beforeAuthStateChanged(e,t)}function V2(s,e,t,r){return Wt(s).onAuthStateChanged(e,t,r)}function O2(s){return Wt(s).signOut()}const Ef="__sak";class Yb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const M2=1e3,P2=10;class Xb extends Yb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);ZC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,P2):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xb.type="LOCAL";const k2=Xb;class $b extends Yb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$b.type="SESSION";const Jb=$b;function L2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Hf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await L2(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];function Dp(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class U2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Dp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Li(){return window}function z2(s){Li().location.href=s}function Zb(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function B2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j2(){return navigator?.serviceWorker?.controller||null}function q2(){return Zb()?self:null}const Wb="firebaseLocalStorageDb",F2=1,Tf="firebaseLocalStorage",eS="fbase_key";class ac{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(s,e){return s.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function H2(){const s=indexedDB.deleteDatabase(Wb);return new ac(s).toPromise()}function Gg(){const s=indexedDB.open(Wb,F2);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Tf,{keyPath:eS})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Tf)?e(r):(r.close(),await H2(),e(await Gg()))})})}async function CT(s,e,t){const r=Gf(s,!0).put({[eS]:e,value:t});return new ac(r).toPromise()}async function G2(s,e){const t=Gf(s,!1).get(e),r=await new ac(t).toPromise();return r===void 0?null:r.value}function xT(s,e){const t=Gf(s,!0).delete(e);return new ac(t).toPromise()}const K2=800,Q2=3;class tS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Q2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(q2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await B2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gg();return await CT(e,Ef,"1"),await xT(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>CT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>G2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Gf(o,!1).getAll();return new ac(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tS.type="LOCAL";const Y2=tS;new ic(3e4,6e4);function X2(s,e){return e?or(e):(be(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Np extends Cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $2(s){return Kb(s.auth,new Np(s),s.bypassAuthState)}function J2(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),I2(t,new Np(s),s.bypassAuthState)}async function Z2(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),w2(t,new Np(s),s.bypassAuthState)}class nS{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $2;case"linkViaPopup":case"linkViaRedirect":return Z2;case"reauthViaPopup":case"reauthViaRedirect":return J2;default:ui(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W2=new ic(2e3,1e4);class No extends nS{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W2.get())};e()}}No.currentPopupAction=null;const ex="pendingRedirect",ef=new Map;class tx extends nS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await nx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nx(s,e){const t=sx(e),r=rx(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function ix(s,e){ef.set(s._key(),e)}function rx(s){return or(s._redirectPersistence)}function sx(s){return Wh(ex,s.config.apiKey,s.name)}async function ax(s,e,t=!1){if(Qn(s.app))return Promise.reject(ur(s));const r=Ra(s),o=X2(r,e),c=await new tx(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const ox=600*1e3;class lx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ux(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!iS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ki(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ox&&this.cachedEventUids.clear(),this.cachedEventUids.has(DT(e))}saveEventToCache(e){this.cachedEventUids.add(DT(e)),this.lastProcessedEventTime=Date.now()}}function DT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function iS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function ux(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iS(s);default:return!1}}async function cx(s,e={}){return vs(s,"GET","/v1/projects",e)}const hx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fx=/^https?/;async function dx(s){if(s.config.emulator)return;const{authorizedDomains:e}=await cx(s);for(const t of e)try{if(mx(t))return}catch{}ui(s,"unauthorized-domain")}function mx(s){const e=qg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!fx.test(t))return!1;if(hx.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const gx=new ic(3e4,6e4);function NT(){const s=Li().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function px(s){return new Promise((e,t)=>{function r(){NT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NT(),t(ki(s,"network-request-failed"))},timeout:gx.get()})}if(Li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Li().gapi?.load)r();else{const o=o2("iframefcb");return Li()[o]=()=>{gapi.load?r():t(ki(s,"network-request-failed"))},jb(`${a2()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw tf=null,e})}let tf=null;function yx(s){return tf=tf||px(s),tf}const _x=new ic(5e3,15e3),vx="__/auth/iframe",Ex="emulator/auth/iframe",Tx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sx(s){const e=s.config;be(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?wp(e,Ex):`https://${s.config.authDomain}/${vx}`,r={apiKey:e.apiKey,appName:s.name,v:el},o=bx.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${nc(r).slice(1)}`}async function Ax(s){const e=await yx(s),t=Li().gapi;return be(t,s,"internal-error"),e.open({where:document.body,url:Sx(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=ki(s,"network-request-failed"),m=Li().setTimeout(()=>{u(c)},_x.get());function g(){Li().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}const wx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ix=500,Rx=600,Cx="_blank",xx="http://localhost";class VT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dx(s,e,t,r=Ix,o=Rx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...wx,width:r.toString(),height:o.toString(),top:u,left:c},p=zt().toLowerCase();t&&(m=Mb(p)?Cx:t),Vb(p)&&(e=e||xx,g.scrollbars="yes");const E=Object.entries(g).reduce((w,[z,Z])=>`${w}${z}=${Z},`,"");if(JC(p)&&m!=="_self")return Nx(e||"",m),new VT(null);const b=window.open(e||"",m,E);be(b,s,"popup-blocked");try{b.focus()}catch{}return new VT(b)}function Nx(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Vx="__/auth/handler",Ox="emulator/auth/handler",Mx=encodeURIComponent("fac");async function OT(s,e,t,r,o,u){be(s.config.authDomain,s,"auth-domain-config-required"),be(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:el,eventId:o};if(e instanceof Hb){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",pR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))c[E]=b}if(e instanceof sc){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),p=g?`#${Mx}=${encodeURIComponent(g)}`:"";return`${Px(s)}?${nc(m).slice(1)}${p}`}function Px({config:s}){return s.emulator?wp(s,Ox):`https://${s.authDomain}/${Vx}`}const Ig="webStorageSupport";class kx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jb,this._completeRedirectFn=ax,this._overrideRedirectResult=ix}async _openPopup(e,t,r,o){dr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await OT(e,t,r,qg(),o);return Dx(e,u,Dp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await OT(e,t,r,qg(),o);return z2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(dr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Ax(e),r=new lx(e);return t.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ig,{type:Ig},o=>{const u=o?.[0]?.[Ig];u!==void 0&&t(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zb()||Ob()||Rp()}}const Lx=kx;var MT="@firebase/auth",PT="1.12.0";class Ux{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bx(s){ko(new ma("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bb(s)},p=new i2(r,o,u,g);return d2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ko(new ma("auth-internal",e=>{const t=Ra(e.getProvider("auth").getImmediate());return(r=>new Ux(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(MT,PT,zx(s)),cs(MT,PT,"esm2020")}const jx=300,qx=db("authIdTokenMaxAge")||jx;let kT=null;const Fx=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qx)return;const o=t?.token;kT!==o&&(kT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Hx(s=_C()){const e=Sp(s,"auth");if(e.isInitialized())return e.getImmediate();const t=f2(s,{popupRedirectResolver:Lx,persistence:[Y2,k2,Jb]}),r=db("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=Fx(u.toString());N2(t,c,()=>c(t.currentUser)),D2(t,m=>c(m))}}const o=nR("auth");return o&&m2(t,`http://${o}`),t}function Gx(){return document.getElementsByTagName("head")?.[0]??document}r2({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=ki("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",Gx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bx("Browser");var LT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hs,rS;(function(){var s;function e(I,A){function R(){}R.prototype=A.prototype,I.F=A.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(O,N,P){for(var C=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)C[lt-2]=arguments[lt];return A.prototype[N].apply(O,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,A,R){R||(R=0);const O=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)O[N]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(N=0;N<16;++N)O[N]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=I.g[0],R=I.g[1],N=I.g[2];let P=I.g[3],C;C=A+(P^R&(N^P))+O[0]+3614090360&4294967295,A=R+(C<<7&4294967295|C>>>25),C=P+(N^A&(R^N))+O[1]+3905402710&4294967295,P=A+(C<<12&4294967295|C>>>20),C=N+(R^P&(A^R))+O[2]+606105819&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(A^N&(P^A))+O[3]+3250441966&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(P^R&(N^P))+O[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=P+(N^A&(R^N))+O[5]+1200080426&4294967295,P=A+(C<<12&4294967295|C>>>20),C=N+(R^P&(A^R))+O[6]+2821735955&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(A^N&(P^A))+O[7]+4249261313&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(P^R&(N^P))+O[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=P+(N^A&(R^N))+O[9]+2336552879&4294967295,P=A+(C<<12&4294967295|C>>>20),C=N+(R^P&(A^R))+O[10]+4294925233&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(A^N&(P^A))+O[11]+2304563134&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(P^R&(N^P))+O[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=P+(N^A&(R^N))+O[13]+4254626195&4294967295,P=A+(C<<12&4294967295|C>>>20),C=N+(R^P&(A^R))+O[14]+2792965006&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(A^N&(P^A))+O[15]+1236535329&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(N^P&(R^N))+O[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(A^R))+O[6]+3225465664&4294967295,P=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(P^A))+O[11]+643717713&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^A&(N^P))+O[0]+3921069994&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(N^P&(R^N))+O[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(A^R))+O[10]+38016083&4294967295,P=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(P^A))+O[15]+3634488961&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^A&(N^P))+O[4]+3889429448&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(N^P&(R^N))+O[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(A^R))+O[14]+3275163606&4294967295,P=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(P^A))+O[3]+4107603335&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^A&(N^P))+O[8]+1163531501&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(N^P&(R^N))+O[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(A^R))+O[2]+4243563512&4294967295,P=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(P^A))+O[7]+1735328473&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^A&(N^P))+O[12]+2368359562&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(R^N^P)+O[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=P+(A^R^N)+O[8]+2272392833&4294967295,P=A+(C<<11&4294967295|C>>>21),C=N+(P^A^R)+O[11]+1839030562&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^A)+O[14]+4259657740&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(R^N^P)+O[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=P+(A^R^N)+O[4]+1272893353&4294967295,P=A+(C<<11&4294967295|C>>>21),C=N+(P^A^R)+O[7]+4139469664&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^A)+O[10]+3200236656&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(R^N^P)+O[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=P+(A^R^N)+O[0]+3936430074&4294967295,P=A+(C<<11&4294967295|C>>>21),C=N+(P^A^R)+O[3]+3572445317&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^A)+O[6]+76029189&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(R^N^P)+O[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=P+(A^R^N)+O[12]+3873151461&4294967295,P=A+(C<<11&4294967295|C>>>21),C=N+(P^A^R)+O[15]+530742520&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^A)+O[2]+3299628645&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(N^(R|~P))+O[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=P+(R^(A|~N))+O[7]+1126891415&4294967295,P=A+(C<<10&4294967295|C>>>22),C=N+(A^(P|~R))+O[14]+2878612391&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~A))+O[5]+4237533241&4294967295,R=N+(C<<21&4294967295|C>>>11),C=A+(N^(R|~P))+O[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=P+(R^(A|~N))+O[3]+2399980690&4294967295,P=A+(C<<10&4294967295|C>>>22),C=N+(A^(P|~R))+O[10]+4293915773&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~A))+O[1]+2240044497&4294967295,R=N+(C<<21&4294967295|C>>>11),C=A+(N^(R|~P))+O[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=P+(R^(A|~N))+O[15]+4264355552&4294967295,P=A+(C<<10&4294967295|C>>>22),C=N+(A^(P|~R))+O[6]+2734768916&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~A))+O[13]+1309151649&4294967295,R=N+(C<<21&4294967295|C>>>11),C=A+(N^(R|~P))+O[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=P+(R^(A|~N))+O[11]+3174756917&4294967295,P=A+(C<<10&4294967295|C>>>22),C=N+(A^(P|~R))+O[2]+718787259&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~A))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const R=A-this.blockSize,O=this.C;let N=this.h,P=0;for(;P<A;){if(N==0)for(;P<=R;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<A;)if(O[N++]=I.charCodeAt(P++),N==this.blockSize){o(this,O),N=0;break}}else for(;P<A;)if(O[N++]=I[P++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)I[A++]=this.g[R]>>>O&255;return I};function u(I,A){var R=m;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=A(I)}function c(I,A){this.h=A;const R=[];let O=!0;for(let N=I.length-1;N>=0;N--){const P=I[N]|0;O&&P==A||(R[N]=P,O=!1)}this.g=R}var m={};function g(I){return-128<=I&&I<128?u(I,function(A){return new c([A|0],A<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return b;if(I<0)return te(p(-I));const A=[];let R=1;for(let O=0;I>=R;O++)A[O]=I/R|0,R*=4294967296;return new c(A,0)}function E(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return te(E(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(A,8));let O=b;for(let P=0;P<I.length;P+=8){var N=Math.min(8,I.length-P);const C=parseInt(I.substring(P,P+N),A);N<8?(N=p(Math.pow(A,N)),O=O.j(N).add(p(C))):(O=O.j(R),O=O.add(p(C)))}return O}var b=g(0),w=g(1),z=g(16777216);s=c.prototype,s.m=function(){if(ee(this))return-te(this).m();let I=0,A=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);I+=(O>=0?O:4294967296+O)*A,A*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(Z(this))return"0";if(ee(this))return"-"+te(this).toString(I);const A=p(Math.pow(I,6));var R=this;let O="";for(;;){const N=ye(R,A).g;R=J(R,N.j(A));let P=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=N,Z(R))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function Z(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function ee(I){return I.h==-1}s.l=function(I){return I=J(this,I),ee(I)?-1:Z(I)?0:1};function te(I){const A=I.g.length,R=[];for(let O=0;O<A;O++)R[O]=~I.g[O];return new c(R,~I.h).add(w)}s.abs=function(){return ee(this)?te(this):this},s.add=function(I){const A=Math.max(this.g.length,I.g.length),R=[];let O=0;for(let N=0;N<=A;N++){let P=O+(this.i(N)&65535)+(I.i(N)&65535),C=(P>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);O=C>>>16,P&=65535,C&=65535,R[N]=C<<16|P}return new c(R,R[R.length-1]&-2147483648?-1:0)};function J(I,A){return I.add(te(A))}s.j=function(I){if(Z(this)||Z(I))return b;if(ee(this))return ee(I)?te(this).j(te(I)):te(te(this).j(I));if(ee(I))return te(this.j(te(I)));if(this.l(z)<0&&I.l(z)<0)return p(this.m()*I.m());const A=this.g.length+I.g.length,R=[];for(var O=0;O<2*A;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<I.g.length;N++){const P=this.i(O)>>>16,C=this.i(O)&65535,lt=I.i(N)>>>16,Pt=I.i(N)&65535;R[2*O+2*N]+=C*Pt,ie(R,2*O+2*N),R[2*O+2*N+1]+=P*Pt,ie(R,2*O+2*N+1),R[2*O+2*N+1]+=C*lt,ie(R,2*O+2*N+1),R[2*O+2*N+2]+=P*lt,ie(R,2*O+2*N+2)}for(I=0;I<A;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=A;I<2*A;I++)R[I]=0;return new c(R,0)};function ie(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function re(I,A){this.g=I,this.h=A}function ye(I,A){if(Z(A))throw Error("division by zero");if(Z(I))return new re(b,b);if(ee(I))return A=ye(te(I),A),new re(te(A.g),te(A.h));if(ee(A))return A=ye(I,te(A)),new re(te(A.g),A.h);if(I.g.length>30){if(ee(I)||ee(A))throw Error("slowDivide_ only works with positive integers.");for(var R=w,O=A;O.l(I)<=0;)R=ne(R),O=ne(O);var N=ae(R,1),P=ae(O,1);for(O=ae(O,2),R=ae(R,2);!Z(O);){var C=P.add(O);C.l(I)<=0&&(N=N.add(R),P=C),O=ae(O,1),R=ae(R,1)}return A=J(I,N.j(A)),new re(N,A)}for(N=b;I.l(A)>=0;){for(R=Math.max(1,Math.floor(I.m()/A.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=p(R),C=P.j(A);ee(C)||C.l(I)>0;)R-=O,P=p(R),C=P.j(A);Z(P)&&(P=w),N=N.add(P),I=J(I,C)}return new re(N,I)}s.B=function(I){return ye(this,I).h},s.and=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)&I.i(O);return new c(R,this.h&I.h)},s.or=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)|I.i(O);return new c(R,this.h|I.h)},s.xor=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)^I.i(O);return new c(R,this.h^I.h)};function ne(I){const A=I.g.length+1,R=[];for(let O=0;O<A;O++)R[O]=I.i(O)<<1|I.i(O-1)>>>31;return new c(R,I.h)}function ae(I,A){const R=A>>5;A%=32;const O=I.g.length-R,N=[];for(let P=0;P<O;P++)N[P]=A>0?I.i(P+R)>>>A|I.i(P+R+1)<<32-A:I.i(P+R);return new c(N,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,hs=c}).apply(typeof LT<"u"?LT:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var sS,bu,aS,nf,Kg,oS,lS,uS;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var L=h[S];if(!(L in v))break e;v=v[L]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function b(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,L,F){for(var se=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)se[Ie-2]=arguments[Ie];return y.prototype[L].apply(S,se)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function z(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function Z(h,y){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=h.length||0;const F=L.length||0;h.length=v+F;for(let se=0;se<F;se++)h[v+se]=L[se]}else h.push(L)}}class ee{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){c.setTimeout(()=>{throw h},0)}function J(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ie{constructor(){this.h=this.g=null}add(y,v){const S=re.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var re=new ee(()=>new ye,h=>h.reset());class ye{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ae=!1,I=new ie,A=()=>{const h=Promise.resolve(void 0);ne=()=>{h.then(R)}};function R(){for(var h;h=J();){try{h.h.call(h.g)}catch(v){te(v)}var y=re;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ae=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function lt(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(lt,N),lt.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pt="closure_listenable_"+(Math.random()*1e6|0),K=0;function oe(h,y,v,S,L){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=L,this.key=++K,this.da=this.fa=!1}function Ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Ke(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function V(h){const y={};for(const v in h)y[v]=h[v];return y}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)h[v]=S[v];for(let F=0;F<$.length;F++)v=$[F],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,y,v,S,L){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const se=Ce(h,y,S,L);return se>-1?(y=h[se],v||(y.fa=!1)):(y=new oe(y,this.src,F,!!S,L),y.fa=v,h.push(y)),y};function Se(h,y){const v=y.type;if(v in h.g){var S=h.g[v],L=Array.prototype.indexOf.call(S,y,void 0),F;(F=L>=0)&&Array.prototype.splice.call(S,L,1),F&&(Ee(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ce(h,y,v,S){for(let L=0;L<h.length;++L){const F=h[L];if(!F.da&&F.listener==y&&F.capture==!!v&&F.ha==S)return L}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),kt={};function ut(h,y,v,S,L){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ut(h,y[F],v,S,L);return null}return v=hl(v),h&&h[Pt]?h.J(y,v,m(S)?!!S.capture:!1,L):As(h,y,v,!1,S,L)}function As(h,y,v,S,L,F){if(!y)throw Error("Invalid event type");const se=m(L)?!!L.capture:!!L;let Ie=ws(h);if(Ie||(h[Ue]=Ie=new he(h)),v=Ie.add(y,v,S,se,F),v.proxy)return v;if(S=xa(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)P||(L=se),L===void 0&&(L=!1),h.addEventListener(y.toString(),S,L);else if(h.attachEvent)h.attachEvent(ci(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xa(){function h(v){return y.call(h.src,h.listener,v)}const y=ul;return h}function Da(h,y,v,S,L){if(Array.isArray(y))for(var F=0;F<y.length;F++)Da(h,y[F],v,S,L);else S=m(S)?!!S.capture:!!S,v=hl(v),h&&h[Pt]?(h=h.i,F=String(y).toString(),F in h.g&&(y=h.g[F],v=Ce(y,v,S,L),v>-1&&(Ee(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[F],h.h--)))):h&&(h=ws(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ce(y,v,S,L)),(v=h>-1?y[h]:null)&&Na(v))}function Na(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Pt])Se(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(ci(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=ws(y))?(Se(v,h),v.h==0&&(v.src=null,y[Ue]=null)):Ee(h)}}}function ci(h){return h in kt?kt[h]:kt[h]="on"+h}function ul(h,y){if(h.da)h=!0;else{y=new lt(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Na(h),h=v.call(S,y)}return h}function ws(h){return h=h[Ue],h instanceof he?h:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(h){return typeof h=="function"?h:(h[cl]||(h[cl]=function(y){return h.handleEvent(y)}),h[cl])}function St(){O.call(this),this.i=new he(this),this.M=this,this.G=null}b(St,O),St.prototype[Pt]=!0,St.prototype.removeEventListener=function(h,y,v,S){Da(this,h,y,v,S)};function Lt(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var L=y;y=new N(S,h),le(y,L)}L=!0;let F,se;if(v)for(se=v.length-1;se>=0;se--)F=y.g=v[se],L=vr(F,S,!0,y)&&L;if(F=y.g=h,L=vr(F,S,!0,y)&&L,L=vr(F,S,!1,y)&&L,v)for(se=0;se<v.length;se++)F=y.g=v[se],L=vr(F,S,!1,y)&&L}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)Ee(v[S]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},St.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function vr(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let L=!0;for(let F=0;F<y.length;++F){const se=y[F];if(se&&!se.da&&se.capture==v){const Ie=se.listener,_t=se.ha||se.src;se.fa&&Se(h.i,se),L=Ie.call(_t,S)!==!1&&L}}return L&&!S.defaultPrevented}function gd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function gc(h){h.g=gd(()=>{h.g=null,h.i&&(h.i=!1,gc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class on extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:gc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(h){O.call(this),this.h=h,this.g={}}b(Is,O);var fl=[];function dl(h){Be(h.g,function(y,v){this.g.hasOwnProperty(v)&&Na(y)},h),h.g={}}Is.prototype.N=function(){Is.Z.N.call(this),dl(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Er=c.JSON.stringify,pd=c.JSON.parse,pc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function yc(){}function _c(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){N.call(this,"d")}b(Kt,N);function Mn(){N.call(this,"c")}b(Mn,N);var yt={},vc=null;function Va(){return vc=vc||new St}yt.Ia="serverreachability";function Ec(h){N.call(this,yt.Ia,h)}b(Ec,N);function hi(h){const y=Va();Lt(y,new Ec(y))}yt.STAT_EVENT="statevent";function Rs(h,y){N.call(this,yt.STAT_EVENT,h),this.stat=y}b(Rs,N);function At(h){const y=Va();Lt(y,new Rs(y,h))}yt.Ja="timingevent";function fi(h,y){N.call(this,yt.Ja,h),this.size=y}b(fi,N);function di(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function yd(h,y,v,S,L,F){h.info(function(){if(h.g)if(F){var se="",Ie=F.split("&");for(let Fe=0;Fe<Ie.length;Fe++){var _t=Ie[Fe].split("=");if(_t.length>1){const ct=_t[0];_t=_t[1];const Un=ct.split("_");se=Un.length>=2&&Un[1]=="type"?se+(ct+"="+_t+"&"):se+(ct+"=redacted&")}}}else se=null;else se=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+y+`
`+v+`
`+se})}function Tc(h,y,v,S,L,F,se){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+y+`
`+v+`
`+F+" "+se})}function mi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+_d(h,v)+(S?" "+S:"")})}function Cs(h,y){h.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function _d(h,y){if(!h.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var v=F[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let se=1;se<S.length;se++)S[se]=""}}}}return Er(F)}catch{return y}}var xs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function Ds(){}b(Ds,yc),Ds.prototype.g=function(){return new XMLHttpRequest},gl=new Ds;function ji(h){return encodeURIComponent(String(h))}function bc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Jn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var wt={},qt={};function gi(h,y,v){h.M=1,h.A=Ns(Rt(y)),h.u=v,h.R=!0,Oa(h,null)}function Oa(h,y){h.F=Date.now(),pi(h),h.B=Rt(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),La(v.i,"t",S),h.C=0,v=h.j.L,h.h=new Zn,h.g=Lc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new on(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(fl[0]=L.toString()),L=fl);for(let F=0;F<L.length;F++){const se=ut(v,L[F],S||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),hi(),yd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ti(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=ti(this.g),_t=this.g.ya(),Fe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Ie!=4||_t==7||(_t==8||Fe<=0?hi(3):hi(2)),yi(this);var y=this.g.ca();this.X=y;var v=vd(this);if(this.o=y==200,Tc(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var F=S;break t}}F=null}if(h=F)mi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,h);else{this.o=!1,this.m=3,At(12),Tn(this),Pn(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<v.length;)if(ct=Ac(this,v),ct==qt){Ie==4&&(this.m=4,At(14),h=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==wt){this.m=4,At(15),mi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else mi(this.i,this.l,ct,null),_i(this,ct);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||v.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)mi(this.i,this.l,v,"[Invalid Chunked Response]"),Tn(this),Pn(this);else if(v.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Dl(se),se.P=!0,At(11))}}else mi(this.i,this.l,v,null),_i(this,v);Ie==4&&Tn(this),this.o&&!this.K&&(Ie==4?Oc(this.j,this):(this.o=!1,pi(this)))}else Fi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Tn(this),Pn(this)}}}catch{}};function vd(h){if(!Sc(h))return h.g.la();const y=Qt(h.g);if(y==="")return"";let v="";const S=y.length,L=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Tn(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let F=0;F<S;F++)h.h.h=!0,v+=h.h.i.decode(y[F],{stream:!(L&&F==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Sc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ac(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qt:(v=Number(y.substring(v,S)),isNaN(v)?wt:(S+=1,S+v>y.length?qt:(y=y.slice(S,S+v),h.C=S+v,y)))}Jn.prototype.cancel=function(){this.K=!0,Tn(this)};function pi(h){h.T=Date.now()+h.H,Ma(h,h.H)}function Ma(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=di(p(h.aa,h),y)}function yi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Cs(this.i,this.B),this.M!=2&&(hi(),At(17)),Tn(this),this.m=2,Pn(this)):Ma(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Oc(h.j,h)}function Tn(h){yi(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,dl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function _i(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ei(v.h,h))){if(!h.L&&Ei(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)qa(v),Cr(v);else break e;Us(v),At(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=di(p(v.Va,v),6e3));vi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ii(v,11)}else if((h.L||v.g==h)&&qa(v),!C(y))for(L=v.Ba.g.parse(y),y=0;y<L.length;y++){let Fe=L[y];const ct=Fe[0];if(!(ct<=v.K))if(v.K=ct,Fe=Fe[1],v.I==2)if(Fe[0]=="c"){v.M=Fe[1],v.ba=Fe[2];const Un=Fe[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const Ri=Fe[4];Ri!=null&&(v.za=Ri,v.j.info("SVER="+v.za));const ni=Fe[5];ni!=null&&typeof ni=="number"&&ni>0&&(S=1.5*ni,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ii=h.g;if(ii){const zs=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var F=S.h;F.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(_l(F,F.h),F.h=null))}if(S.G){const Fa=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Fa&&(S.wa=Fa,Qe(S.J,S.G,Fa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var se=h;if(S.na=kc(S,S.L?S.ba:null,S.W),se.L){vl(S.h,se);var Ie=se,_t=S.O;_t&&(Ie.H=_t),Ie.D&&(yi(Ie),pi(Ie)),S.g=se}else Nc(S);v.i.length>0&&wi(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Ii(v,7);else v.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ii(v,7):Cl(v):Fe[0]!="noop"&&v.l&&v.l.qa(Fe),v.A=0)}}hi(4)}catch{}}var It=class{constructor(h,y){this.g=h,this.map=y}};function pl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vi(h){return h.h?1:h.g?h.g.size:0}function Ei(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function _l(h,y){h.g?h.g.add(y):h.h=y}function vl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}pl.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function El(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return z(h.i)}var wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let L,F=null;S>=0?(L=h[v].substring(0,S),F=h[v].substring(S+1)):L=h[v],y(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function bn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof bn?(this.l=h.l,Ft(this,h.j),this.o=h.o,this.g=h.g,Tr(this,h.u),this.h=h.h,Tl(this,xc(h.i)),this.m=h.m):h&&(y=String(h).match(wc))?(this.l=!1,Ft(this,y[1]||"",!0),this.o=Ti(y[2]||""),this.g=Ti(y[3]||"",!0),Tr(this,y[4]),this.h=Ti(y[5]||"",!0),Tl(this,y[6]||"",!0),this.m=Ti(y[7]||"")):(this.l=!1,this.i=new Sr(null,this.l))}bn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Vs(y,ka,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Vs(y,ka,!0),"@"),h.push(ji(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Vs(v,v.charAt(0)=="/"?bl:Ic,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Vs(v,Rc)),h.join("")},bn.prototype.resolve=function(h){const y=Rt(this);let v=!!h.j;v?Ft(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Tr(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=y.h.lastIndexOf("/");L!=-1&&(S=y.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let se=0;se<L.length;){const Ie=L[se++];Ie=="."?S&&se==L.length&&F.push(""):Ie==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&se==L.length&&F.push("")):(F.push(Ie),S=!0)}S=F.join("/")}else S=L}return v?y.h=S:v=h.i.toString()!=="",v?Tl(y,xc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Rt(h){return new bn(h)}function Ft(h,y,v){h.j=v?Ti(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Tr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Tl(h,y,v){y instanceof Sr?(h.i=y,Ua(h.i,h.l)):(v||(y=Vs(y,br)),h.i=new Sr(y,h.l))}function Qe(h,y,v){h.i.set(y,v)}function Ns(h){return Qe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ti(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Vs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ka=/[#\/\?@]/g,Ic=/[#\?:]/g,bl=/[#\?]/g,br=/[#\?@]/g,Rc=/#/g;function Sr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Pa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Sr.prototype,s.add=function(h,y){dn(this),this.i=null,h=Ar(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Cc(h,y){dn(h),y=Ar(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Sl(h,y){return dn(h),y=Ar(h,y),h.g.has(y)}s.forEach=function(h,y){dn(this),this.g.forEach(function(v,S){v.forEach(function(L){h.call(y,L,S,this)},this)},this)};function Al(h,y){dn(h);let v=[];if(typeof y=="string")Sl(h,y)&&(v=v.concat(h.g.get(Ar(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return dn(this),this.i=null,h=Ar(this,h),Sl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Al(this,h),h.length>0?String(h[0]):y):y};function La(h,y,v){Cc(h,y),v.length>0&&(h.i=null,h.g.set(Ar(h,y),z(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const L=ji(v);v=Al(this,v);for(let F=0;F<v.length;F++){let se=L;v[F]!==""&&(se+="="+ji(v[F])),h.push(se)}}return this.i=h.join("&")};function xc(h){const y=new Sr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ar(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ua(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(Cc(this,S),La(this,L,v))},h)),h.j=y}function Wn(h,y){const v=new $n;if(c.Image){const S=new Image;S.onload=E(kn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(kn,v,"TestLoadImage: error",!1,y,S),S.onabort=E(kn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(kn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function wl(h,y){const v=new $n,S=new AbortController,L=setTimeout(()=>{S.abort(),kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?kn(v,"TestPingServer: ok",!0,y):kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),kn(v,"TestPingServer: error",!1,y)})}function kn(h,y,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function wr(){this.g=new pc}function bi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(bi,yc),bi.prototype.g=function(){return new Os(this.i,this.h)};function Os(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Os,St),s=Os.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ei(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;za(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function za(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ir(this):ei(this),this.readyState==3&&za(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ir(this))},s.Na=function(h){this.g&&(this.response=h,Ir(this))},s.ga=function(){this.g&&Ir(this)};function Ir(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Be(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Ms(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ln(v),typeof h=="string"?v!=null&&ji(v):Qe(h,y,v))}function Ze(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Ze,St);var Si=/^https?$/i,Il=["POST","PUT"];s=Ze.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(F){Ps(this,F);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())v.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Il,y,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,se]of v)this.g.setRequestHeader(F,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){Ps(this,F)}};function Ps(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Rl(h),qi(h)}function Rl(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),qi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Ze.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ks(this):this.Xa())},s.Xa=function(){ks(this)};function ks(h){if(h.h&&typeof u<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),ti(h)==4){h.h=!1;try{const F=h.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=F===0){let se=String(h.D).match(wc)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),S=!Si.test(se?se.toLowerCase():"")}v=S}if(v)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var L=ti(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",Rl(h)}}finally{qi(h)}}}}function qi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Lt(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),pd(y)}};function Qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(h){const y={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(C(h[S]))continue;var v=bc(h[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=y[L]||[];y[L]=F,F.push(v)}Ke(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Rr(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,h),this.Za=Ai("retryDelaySeedMs",1e4,h),this.Ta=Ai("forwardChannelMaxRetries",2,h),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(h&&h.concurrentRequestLimit),this.Ba=new wr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Rr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){At(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=kc(this,null,this.W),wi(this)};function Cl(h){if(Ba(h),h.I==3){var y=h.V++,v=Rt(h.J);if(Qe(v,"SID",h.M),Qe(v,"RID",y),Qe(v,"TYPE","terminate"),Ls(h,v),y=new Jn(h,h.j,y),y.M=2,y.A=Ns(Rt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Lc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),pi(y)}Pc(h)}function Cr(h){h.g&&(Dl(h),h.g.cancel(),h.g=null)}function Ba(h){Cr(h),h.v&&(c.clearTimeout(h.v),h.v=null),qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function wi(h){if(!yl(h.h)&&!h.m){h.m=!0;var y=h.Ea;ne||A(),ae||(ne(),ae=!0),I.add(y,h),h.D=0}}function ja(h,y){return vi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=di(p(h.Ea,h,y),Mc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new Jn(this,this.j,h);let F=this.o;if(this.U&&(F?(F=V(F),le(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Dc(this,L,y),v=Rt(this.J),Qe(v,"RID",h),Qe(v,"CVER",22),this.G&&Qe(v,"X-HTTP-Session-Id",this.G),Ls(this,v),F&&(this.R?y="headers="+ji(Ln(F))+"&"+y:this.u&&Ms(v,this.u,F)),_l(this.h,L),this.Ra&&Qe(v,"TYPE","init"),this.S?(Qe(v,"$req",y),Qe(v,"SID","null"),L.U=!0,gi(L,v,null)):gi(L,v,y),this.I=2}}else this.I==3&&(h?xl(this,h):this.i.length==0||yl(this.h)||xl(this))};function xl(h,y){var v;y?v=y.l:v=h.V++;const S=Rt(h.J);Qe(S,"SID",h.M),Qe(S,"RID",v),Qe(S,"AID",h.K),Ls(h,S),h.u&&h.o&&Ms(S,h.u,h.o),v=new Jn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Dc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_l(h.h,v),gi(v,S,y)}function Ls(h,y){h.H&&Be(h.H,function(v,S){Qe(y,S,v)}),h.l&&Be({},function(v,S){Qe(y,S,v)})}function Dc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var L=h.i;let Ie=-1;for(;;){const _t=["count="+v];Ie==-1?v>0?(Ie=L[0].g,_t.push("ofs="+Ie)):Ie=0:_t.push("ofs="+Ie);let Fe=!0;for(let ct=0;ct<v;ct++){var F=L[ct].g;const Un=L[ct].map;if(F-=Ie,F<0)Ie=Math.max(0,L[ct].g-100),Fe=!1;else try{F="req"+F+"_"||"";try{var se=Un instanceof Map?Un:Object.entries(Un);for(const[Ri,ni]of se){let ii=ni;m(ni)&&(ii=Er(ni)),_t.push(F+Ri+"="+encodeURIComponent(ii))}}catch(Ri){throw _t.push(F+"type="+encodeURIComponent("_badmap")),Ri}}catch{S&&S(Un)}}if(Fe){se=_t.join("&");break e}}se=void 0}return h=h.i.splice(0,v),y.G=h,se}function Nc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ne||A(),ae||(ne(),ae=!0),I.add(y,h),h.A=0}}function Us(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=di(p(h.Da,h),Mc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Vc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=di(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Cr(this),Vc(this))};function Dl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Vc(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Rt(h.na);Qe(y,"RID","rpc"),Qe(y,"SID",h.M),Qe(y,"AID",h.K),Qe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qe(y,"TO",h.ia),Qe(y,"TYPE","xmlhttp"),Ls(h,y),h.u&&h.o&&Ms(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Ns(Rt(y)),v.u=null,v.R=!0,Oa(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Cr(this),Us(this),At(19))};function qa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Oc(h,y){var v=null;if(h.g==y){qa(h),Dl(h),h.g=null;var S=2}else if(Ei(h.h,y))v=y.G,vl(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var L=h.D;S=Va(),Lt(S,new fi(S,v)),wi(h)}else Nc(h);else if(L=y.m,L==3||L==0&&y.X>0||!(S==1&&ja(h,y)||S==2&&Us(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),L){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function Mc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ii(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const L=!S;S=new bn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(S,"https"),Ns(S),L?Wn(S.toString(),v):wl(S.toString(),v)}else At(2);h.I=0,h.l&&h.l.pa(y),Pc(h),Ba(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Pc(h){if(h.I=0,h.ja=[],h.l){const y=El(h.h);(y.length!=0||h.i.length!=0)&&(Z(h.ja,y),Z(h.ja,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.oa()}}function kc(h,y,v){var S=v instanceof bn?Rt(v):new bn(v);if(S.g!="")y&&(S.g=y+"."+S.g),Tr(S,S.u);else{var L=c.location;S=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;const F=new bn(null);S&&Ft(F,S),y&&(F.g=y),L&&Tr(F,L),v&&(F.h=v),S=F}return v=h.G,y=h.wa,v&&y&&Qe(S,v,y),Qe(S,"VER",h.ka),Ls(h,S),S}function Lc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ze(new bi({ab:v})):new Ze(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uc(){}s=Uc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function xr(){}xr.prototype.g=function(h,y){return new ln(h,y)};function ln(h,y){St.call(this),this.g=new Rr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Hi(this)}b(ln,St),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Cl(this.g)},ln.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Er(h),h=v);y.i.push(new It(y.Ya++,h)),y.I==3&&wi(y)},ln.prototype.N=function(){this.g.l=null,delete this.j,Cl(this.g),delete this.g,ln.Z.N.call(this)};function zc(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(zc,Kt);function Bc(){Mn.call(this),this.status=1}b(Bc,Mn);function Hi(h){this.g=h}b(Hi,Uc),Hi.prototype.ra=function(){Lt(this.g,"a")},Hi.prototype.qa=function(h){Lt(this.g,new zc(h))},Hi.prototype.pa=function(h){Lt(this.g,new Bc)},Hi.prototype.oa=function(){Lt(this.g,"b")},xr.prototype.createWebChannel=xr.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,uS=function(){return new xr},lS=function(){return Va()},oS=yt,Kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xs.NO_ERROR=0,xs.TIMEOUT=8,xs.HTTP_ERROR=6,nf=xs,ml.COMPLETE="complete",aS=ml,_c.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",St.prototype.listen=St.prototype.J,bu=_c,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,sS=Ze}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});const UT="@firebase/firestore",zT="4.9.3";class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let nl="12.7.0";const ya=new Tp("@firebase/firestore");function Io(){return ya.logLevel}function W(s,...e){if(ya.logLevel<=Pe.DEBUG){const t=e.map(Vp);ya.debug(`Firestore (${nl}): ${s}`,...t)}}function Tt(s,...e){if(ya.logLevel<=Pe.ERROR){const t=e.map(Vp);ya.error(`Firestore (${nl}): ${s}`,...t)}}function qu(s,...e){if(ya.logLevel<=Pe.WARN){const t=e.map(Vp);ya.warn(`Firestore (${nl}): ${s}`,...t)}}function Vp(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function fe(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,cS(s,r,t)}function cS(s,e,t){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tt(r),new Error(r)}function pe(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||cS(e,o,r)}function me(s,e){return s}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Kx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class Yx{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new cr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new cr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new Kx(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Xx{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $x{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Xx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class BT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0,3512);const r=u=>{u.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,W("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new BT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new BT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Zx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function Ae(s,e){return s<e?-1:s>e?1:0}function Qg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Rg(o)===Rg(u)?Ae(o,u):Rg(o)?1:-1}return Ae(s.length,e.length)}const Wx=55296,eD=57343;function Rg(s){const e=s.charCodeAt(0);return e>=Wx&&e<=eD}function Lo(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function hS(s){return s+"\0"}const jT="__name__";class Vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Vi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ae(e.length,t.length)}static compareSegments(e,t){const r=Vi.isNumericId(e),o=Vi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class Ge extends Vi{construct(e,t,r){return new Ge(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const tD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Vi{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return tD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jT}static keyField(){return new dt([jT])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Ge.fromString(e))}static fromName(e){return new ue(Ge.fromString(e).popFirst(5))}static empty(){return new ue(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Ge(e.slice()))}}function fS(s,e,t){if(!t)throw new ce(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nD(s,e,t,r){if(e===!0&&r===!0)throw new ce(X.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function qT(s){if(!ue.isDocumentKey(s))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function FT(s){if(ue.isDocumentKey(s))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function dS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Mp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":fe(12329,{type:typeof s})}function _a(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mp(s);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ot(s,e){const t={typeString:s};return e&&(t.value=e),t}function oc(s,e){if(!dS(s))throw new ce(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new ce(X.INVALID_ARGUMENT,t);return!0}const HT=-62135596800,GT=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GT);return new $e(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HT)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GT}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oc(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Ot("string",$e._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new $e(0,0))}static max(){return new ve(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Uo=-1;class bf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Yg(s){return s.fields.find((e=>e.kind===2))}function ia(s){return s.fields.filter((e=>e.kind!==2))}bf.UNKNOWN_ID=-1;class rf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fu(0,On.min())}}function mS(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=ve.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new On(o,ue.empty(),e)}function gS(s){return new On(s.readTime,s.key,Uo)}class On{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new On(ve.min(),ue.empty(),Uo)}static max(){return new On(ve.max(),ue.empty(),Uo)}}function Pp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(s.documentKey,e.documentKey),t!==0?t:Ae(s.largestBatchId,e.largestBatchId))}const pS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Es(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==pS)throw s;W("LocalStore","Unexpectedly lost primary lease")}class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new k(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof k?t:k.resolve(t)}catch(t){return k.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):k.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):k.reject(t)}static resolve(e){return new k(((t,r)=>{t(e)}))}static reject(e){return new k(((t,r)=>{r(e)}))}static waitFor(e){return new k(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>r(g)))})),c=!0,u===o&&t()}))}static or(e){let t=k.resolve(!1);for(const r of e)t=t.next((o=>o?k.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new k(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new k(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}const Dn="SimpleDb";class Kf{static open(e,t,r,o){try{return new Kf(t,e.transaction(o,r))}catch(u){throw new xu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new cr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new xu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=kp(r.target.error);this.S.reject(new xu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(W(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rD(t)}}class fs{static delete(e){return W(Dn,"Removing database:",e),sa(hb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_b())return!1;if(fs.F())return!0;const e=zt(),t=fs.M(e),r=0<t&&t<10,o=_S(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,fs.M(zt())===12.2&&Tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(W(Dn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{r(new xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new ce(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ce(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new xu(e,c))},o.onupgradeneeded=u=>{W(Dn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{W(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Kf.open(this.db,e,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),k.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(W(Dn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _S(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class iD{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return sa(this.U.delete())}}class xu extends ce{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ts(s){return s.name==="IndexedDbTransactionError"}class rD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W(Dn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(W(Dn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sa(r)}add(e){return W(Dn,"ADD",this.store.name,e,e),sa(this.store.add(e))}get(e){return sa(this.store.get(e)).next((t=>(t===void 0&&(t=null),W(Dn,"GET",this.store.name,e,t),t)))}delete(e){return W(Dn,"DELETE",this.store.name,e),sa(this.store.delete(e))}count(){return W(Dn,"COUNT",this.store.name),sa(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new k(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new k(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){W(Dn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new k(((r,o)=>{t.onerror=u=>{const c=kp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(e,t){const r=[];return new k(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new iD(m),p=t(m.primaryKey,m.value,g);if(p instanceof k){const E=p.catch((b=>(g.done(),k.reject(b))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>k.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sa(s){return new k(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=kp(r.target.error);t(o)}}))}let KT=!1;function kp(s){const e=fs.M(zt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KT||(KT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Du="IndexBackfiller";class sD{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){W(Du,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();W(Du,`Documents written: ${t}`)}catch(t){Ts(t)?W(Du,"Ignoring IndexedDB error during index backfill: ",t):await Es(t)}await this.re(6e4)}))}}class aD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return k.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return W(Du,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(W(Du,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const c=gS(u);Pp(c,r)>0&&(r=c)})),new On(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vn.ce=-1;const ca=-1;function Qf(s){return s==null}function Hu(s){return s===0&&1/s==-1/0}function vS(s){return typeof s=="number"&&Number.isInteger(s)&&!Hu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Sf="";function an(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=QT(e)),e=oD(s.get(t),e);return QT(e)}function oD(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case Sf:t+="";break;default:t+=u}}return t}function QT(s){return s+Sf+""}function Mi(s){const e=s.length;if(pe(e>=2,64408,{path:s}),e===2)return pe(s.charAt(0)===Sf&&s.charAt(1)==="",56145,{path:s}),Ge.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=s.indexOf(Sf,u);switch((c<0||c>t)&&fe(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:fe(61167,{path:s})}u=c+2}return new Ge(r)}const ra="remoteDocuments",lc="owner",Eo="owner",Gu="mutationQueues",lD="userId",oi="mutations",YT="batchId",ua="userMutationsIndex",XT=["userId","batchId"];function sf(s,e){return[s,an(e)]}function ES(s,e,t){return[s,an(e),t]}const uD={},zo="documentMutations",Af="remoteDocumentsV14",cD=["prefixPath","collectionGroup","readTime","documentId"],af="documentKeyIndex",hD=["prefixPath","collectionGroup","documentId"],TS="collectionGroupIndex",fD=["collectionGroup","readTime","prefixPath","documentId"],Ku="remoteDocumentGlobal",Xg="remoteDocumentGlobalKey",Bo="targets",bS="queryTargetsIndex",dD=["canonicalId","targetId"],jo="targetDocuments",mD=["targetId","path"],Lp="documentTargetsIndex",gD=["path","targetId"],wf="targetGlobalKey",ha="targetGlobal",Qu="collectionParents",pD=["collectionId","parent"],qo="clientMetadata",yD="clientId",Yf="bundles",_D="bundleId",Xf="namedQueries",vD="name",Up="indexConfiguration",ED="indexId",$g="collectionGroupIndex",TD="collectionGroup",Nu="indexState",bD=["indexId","uid"],SS="sequenceNumberIndex",SD=["uid","sequenceNumber"],Vu="indexEntries",AD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AS="documentKeyIndex",wD=["indexId","uid","orderedDocumentKey"],$f="documentOverlays",ID=["userId","collectionPath","documentId"],Jg="collectionPathOverlayIndex",RD=["userId","collectionPath","largestBatchId"],wS="collectionGroupOverlayIndex",CD=["userId","collectionGroup","largestBatchId"],zp="globals",xD="name",IS=[Gu,oi,zo,ra,Bo,lc,ha,jo,qo,Ku,Qu,Yf,Xf],DD=[...IS,$f],RS=[Gu,oi,zo,Af,Bo,lc,ha,jo,qo,Ku,Qu,Yf,Xf,$f],CS=RS,Bp=[...CS,Up,Nu,Vu],ND=Bp,xS=[...Bp,zp],VD=xS;class Zg extends yS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function jt(s,e){const t=me(s);return fs.O(t.le,e)}function $T(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function bs(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function DS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class rt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kh(this.root,e,this.comparator,!0)}}class Kh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Zt(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Je{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(e){return new JT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class JT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(s){return s.hasNext()?s.getNext():void 0}class En{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new En([])}unionWith(e){let t=new Je(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class NS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new NS("Invalid base64 string: "+u):u}})(e);return new bt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const OD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(s){if(pe(!!s,39018),typeof s=="string"){let e=0;const t=OD.exec(s);if(pe(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(s.seconds),nanos:ft(s.nanos)}}function ft(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function gr(s){return typeof s=="string"?bt.fromBase64String(s):bt.fromUint8Array(s)}const VS="server_timestamp",OS="__type__",MS="__previous_value__",PS="__local_write_time__";function jp(s){return(s?.mapValue?.fields||{})[OS]?.stringValue===VS}function Jf(s){const e=s.mapValue.fields[MS];return jp(e)?Jf(e):e}function Yu(s){const e=mr(s.mapValue.fields[PS].timestampValue);return new $e(e.seconds,e.nanos)}class MD{constructor(e,t,r,o,u,c,m,g,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const If="(default)";class va{constructor(e,t){this.projectId=e,this.database=t||If}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const qp="__type__",kS="__max__",os={mapValue:{fields:{__type__:{stringValue:kS}}}},Fp="__vector__",Fo="value",of={nullValue:"NULL_VALUE"};function ms(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?jp(s)?4:LS(s)?9007199254740991:Zf(s)?10:11:fe(28295,{value:s})}function Bi(s,e){if(s===e)return!0;const t=ms(s);if(t!==ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Yu(s).isEqual(Yu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=mr(o.timestampValue),m=mr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return gr(o.bytesValue).isEqual(gr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return ft(o.geoPointValue.latitude)===ft(u.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ft(o.integerValue)===ft(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=ft(o.doubleValue),m=ft(u.doubleValue);return c===m?Hu(c)===Hu(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Lo(s.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if($T(c)!==$T(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Bi(c[g],m[g])))return!1;return!0})(s,e);default:return fe(52216,{left:s})}}function Xu(s,e){return(s.values||[]).find((t=>Bi(t,e)))!==void 0}function gs(s,e){if(s===e)return 0;const t=ms(s),r=ms(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=ft(u.integerValue||u.doubleValue),g=ft(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return ZT(s.timestampValue,e.timestampValue);case 4:return ZT(Yu(s),Yu(e));case 5:return Qg(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=gr(u),g=gr(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Ae(m[p],g[p]);if(E!==0)return E}return Ae(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Ae(ft(u.latitude),ft(c.latitude));return m!==0?m:Ae(ft(u.longitude),ft(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return WT(s.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Fo]?.arrayValue,E=g[Fo]?.arrayValue,b=Ae(p?.values?.length||0,E?.values?.length||0);return b!==0?b:WT(p,E)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===os.mapValue&&c===os.mapValue)return 0;if(u===os.mapValue)return 1;if(c===os.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let b=0;b<g.length&&b<E.length;++b){const w=Qg(g[b],E[b]);if(w!==0)return w;const z=gs(m[g[b]],p[E[b]]);if(z!==0)return z}return Ae(g.length,E.length)})(s.mapValue,e.mapValue);default:throw fe(23264,{he:t})}}function ZT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ae(s,e);const t=mr(s),r=mr(e),o=Ae(t.seconds,r.seconds);return o!==0?o:Ae(t.nanos,r.nanos)}function WT(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=gs(t[o],r[o]);if(u)return u}return Ae(t.length,r.length)}function Ho(s){return Wg(s)}function Wg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=mr(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return gr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ue.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Wg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Wg(t.fields[c])}`;return o+"}"})(s.mapValue):fe(61005,{value:s})}function lf(s){switch(ms(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jf(s);return e?16+lf(e):16;case 5:return 2*s.stringValue.length;case 6:return gr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+lf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return bs(r.fields,((u,c)=>{o+=u.length+lf(c)})),o})(s.mapValue);default:throw fe(13486,{value:s})}}function Hp(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function ep(s){return!!s&&"integerValue"in s}function $u(s){return!!s&&"arrayValue"in s}function e0(s){return!!s&&"nullValue"in s}function t0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function uf(s){return!!s&&"mapValue"in s}function Zf(s){return(s?.mapValue?.fields||{})[qp]?.stringValue===Fp}function Ou(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return bs(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ou(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ou(s.arrayValue.values[t]);return e}return{...s}}function LS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===kS}const US={mapValue:{fields:{[qp]:{stringValue:Fp},[Fo]:{arrayValue:{}}}}};function PD(s){return"nullValue"in s?of:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Hp(va.empty(),ue.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Zf(s)?US:{mapValue:{}}:fe(35942,{value:s})}function kD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Hp(va.empty(),ue.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?US:"mapValue"in s?Zf(s)?{mapValue:{}}:os:fe(61959,{value:s})}function n0(s,e){const t=gs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function i0(s,e){const t=gs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(t)}setAll(e){let t=dt.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Ou(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];uf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){bs(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new sn(Ou(this.value))}}function zS(s){const e=[];return bs(s.fields,((t,r)=>{const o=new dt([t]);if(uf(r)){const u=zS(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new En(e)}class pt{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new pt(e,0,ve.min(),ve.min(),ve.min(),sn.empty(),0)}static newFoundDocument(e,t,r,o){return new pt(e,1,t,ve.min(),r,o,0)}static newNoDocument(e,t){return new pt(e,2,t,ve.min(),ve.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,ve.min(),ve.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Go{constructor(e,t){this.position=e,this.inclusive=t}}function r0(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=ue.comparator(ue.fromName(c.referenceValue),t.key):r=gs(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Bi(s.position[t],e.position[t]))return!1;return!0}class Rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function LD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class BS{}class Le extends BS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new UD(e,t,r):t==="array-contains"?new jD(e,r):t==="in"?new KS(e,r):t==="not-in"?new qD(e,r):t==="array-contains-any"?new FD(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zD(e,r):new BD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gs(t,this.value)):t!==null&&ms(this.value)===ms(t)&&this.matchesComparison(gs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends BS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nt(e,t)}matches(e){return Ko(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ko(s){return s.op==="and"}function tp(s){return s.op==="or"}function Gp(s){return jS(s)&&Ko(s)}function jS(s){for(const e of s.filters)if(e instanceof nt)return!1;return!0}function np(s){if(s instanceof Le)return s.field.canonicalString()+s.op.toString()+Ho(s.value);if(Gp(s))return s.filters.map((e=>np(e))).join(",");{const e=s.filters.map((t=>np(t))).join(",");return`${s.op}(${e})`}}function qS(s,e){return s instanceof Le?(function(r,o){return o instanceof Le&&r.op===o.op&&r.field.isEqual(o.field)&&Bi(r.value,o.value)})(s,e):s instanceof nt?(function(r,o){return o instanceof nt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&qS(c,o.filters[m])),!0):!1})(s,e):void fe(19439)}function FS(s,e){const t=s.filters.concat(e);return nt.create(t,s.op)}function HS(s){return s instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ho(t.value)}`})(s):s instanceof nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(HS).join(" ,")+"}"})(s):"Filter"}class UD extends Le{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class zD extends Le{constructor(e,t){super(e,"in",t),this.keys=GS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BD extends Le{constructor(e,t){super(e,"not-in",t),this.keys=GS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function GS(s,e){return(e.arrayValue?.values||[]).map((t=>ue.fromName(t.referenceValue)))}class jD extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $u(t)&&Xu(t.arrayValue,this.value)}}class KS extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xu(this.value.arrayValue,t)}}class qD extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xu(this.value.arrayValue,t)}}class FD extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$u(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Xu(this.value.arrayValue,r)))}}class HD{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function ip(s,e=null,t=[],r=[],o=null,u=null,c=null){return new HD(s,e,t,r,o,u,c)}function Ea(s){const e=me(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>np(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ho(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ho(r))).join(",")),e.Te=t}return e.Te}function uc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!LD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!qS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!s0(s.startAt,e.startAt)&&s0(s.endAt,e.endAt)}function Cf(s){return ue.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function xf(s,e){return s.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function a0(s,e,t){let r=of,o=!0;for(const u of xf(s,e)){let c=of,m=!0;switch(u.op){case"<":case"<=":c=PD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=of}n0({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];n0({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function o0(s,e,t){let r=os,o=!0;for(const u of xf(s,e)){let c=os,m=!0;switch(u.op){case">=":case">":c=kD(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=os}i0({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];i0({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}class Wf{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QS(s,e,t,r,o,u,c,m){return new Wf(s,e,t,r,o,u,c,m)}function ed(s){return new Wf(s)}function l0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function GD(s){return s.collectionGroup!==null}function Mu(s){const e=me(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Je(dt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Rf(u,r))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new Rf(dt.keyField(),r))}return e.Ie}function Vn(s){const e=me(s);return e.Ee||(e.Ee=KD(e,Mu(s))),e.Ee}function KD(s,e){if(s.limitType==="F")return ip(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Rf(o.field,u)}));const t=s.endAt?new Go(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Go(s.startAt.position,s.startAt.inclusive):null;return ip(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function rp(s,e,t){return new Wf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function td(s,e){return uc(Vn(s),Vn(e))&&s.limitType===e.limitType}function YS(s){return`${Ea(Vn(s))}|lt:${s.limitType}`}function Ro(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>HS(o))).join(", ")}]`),Qf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Ho(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Ho(o))).join(",")),`Target(${r})`})(Vn(s))}; limitType=${s.limitType})`}function cc(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ue.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Mu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=r0(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,Mu(r),o)||r.endAt&&!(function(c,m,g){const p=r0(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,Mu(r),o))})(s,e)}function XS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function $S(s){return(e,t)=>{let r=!1;for(const o of Mu(s)){const u=QD(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function QD(s,e,t){const r=s.field.isKeyField()?ue.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?gs(g,p):fe(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:s.dir})}}class yr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return DS(this.inner)}size(){return this.innerSize}}const YD=new rt(ue.comparator);function Nn(){return YD}const JS=new rt(ue.comparator);function Su(...s){let e=JS;for(const t of s)e=e.insert(t.key,t);return e}function ZS(s){let e=JS;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Pi(){return Pu()}function WS(){return Pu()}function Pu(){return new yr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const XD=new rt(ue.comparator),$D=new Je(ue.comparator);function De(...s){let e=$D;for(const t of s)e=e.add(t);return e}const JD=new Je(Ae);function Kp(){return JD}function Qp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function eA(s){return{integerValue:""+s}}function ZD(s,e){return vS(e)?eA(e):Qp(s,e)}class nd{constructor(){this._=void 0}}function WD(s,e,t){return s instanceof Qo?(function(o,u){const c={fields:{[OS]:{stringValue:VS},[PS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&jp(u)&&(u=Jf(u)),u&&(c.fields[MS]=u),{mapValue:c}})(t,e):s instanceof Ta?nA(s,e):s instanceof ba?iA(s,e):(function(o,u){const c=tA(o,u),m=u0(c)+u0(o.Ae);return ep(c)&&ep(o.Ae)?eA(m):Qp(o.serializer,m)})(s,e)}function eN(s,e,t){return s instanceof Ta?nA(s,e):s instanceof ba?iA(s,e):t}function tA(s,e){return s instanceof Ju?(function(r){return ep(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Qo extends nd{}class Ta extends nd{constructor(e){super(),this.elements=e}}function nA(s,e){const t=rA(e);for(const r of s.elements)t.some((o=>Bi(o,r)))||t.push(r);return{arrayValue:{values:t}}}class ba extends nd{constructor(e){super(),this.elements=e}}function iA(s,e){let t=rA(e);for(const r of s.elements)t=t.filter((o=>!Bi(o,r)));return{arrayValue:{values:t}}}class Ju extends nd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function u0(s){return ft(s.integerValue||s.doubleValue)}function rA(s){return $u(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class id{constructor(e,t){this.field=e,this.transform=t}}function tN(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Ta&&o instanceof Ta||r instanceof ba&&o instanceof ba?Lo(r.elements,o.elements,Bi):r instanceof Ju&&o instanceof Ju?Bi(r.Ae,o.Ae):r instanceof Qo&&o instanceof Qo})(s.transform,e.transform)}class nN{constructor(e,t){this.version=e,this.transformResults=t}}class cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class rd{}function sA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Yp(s.key,cn.none()):new il(s.key,s.data,cn.none());{const t=s.data,r=sn.empty();let o=new Je(dt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new _r(s.key,r,new En(o.toArray()),cn.none())}}function iN(s,e,t){s instanceof il?(function(o,u,c){const m=o.value.clone(),g=h0(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof _r?(function(o,u,c){if(!cf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=h0(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(aA(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ku(s,e,t,r){return s instanceof il?(function(u,c,m,g){if(!cf(u.precondition,c))return m;const p=u.value.clone(),E=f0(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof _r?(function(u,c,m,g){if(!cf(u.precondition,c))return m;const p=f0(u.fieldTransforms,g,c),E=c.data;return E.setAll(aA(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(s,e,t,r):(function(u,c,m){return cf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function rN(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=tA(r.transform,o||null);u!=null&&(t===null&&(t=sn.empty()),t.set(r.field,u))}return t||null}function c0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lo(r,o,((u,c)=>tN(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class il extends rd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _r extends rd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function aA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function h0(s,e,t){const r=new Map;pe(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,eN(c,m,t[o]))}return r}function f0(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,WD(u,c,e))}return r}class Yp extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oA extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&iN(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WS();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=sA(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(ve.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,r)=>c0(t,r)))&&Lo(this.baseMutations,e.baseMutations,((t,r)=>c0(t,r)))}}class $p{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return XD})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new $p(e,t,r,o)}}class Jp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sN{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vt,ze;function aN(s){switch(s){case X.OK:return fe(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return fe(15467,{code:s})}}function lA(s){if(s===void 0)return Tt("GRPC error has no .code"),X.UNKNOWN;switch(s){case Vt.OK:return X.OK;case Vt.CANCELLED:return X.CANCELLED;case Vt.UNKNOWN:return X.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return X.INTERNAL;case Vt.UNAVAILABLE:return X.UNAVAILABLE;case Vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Vt.NOT_FOUND:return X.NOT_FOUND;case Vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Vt.ABORTED:return X.ABORTED;case Vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Vt.DATA_LOSS:return X.DATA_LOSS;default:return fe(39323,{code:s})}}(ze=Vt||(Vt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";function oN(){return new TextEncoder}const lN=new hs([4294967295,4294967295],0);function d0(s){const e=oN().encode(s),t=new rS;return t.update(e),new Uint8Array(t.digest())}function m0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new hs([t,r],0),new hs([o,u],0)]}class Zp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Au(`Invalid padding: ${t}`);if(r<0)throw new Au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Au(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hs.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(hs.fromNumber(r)));return o.compare(lN)===1&&(o=new hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=d0(e),[r,o]=m0(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Zp(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=d0(e),[r,o]=m0(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hc{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hc(ve.min(),o,new rt(Ae),Nn(),De())}}class fc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fc(r,t,De(),De(),De())}}class hf{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class uA{constructor(e,t){this.targetId=e,this.Ce=t}}class cA{constructor(e,t,r=bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class g0{constructor(){this.ve=0,this.Fe=p0(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),r=De();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:fe(38017,{changeType:u})}})),new fc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=p0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nn(),this.Je=Qh(),this.He=Qh(),this.Ye=new rt(Ae)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Cf(u))if(r===0){const c=new ue(u.path);this.et(t,c,pt.newNoDocument(c,ve.min()))}else pe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=gr(r).toUint8Array()}catch(g){if(g instanceof NS)return qu("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Zp(c,o,u)}catch(g){return qu(g instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Cf(m.target)){const g=new ue(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,pt.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let r=De();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new hc(e,t,this.Ye,this.je,r);return this.je=Nn(),this.Je=Qh(),this.He=Qh(),this.Ye=new rt(Ae),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new g0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Je(Ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Je(Ae),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new g0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qh(){return new rt(ue.comparator)}function p0(){return new rt(ue.comparator)}const cN={asc:"ASCENDING",desc:"DESCENDING"},hN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fN={and:"AND",or:"OR"};class dN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(s,e){return s.useProto3Json||Qf(e)?e:{value:e}}function Yo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function mN(s,e){return Yo(s,e.toTimestamp())}function hn(s){return pe(!!s,49232),ve.fromTimestamp((function(t){const r=mr(t);return new $e(r.seconds,r.nanos)})(s))}function Wp(s,e){return ap(s,e).canonicalString()}function ap(s,e){const t=(function(o){return new Ge(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function fA(s){const e=Ge.fromString(s);return pe(TA(e),10190,{key:e.toString()}),e}function Df(s,e){return Wp(s.databaseId,e.path)}function fa(s,e){const t=fA(e);if(t.get(1)!==s.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ue(gA(t))}function dA(s,e){return Wp(s.databaseId,e)}function mA(s){const e=fA(s);return e.length===4?Ge.emptyPath():gA(e)}function op(s){return new Ge(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function gA(s){return pe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function y0(s,e,t){return{name:Df(s,e),fields:t.value.mapValue.fields}}function gN(s,e,t){const r=fa(s,e.name),o=hn(e.updateTime),u=e.createTime?hn(e.createTime):ve.min(),c=new sn({mapValue:{fields:e.fields}}),m=pt.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function pN(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:fe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(pe(E===void 0||typeof E=="string",58123),bt.fromBase64String(E||"")):(pe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),bt.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?X.UNKNOWN:lA(p.code);return new ce(E,p.message||"")})(c);t=new cA(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=fa(s,r.document.name),u=hn(r.document.updateTime),c=r.document.createTime?hn(r.document.createTime):ve.min(),m=new sn({mapValue:{fields:r.document.fields}}),g=pt.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];t=new hf(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=fa(s,r.document),u=r.readTime?hn(r.readTime):ve.min(),c=pt.newNoDocument(o,u),m=r.removedTargetIds||[];t=new hf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=fa(s,r.document),u=r.removedTargetIds||[];t=new hf([],u,o,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new sN(o,u),m=r.targetId;t=new uA(m,c)}}return t}function Nf(s,e){let t;if(e instanceof il)t={update:y0(s,e.key,e.value)};else if(e instanceof Yp)t={delete:Df(s,e.key)};else if(e instanceof _r)t={update:y0(s,e.key,e.data),updateMask:bN(e.fieldMask)};else{if(!(e instanceof oA))return fe(16599,{Vt:e.type});t={verify:Df(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Qo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ta)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ba)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ju)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw fe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:mN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:fe(27497)})(s,e.precondition)),t}function lp(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?cn.updateTime(hn(u.updateTime)):u.exists!==void 0?cn.exists(u.exists):cn.none()})(e.currentDocument):cn.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)pe(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Qo;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Ta(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new ba(E)}else"increment"in m?g=new Ju(c,m.increment):fe(16584,{proto:m});const p=dt.fromServerFormat(m.fieldPath);return new id(p,g)})(s,o))):[];if(e.update){e.update.name;const o=fa(s,e.update.name),u=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((E=>dt.fromServerFormat(E))))})(e.updateMask);return new _r(o,u,c,t,r)}return new il(o,u,t,r)}if(e.delete){const o=fa(s,e.delete);return new Yp(o,t)}if(e.verify){const o=fa(s,e.verify);return new oA(o,t)}return fe(1463,{proto:e})}function yN(s,e){return s&&s.length>0?(pe(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(ve.min())&&(c=hn(u)),new nN(c,o.transformResults||[])})(t,e)))):[]}function pA(s,e){return{documents:[dA(s,e.path)]}}function yA(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dA(s,o);const u=(function(p){if(p.length!==0)return EA(nt.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(w){return{field:Co(w.field),direction:vN(w.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=sp(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function _A(s){let e=mA(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){pe(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(b){const w=vA(b);return w instanceof nt&&Gp(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((w=>(function(Z){return new Rf(xo(Z.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let w;return w=typeof b=="object"?b.value:b,Qf(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(b){const w=!!b.before,z=b.values||[];return new Go(z,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const w=!b.before,z=b.values||[];return new Go(z,w)})(t.endAt)),QS(e,o,c,u,m,"F",g,p)}function _N(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xo(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(t.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=xo(t.unaryFilter.field);return Le.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=xo(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Le.create(xo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return nt.create(t.compositeFilter.filters.map((r=>vA(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return fe(1026)}})(t.compositeFilter.op))})(s):fe(30097,{filter:s})}function vN(s){return cN[s]}function EN(s){return hN[s]}function TN(s){return fN[s]}function Co(s){return{fieldPath:s.canonicalString()}}function xo(s){return dt.fromServerFormat(s.fieldPath)}function EA(s){return s instanceof Le?(function(t){if(t.op==="=="){if(t0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(e0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(t0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(e0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:EN(t.op),value:t.value}}})(s):s instanceof nt?(function(t){const r=t.getFilters().map((o=>EA(o)));return r.length===1?r[0]:{compositeFilter:{op:TN(t.op),filters:r}}})(s):fe(54877,{filter:s})}function bN(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class lr{constructor(e,t,r,o,u=ve.min(),c=ve.min(),m=bt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bA{constructor(e){this.yt=e}}function SN(s,e){let t;if(e.document)t=gN(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),o=Aa(e.noDocument.readTime);t=pt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return fe(56709);{const r=ue.fromSegments(e.unknownDocument.path),o=Aa(e.unknownDocument.version);t=pt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new $e(o[0],o[1]);return ve.fromTimestamp(u)})(e.readTime)),t}function _0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,c){return{name:Df(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Yo(u,c.version.toTimestamp()),createTime:Yo(u,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sa(e.version)};else{if(!e.isUnknownDocument())return fe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Sa(e.version)}}return r}function Vf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Sa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Aa(s){const e=new $e(s.seconds,s.nanoseconds);return ve.fromTimestamp(e)}function aa(s,e){const t=(e.baseMutations||[]).map((u=>lp(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>lp(s.yt,u))),o=$e.fromMillis(e.localWriteTimeMs);return new Xp(e.batchId,o,t,r)}function wu(s){const e=Aa(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Aa(s.lastLimboFreeSnapshotVersion):ve.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return pe(c===1,1966,{count:c}),Vn(ed(mA(u.documents[0])))})(s.query):(function(u){return Vn(_A(u))})(s.query),new lr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,bt.fromBase64String(s.resumeToken))}function SA(s,e){const t=Sa(e.snapshotVersion),r=Sa(e.lastLimboFreeSnapshotVersion);let o;o=Cf(e.target)?pA(s.yt,e.target):yA(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ea(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function AA(s){const e=_A({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?rp(e,e.limit,"L"):e}function Cg(s,e){return new Jp(e.largestBatchId,lp(s.yt,e.overlayMutation))}function v0(s,e){const t=e.path.lastSegment();return[s,an(e.path.popLast()),t]}function E0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Sa(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}class AN{getBundleMetadata(e,t){return T0(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:Aa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return T0(e).put((function(o){return{bundleId:o.id,createTime:Sa(hn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return b0(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:AA(u.bundledQuery),readTime:Aa(u.readTime)}})(r)}))}saveNamedQuery(e,t){return b0(e).put((function(o){return{name:o.name,readTime:Sa(hn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function T0(s){return jt(s,Yf)}function b0(s){return jt(s,Xf)}class sd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new sd(e,r)}getOverlay(e,t){return gu(e).get(v0(this.userId,t)).next((r=>r?Cg(this.serializer,r):null))}getOverlays(e,t){const r=Pi();return k.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,c)=>{const m=new Jp(t,c);o.push(this.St(e,m))})),k.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(an(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(gu(e).Z(Jg,m))})),k.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Pi(),u=an(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gu(e).J(Jg,c).next((m=>{for(const g of m){const p=Cg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=Pi();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gu(e).ee({index:wS,range:m},((g,p,E)=>{const b=Cg(this.serializer,p);u.size()<o||b.largestBatchId===c?(u.set(b.getKey(),b),c=b.largestBatchId):E.done()})).next((()=>u))}St(e,t){return gu(e).put((function(o,u,c){const[m,g,p]=v0(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Nf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function gu(s){return jt(s,$f)}class wN{bt(e){return jt(e,zp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?bt.fromUint8Array(r):bt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class oa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const r=ft(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Hu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=mr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(gr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?LS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):fe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const o=Fo,u=r[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(u)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),ue.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}oa.Kt=new oa;const bo=255;function IN(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function S0(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=IN(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(e/8)}class RN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=S0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=S0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(bo),this.sn(255)}_n(){this.an(bo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===bo?(this.sn(bo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===bo?(this.an(bo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class CN{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class xN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class pu{constructor(){this.cn=new RN,this.ln=new CN(this.cn),this.hn=new xN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class la{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new la(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:ff(this.En),directionalValue:ff(this.dn),orderedDocumentKey:ff(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Wr(s,e){let t=s.Tn-e.Tn;return t!==0?t:(t=A0(s.En,e.En),t!==0?t:(t=A0(s.dn,e.dn),t!==0?t:ue.comparator(s.In,e.In)))}function A0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function ff(s){return yb()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function w0(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class I0{constructor(e){this.mn=new Je(((t,r)=>dt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Yg(e);if(t!==void 0&&!this.wn(t))return!1;const r=ia(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new Je(dt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new rf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new rf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new rf(r.field,r.dir==="asc"?0:1)));return new bf(bf.UNKNOWN_ID,this.collectionId,t,Fu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function wA(s){if(pe(s instanceof Le||s instanceof nt,20012),s instanceof Le){if(s instanceof KS){const t=s.value.arrayValue?.values?.map((r=>Le.create(s.field,"==",r)))||[];return nt.create(t,"or")}return s}const e=s.filters.map((t=>wA(t)));return nt.create(e,s.op)}function DN(s){if(s.getFilters().length===0)return[];const e=hp(wA(s));return pe(IA(e),7391),up(e)||cp(e)?[e]:e.getFilters()}function up(s){return s instanceof Le}function cp(s){return s instanceof nt&&Gp(s)}function IA(s){return up(s)||cp(s)||(function(t){if(t instanceof nt&&tp(t)){for(const r of t.getFilters())if(!up(r)&&!cp(r))return!1;return!0}return!1})(s)}function hp(s){if(pe(s instanceof Le||s instanceof nt,34018),s instanceof Le)return s;if(s.filters.length===1)return hp(s.filters[0]);const e=s.filters.map((r=>hp(r)));let t=nt.create(e,s.op);return t=Of(t),IA(t)?t:(pe(t instanceof nt,64498),pe(Ko(t),40251),pe(t.filters.length>1,57927),t.filters.reduce(((r,o)=>ey(r,o))))}function ey(s,e){let t;return pe(s instanceof Le||s instanceof nt,38388),pe(e instanceof Le||e instanceof nt,25473),t=s instanceof Le?e instanceof Le?(function(o,u){return nt.create([o,u],"and")})(s,e):R0(s,e):e instanceof Le?R0(e,s):(function(o,u){if(pe(o.filters.length>0&&u.filters.length>0,48005),Ko(o)&&Ko(u))return FS(o,u.getFilters());const c=tp(o)?o:u,m=tp(o)?u:o,g=c.filters.map((p=>ey(p,m)));return nt.create(g,"or")})(s,e),Of(t)}function R0(s,e){if(Ko(e))return FS(e,s.getFilters());{const t=e.filters.map((r=>ey(s,r)));return nt.create(t,"or")}}function Of(s){if(pe(s instanceof Le||s instanceof nt,11850),s instanceof Le)return s;const e=s.getFilters();if(e.length===1)return Of(e[0]);if(jS(s))return s;const t=e.map((o=>Of(o))),r=[];return t.forEach((o=>{o instanceof Le?r.push(o):o instanceof nt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:nt.create(r,s.op)}class NN{constructor(){this.Cn=new ty}addToCollectionParentIndex(e,t){return this.Cn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(On.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(On.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}}class ty{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Je(Ge.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Je(Ge.comparator)).toArray()}}const C0="IndexedDbIndexManager",Yh=new Uint8Array(0);class VN{constructor(e,t){this.databaseId=t,this.vn=new ty,this.Fn=new yr((r=>Ea(r)),((r,o)=>uc(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:r,parent:an(o)};return x0(e).put(u)}return k.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[hS(t),""],!1,!0);return x0(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Mi(c.parent))}return r}))}addFieldIndex(e,t){const r=yu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const c=Ao(e);return u.next((m=>{c.put(E0(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=yu(e),o=Ao(e),u=So(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=yu(e),r=So(e),o=Ao(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return k.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new I0(r).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=So(e);let o=!0;const u=new Map;return k.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=De();const m=[];return k.forEach(u,((g,p)=>{W(C0,`Using index ${(function(re){return`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map((ye=>`${ye.fieldPath}:${ye.kind}`)).join(",")}`})(g)} to execute ${Ea(t)}`);const E=(function(re,ye){const ne=Yg(ye);if(ne===void 0)return null;for(const ae of xf(re,ne.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null})(p,g),b=(function(re,ye){const ne=new Map;for(const ae of ia(ye))for(const I of xf(re,ae.fieldPath))switch(I.op){case"==":case"in":ne.set(ae.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ne.set(ae.fieldPath.canonicalString(),I.value),Array.from(ne.values())}return null})(p,g),w=(function(re,ye){const ne=[];let ae=!0;for(const I of ia(ye)){const A=I.kind===0?a0(re,I.fieldPath,re.startAt):o0(re,I.fieldPath,re.startAt);ne.push(A.value),ae&&(ae=A.inclusive)}return new Go(ne,ae)})(p,g),z=(function(re,ye){const ne=[];let ae=!0;for(const I of ia(ye)){const A=I.kind===0?o0(re,I.fieldPath,re.endAt):a0(re,I.fieldPath,re.endAt);ne.push(A.value),ae&&(ae=A.inclusive)}return new Go(ne,ae)})(p,g),Z=this.On(g,p,w),ee=this.On(g,p,z),te=this.Nn(g,p,b),J=this.Bn(g.indexId,E,Z,w.inclusive,ee,z.inclusive,te);return k.forEach(J,(ie=>r.Y(ie,t.limit).next((re=>{re.forEach((ye=>{const ne=ue.fromSegments(ye.documentKey);c.has(ne)||(c=c.add(ne),m.push(ne))}))}))))})).next((()=>m))}return k.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=DN(nt.create(e.filters,"and")).map((r=>ip(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(r.length,u.length),p=g/(t!=null?t.length:1),E=[];for(let b=0;b<g;++b){const w=t?this.Ln(t[b/p]):Yh,z=this.kn(e,w,r[b%p],o),Z=this.qn(e,w,u[b%p],c),ee=m.map((te=>this.kn(e,w,te,!0)));E.push(...this.createRange(z,Z,ee))}return E}kn(e,t,r,o){const u=new la(e,ue.empty(),t,r);return o?u:u.An()}qn(e,t,r,o){const u=new la(e,ue.empty(),t,r);return o?u.An():u}xn(e,t){const r=new I0(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return k.forEach(o,(u=>this.xn(e,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new Je(dt.comparator),E=!1;for(const b of g.filters)for(const w of b.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?E=!0:p=p.add(w.field));for(const b of g.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new pu;for(const o of ia(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);oa.Kt.Dt(u,c)}return r.un()}Ln(e){const t=new pu;return oa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new pu;return oa.Kt.Dt(Hp(this.databaseId,t),r.Pn((function(u){const c=ia(u);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new pu);let u=0;for(const c of ia(e)){const m=r[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&$u(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);oa.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new pu;g.seed(m.un()),oa.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=yu(e),o=Ao(e);return(t?r.J($g,IDBKeyRange.bound(t,t)):r.J()).next((u=>{const c=[];return k.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,b){const w=b?new Fu(b.sequenceNumber,new On(Aa(b.readTime),new ue(Mi(b.documentKey)),b.largestBatchId)):Fu.empty(),z=E.fields.map((([Z,ee])=>new rf(dt.fromServerFormat(Z),ee)));return new bf(E.indexId,E.collectionGroup,z,w)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Ae(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=yu(e),u=Ao(e);return this.Gn(e).next((c=>o.J($g,IDBKeyRange.bound(t,t)).next((m=>k.forEach(m,(g=>u.put(E0(g.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return k.forEach(t,((o,u)=>{const c=r.get(o.collectionGroup);return(c?k.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),k.forEach(m,(g=>this.zn(e,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?k.resolve():this.Jn(e,u,g,p,E)})))))))}))}Hn(e,t,r,o){return So(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return So(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=So(e);let u=new Je(Wr);return o.ee({index:AS,range:IDBKeyRange.only([r.indexId,this.uid,ff(this.$n(r,t))])},((c,m)=>{u=u.add(new la(r.indexId,t,w0(m.arrayValue),w0(m.directionalValue)))})).next((()=>u))}jn(e,t){let r=new Je(Wr);const o=this.Qn(t,e);if(o==null)return r;const u=Yg(t);if(u!=null){const c=e.data.field(u.fieldPath);if($u(c))for(const m of c.arrayValue.values||[])r=r.add(new la(t.indexId,e.key,this.Ln(m),o))}else r=r.add(new la(t.indexId,e.key,Yh,o));return r}Jn(e,t,r,o,u){W(C0,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,E,b,w){const z=g.getIterator(),Z=p.getIterator();let ee=To(z),te=To(Z);for(;ee||te;){let J=!1,ie=!1;if(ee&&te){const re=E(ee,te);re<0?ie=!0:re>0&&(J=!0)}else ee!=null?ie=!0:J=!0;J?(b(te),te=To(Z)):ie?(w(ee),ee=To(z)):(ee=To(z),te=To(Z))}})(o,u,Wr,(m=>{c.push(this.Hn(e,t,r,m))}),(m=>{c.push(this.Yn(e,t,r,m))})),k.waitFor(c)}Gn(e){let t=1;return Ao(e).ee({index:SS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,m)=>Wr(c,m))).filter(((c,m,g)=>!m||Wr(c,g[m-1])!==0));const o=[];o.push(e);for(const c of r){const m=Wr(c,e),g=Wr(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Yh,ue.empty()),g=o[c+1].Vn(this.uid,Yh,ue.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return Wr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(D0)}getMinOffset(e,t){return k.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||fe(44426))))).next(D0)}}function x0(s){return jt(s,Qu)}function So(s){return jt(s,Vu)}function yu(s){return jt(s,Up)}function Ao(s){return jt(s,Nu)}function D0(s){pe(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Pp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new On(e.readTime,e.documentKey,t)}const N0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RA=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function CA(s,e,t){const r=s.store(oi),o=s.store(zo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:c},((E,b,w)=>(m++,w.delete())));u.push(g.next((()=>{pe(m===1,47070,{batchId:t.batchId})})));const p=[];for(const E of t.mutations){const b=ES(e,E.key.path,t.batchId);u.push(o.delete(b)),p.push(E.key)}return k.waitFor(u).next((()=>p))}function Mf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw fe(14731);e=s.noDocument}return JSON.stringify(e).length}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(RA,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class ad{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){pe(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new ad(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return es(e).ee({index:ua,range:r},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=Do(e),c=es(e);return c.add({}).next((m=>{pe(typeof m=="number",49019);const g=new Xp(m,t,r,o),p=(function(z,Z,ee){const te=ee.baseMutations.map((ie=>Nf(z.yt,ie))),J=ee.mutations.map((ie=>Nf(z.yt,ie)));return{userId:Z,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:te,mutations:J}})(this.serializer,this.userId,g),E=[];let b=new Je(((w,z)=>Ae(w.canonicalString(),z.canonicalString())));for(const w of o){const z=ES(this.userId,w.key.path,m);b=b.add(w.key.path.popLast()),E.push(c.put(p)),E.push(u.put(z,uD))}return b.forEach((w=>{E.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),k.waitFor(E).next((()=>g))}))}lookupMutationBatch(e,t){return es(e).get(t).next((r=>r?(pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),aa(this.serializer,r)):null))}er(e,t){return this.Xn[t]?k.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return es(e).ee({index:ua,range:o},((c,m,g)=>{m.userId===this.userId&&(pe(m.batchId>=r,47524,{tr:r}),u=aa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ca;return es(e).ee({index:ua,range:t,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ca],[this.userId,Number.POSITIVE_INFINITY]);return es(e).J(ua,t).next((r=>r.map((o=>aa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Do(e).ee({range:o},((c,m,g)=>{const[p,E,b]=c,w=Mi(E);if(p===this.userId&&t.path.isEqual(w))return es(e).get(b).next((z=>{if(!z)throw fe(61480,{nr:c,batchId:b});pe(z.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:z.userId,batchId:b}),u.push(aa(this.serializer,z))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Ae);const o=[];return t.forEach((u=>{const c=sf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Do(e).ee({range:m},((p,E,b)=>{const[w,z,Z]=p,ee=Mi(z);w===this.userId&&u.path.isEqual(ee)?r=r.add(Z):b.done()}));o.push(g)})),k.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=sf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Je(Ae);return Do(e).ee({range:c},((g,p,E)=>{const[b,w,z]=g,Z=Mi(w);b===this.userId&&r.isPrefixOf(Z)?Z.length===o&&(m=m.add(z)):E.done()})).next((()=>this.rr(e,m)))}rr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(es(e).get(u).next((c=>{if(c===null)throw fe(35274,{batchId:u});pe(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(aa(this.serializer,c))})))})),k.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return CA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),k.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return k.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Do(e).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=Mi(u[1]);o.push(g)}else m.done()})).next((()=>{pe(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return xA(e,this.userId,t)}_r(e){return DA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ca,lastStreamToken:""}))}}function xA(s,e,t){const r=sf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Do(s).ee({range:u,X:!0},((m,g,p)=>{const[E,b,w]=m;E===e&&b===o&&(c=!0),p.done()})).next((()=>c))}function es(s){return jt(s,oi)}function Do(s){return jt(s,zo)}function DA(s){return jt(s,Gu)}class wa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wa(0)}static cr(){return new wa(-1)}}class ON{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new wa(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ve.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>wo(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(pe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return wo(e).ee(((c,m)=>{const g=wu(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>k.waitFor(u))).next((()=>o))}forEachTarget(e,t){return wo(e).ee(((r,o)=>{const u=wu(o);t(u)}))}lr(e){return V0(e).get(wf).next((t=>(pe(t!==null,2888),t)))}hr(e,t){return V0(e).put(wf,t)}Pr(e,t){return wo(e).put(SA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ea(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return wo(e).ee({range:o,index:bS},((c,m,g)=>{const p=wu(m);uc(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=as(e);return t.forEach((c=>{const m=an(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))})),k.waitFor(o)}removeMatchingKeys(e,t,r){const o=as(e);return k.forEach(t,(u=>{const c=an(u.path);return k.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=as(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=as(e);let u=De();return o.ee({range:r,X:!0},((c,m,g)=>{const p=Mi(c[1]),E=new ue(p);u=u.add(E)})).next((()=>u))}containsKey(e,t){const r=an(t.path),o=IDBKeyRange.bound([r],[hS(r)],!1,!0);let u=0;return as(e).ee({index:Lp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return wo(e).get(t).next((r=>r?wu(r):null))}}function wo(s){return jt(s,Bo)}function V0(s){return jt(s,ha)}function as(s){return jt(s,jo)}const O0="LruGarbageCollector",NA=1048576;function M0([s,e],[t,r]){const o=Ae(s,t);return o===0?Ae(e,r):o}class MN{constructor(e){this.Ir=e,this.buffer=new Je(M0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();M0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(O0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ts(t)?W(O0,"Ignoring IndexedDB error during garbage collection: ",t):await Es(t)}await this.Vr(3e5)}))}}class PN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return k.resolve(vn.ce);const r=new MN(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(N0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,c=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,t)))).next((b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),Io()<=Pe.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function OA(s,e){return new PN(s,e)}class kN{constructor(e,t){this.db=e,this.garbageCollector=OA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return Xh(e,r)}removeReference(e,t,r){return Xh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xh(e,t)}br(e,t){return(function(o,u){let c=!1;return DA(o).te((m=>xA(o,m,u).next((g=>(g&&(c=!0),k.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,r.getEntry(e,c).next((()=>(r.removeEntry(c,ve.min()),as(e).delete((function(b){return[0,an(b.path)]})(c)))))}));o.push(g)}})).next((()=>k.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xh(e,t)}Sr(e,t){const r=as(e);let o,u=vn.ce;return r.ee({index:Lp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&t(new ue(Mi(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&t(new ue(Mi(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xh(s,e){return as(s).put((function(r,o){return{targetId:0,path:an(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}class MA{constructor(){this.changes=new yr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ta(e).put(r)}removeEntry(e,t,r){return ta(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Vf(c),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=pt.newInvalidDocument(t);return ta(e).ee({index:af,range:IDBKeyRange.only(_u(t))},((o,u)=>{r=this.Cr(t,u)})).next((()=>r))}vr(e,t){let r={size:0,document:pt.newInvalidDocument(t)};return ta(e).ee({index:af,range:IDBKeyRange.only(_u(t))},((o,u)=>{r={document:this.Cr(t,u),size:Mf(u)}})).next((()=>r))}getEntries(e,t){let r=Nn();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(e,t){let r=Nn(),o=new rt(ue.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Mf(c))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return k.resolve();let o=new Je(L0);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(_u(o.first()),_u(o.last())),c=o.getIterator();let m=c.getNext();return ta(e).ee({index:af,range:u},((g,p,E)=>{const b=ue.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&L0(m,b)<0;)r(m,null),m=c.getNext();m&&m.isEqual(b)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(_u(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Vf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u?.incrementDocumentReadCount(p.length);let E=Nn();for(const b of p){const w=this.Cr(ue.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);w.isFoundDocument()&&(cc(t,w)||o.has(w.key))&&(E=E.insert(w.key,w))}return E}))}getAllFromCollectionGroup(e,t,r,o){let u=Nn();const c=k0(t,r),m=k0(t,On.max());return ta(e).ee({index:TS,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const b=this.Cr(ue.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(b.key,b),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new UN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return P0(e).get(Xg).next((t=>(pe(!!t,20021),t)))}Dr(e,t){return P0(e).put(Xg,t)}Cr(e,t){if(t){const r=SN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return pt.newInvalidDocument(e)}}function PA(s){return new LN(s)}class UN extends MA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new yr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new Je(((u,c)=>Ae(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=_0(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Mf(g);r+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(r-=m.size,this.trackRemovals){const g=_0(this.Nr.serializer,c.convertToNoDocument(ve.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function P0(s){return jt(s,Ku)}function ta(s){return jt(s,Af)}function _u(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function k0(s,e){const t=e.documentKey.path.toArray();return[s,Vf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function L0(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ae(t[u],r[u]),o)return o;return o=Ae(t.length,r.length),o||(o=Ae(t[t.length-2],r[r.length-2]),o||Ae(t[t.length-1],r[r.length-1]))}class zN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kA{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&ku(r.mutation,o,En.empty(),$e.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const o=Pi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=Su();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Pi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=Nn();const c=Pu(),m=(function(){return Pu()})();return t.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof _r)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),ku(E.mutation,p,E.mutation.getFieldMask(),$e.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),t.forEach(((p,E)=>m.set(p,new zN(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Pu();let o=new rt(((c,m)=>c-m)),u=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let E=r.get(g)||En.empty();E=m.applyToLocalView(p,E),r.set(g,E);const b=(o.get(m.batchId)||De()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,b=WS();E.forEach((w=>{if(!u.has(w)){const z=sA(t.get(w),r.get(w));z!==null&&b.set(w,z),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return k.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):k.resolve(Pi());let m=Uo,g=u;return c.next((p=>k.forEach(p,((E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?k.resolve():this.remoteDocumentCache.getEntry(e,E).next((w=>{g=g.insert(E,w)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,De()))).next((E=>({batchId:m,changes:ZS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((r=>{let o=Su();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=Su();return this.indexManager.getCollectionParents(e,u).next((m=>k.forEach(m,(g=>{const p=(function(b,w){return new Wf(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((E=>{E.forEach(((b,w)=>{c=c.insert(b,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,pt.newInvalidDocument(E)))}));let m=Su();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&ku(E.mutation,p,En.empty(),$e.now()),cc(t,p)&&(m=m.insert(g,p))})),m}))}}class BN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return k.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:AA(o.bundledQuery),readTime:hn(o.readTime)}})(t)),k.resolve()}}class jN{constructor(){this.overlays=new rt(ue.comparator),this.qr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pi();return k.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.St(e,t,u)})),k.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){const o=Pi(),u=t.length+1,c=new ue(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return k.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new rt(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Pi(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Pi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return k.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Jp(t,r));let u=this.qr.get(t);u===void 0&&(u=De(),this.qr.set(t,u)),this.qr.set(t,u.add(r.key))}}class qN{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}}class ny{constructor(){this.Qr=new Je(Gt.$r),this.Ur=new Je(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ue(new Ge([])),r=new Gt(t,e),o=new Gt(t,e+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new Ge([])),r=new Gt(t,e),o=new Gt(t,e+1);let u=De();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Gt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||Ae(e.Yr,t.Yr)}static Kr(e,t){return Ae(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}class FN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Je(Gt.$r)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Xp(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Gt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return k.resolve(c)}lookupMutationBatch(e,t){return k.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),u=o<0?0:o;return k.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?ca:this.tr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),k.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Ae);return t.forEach((o=>{const u=new Gt(o,0),c=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;ue.isDocumentKey(u)||(u=u.child(""));const c=new Gt(new ue(u),0);let m=new Je(Ae);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),k.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(t.mutations,(o=>{const u=new Gt(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Gt(t,0),o=this.Zr.firstAfterOrEqual(r);return k.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HN{constructor(e){this.ri=e,this.docs=(function(){return new rt(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=Nn();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():pt.newInvalidDocument(o))})),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Nn();const c=t.path,m=new ue(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Pp(gS(E),r)<=0||(o.has(E.key)||cc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return k.resolve(u)}getAllFromCollectionGroup(e,t,r,o){fe(9500)}ii(e,t){return k.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new GN(this)}getSize(e){return k.resolve(this.size)}}class GN extends MA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),k.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class KN{constructor(e){this.persistence=e,this.si=new yr((t=>Ea(t)),uc),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new ny,this.targetCount=0,this.ai=wa.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),k.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Pr(t),k.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),k.waitFor(u).next((()=>o))}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),k.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),k.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this._i.containsKey(t))}}class iy{constructor(e,t){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new qN,this.referenceDelegate=e(this),this.Pi=new KN(this),this.indexManager=new NN,this.remoteDocumentCache=(function(o){return new HN(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new bA(t),this.Ii=new BN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new FN(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);const o=new QN(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return k.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class QN extends yS{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Ri=new ny,this.Vi=null}static mi(e){return new od(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,(r=>{const o=ue.fromPath(r);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return k.or([()=>k.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Pf{constructor(e,t){this.persistence=e,this.pi=new yr((r=>an(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=OA(this,t)}static mi(e,t){return new Pf(e,t)}Ei(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return k.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?k.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,u.removeEntry(c,ve.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),k.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lf(e.data.value)),t}br(e,t,r){return k.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return k.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class YN{constructor(e){this.serializer=e}k(e,t,r,o){const u=new Kf("createOrUpgrade",t);r<1&&o>=1&&((function(g){g.createObjectStore(lc)})(e),(function(g){g.createObjectStore(Gu,{keyPath:lD}),g.createObjectStore(oi,{keyPath:YT,autoIncrement:!0}).createIndex(ua,XT,{unique:!0}),g.createObjectStore(zo)})(e),U0(e),(function(g){g.createObjectStore(ra)})(e));let c=k.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(jo),g.deleteObjectStore(Bo),g.deleteObjectStore(ha)})(e),U0(e)),c=c.next((()=>(function(g){const p=g.store(ha),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return p.put(wf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(oi).J().next((b=>{g.deleteObjectStore(oi),g.createObjectStore(oi,{keyPath:YT,autoIncrement:!0}).createIndex(ua,XT,{unique:!0});const w=p.store(oi),z=b.map((Z=>w.put(Z)));return k.waitFor(z)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore(qo,{keyPath:yD})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Ku)})(e),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Yf,{keyPath:_D})})(e),(function(g){g.createObjectStore(Xf,{keyPath:vD})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore($f,{keyPath:ID});p.createIndex(Jg,RD,{unique:!1}),p.createIndex(wS,CD,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Af,{keyPath:cD});p.createIndex(af,hD),p.createIndex(TS,fD)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(ra)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Up,{keyPath:ED,autoIncrement:!0}).createIndex($g,TD,{unique:!1}),g.createObjectStore(Nu,{keyPath:bD}).createIndex(SS,SD,{unique:!1}),g.createObjectStore(Vu,{keyPath:AD}).createIndex(AS,wD,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(Nu).clear()})).next((()=>{t.objectStore(Vu).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(zp,{keyPath:xD})})(e)}))),r<18&&o>=18&&yb()&&(c=c.next((()=>{t.objectStore(Nu).clear()})).next((()=>{t.objectStore(Vu).clear()}))),c}wi(e){let t=0;return e.store(ra).ee(((r,o)=>{t+=Mf(o)})).next((()=>{const r={byteSize:t};return e.store(Ku).put(Xg,r)}))}yi(e){const t=e.store(Gu),r=e.store(oi);return t.J().next((o=>k.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ca],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ua,c).next((m=>k.forEach(m,(g=>{pe(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=aa(this.serializer,g);return CA(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(jo),r=e.store(ra);return e.store(ha).get(wf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Ge(c),p=(function(b){return[0,an(b)]})(g);u.push(t.get(p).next((E=>E?k.resolve():(b=>t.put({targetId:0,path:an(b),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>k.waitFor(u)))}))}bi(e,t){e.createObjectStore(Qu,{keyPath:pD});const r=t.store(Qu),o=new ty,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:an(g)})}};return t.store(ra).ee({X:!0},((c,m)=>{const g=new Ge(c);return u(g.popLast())})).next((()=>t.store(zo).ee({X:!0},(([c,m,g],p)=>{const E=Mi(m);return u(E.popLast())}))))}Di(e){const t=e.store(Bo);return t.ee(((r,o)=>{const u=wu(o),c=SA(this.serializer,u);return t.put(c)}))}Ci(e,t){const r=t.store(ra),o=[];return r.ee(((u,c)=>{const m=t.store(Af),g=(function(b){return b.document?new ue(Ge.fromString(b.document.name).popFirst(5)):b.noDocument?ue.fromSegments(b.noDocument.path):b.unknownDocument?ue.fromSegments(b.unknownDocument.path):fe(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>k.waitFor(o)))}Fi(e,t){const r=t.store(oi),o=PA(this.serializer),u=new iy(od.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??De();aa(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),k.forEach(m,((g,p)=>{const E=new nn(p),b=sd.wt(this.serializer,E),w=u.getIndexManager(E),z=ad.wt(E,this.serializer,w,u.referenceDelegate);return new kA(o,z,b,w).recalculateAndSaveOverlaysForDocumentKeys(new Zg(t,vn.ce),g).next()}))}))}}function U0(s){s.createObjectStore(jo,{keyPath:mD}).createIndex(Lp,gD,{unique:!0}),s.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(bS,dD,{unique:!0}),s.createObjectStore(ha)}const ts="IndexedDbPersistence",xg=18e5,Dg=5e3,Ng="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",XN="main";class ry{constructor(e,t,r,o,u,c,m,g,p,E,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!ry.v())throw new ce(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kN(this,o),this.$i=t+XN,this.serializer=new bA(g),this.Ui=new fs(this.$i,this.Ni,new YN(this.serializer)),this.hi=new wN,this.Pi=new ON(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PA(this.serializer),this.Ii=new AN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Tt(ts,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(X.FAILED_PRECONDITION,Ng);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new vn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$h(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ts(e))return W(ts,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(ts,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return vu(e).get(Eo).next((t=>k.resolve(this.es(t))))}ts(e){return $h(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,xg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=jt(t,qo);return r.J().next((o=>{const u=this.ss(o,xg),c=o.filter((m=>u.indexOf(m)===-1));return k.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?k.resolve(!0):vu(e).get(Eo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Dg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ce(X.FAILED_PRECONDITION,Ng);return!1}}return!(!this.networkEnabled||!this.inForeground)||$h(e).J().next((r=>this.ss(r,Dg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&W(ts,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[lc,qo],(e=>{const t=new Zg(e,vn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>$h(e).J().next((t=>this.ss(t,xg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return ad.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return sd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){W(ts,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?VD:g===17?xS:g===16?ND:g===15?Bp:g===14?CS:g===13?RS:g===12?DD:g===11?IS:void fe(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new Zg(m,this.ci?this.ci.next():vn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ce(X.FAILED_PRECONDITION,pS);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return vu(e).get(Eo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Dg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(X.FAILED_PRECONDITION,Ng)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(e).put(Eo,t)}static v(){return fs.v()}Zi(e){const t=vu(e);return t.get(Eo).next((r=>this.es(r)?(W(ts,"Releasing primary lease."),t.delete(Eo)):k.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;pb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return W(ts,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Tt(ts,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Tt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vu(s){return jt(s,lc)}function $h(s){return jt(s,qo)}function LA(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class sy{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=De(),o=De();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new sy(e,t.fromCache,r,o)}}class $N{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class UA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pb()?8:_S(zt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new $N;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Io()<=Pe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(Io()<=Pe.DEBUG&&W("QueryEngine","Query:",Ro(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Io()<=Pe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):k.resolve())}ys(e,t){if(l0(t))return k.resolve(null);let r=Vn(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=rp(t,null,"F"),r=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=De(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,rp(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,o){return l0(t)||o.isEqual(ve.min())?k.resolve(null):this.ps.getDocuments(e,r).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,r,o)?k.resolve(null):(Io()<=Pe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.vs(e,c,t,mS(o,Uo)).next((m=>m)))}))}Ds(e,t){let r=new Je($S(e));return t.forEach(((o,u)=>{cc(e,u)&&(r=r.add(u))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,r){return Io()<=Pe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.ps.getDocumentsMatchingQuery(e,t,On.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const ay="LocalStore",JN=3e8;class ZN{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new rt(Ae),this.xs=new yr((u=>Ea(u)),uc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function zA(s,e,t,r){return new ZN(s,e,t,r)}async function BA(s,e){const t=me(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=De();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function WN(s,e){const t=me(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const b=p.batch,w=b.keys();let z=k.resolve();return w.forEach((Z=>{z=z.next((()=>E.getEntry(g,Z))).next((ee=>{const te=p.docVersions.get(Z);pe(te!==null,48541),ee.version.compareTo(te)<0&&(b.applyToRemoteDocument(ee,p),ee.isValidDocument()&&(ee.setReadTime(p.commitVersion),E.addEntry(ee)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=De();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function jA(s){const e=me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function eV(s,e){const t=me(s),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,b)=>{const w=o.get(b);if(!w)return;m.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,b))));let z=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?z=z.withResumeToken(bt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):E.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(E.resumeToken,r)),o=o.insert(b,z),(function(ee,te,J){return ee.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=JN?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(w,z,E)&&m.push(t.Pi.updateTargetData(u,z))}));let g=Nn(),p=De();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(tV(u,c,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(ve.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((b=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return k.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function tV(s,e,t){let r=De(),o=De();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=Nn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ve.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):W(ay,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function nV(s,e){const t=me(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ca),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kf(s,e){const t=me(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((u=>u?(o=u,k.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new lr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Xo(s,e,t){const r=me(s),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ts(c))throw c;W(ay,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function fp(s,e,t){const r=me(s);let o=ve.min(),u=De();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const b=me(g),w=b.xs.get(E);return w!==void 0?k.resolve(b.Ms.get(w)):b.Pi.getTargetData(p,E)})(r,c,Vn(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:ve.min(),t?u:De()))).next((m=>(HA(r,XS(e),m),{documents:m,Qs:u})))))}function qA(s,e){const t=me(s),r=me(t.Pi),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,e).next((c=>c?c.target:null))))}function FA(s,e){const t=me(s),r=t.Os.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Ns.getAllFromCollectionGroup(o,e,mS(r,Uo),Number.MAX_SAFE_INTEGER))).then((o=>(HA(t,e,o),o)))}function HA(s,e,t){let r=s.Os.get(e)||ve.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}const GA="firestore_clients";function z0(s,e){return`${GA}_${s}_${e}`}const KA="firestore_mutations";function B0(s,e,t){let r=`${KA}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const QA="firestore_targets";function Vg(s,e){return`${QA}_${s}_${e}`}const Oi="SharedClientState";class Lf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ws(e,t,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new ce(o.error.code,o.error.message))),c?new Lf(e,t,o.state,u):(Tt(Oi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new ce(r.error.code,r.error.message))),u?new Lu(e,r.state,o):(Tt(Oi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Kp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=vS(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Uf(e,u):(Tt(Oi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class oy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new oy(t.clientId,t.onlineState):(Tt(Oi,`Failed to parse online state: ${e}`),null)}}class dp{constructor(){this.activeTargetIds=Kp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Og{constructor(e,t,r,o,u){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new rt(Ae),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=z0(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new dp),this.ro=new RegExp(`^${GA}_${c}_([^_]*)$`),this.io=new RegExp(`^${KA}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${QA}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const o=this.getItem(z0(this.persistenceKey,r));if(o){const u=Uf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Vg(this.persistenceKey,e));if(o){const u=Lu.Ws(e,o);u&&(r=u.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((o=>{this.Po(o)})),this.currentUser=e,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return W(Oi,"READ",e,t),t}setItem(e,t){W(Oi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){W(Oi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(W(Oi,"EVENT",t.key,t.newValue),t.key===this.eo)return void Tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);pe(typeof m=="number",30636,{So:u}),c=m}catch(m){Tt(Oi,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);r!==vn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const o=new Lf(this.currentUser,e,t,r),u=B0(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Gs())}Po(e){const t=B0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const o=Vg(this.persistenceKey,e),u=new Lu(e,t,r);this.setItem(o,u.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Uf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Lf.Ws(new nn(u),o,t)}yo(e,t){const r=this.so.exec(e),o=Number(r[1]);return Lu.Ws(o,t)}uo(e){return oy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);W(Oi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Kp();return e.forEach(((r,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class YA{constructor(){this.Mo=new dp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iV{Oo(e){}shutdown(){}}const j0="ConnectivityMonitor";class q0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(j0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(j0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jh=null;function mp(){return Jh===null?Jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jh++,"0x"+Jh.toString(16)}const Mg="RestConnection",rV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===If?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,u){const c=mp(),m=this.zo(e,t.toUriEncodedString());W(Mg,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=Wo(p);return this.Jo(e,m,g,r,E).then((b=>(W(Mg,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw qu(Mg,`RPC '${e}' ${c} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(e,t,r,o,u,c){return this.Go(e,t,r,o,u)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const r=rV[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class aV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const tn="WebChannelConnection";class oV extends sV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,u){const c=mp();return new Promise(((m,g)=>{const p=new sS;p.setWithCredentials(!0),p.listenOnce(aS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case nf.NO_ERROR:const b=p.getResponseJson();W(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),m(b);break;case nf.TIMEOUT:W(tn,`RPC '${e}' ${c} timed out`),g(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const w=p.getStatus();if(W(tn,`RPC '${e}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let z=p.getResponseJson();Array.isArray(z)&&(z=z[0]);const Z=z?.error;if(Z&&Z.status&&Z.message){const ee=(function(J){const ie=J.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN})(Z.status);g(new ce(ee,Z.message))}else g(new ce(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ce(X.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{W(tn,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);W(tn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",E,r,15)}))}T_(e,t,r){const o=mp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uS(),m=lS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=u.join("");W(tn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const b=c.createWebChannel(E,g);this.I_(b);let w=!1,z=!1;const Z=new aV({Yo:te=>{z?W(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,te):(w||(W(tn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),W(tn,`RPC '${e}' stream ${o} sending:`,te),b.send(te))},Zo:()=>b.close()}),ee=(te,J,ie)=>{te.listen(J,(re=>{try{ie(re)}catch(ye){setTimeout((()=>{throw ye}),0)}}))};return ee(b,bu.EventType.OPEN,(()=>{z||(W(tn,`RPC '${e}' stream ${o} transport opened.`),Z.o_())})),ee(b,bu.EventType.CLOSE,(()=>{z||(z=!0,W(tn,`RPC '${e}' stream ${o} transport closed`),Z.a_(),this.E_(b))})),ee(b,bu.EventType.ERROR,(te=>{z||(z=!0,qu(tn,`RPC '${e}' stream ${o} transport errored. Name:`,te.name,"Message:",te.message),Z.a_(new ce(X.UNAVAILABLE,"The operation could not be completed")))})),ee(b,bu.EventType.MESSAGE,(te=>{if(!z){const J=te.data[0];pe(!!J,16349);const ie=J,re=ie?.error||ie[0]?.error;if(re){W(tn,`RPC '${e}' stream ${o} received error:`,re);const ye=re.status;let ne=(function(A){const R=Vt[A];if(R!==void 0)return lA(R)})(ye),ae=re.message;ne===void 0&&(ne=X.INTERNAL,ae="Unknown error status: "+ye+" with message "+re.message),z=!0,Z.a_(new ce(ne,ae)),b.close()}else W(tn,`RPC '${e}' stream ${o} received:`,J),Z.u_(J)}})),ee(m,oS.STAT_EVENT,(te=>{te.stat===Kg.PROXY?W(tn,`RPC '${e}' stream ${o} detected buffering proxy`):te.stat===Kg.NOPROXY&&W(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function XA(){return typeof window<"u"?window:null}function df(){return typeof document<"u"?document:null}function ld(s){return new dN(s,!0)}class $A{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&W("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const F0="PersistentStream";class JA{constructor(e,t,r,o,u,c,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $A(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Tt(t.toString()),Tt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ce(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return W(F0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(W(F0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lV extends JA{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=pN(this.serializer,e),r=(function(u){if(!("targetChange"in u))return ve.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?ve.min():c.readTime?hn(c.readTime):ve.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=op(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=Cf(g)?{documents:pA(u,g)}:{query:yA(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=hA(u,c.resumeToken);const p=sp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(ve.min())>0){m.readTime=Yo(u,c.snapshotVersion.toTimestamp());const p=sp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=_N(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=op(this.serializer),t.removeTarget=e,this.q_(t)}}class uV extends JA{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yN(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=op(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Nf(this.serializer,r)))};this.q_(t)}}class cV{}class hV extends cV{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,ap(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(X.UNKNOWN,u.toString())}))}Ho(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,ap(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class fV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tt(t),this.aa=!1):W("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ia="RemoteStore";class dV{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ca(this)&&(W(Ia,"Restarting streams for network reachability change."),await(async function(g){const p=me(g);p.Ea.add(4),await dc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ud(p)})(this))}))})),this.Ra=new fV(r,o)}}async function ud(s){if(Ca(s))for(const e of s.da)await e(!0)}async function dc(s){for(const e of s.da)await e(!1)}function cd(s,e){const t=me(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cy(t)?uy(t):sl(t).O_()&&ly(t,e))}function $o(s,e){const t=me(s),r=sl(t);t.Ia.delete(e),r.O_()&&ZA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ca(t)&&t.Ra.set("Unknown"))}function ly(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sl(s).Y_(e)}function ZA(s,e){s.Va.Ue(e),sl(s).Z_(e)}function uy(s){s.Va=new uN({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),sl(s).start(),s.Ra.ua()}function cy(s){return Ca(s)&&!sl(s).x_()&&s.Ia.size>0}function Ca(s){return me(s).Ea.size===0}function WA(s){s.Va=void 0}async function mV(s){s.Ra.set("Online")}async function gV(s){s.Ia.forEach(((e,t)=>{ly(s,e)}))}async function pV(s,e){WA(s),cy(s)?(s.Ra.ha(e),uy(s)):s.Ra.set("Unknown")}async function yV(s,e,t){if(s.Ra.set("Online"),e instanceof cA&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(r){W(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zf(s,r)}else if(e instanceof hf?s.Va.Ze(e):e instanceof uA?s.Va.st(e):s.Va.tt(e),!t.isEqual(ve.min()))try{const r=await jA(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(bt.EMPTY_BYTE_STRING,E.snapshotVersion)),ZA(u,g);const b=new lr(E.target,g,p,E.sequenceNumber);ly(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){W(Ia,"Failed to raise snapshot:",r),await zf(s,r)}}async function zf(s,e,t){if(!Ts(e))throw e;s.Ea.add(1),await dc(s),s.Ra.set("Offline"),t||(t=()=>jA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{W(Ia,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await ud(s)}))}function e1(s,e){return e().catch((t=>zf(s,t,e)))}async function rl(s){const e=me(s),t=ps(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ca;for(;_V(e);)try{const o=await nV(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,vV(e,o)}catch(o){await zf(e,o)}t1(e)&&n1(e)}function _V(s){return Ca(s)&&s.Ta.length<10}function vV(s,e){s.Ta.push(e);const t=ps(s);t.O_()&&t.X_&&t.ea(e.mutations)}function t1(s){return Ca(s)&&!ps(s).x_()&&s.Ta.length>0}function n1(s){ps(s).start()}async function EV(s){ps(s).ra()}async function TV(s){const e=ps(s);for(const t of s.Ta)e.ea(t.mutations)}async function bV(s,e,t){const r=s.Ta.shift(),o=$p.from(r,e,t);await e1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await rl(s)}async function SV(s,e){e&&ps(s).X_&&await(async function(r,o){if((function(c){return aN(c)&&c!==X.ABORTED})(o.code)){const u=r.Ta.shift();ps(r).B_(),await e1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await rl(r)}})(s,e),t1(s)&&n1(s)}async function H0(s,e){const t=me(s);t.asyncQueue.verifyOperationInProgress(),W(Ia,"RemoteStore received new credentials");const r=Ca(t);t.Ea.add(3),await dc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ud(t)}async function gp(s,e){const t=me(s);e?(t.Ea.delete(2),await ud(t)):e||(t.Ea.add(2),await dc(t),t.Ra.set("Unknown"))}function sl(s){return s.ma||(s.ma=(function(t,r,o){const u=me(t);return u.sa(),new lV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:mV.bind(null,s),t_:gV.bind(null,s),r_:pV.bind(null,s),H_:yV.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),cy(s)?uy(s):s.Ra.set("Unknown")):(await s.ma.stop(),WA(s))}))),s.ma}function ps(s){return s.fa||(s.fa=(function(t,r,o){const u=me(t);return u.sa(),new uV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:EV.bind(null,s),r_:SV.bind(null,s),ta:TV.bind(null,s),na:bV.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await rl(s)):(await s.fa.stop(),s.Ta.length>0&&(W(Ia,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class hy{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new hy(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(s,e){if(Tt("AsyncQueue",`${e}: ${s}`),Ts(s))return new ce(X.UNAVAILABLE,`${e}: ${s}`);throw s}class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class G0{constructor(){this.ga=new rt(ue.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Jo{constructor(e,t,r,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new Jo(e,t,Po.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class AV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wV{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=me(t),u=o.queries;o.queries=K0(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ce(X.ABORTED,"Firestore shutting down"))}}function K0(){return new yr((s=>YS(s)),td)}async function IV(s,e){const t=me(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new AV,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=fy(c,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&dy(t)}async function RV(s,e){const t=me(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CV(s,e){const t=me(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&dy(t)}function xV(s,e,t){const r=me(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);r.queries.delete(e)}function dy(s){s.Ca.forEach((e=>{e.next()}))}var pp,Q0;(Q0=pp||(pp={})).Ma="default",Q0.Cache="cache";class DV{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pp.Cache}}class i1{constructor(e){this.key=e}}class r1{constructor(e){this.key=e}}class NV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=$S(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new G0,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,b)=>{const w=o.get(E),z=cc(this.query,b)?b:null,Z=!!w&&this.mutatedKeys.has(w.key),ee=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let te=!1;w&&z?w.data.isEqual(z.data)?Z!==ee&&(r.track({type:3,doc:z}),te=!0):this.su(w,z)||(r.track({type:2,doc:z}),te=!0,(g&&this.eu(z,g)>0||p&&this.eu(z,p)<0)&&(m=!0)):!w&&z?(r.track({type:0,doc:z}),te=!0):w&&!z&&(r.track({type:1,doc:w}),te=!0,(g||p)&&(m=!0)),te&&(z?(c=c.add(z),u=ee?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,b)=>(function(z,Z){const ee=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:te})}};return ee(z)-ee(Z)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Jo(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new G0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new r1(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new i1(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const al="SyncEngine";class VV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class OV{constructor(e){this.key=e,this.hu=!1}}class MV{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new yr((m=>YS(m)),td),this.Iu=new Map,this.Eu=new Set,this.du=new rt(ue.comparator),this.Au=new Map,this.Ru=new ny,this.Vu={},this.mu=new Map,this.fu=wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PV(s,e,t=!0){const r=hd(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await s1(r,e,t,!0),o}async function kV(s,e){const t=hd(s);await s1(t,e,!0,!1)}async function s1(s,e,t,r){const o=await kf(s.localStore,Vn(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await my(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&cd(s.remoteStore,o),m}async function my(s,e,t,r,o){s.pu=(b,w,z)=>(async function(ee,te,J,ie){let re=te.view.ru(J);re.Cs&&(re=await fp(ee.localStore,te.query,!1).then((({documents:I})=>te.view.ru(I,re))));const ye=ie&&ie.targetChanges.get(te.targetId),ne=ie&&ie.targetMismatches.get(te.targetId)!=null,ae=te.view.applyChanges(re,ee.isPrimaryClient,ye,ne);return yp(ee,te.targetId,ae.au),ae.snapshot})(s,b,w,z);const u=await fp(s.localStore,e,!0),c=new NV(e,u.Qs),m=c.ru(u.documents),g=fc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);yp(s,t,p.au);const E=new VV(e,t,c);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function LV(s,e,t){const r=me(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!td(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Xo(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&$o(r.remoteStore,o.targetId),Zo(r,o.targetId)})).catch(Es)):(Zo(r,o.targetId),await Xo(r.localStore,o.targetId,!0))}async function UV(s,e){const t=me(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$o(t.remoteStore,r.targetId))}async function zV(s,e,t){const r=_y(s);try{const o=await(function(c,m){const g=me(c),p=$e.now(),E=m.reduce(((z,Z)=>z.add(Z.key)),De());let b,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let Z=Nn(),ee=De();return g.Ns.getEntries(z,E).next((te=>{Z=te,Z.forEach(((J,ie)=>{ie.isValidDocument()||(ee=ee.add(J))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,Z))).next((te=>{b=te;const J=[];for(const ie of m){const re=rN(ie,b.get(ie.key).overlayedDocument);re!=null&&J.push(new _r(ie.key,re,zS(re.value.mapValue),cn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,p,J,m)})).next((te=>{w=te;const J=te.applyToLocalDocumentSet(b,ee);return g.documentOverlayCache.saveOverlays(z,te.batchId,J)}))})).then((()=>({batchId:w.batchId,changes:ZS(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new rt(Ae)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,t),await Ss(r,o.changes),await rl(r.remoteStore)}catch(o){const u=fy(o,"Failed to persist write");t.reject(u)}}async function a1(s,e){const t=me(s);try{const r=await eV(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(pe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?pe(c.hu,14607):o.removedDocuments.size>0&&(pe(c.hu,42227),c.hu=!1))})),await Ss(t,r,e)}catch(r){await Es(r)}}function Y0(s,e,t){const r=me(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=me(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,b)=>{for(const w of b.Sa)w.va(m)&&(p=!0)})),p&&dy(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BV(s,e,t){const r=me(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new rt(ue.comparator);c=c.insert(u,pt.newNoDocument(u,ve.min()));const m=De().add(u),g=new hc(ve.min(),new Map,new rt(Ae),c,m);await a1(r,g),r.du=r.du.remove(u),r.Au.delete(e),yy(r)}else await Xo(r.localStore,e,!1).then((()=>Zo(r,e,t))).catch(Es)}async function jV(s,e){const t=me(s),r=e.batch.batchId;try{const o=await WN(t.localStore,e);py(t,r,null),gy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ss(t,o)}catch(o){await Es(o)}}async function qV(s,e,t){const r=me(s);try{const o=await(function(c,m){const g=me(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((b=>(pe(b!==null,37113),E=b.keys(),g.mutationQueue.removeMutationBatch(p,b)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,e);py(r,e,t),gy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ss(r,o)}catch(o){await Es(o)}}function gy(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function py(s,e,t){const r=me(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Zo(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||o1(s,r)}))}function o1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&($o(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),yy(s))}function yp(s,e,t){for(const r of t)r instanceof i1?(s.Ru.addReference(r.key,e),FV(s,r)):r instanceof r1?(W(al,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||o1(s,r.key)):fe(19791,{wu:r})}function FV(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(W(al,"New document in limbo: "+t),s.Eu.add(r),yy(s))}function yy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ue(Ge.fromString(e)),r=s.fu.next();s.Au.set(r,new OV(t)),s.du=s.du.insert(t,r),cd(s.remoteStore,new lr(Vn(ed(t.path)),r,"TargetPurposeLimboResolution",vn.ce))}}async function Ss(s,e,t){const r=me(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const E=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=sy.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=me(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>k.forEach(p,(w=>k.forEach(w.Es,(z=>E.persistence.referenceDelegate.addReference(b,w.targetId,z))).next((()=>k.forEach(w.ds,(z=>E.persistence.referenceDelegate.removeReference(b,w.targetId,z)))))))))}catch(b){if(!Ts(b))throw b;W(ay,"Failed to update sequence numbers: "+b)}for(const b of p){const w=b.targetId;if(!b.fromCache){const z=E.Ms.get(w),Z=z.snapshotVersion,ee=z.withLastLimboFreeSnapshotVersion(Z);E.Ms=E.Ms.insert(w,ee)}}})(r.localStore,u))}async function HV(s,e){const t=me(s);if(!t.currentUser.isEqual(e)){W(al,"User change. New user:",e.toKey());const r=await BA(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ce(X.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ss(t,r.Ls)}}function GV(s,e){const t=me(s),r=t.Au.get(e);if(r&&r.hu)return De().add(r.key);{let o=De();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function KV(s,e){const t=me(s),r=await fp(t.localStore,e.query,!0),o=e.view.cu(r);return t.isPrimaryClient&&yp(t,e.targetId,o.au),o}async function QV(s,e){const t=me(s);return FA(t.localStore,e).then((r=>Ss(t,r)))}async function YV(s,e,t,r){const o=me(s),u=await(function(m,g){const p=me(m),E=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(b=>E.er(b,g).next((w=>w?p.localDocuments.getDocuments(b,w):k.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await rl(o.remoteStore):t==="acknowledged"||t==="rejected"?(py(o,e,r||null),gy(o,e),(function(m,g){me(me(m).mutationQueue).ir(g)})(o.localStore,e)):fe(6720,"Unknown batchState",{Su:t}),await Ss(o,u)):W(al,"Cannot apply mutation batch with id: "+e)}async function XV(s,e){const t=me(s);if(hd(t),_y(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),o=await X0(t,r.toArray());t.gu=!0,await gp(t.remoteStore,!0);for(const u of o)cd(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const r=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(Zo(t,c),Xo(t.localStore,c,!0)))),$o(t.remoteStore,c)})),await o,await X0(t,r),(function(c){const m=me(c);m.Au.forEach(((g,p)=>{$o(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new rt(ue.comparator)})(t),t.gu=!1,await gp(t.remoteStore,!1)}}async function X0(s,e,t){const r=me(s),o=[],u=[];for(const c of e){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await kf(r.localStore,Vn(g[0]));for(const p of g){const E=r.Tu.get(p),b=await KV(r,E);b.snapshot&&u.push(b.snapshot)}}else{const p=await qA(r.localStore,c);m=await kf(r.localStore,p),await my(r,l1(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function l1(s){return QS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function $V(s){return(function(t){return me(me(t).persistence).Ts()})(me(s).localStore)}async function JV(s,e,t,r){const o=me(s);if(o.gu)return void W(al,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await FA(o.localStore,XS(u[0])),m=hc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",bt.EMPTY_BYTE_STRING);await Ss(o,c,m);break}case"rejected":await Xo(o.localStore,e,!0),Zo(o,e,r);break;default:fe(64155,t)}}async function ZV(s,e,t){const r=hd(s);if(r.gu){for(const o of e){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){W(al,"Adding an already active target "+o);continue}const u=await qA(r.localStore,o),c=await kf(r.localStore,u);await my(r,l1(u),c.targetId,!1,c.resumeToken),cd(r.remoteStore,c)}for(const o of t)r.Iu.has(o)&&await Xo(r.localStore,o,!1).then((()=>{$o(r.remoteStore,o),Zo(r,o)})).catch(Es)}}function hd(s){const e=me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BV.bind(null,e),e.Pu.H_=CV.bind(null,e.eventManager),e.Pu.yu=xV.bind(null,e.eventManager),e}function _y(s){const e=me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qV.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zA(this.persistence,new UA,e.initialUser,this.serializer)}Cu(e){return new iy(od.mi,this.serializer)}Du(e){return new YA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class WV extends Zu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pe(this.persistence.referenceDelegate instanceof Pf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new VA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new iy((r=>Pf.mi(r,t)),this.serializer)}}class u1 extends Zu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await _y(this.xu.syncEngine),await rl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return zA(this.persistence,new UA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new VA(r,e.asyncQueue,t)}Mu(e,t){const r=new aD(t,this.persistence);return new sD(e.asyncQueue,r)}Cu(e){const t=LA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ry(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,XA(),df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new YA}}class eO extends u1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Og&&(this.sharedClientState.syncEngine={Co:YV.bind(null,t),vo:JV.bind(null,t),Fo:ZV.bind(null,t),Ts:$V.bind(null,t),Do:QV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await XV(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=XA();if(!Og.v(t))throw new ce(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Og(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Wu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Y0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HV.bind(null,this.syncEngine),await gp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wV})()}createDatastore(e){const t=ld(e.databaseInfo.databaseId),r=(function(u){return new oV(u)})(e.databaseInfo);return(function(u,c,m,g){return new hV(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new dV(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Y0(this.syncEngine,t,0)),(function(){return q0.v()?new q0:new iV})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,E){const b=new MV(o,u,c,m,g,p);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=me(t);W(Ia,"RemoteStore shutting down."),r.Ea.add(5),await dc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wu.provider={build:()=>new Wu};class tO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ys="FirestoreClient";class nO{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{W(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(W(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Pg(s,e){s.asyncQueue.verifyOperationInProgress(),W(ys,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await BA(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function $0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await iO(s);W(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>H0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>H0(e.remoteStore,o))),s._onlineComponents=e}async function iO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){W(ys,"Using user provided OfflineComponentProvider");try{await Pg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;qu("Error using user provided cache. Falling back to memory cache: "+t),await Pg(s,new Zu)}}else W(ys,"Using default OfflineComponentProvider"),await Pg(s,new WV(void 0));return s._offlineComponents}async function c1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(W(ys,"Using user provided OnlineComponentProvider"),await $0(s,s._uninitializedComponentsProvider._online)):(W(ys,"Using default OnlineComponentProvider"),await $0(s,new Wu))),s._onlineComponents}function rO(s){return c1(s).then((e=>e.syncEngine))}async function sO(s){const e=await c1(s),t=e.eventManager;return t.onListen=PV.bind(null,e.syncEngine),t.onUnlisten=LV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UV.bind(null,e.syncEngine),t}function aO(s,e,t={}){const r=new cr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new tO({next:w=>{E.Nu(),c.enqueueAndForget((()=>RV(u,b)));const z=w.docs.has(m);!z&&w.fromCache?p.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&w.fromCache&&g&&g.source==="server"?p.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new DV(ed(m.path),E,{includeMetadataChanges:!0,qa:!0});return IV(u,b)})(await sO(s),s.asyncQueue,e,t,r))),r.promise}function h1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const J0=new Map;const oO="firestore.googleapis.com",Z0=!0;class W0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oO,this.ssl=Z0}else this.host=e.host,this.ssl=e.ssl??Z0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NA)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vy{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Qx;switch(r.type){case"firstParty":return new $x(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=J0.get(t);r&&(W("ComponentProvider","Removing Datastore"),J0.delete(t),r.terminate())})(this),Promise.resolve()}}class Ey{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ey(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(oc(t,Mt._jsonSchema))return new Mt(e,r||null,new ue(Ge.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Ot("string",Mt._jsonSchemaVersion),referencePath:Ot("string")};class ds extends Ey{constructor(e,t,r){super(e,t,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new ue(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function lO(s,e,...t){if(s=Wt(s),fS("collection","path",e),s instanceof vy){const r=Ge.fromString(e,...t);return FT(r),new ds(s,null,r)}{if(!(s instanceof Mt||s instanceof ds))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ge.fromString(e,...t));return FT(r),new ds(s.firestore,null,r)}}function Ty(s,e,...t){if(s=Wt(s),arguments.length===1&&(e=Op.newId()),fS("doc","path",e),s instanceof vy){const r=Ge.fromString(e,...t);return qT(r),new Mt(s,null,new ue(r))}{if(!(s instanceof Mt||s instanceof ds))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ge.fromString(e,...t));return qT(r),new Mt(s.firestore,s instanceof ds?s.converter:null,new ue(r))}}const eb="AsyncQueue";class tb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $A(this,"async_queue_retry"),this._c=()=>{const r=df();r&&W(eb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=df();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=df();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new cr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ts(e))throw e;W(eb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Tt("INTERNAL UNHANDLED ERROR: ",nb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=hy.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&fe(47125,{Pc:nb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class mc extends vy{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new tb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tb(e),this._firestoreClient=void 0,await e}}}function uO(s,e,t){t||(t=If);const r=Sp(s,"firestore");if(r.isInitialized(t)){const o=r.getImmediate({identifier:t}),u=r.getOptions(t);if(hr(u,e))return o;throw new ce(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ce(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NA)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Wo(e.host)&&mb(e.host),r.initialize({options:e,instanceIdentifier:t})}function f1(s){if(s._terminated)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||cO(s),s._firestoreClient}function cO(s){const e=s._freezeSettings(),t=(function(o,u,c,m){return new MD(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,h1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new nO(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(bt.fromBase64String(e))}catch(t){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Ot("string",Yn._jsonSchemaVersion),bytes:Ot("string")};class fd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ol{constructor(e){this._methodName=e}}class Ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(oc(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Ot("string",Ui._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oc(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new ce(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Ot("string",zi._jsonSchemaVersion),vectorValues:Ot("object")};const hO=/^__.*__$/;class fO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new il(e,this.data,t,this.fieldTransforms)}}class d1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _r(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function m1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:s})}}class dd{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(m1(this.Ac)&&hO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ld(e)}Cc(e,t,r,o=!1){return new dd({Ac:e,methodName:t,Dc:r,path:dt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(s){const e=s._freezeSettings(),t=ld(s._databaseId);return new dO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function g1(s,e,t,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);Iy("Data must be an object, but it was:",c,r);const m=y1(r,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const w=_p(e,b,t);if(!c.contains(w))throw new ce(X.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);v1(E,w)||E.push(w)}g=new En(E),p=c.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,p=c.fieldTransforms;return new fO(new sn(m),g,p)}class md extends ol{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}function p1(s,e,t){return new dd({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sy extends ol{_toFieldTransform(e){return new id(e.path,new Qo)}isEqual(e){return e instanceof Sy}}class Ay extends ol{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=p1(this,e,!0),r=this.vc.map((u=>ll(u,t))),o=new Ta(r);return new id(e.path,o)}isEqual(e){return e instanceof Ay&&hr(this.vc,e.vc)}}class wy extends ol{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=p1(this,e,!0),r=this.vc.map((u=>ll(u,t))),o=new ba(r);return new id(e.path,o)}isEqual(e){return e instanceof wy&&hr(this.vc,e.vc)}}function mO(s,e,t,r){const o=s.Cc(1,e,t);Iy("Data must be an object, but it was:",o,r);const u=[],c=sn.empty();bs(r,((g,p)=>{const E=Ry(e,g,t);p=Wt(p);const b=o.yc(E);if(p instanceof md)u.push(E);else{const w=ll(p,b);w!=null&&(u.push(E),c.set(E,w))}}));const m=new En(u);return new d1(c,m,o.fieldTransforms)}function gO(s,e,t,r,o,u){const c=s.Cc(1,e,t),m=[_p(e,r,t)],g=[o];if(u.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(_p(e,u[w])),g.push(u[w+1]);const p=[],E=sn.empty();for(let w=m.length-1;w>=0;--w)if(!v1(p,m[w])){const z=m[w];let Z=g[w];Z=Wt(Z);const ee=c.yc(z);if(Z instanceof md)p.push(z);else{const te=ll(Z,ee);te!=null&&(p.push(z),E.set(z,te))}}const b=new En(p);return new d1(E,b,c.fieldTransforms)}function ll(s,e){if(_1(s=Wt(s)))return Iy("Unsupported field value:",e,s),y1(s,e);if(s instanceof ol)return(function(r,o){if(!m1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=ll(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZD(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=$e.fromDate(r);return{timestampValue:Yo(o.serializer,u)}}if(r instanceof $e){const u=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yo(o.serializer,u)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:hA(o.serializer,r._byteString)};if(r instanceof Mt){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof zi)return(function(c,m){return{mapValue:{fields:{[qp]:{stringValue:Fp},[Fo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Qp(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Mp(r)}`)})(s,e)}function y1(s,e){const t={};return DS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(s,((r,o)=>{const u=ll(o,e.mc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function _1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $e||s instanceof Ui||s instanceof Yn||s instanceof Mt||s instanceof ol||s instanceof zi)}function Iy(s,e,t){if(!_1(t)||!dS(t)){const r=Mp(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function _p(s,e,t){if((e=Wt(e))instanceof fd)return e._internalPath;if(typeof e=="string")return Ry(s,e);throw Bf("Field path arguments must be of type string or ",s,!1,void 0,t)}const pO=new RegExp("[~\\*/\\[\\]]");function Ry(s,e,t){if(e.search(pO)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Bf(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ce(X.INVALID_ARGUMENT,m+s+g)}function v1(s,e){return s.some((t=>t.isEqual(e)))}class E1{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(T1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yO extends E1{data(){return super.data()}}function T1(s,e){return typeof e=="string"?Ry(s,e):e instanceof fd?e._internalPath:e._delegate._internalPath}class _O{convertValue(e,t="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bs(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[Fo].arrayValue?.values?.map((r=>ft(r.doubleValue)));return new zi(t)}convertGeoPoint(e){return new Ui(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const t=mr(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ge.fromString(e);pe(TA(r),9688,{name:e});const o=new va(r.get(1),r.get(3)),u=new ue(r.popFirst(5));return o.isEqual(t)||Tt(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function b1(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends E1{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(T1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:Ot("string",da._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class mf extends da{data(e={}){return super.data(e)}}class Uu{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Iu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new mf(this._firestore,this._userDataWriter,r.key,r,new Iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new mf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Iu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new mf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Iu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:vO(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:s})}}function EO(s){s=_a(s,Mt);const e=_a(s.firestore,mc);return aO(f1(e),s._key).then((t=>wO(e,s,t)))}Uu._jsonSchemaVersion="firestore/querySnapshot/1.0",Uu._jsonSchema={type:Ot("string",Uu._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class TO extends _O{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function bO(s,e,t){s=_a(s,Mt);const r=_a(s.firestore,mc),o=b1(s.converter,e);return Cy(r,[g1(by(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,cn.none())])}function SO(s,e,t,...r){s=_a(s,Mt);const o=_a(s.firestore,mc),u=by(o);let c;return c=typeof(e=Wt(e))=="string"||e instanceof fd?gO(u,"updateDoc",s._key,e,t,r):mO(u,"updateDoc",s._key,e),Cy(o,[c.toMutation(s._key,cn.exists(!0))])}function AO(s,e){const t=_a(s.firestore,mc),r=Ty(s),o=b1(s.converter,e);return Cy(t,[g1(by(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,cn.exists(!1))]).then((()=>r))}function Cy(s,e){return(function(r,o){const u=new cr;return r.asyncQueue.enqueueAndForget((async()=>zV(await rO(r),o,u))),u.promise})(f1(s),e)}function wO(s,e,t){const r=t.docs.get(e._key),o=new TO(s);return new da(s,o,e._key,r,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}class IO{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=DO(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function RO(s){return new IO(s)}class CO{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wu.provider,this._offlineComponentProvider={build:t=>new u1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class xO{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wu.provider,this._offlineComponentProvider={build:t=>new eO(t,e?.cacheSizeBytes)}}}function DO(s){return new CO(s?.forceOwnership)}function NO(){return new xO}function kg(){return new Sy("serverTimestamp")}function VO(...s){return new Ay("arrayUnion",s)}function OO(...s){return new wy("arrayRemove",s)}(function(e,t=!0){(function(o){nl=o})(el),ko(new ma("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new mc(new Yx(r.getProvider("auth-internal")),new Jx(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),cs(UT,zT,e),cs(UT,zT,"esm2020")})();const MO={apiKey:"AIzaSyAD3y3HNjlsSO7xykkqLWqofxU5U_6hW_Y",authDomain:"aichaku-924d0.firebaseapp.com",projectId:"aichaku-924d0",storageBucket:"aichaku-924d0.firebasestorage.app",messagingSenderId:"745993610184",appId:"1:745993610184:web:97ea4b13fef74d43d396fd"},S1=Tb(MO),jf=Hx(S1),vp=uO(S1,{localCache:RO({tabManager:NO()})}),PO=async s=>{const e=Ty(vp,"users",s,"metadata","categories"),t=await EO(e);if(t.exists())return t.data();const r={brands:{Closet:[],Beauty:[],Appliances:[]},subcategories:{Closet:[],Beauty:[],Appliances:[]}};return await bO(e,r),r},kO=s=>{const[e,t]=ot.useState({brands:{},subcategories:{}});return ot.useEffect(()=>{if(!s){t({brands:{},subcategories:{}});return}(async()=>{const o=await PO(s.uid);t(o)})()},[s]),{categoriesData:e,setCategoriesData:t}},LO=({isOpen:s,onClose:e,onAuthSuccess:t})=>{const[r,o]=ot.useState(!0),[u,c]=ot.useState(""),[m,g]=ot.useState(""),[p,E]=ot.useState(!1);if(!s)return null;const b=async w=>{w.preventDefault(),E(!0);try{if(r){const z=await x2(jf,u,m);t(z.user)}else{const z=await C2(jf,u,m);t(z.user)}e()}catch(z){alert(z.message)}finally{E(!1)}};return j.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:j.jsxs("div",{className:"bg-white w-full max-w-md rounded-[32px] p-8 shadow-2xl relative overflow-hidden",children:[j.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-stone-400 hover:text-stone-600 transition-colors",children:j.jsx(ab,{size:20})}),j.jsxs("div",{className:"mb-8 text-center",children:[j.jsx("h3",{className:"text-2xl font-serif italic mb-2",children:r?"Welcome Back":"Create Account"}),j.jsx("p",{className:"text-sm text-stone-500 font-medium",children:"Please enter your details to continue"})]}),j.jsxs("form",{className:"space-y-5",onSubmit:b,children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Email Address"}),j.jsxs("div",{className:"relative",children:[j.jsx(PI,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),j.jsx("input",{required:!0,type:"email",value:u,onChange:w=>c(w.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:"hello@example.com"})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Password"}),j.jsxs("div",{className:"relative",children:[j.jsx(NI,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),j.jsx("input",{required:!0,type:"password",value:m,onChange:w=>g(w.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:""})]})]}),j.jsx("button",{disabled:p,type:"submit",className:"w-full py-4 bg-stone-900 text-white rounded-2xl font-bold uppercase tracking-widest text-xs shadow-lg hover:bg-stone-800 transition-all disabled:opacity-50",children:p?"Processing...":r?"Sign In":"Sign Up"})]}),j.jsx("div",{className:"mt-6 text-center",children:j.jsx("button",{onClick:()=>o(!r),className:"text-xs font-bold text-stone-400 hover:text-stone-900 transition-colors uppercase tracking-tight",children:r?"Don't have an account? Sign Up":"Already have an account? Sign In"})})]})})},ib=({title:s,list:e,onAdd:t,onRemove:r,onBack:o})=>{const[u,c]=ot.useState("");return j.jsxs("div",{className:"space-y-6",children:[j.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[j.jsx("button",{onClick:o,className:"p-2 hover:bg-stone-100 rounded-full transition-colors",children:j.jsx(TI,{size:20})}),j.jsx("h3",{className:"text-xl font-serif italic",children:s})]}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("input",{className:"flex-1 bg-stone-50 border-stone-200 border rounded-xl px-4 py-2 outline-none focus:ring-2 ring-stone-200",placeholder:`New ${s.toLowerCase()} name...`,value:u,onChange:m=>c(m.target.value)}),j.jsx("button",{onClick:()=>{t(u),c("")},className:"bg-stone-900 text-white px-4 py-2 rounded-xl hover:bg-stone-800 transition-colors",children:j.jsx(sb,{size:20})})]}),j.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:e.map(m=>j.jsxs("div",{className:"flex justify-between items-center p-3 bg-stone-50 rounded-xl border border-stone-100",children:[j.jsx("span",{className:"text-stone-700",children:m}),j.jsx("button",{onClick:()=>r(m),className:"text-stone-400 hover:text-red-500 transition-colors",children:j.jsx(GI,{size:16})})]},m))})]})},UO=({isOpen:s,onClose:e,user:t,categoriesData:r,setCategoriesData:o})=>{const[u,c]=ot.useState("main"),[m,g]=ot.useState(!1),[p,E]=ot.useState({category:"Closet",brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"}),b=async(J,ie,re,ye,ne)=>{if(!J||!ie||!re||!ye)return;const ae=Ty(vp,"users",J,"metadata","categories"),I=`${ie}.${re}`;let A={};ne==="add"?A[I]=VO(ye):ne==="remove"&&(A[I]=OO(ye)),A.updatedAt=kg();try{await SO(ae,A),console.log(`Firebase ${ie} for ${re} updated successfully.`)}catch(R){console.error("Error updating Firebase categories:",R),alert("Failed to update categories in Firebase: "+R.message)}},w=async J=>{if(!t||!J)return;const ie=p.category,re=r.brands[ie]||[];if(J&&!re.includes(J)){const ye={...r.brands,[ie]:[...re,J]};o(ne=>({...ne,brands:ye})),await b(t.uid,"brands",ie,J,"add")}},z=async J=>{if(!t||!J)return;const ie=p.category,ye=(r.brands[ie]||[]).filter(ae=>ae!==J),ne={...r.brands,[ie]:ye};o(ae=>({...ae,brands:ne})),await b(t.uid,"brands",ie,J,"remove")},Z=async J=>{if(!t||!J)return;const ie=p.category,re=r.subcategories[ie]||[];if(J&&!re.includes(J)){const ye={...r.subcategories,[ie]:[...re,J]};o(ne=>({...ne,subcategories:ye})),await b(t.uid,"subcategories",ie,J,"add")}},ee=async J=>{if(!t||!J)return;const ie=p.category,ye=(r.subcategories[ie]||[]).filter(ae=>ae!==J),ne={...r.subcategories,[ie]:ye};o(ae=>({...ae,subcategories:ne})),await b(t.uid,"subcategories",ie,J,"remove")},te=async J=>{if(J.preventDefault(),!t){alert("Guest mode (IndexedDB) is coming soon! Please sign in for now.");return}g(!0);try{const ie={name:p.itemName,category:p.category,brand:p.brand,subcategory:p.subcategory,price:parseFloat(p.price)||0,uses:parseInt(p.timesUsed)||0,userId:t.uid,createdAt:kg(),updatedAt:kg(),isSynced:!0,source:"web-cloud"},re=lO(vp,"users",t.uid,"items");await AO(re,ie),E({category:"Closet",brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"}),e(),console.log("Item synced to cloud successfully!")}catch(ie){console.error("Firebase Save Error:",ie),alert("Failed to save: "+ie.message)}finally{g(!1)}};return s?j.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:s&&j.jsx("div",{className:"bg-white w-full max-w-xl rounded-[40px] shadow-2xl overflow-hidden transition-all duration-300",children:j.jsxs("div",{className:"p-10",children:[u==="main"&&j.jsxs("div",{className:"flex justify-between items-center mb-8",children:[j.jsxs("div",{children:[j.jsx("h3",{className:"text-3xl font-serif italic text-stone-900",children:"Add to Collection"}),j.jsx("p",{className:"text-stone-400 text-sm mt-1 font-medium",children:"Capture the details of your new piece"})]}),j.jsx("button",{onClick:()=>{e(),c("main")},className:"bg-stone-100 p-2 rounded-full text-stone-400 hover:text-stone-600 transition-colors",children:j.jsx(ab,{size:24})})]}),u==="main"&&j.jsxs("form",{className:"space-y-6",onSubmit:te,children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-3",children:"Core Category"}),j.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Closet","Beauty","Appliances"].map(J=>j.jsx("button",{type:"button",onClick:()=>E({...p,category:J}),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${p.category===J?"bg-stone-900 text-white border-stone-900 shadow-lg":"bg-white text-stone-500 border-stone-100 hover:border-stone-300"}`,children:J},J))})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[j.jsxs("div",{children:[j.jsxs("div",{className:"flex justify-between items-center mb-2",children:[j.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Brand"}),j.jsx("button",{type:"button",onClick:()=>c("manage-brands"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:j.jsx(aT,{size:14})})]}),j.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:p.brand,onChange:J=>E({...p,brand:J.target.value}),children:[j.jsx("option",{value:"",children:"Select Brand"}),r.brands[p.category]?.map(J=>j.jsx("option",{value:J,children:J},J))]})]}),j.jsxs("div",{children:[j.jsxs("div",{className:"flex justify-between items-center mb-2",children:[j.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Subcategory"}),j.jsx("button",{type:"button",onClick:()=>c("manage-subs"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:j.jsx(aT,{size:14})})]}),j.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:p.subcategory,onChange:J=>E({...p,subcategory:J.target.value}),children:[j.jsx("option",{value:"",children:"Select Subcategory"}),r.subcategories[p.category]?.map(J=>j.jsx("option",{value:J,children:J},J))]})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Item Name"}),j.jsx("input",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"e.g. Vintage Cashmere Sweater",value:p.itemName,onChange:J=>E({...p,itemName:J.target.value})})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Price ($)"}),j.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0.00",value:p.price,onChange:J=>E({...p,price:J.target.value})})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Initial Times Used"}),j.jsx("input",{required:!0,type:"number",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0",value:p.timesUsed,onChange:J=>E({...p,timesUsed:J.target.value})})]})]}),j.jsx("button",{type:"submit",className:"w-full py-5 bg-stone-900 text-white rounded-[24px] font-bold uppercase tracking-[0.2em] text-sm shadow-xl hover:bg-stone-800 transition-all hover:-translate-y-1 active:translate-y-0",children:"Save to My Collection"})]}),u==="manage-brands"&&j.jsx(ib,{title:"Brands",list:r.brands[p.category]||[],onAdd:w,onRemove:z,onBack:()=>c("main")}),u==="manage-subs"&&j.jsx(ib,{title:"Subcategories",list:r.subcategories[p.category]||[],onAdd:Z,onRemove:ee,onBack:()=>c("main")})]})})}):null};function ec(s,e){return typeof s!="number"||typeof e!="number"?0:e<=0?s:s/e}function zO(s){if(!Array.isArray(s)||s.length===0)return 0;let e=0;for(const t of s)e+=ec(t.price,t.uses);return e/s.length}function BO(s,e,t="desc"){const r=ec(s.price,s.uses),o=ec(e.price,e.uses);return r<o?t==="asc"?-1:1:r>o?t==="asc"?1:-1:0}const jO=()=>{const[s,e]=ot.useState(null),[t,r]=ot.useState(!1),[o,u]=ot.useState("All"),[c,m]=ot.useState(""),[g,p]=ot.useState({key:"price",direction:"desc"}),[E,b]=ot.useState(!1);ot.useEffect(()=>{const ne=V2(jf,ae=>{e(ae)});return()=>ne()},[]);const w=async()=>{try{await O2(jf)}catch(ne){console.error("Logout failed:",ne)}},{categoriesData:z,setCategoriesData:Z}=kO(s),[ee,te]=ot.useState([]),J=ot.useMemo(()=>{let ne=ee.filter(ae=>(o==="All"||ae.category===o)&&ae.name.toLowerCase().includes(c.toLowerCase()));return g.key&&ne.sort((ae,I)=>{if(g.key==="cpu")return BO(ae,I,g.direction);const A=ae[g.key],R=I[g.key];return A<R?g.direction==="asc"?-1:1:A>R?g.direction==="asc"?1:-1:0}),ne},[ee,o,c,g]),ie=ne=>{let ae="desc";g.key===ne&&g.direction==="desc"&&(ae="asc"),p({key:ne,direction:ae})},re=ne=>{te(ee.map(ae=>ae.id===ne?{...ae,uses:ae.uses+1}:ae))},ye=zO(ee).toFixed(2);return j.jsxs("div",{className:"flex h-screen bg-stone-50 font-sans text-stone-900 overflow-hidden",children:[j.jsxs("aside",{className:"w-64 bg-white border-r border-stone-200 flex flex-col p-6 space-y-8",children:[j.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[j.jsx("div",{className:"w-8 h-8 bg-stone-800 rounded-lg flex items-center justify-center text-white font-serif italic text-xl",children:"A"}),j.jsx("h1",{className:"text-2xl font-serif italic tracking-tight",children:"Aichaku"})]}),j.jsxs("nav",{className:"flex-1 space-y-1",children:[j.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-4 ml-2",children:"Main Menu"}),[{id:"All",icon:xI,label:"Overview"},{id:"Journal",icon:vI,label:"Daily Journal"},{id:"Closet",icon:LI,label:"Closet"},{id:"Beauty",icon:FI,label:"Beauty"},{id:"Appliances",icon:wI,label:"Appliances"}].map(ne=>j.jsxs("button",{onClick:()=>u(ne.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all ${o===ne.id?"bg-stone-900 text-white shadow-md":"text-stone-500 hover:bg-stone-100"}`,children:[j.jsx(ne.icon,{size:18}),ne.label]},ne.id))]}),j.jsx("div",{className:"pt-6 border-t border-stone-100",children:s?j.jsx("div",{className:"group relative",children:j.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-2xl hover:bg-stone-50 transition-colors cursor-pointer",children:[j.jsx("div",{className:"w-9 h-9 rounded-full bg-stone-800 flex items-center justify-center text-white text-xs font-bold uppercase",children:s.email.charAt(0)}),j.jsxs("div",{className:"flex-1 min-w-0",children:[j.jsx("p",{className:"text-xs font-bold text-stone-900 truncate",children:"My Account"}),j.jsx("p",{className:"text-[10px] text-stone-400 truncate",children:s.email})]}),j.jsx("button",{onClick:w,className:"opacity-0 group-hover:opacity-100 p-1.5 text-stone-400 hover:text-red-500 transition-all",title:"Log out",children:j.jsx(OI,{size:14})})]})}):j.jsxs("button",{onClick:()=>r(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-2xl bg-stone-100 text-stone-900 text-xs font-bold uppercase tracking-widest hover:bg-stone-200 transition-all border border-stone-200",children:[j.jsx(QI,{size:14})," Sign In"]})})]}),j.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[j.jsxs("header",{className:"h-20 bg-white border-b border-stone-200 flex items-center justify-between px-8",children:[j.jsxs("div",{className:"flex items-center bg-stone-100 px-4 py-2 rounded-full w-96",children:[j.jsx(BI,{size:16,className:"text-stone-400 mr-2"}),j.jsx("input",{className:"bg-transparent border-none outline-none text-sm w-full",placeholder:"Search your collection...",value:c,onChange:ne=>m(ne.target.value)})]}),j.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-stone-900 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-sm hover:bg-stone-800 transition-all",children:[j.jsx(sb,{size:18})," Add New Item"]})]}),j.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[j.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[j.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[j.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Inventory Value"}),j.jsxs("p",{className:"text-3xl font-serif italic",children:["$",ee.reduce((ne,ae)=>ne+ae.price,0).toLocaleString()]})]}),j.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[j.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Avg. Cost Per Use"}),j.jsxs("p",{className:"text-3xl font-serif italic",children:["$",ye]})]}),j.jsxs("div",{className:"bg-stone-900 text-white p-6 rounded-3xl shadow-lg flex items-center justify-between",children:[j.jsxs("div",{children:[j.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Reward Earned"}),j.jsx("p",{className:"text-3xl font-serif italic text-amber-400",children:"$0.00"})]}),j.jsx(yI,{size:40,className:"text-amber-400 opacity-50"})]})]}),j.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 shadow-sm overflow-hidden",children:[j.jsxs("div",{className:"px-6 py-4 border-b border-stone-100 flex items-center justify-between bg-stone-50/50",children:[j.jsxs("h2",{className:"font-serif text-lg",children:[o," Collection"]}),j.jsx("button",{className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-stone-200 transition-all",children:j.jsx(RI,{size:16})})]}),j.jsxs("table",{className:"w-full text-left",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest border-b border-stone-100",children:[j.jsx("th",{className:"px-6 py-4",children:"Item"}),j.jsx("th",{className:"px-6 py-4",children:"Brand"}),j.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>ie("price"),children:["Price ",j.jsx(vg,{size:10,className:"inline ml-1"})]}),j.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>ie("uses"),children:["Total Uses ",j.jsx(vg,{size:10,className:"inline ml-1"})]}),j.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>ie("cpu"),children:["Cost Per Use ",j.jsx(vg,{size:10,className:"inline ml-1"})]}),j.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),j.jsx("tbody",{className:"divide-y divide-stone-50",children:J.map(ne=>j.jsxs("tr",{className:"hover:bg-stone-50/50 transition-colors group",children:[j.jsx("td",{className:"px-6 py-4",children:j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("img",{src:ne.image,className:"w-10 h-10 rounded-lg object-cover shadow-sm",alt:""}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-semibold",children:ne.name}),j.jsx("p",{className:"text-[10px] text-stone-400 uppercase font-bold tracking-tighter",children:ne.category})]})]})}),j.jsx("td",{className:"px-6 py-4 text-sm",children:ne.brand}),j.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",ne.price.toFixed(2)]}),j.jsx("td",{className:"px-6 py-4 text-sm",children:ne.uses}),j.jsx("td",{className:"px-6 py-4",children:j.jsxs("span",{className:`text-sm font-bold ${ec(ne.price,ne.uses)<10?"text-emerald-600":"text-stone-900"}`,children:["$",ec(ne.price,ne.uses).toFixed(2)]})}),j.jsx("td",{className:"px-6 py-4 text-right",children:j.jsxs("button",{onClick:()=>re(ne.id),className:"opacity-0 group-hover:opacity-100 flex items-center gap-1 ml-auto bg-stone-900 text-white text-[10px] px-3 py-1.5 rounded-full font-bold uppercase transition-all hover:scale-105 shadow-md",children:[j.jsx(SI,{size:12})," Log Use"]})})]},ne.id))})]})]})]})]}),j.jsx(LO,{isOpen:t,onClose:()=>r(!1),onAuthSuccess:ne=>e(ne)}),j.jsx(UO,{isOpen:E,onClose:()=>b(!1),user:s,categoriesData:z,setCategoriesData:Z})]})};uI.createRoot(document.getElementById("root")).render(j.jsx(ot.StrictMode,{children:j.jsx(jO,{})}));
