(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Ig={exports:{}},Tu={};var dE;function QI(){if(dE)return Tu;dE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:c,ref:o!==void 0?o:null,props:u}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var mE;function YI(){return mE||(mE=1,Ig.exports=QI()),Ig.exports}var R=YI(),Rg={exports:{}},we={};var gE;function XI(){if(gE)return we;gE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function P(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,$={};function he(M,W,ae){this.props=M,this.context=W,this.refs=$,this.updater=ae||H}he.prototype.isReactComponent={},he.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},he.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ce(){}ce.prototype=he.prototype;function se(M,W,ae){this.props=M,this.context=W,this.refs=$,this.updater=ae||H}var Se=se.prototype=new ce;Se.constructor=se,U(Se,he.prototype),Se.isPureReactComponent=!0;var Te=Array.isArray;function ge(){}var S={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function x(M,W,ae){var oe=ae.ref;return{$$typeof:r,type:M,key:W,ref:oe!==void 0?oe:null,props:ae}}function O(M,W){return x(M.type,W,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return W[ae]})}var C=/\/+/g;function Qe(M,W){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):W.toString(36)}function gt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ge,ge):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,W,ae,oe,be){var Ce=typeof M;(Ce==="undefined"||Ce==="boolean")&&(M=null);var je=!1;if(M===null)je=!0;else switch(Ce){case"bigint":case"string":case"number":je=!0;break;case"object":switch(M.$$typeof){case r:case e:je=!0;break;case E:return je=M._init,X(je(M._payload),W,ae,oe,be)}}if(je)return be=be(M),je=oe===""?"."+Qe(M,0):oe,Te(be)?(ae="",je!=null&&(ae=je.replace(C,"$&/")+"/"),X(be,W,ae,"",function(xr){return xr})):be!=null&&(D(be)&&(be=O(be,ae+(be.key==null||M&&M.key===be.key?"":(""+be.key).replace(C,"$&/")+"/")+je)),W.push(be)),1;je=0;var Ut=oe===""?".":oe+":";if(Te(M))for(var ut=0;ut<M.length;ut++)oe=M[ut],Ce=Ut+Qe(oe,ut),je+=X(oe,W,ae,Ce,be);else if(ut=P(M),typeof ut=="function")for(M=ut.call(M),ut=0;!(oe=M.next()).done;)oe=oe.value,Ce=Ut+Qe(oe,ut++),je+=X(oe,W,ae,Ce,be);else if(Ce==="object"){if(typeof M.then=="function")return X(gt(M),W,ae,oe,be);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return je}function re(M,W,ae){if(M==null)return M;var oe=[],be=0;return X(M,oe,"","",function(Ce){return W.call(ae,Ce,be++)}),oe}function _e(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Be=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ye={map:re,forEach:function(M,W,ae){re(M,function(){W.apply(this,arguments)},ae)},count:function(M){var W=0;return re(M,function(){W++}),W},toArray:function(M){return re(M,function(W){return W})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return we.Activity=T,we.Children=Ye,we.Component=he,we.Fragment=t,we.Profiler=o,we.PureComponent=se,we.StrictMode=s,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,we.__COMPILER_RUNTIME={__proto__:null,c:function(M){return S.H.useMemoCache(M)}},we.cache=function(M){return function(){return M.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(M,W,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=U({},M.props),be=M.key;if(W!=null)for(Ce in W.key!==void 0&&(be=""+W.key),W)!w.call(W,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&W.ref===void 0||(oe[Ce]=W[Ce]);var Ce=arguments.length-2;if(Ce===1)oe.children=ae;else if(1<Ce){for(var je=Array(Ce),Ut=0;Ut<Ce;Ut++)je[Ut]=arguments[Ut+2];oe.children=je}return x(M.type,be,oe)},we.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},we.createElement=function(M,W,ae){var oe,be={},Ce=null;if(W!=null)for(oe in W.key!==void 0&&(Ce=""+W.key),W)w.call(W,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(be[oe]=W[oe]);var je=arguments.length-2;if(je===1)be.children=ae;else if(1<je){for(var Ut=Array(je),ut=0;ut<je;ut++)Ut[ut]=arguments[ut+2];be.children=Ut}if(M&&M.defaultProps)for(oe in je=M.defaultProps,je)be[oe]===void 0&&(be[oe]=je[oe]);return x(M,Ce,be)},we.createRef=function(){return{current:null}},we.forwardRef=function(M){return{$$typeof:m,render:M}},we.isValidElement=D,we.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:_e}},we.memo=function(M,W){return{$$typeof:p,type:M,compare:W===void 0?null:W}},we.startTransition=function(M){var W=S.T,ae={};S.T=ae;try{var oe=M(),be=S.S;be!==null&&be(ae,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ge,Be)}catch(Ce){Be(Ce)}finally{W!==null&&ae.types!==null&&(W.types=ae.types),S.T=W}},we.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},we.use=function(M){return S.H.use(M)},we.useActionState=function(M,W,ae){return S.H.useActionState(M,W,ae)},we.useCallback=function(M,W){return S.H.useCallback(M,W)},we.useContext=function(M){return S.H.useContext(M)},we.useDebugValue=function(){},we.useDeferredValue=function(M,W){return S.H.useDeferredValue(M,W)},we.useEffect=function(M,W){return S.H.useEffect(M,W)},we.useEffectEvent=function(M){return S.H.useEffectEvent(M)},we.useId=function(){return S.H.useId()},we.useImperativeHandle=function(M,W,ae){return S.H.useImperativeHandle(M,W,ae)},we.useInsertionEffect=function(M,W){return S.H.useInsertionEffect(M,W)},we.useLayoutEffect=function(M,W){return S.H.useLayoutEffect(M,W)},we.useMemo=function(M,W){return S.H.useMemo(M,W)},we.useOptimistic=function(M,W){return S.H.useOptimistic(M,W)},we.useReducer=function(M,W,ae){return S.H.useReducer(M,W,ae)},we.useRef=function(M){return S.H.useRef(M)},we.useState=function(M){return S.H.useState(M)},we.useSyncExternalStore=function(M,W,ae){return S.H.useSyncExternalStore(M,W,ae)},we.useTransition=function(){return S.H.useTransition()},we.version="19.2.3",we}var pE;function Op(){return pE||(pE=1,Rg.exports=XI()),Rg.exports}var xe=Op(),xg={exports:{}},bu={},Cg={exports:{}},Ng={};var yE;function $I(){return yE||(yE=1,(function(r){function e(X,re){var _e=X.length;X.push(re);e:for(;0<_e;){var Be=_e-1>>>1,Ye=X[Be];if(0<o(Ye,re))X[Be]=re,X[_e]=Ye,_e=Be;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var re=X[0],_e=X.pop();if(_e!==re){X[0]=_e;e:for(var Be=0,Ye=X.length,M=Ye>>>1;Be<M;){var W=2*(Be+1)-1,ae=X[W],oe=W+1,be=X[oe];if(0>o(ae,_e))oe<Ye&&0>o(be,ae)?(X[Be]=be,X[oe]=_e,Be=oe):(X[Be]=ae,X[W]=_e,Be=W);else if(oe<Ye&&0>o(be,_e))X[Be]=be,X[oe]=_e,Be=oe;else break e}}return re}function o(X,re){var _e=X.sortIndex-re.sortIndex;return _e!==0?_e:X.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();r.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,T=null,I=3,P=!1,H=!1,U=!1,$=!1,he=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function Se(X){for(var re=t(p);re!==null;){if(re.callback===null)s(p);else if(re.startTime<=X)s(p),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(p)}}function Te(X){if(U=!1,Se(X),!H)if(t(g)!==null)H=!0,ge||(ge=!0,k());else{var re=t(p);re!==null&&gt(Te,re.startTime-X)}}var ge=!1,S=-1,w=5,x=-1;function O(){return $?!0:!(r.unstable_now()-x<w)}function D(){if($=!1,ge){var X=r.unstable_now();x=X;var re=!0;try{e:{H=!1,U&&(U=!1,ce(S),S=-1),P=!0;var _e=I;try{t:{for(Se(X),T=t(g);T!==null&&!(T.expirationTime>X&&O());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,I=T.priorityLevel;var Ye=Be(T.expirationTime<=X);if(X=r.unstable_now(),typeof Ye=="function"){T.callback=Ye,Se(X),re=!0;break t}T===t(g)&&s(g),Se(X)}else s(g);T=t(g)}if(T!==null)re=!0;else{var M=t(p);M!==null&&gt(Te,M.startTime-X),re=!1}}break e}finally{T=null,I=_e,P=!1}re=void 0}}finally{re?k():ge=!1}}}var k;if(typeof se=="function")k=function(){se(D)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Qe=C.port2;C.port1.onmessage=D,k=function(){Qe.postMessage(null)}}else k=function(){he(D,0)};function gt(X,re){S=he(function(){X(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(X){switch(I){case 1:case 2:case 3:var re=3;break;default:re=I}var _e=I;I=re;try{return X()}finally{I=_e}},r.unstable_requestPaint=function(){$=!0},r.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=I;I=X;try{return re()}finally{I=_e}},r.unstable_scheduleCallback=function(X,re,_e){var Be=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,X){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=_e+Ye,X={id:E++,callback:re,priorityLevel:X,startTime:_e,expirationTime:Ye,sortIndex:-1},_e>Be?(X.sortIndex=_e,e(p,X),t(g)===null&&X===t(p)&&(U?(ce(S),S=-1):U=!0,gt(Te,_e-Be))):(X.sortIndex=Ye,e(g,X),H||P||(H=!0,ge||(ge=!0,k()))),X},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(X){var re=I;return function(){var _e=I;I=re;try{return X.apply(this,arguments)}finally{I=_e}}}})(Ng)),Ng}var _E;function JI(){return _E||(_E=1,Cg.exports=$I()),Cg.exports}var Dg={exports:{}},tn={};var vE;function ZI(){if(vE)return tn;vE=1;var r=Op();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tn.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},tn.flushSync=function(g){var p=c.T,E=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=E,s.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,P=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:P}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:I,fetchPriority:P,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},tn.requestFormReset=function(g){s.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var EE;function WI(){if(EE)return Dg.exports;EE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Dg.exports=ZI(),Dg.exports}var TE;function eR(){if(TE)return bu;TE=1;var r=JI(),e=Op(),t=WI();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),se=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case he:return"Profiler";case $:return"StrictMode";case Te:return"Suspense";case ge:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case H:return"Portal";case se:return n.displayName||"Context";case ce:return(n._context.displayName||"Context")+".Consumer";case Se:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return i=n.displayName||null,i!==null?i:Qe(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return Qe(n(i))}catch{}}return null}var gt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],Ye=-1;function M(n){return{current:n}}function W(n){0>Ye||(n.current=Be[Ye],Be[Ye]=null,Ye--)}function ae(n,i){Ye++,Be[Ye]=n.current,n.current=i}var oe=M(null),be=M(null),Ce=M(null),je=M(null);function Ut(n,i){switch(ae(Ce,i),ae(be,n),ae(oe,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?k0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=k0(i),n=L0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(oe),ae(oe,n)}function ut(){W(oe),W(be),W(Ce)}function xr(n){n.memoizedState!==null&&ae(je,n);var i=oe.current,a=L0(i,n.type);i!==a&&(ae(be,n),ae(oe,a))}function Pa(n){be.current===n&&(W(oe),W(be)),je.current===n&&(W(je),yu._currentValue=_e)}var ka,La;function di(n){if(ka===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ka=i&&i[1]||"",La=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ka+n+La}var yl=!1;function Cr(n,i){if(!n||yl)return"";yl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(K){var F=K}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(K){F=K}n.call(Z.prototype)}}else{try{throw Error()}catch(K){F=K}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(K){if(K&&F&&typeof K.stack=="string")return[K.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),q=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===q.length)for(l=N.length-1,f=q.length-1;1<=l&&0<=f&&N[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==q[f]){var Y=`
`+N[l].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=l&&0<=f);break}}}finally{yl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?di(a):""}function _l(n,i){switch(n.tag){case 26:case 27:case 5:return di(n.type);case 16:return di("Lazy");case 13:return n.child!==i&&i!==null?di("Suspense Fallback"):di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return Cr(n.type,!1);case 11:return Cr(n.type.render,!1);case 1:return Cr(n.type,!0);case 31:return di("Activity");default:return""}}function vl(n){try{var i="",a=null;do i+=_l(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var It=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,bs=r.unstable_cancelCallback,xd=r.unstable_shouldYield,Cc=r.unstable_requestPaint,ln=r.unstable_now,Nr=r.unstable_getCurrentPriorityLevel,El=r.unstable_ImmediatePriority,Tl=r.unstable_UserBlockingPriority,As=r.unstable_NormalPriority,Cd=r.unstable_LowPriority,Nc=r.unstable_IdlePriority,Dc=r.log,Vc=r.unstable_setDisableYieldValue,$n=null,Yt=null;function Pn(n){if(typeof Dc=="function"&&Vc(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode($n,n)}catch{}}var vt=Math.clz32?Math.clz32:Mc,Oc=Math.log,Ua=Math.LN2;function Mc(n){return n>>>=0,n===0?32:31-(Oc(n)/Ua|0)|0}var mi=256,Dr=262144,Rt=4194304;function gi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function pi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=gi(l):(_&=b,_!==0?f=gi(_):a||(a=b&~n,a!==0&&(f=gi(a))))):(b=l&~d,b!==0?f=gi(b):_!==0?f=gi(_):a||(a=l&~n,a!==0&&(f=gi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Jn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Nd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pc(){var n=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),n}function yi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Vr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Dd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,q=n.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-vt(a),Z=1<<Y;b[Y]=0,N[Y]=-1;var F=q[Y];if(F!==null)for(q[Y]=null,Y=0;Y<F.length;Y++){var K=F[Y];K!==null&&(K.lane&=-536870913)}a&=~Z}l!==0&&Or(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Or(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-vt(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function bl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-vt(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function Al(n,i){var a=i&-i;return a=(a&42)!==0?1:Mr(a),(a&(n.suspendedLanes|i))!==0?0:a}function Mr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function kc(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:aE(n.type))}function Zn(n,i){var a=re.p;try{return re.p=n,i()}finally{re.p=a}}var Wn=Math.random().toString(36).slice(2),xt="__reactFiber$"+Wn,Ht="__reactProps$"+Wn,_i="__reactContainer$"+Wn,ja="__reactEvents$"+Wn,Vd="__reactListeners$"+Wn,Lc="__reactHandles$"+Wn,Uc="__reactResources$"+Wn,vi="__reactMarker$"+Wn;function za(n){delete n[xt],delete n[Ht],delete n[ja],delete n[Vd],delete n[Lc]}function Ei(n){var i=n[xt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[_i]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=H0(n);n!==null;){if(a=n[xt])return a;n=H0(n)}return i}n=a,a=n.parentNode}return null}function kn(n){if(n=n[xt]||n[_i]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function bn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Ti(n){var i=n[Uc];return i||(i=n[Uc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ct(n){n[vi]=!0}var Sl=new Set,wl={};function bi(n,i){Ai(n,i),Ai(n+"Capture",i)}function Ai(n,i){for(wl[n]=i,n=0;n<i.length;n++)Sl.add(i[n])}var Il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},xl={};function jc(n){return It.call(xl,n)?!0:It.call(Rl,n)?!1:Il.test(n)?xl[n]=!0:(Rl[n]=!0,!1)}function Ba(n,i,a){if(jc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function An(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Nt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Gt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ss(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Cl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Xe(n){if(!n._valueTracker){var i=Ss(n)?"checked":"value";n._valueTracker=Cl(n,i,""+n[i])}}function Pr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Ss(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Si(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var kr=/[\n"\\]/g;function fn(n){return n.replace(kr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function qa(n,i,a,l,f,d,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Gt(i)):n.value!==""+Gt(i)&&(n.value=""+Gt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Nl(n,_,Gt(i)):a!=null?Nl(n,_,Gt(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Gt(b):n.removeAttribute("name")}function zc(n,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xe(n);return}a=a!=null?""+Gt(a):"",i=i!=null?""+Gt(i):a,b||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Xe(n)}function Nl(n,i,a){i==="number"&&Si(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ws(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Gt(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Bc(n,i,a){if(i!=null&&(i=""+Gt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Gt(a):""}function Is(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Gt(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Xe(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||qc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Vl(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Dl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Dl(n,d,i[d])}function Fa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(n){return Rs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ei(){}var Ol=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xs=null,wi=null;function Lr(n){var i=kn(n);if(i&&(n=i.stateNode)){var a=n[Ht]||null;e:switch(n=i.stateNode,i.type){case"input":if(qa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Ht]||null;if(!f)throw Error(s(90));qa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Pr(l)}break e;case"textarea":Bc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ws(n,!!a.multiple,i,!1)}}}var Ga=!1;function Cs(n,i,a){if(Ga)return n(i,a);Ga=!0;try{var l=n(i);return l}finally{if(Ga=!1,(xs!==null||wi!==null)&&(kh(),xs&&(i=xs,n=wi,wi=xs=null,Lr(i),n)))for(i=0;i<n.length;i++)Lr(n[i])}}function ti(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Ht]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ur=!1;if(Un)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Ur=!1}var Ii=null,Ml=null,jr=null;function Pl(){if(jr)return jr;var n,i=Ml,a=i.length,l,f="value"in Ii?Ii.value:Ii.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return jr=f.slice(n,1<l?1-l:void 0)}function zr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ki(){return!0}function ni(){return!1}function Xt(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ki:ni,this.isPropagationStopped=ni,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),i}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Xt(Qi),Ns=T({},Qi,{view:0,detail:0}),kl=Xt(Ns),Ds,Ka,xi,Qa=T({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xi&&(xi&&n.type==="mousemove"?(Ds=n.screenX-xi.screenX,Ka=n.screenY-xi.screenY):Ka=Ds=0,xi=n),Ds)},movementY:function(n){return"movementY"in n?n.movementY:Ka}}),Ll=Xt(Qa),Br=T({},Qa,{dataTransfer:0}),Hc=Xt(Br),Gc=T({},Ns,{relatedTarget:0}),qr=Xt(Gc),Ul=T({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kc=Xt(Ul),Ya=T({},Qi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qc=Xt(Ya),Yc=T({},Qi,{data:0}),Ci=Xt(Yc),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Jc[n])?!!i[n]:!1}function Vs(){return Zc}var un=T({},Ns,{key:function(n){if(n.key){var i=Xc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=zr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$c[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(n){return n.type==="keypress"?zr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wc=Xt(un),eh=T({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Xt(eh),h=T({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),y=Xt(h),v=T({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Xt(v),z=T({},Qa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Xt(z),ne=T({},Qi,{newState:0,oldState:0}),Ie=Xt(ne),Et=[9,13,27,32],He=Un&&"CompositionEvent"in window,ct=null;Un&&"documentMode"in document&&(ct=document.documentMode);var jn=Un&&"TextEvent"in window&&!ct,Ni=Un&&(!He||ct&&8<ct&&11>=ct),ii=" ",si=!1;function Fr(n,i){switch(n){case"keyup":return Et.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $a=!1;function yw(n,i){switch(n){case"compositionend":return Xa(i);case"keypress":return i.which!==32?null:(si=!0,ii);case"textInput":return n=i.data,n===ii&&si?null:n;default:return null}}function _w(n,i){if($a)return n==="compositionend"||!He&&Fr(n,i)?(n=Pl(),jr=Ml=Ii=null,$a=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ni&&i.locale!=="ko"?null:i.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!vw[n.type]:i==="textarea"}function Yy(n,i,a,l){xs?wi?wi.push(l):wi=[l]:xs=l,i=Fh(i,"onChange"),0<i.length&&(a=new Ri("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var jl=null,zl=null;function Ew(n){N0(n,0)}function th(n){var i=bn(n);if(Pr(i))return n}function Xy(n,i){if(n==="change")return i}var $y=!1;if(Un){var Od;if(Un){var Md="oninput"in document;if(!Md){var Jy=document.createElement("div");Jy.setAttribute("oninput","return;"),Md=typeof Jy.oninput=="function"}Od=Md}else Od=!1;$y=Od&&(!document.documentMode||9<document.documentMode)}function Zy(){jl&&(jl.detachEvent("onpropertychange",Wy),zl=jl=null)}function Wy(n){if(n.propertyName==="value"&&th(zl)){var i=[];Yy(i,zl,n,Ln(n)),Cs(Ew,i)}}function Tw(n,i,a){n==="focusin"?(Zy(),jl=i,zl=a,jl.attachEvent("onpropertychange",Wy)):n==="focusout"&&Zy()}function bw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return th(zl)}function Aw(n,i){if(n==="click")return th(i)}function Sw(n,i){if(n==="input"||n==="change")return th(i)}function ww(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:ww;function Bl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!It.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function e_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function t_(n,i){var a=e_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=e_(a)}}function n_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?n_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function i_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Si(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Si(n.document)}return i}function Pd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Iw=Un&&"documentMode"in document&&11>=document.documentMode,Ja=null,kd=null,ql=null,Ld=!1;function s_(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ld||Ja==null||Ja!==Si(l)||(l=Ja,"selectionStart"in l&&Pd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ql&&Bl(ql,l)||(ql=l,l=Fh(kd,"onSelect"),0<l.length&&(i=new Ri("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ja)))}function Hr(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Za={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionrun:Hr("Transition","TransitionRun"),transitionstart:Hr("Transition","TransitionStart"),transitioncancel:Hr("Transition","TransitionCancel"),transitionend:Hr("Transition","TransitionEnd")},Ud={},r_={};Un&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function Gr(n){if(Ud[n])return Ud[n];if(!Za[n])return n;var i=Za[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in r_)return Ud[n]=i[a];return n}var a_=Gr("animationend"),o_=Gr("animationiteration"),l_=Gr("animationstart"),Rw=Gr("transitionrun"),xw=Gr("transitionstart"),Cw=Gr("transitioncancel"),u_=Gr("transitionend"),c_=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function ri(n,i){c_.set(n,i),bi(i,[n])}var nh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Wa=0,zd=0;function ih(){for(var n=Wa,i=zd=Wa=0;i<n;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var d=zn[i];if(zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&h_(a,f,d)}}function sh(n,i,a,l){zn[Wa++]=n,zn[Wa++]=i,zn[Wa++]=a,zn[Wa++]=l,zd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Bd(n,i,a,l){return sh(n,i,a,l),rh(n)}function Kr(n,i){return sh(n,null,null,i),rh(n)}function h_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-vt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function rh(n){if(50<cu)throw cu=0,$m=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var eo={};function Nw(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,l){return new Nw(n,i,a,l)}function qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xi(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function f_(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ah(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")qd(n)&&(_=1);else if(typeof n=="string")_=PI(n,a,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case x:return n=wn(31,a,i,f),n.elementType=x,n.lanes=d,n;case U:return Qr(a.children,f,d,i);case $:_=8,f|=24;break;case he:return n=wn(12,a,i,f|2),n.elementType=he,n.lanes=d,n;case Te:return n=wn(13,a,i,f),n.elementType=Te,n.lanes=d,n;case ge:return n=wn(19,a,i,f),n.elementType=ge,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:_=10;break e;case ce:_=9;break e;case Se:_=11;break e;case S:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return i=wn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Qr(n,i,a,l){return n=wn(7,n,l,i),n.lanes=a,n}function Fd(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function d_(n){var i=wn(18,null,null,0);return i.stateNode=n,i}function Hd(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var m_=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=m_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:vl(i)},m_.set(n,i),i)}return{value:n,source:i,stack:vl(i)}}var to=[],no=0,oh=null,Fl=0,qn=[],Fn=0,Os=null,Di=1,Vi="";function $i(n,i){to[no++]=Fl,to[no++]=oh,oh=n,Fl=i}function g_(n,i,a){qn[Fn++]=Di,qn[Fn++]=Vi,qn[Fn++]=Os,Os=n;var l=Di;n=Vi;var f=32-vt(l)-1;l&=~(1<<f),a+=1;var d=32-vt(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Di=1<<32-vt(i)+f|a<<f|l,Vi=d+n}else Di=1<<d|a<<f|l,Vi=n}function Gd(n){n.return!==null&&($i(n,1),g_(n,1,0))}function Kd(n){for(;n===oh;)oh=to[--no],to[no]=null,Fl=to[--no],to[no]=null;for(;n===Os;)Os=qn[--Fn],qn[Fn]=null,Vi=qn[--Fn],qn[Fn]=null,Di=qn[--Fn],qn[Fn]=null}function p_(n,i){qn[Fn++]=Di,qn[Fn++]=Vi,qn[Fn++]=Os,Di=i.id,Vi=i.overflow,Os=n}var $t=null,ot=null,Ue=!1,Ms=null,Hn=!1,Qd=Error(s(519));function Ps(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(Bn(i,n)),Qd}function y_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[xt]=n,i[Ht]=l,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<fu.length;a++)Oe(fu[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),zc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),Is(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||M0(i.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),l.onScroll!=null&&Oe("scroll",i),l.onScrollEnd!=null&&Oe("scrollend",i),l.onClick!=null&&(i.onclick=ei),i=!0):i=!1,i||Ps(n,!0)}function __(n){for($t=n.return;$t;)switch($t.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:$t=$t.return}}function io(n){if(n!==$t)return!1;if(!Ue)return __(n),Ue=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||hg(n.type,n.memoizedProps)),a=!a),a&&ot&&Ps(n),__(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ot=F0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ot=F0(n)}else i===27?(i=ot,Xs(n.type)?(n=pg,pg=null,ot=n):ot=i):ot=$t?Kn(n.stateNode.nextSibling):null;return!0}function Yr(){ot=$t=null,Ue=!1}function Yd(){var n=Ms;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Ms=null),n}function Hl(n){Ms===null?Ms=[n]:Ms.push(n)}var Xd=M(null),Xr=null,Ji=null;function ks(n,i,a){ae(Xd,i._currentValue),i._currentValue=a}function Zi(n){n._currentValue=Xd.current,W(Xd)}function $d(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Jd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),$d(d.return,a,n),l||(_=null);break e}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),$d(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function so(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(f===je.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(yu):n=[yu])}f=f.return}n!==null&&Jd(i,n,a,l),i.flags|=262144}function lh(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $r(n){Xr=n,Ji=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return v_(Xr,n)}function uh(n,i){return Xr===null&&$r(n),v_(n,i)}function v_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ji===null){if(n===null)throw Error(s(308));Ji=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ji=Ji.next=i;return a}var Dw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},Vw=r.unstable_scheduleCallback,Ow=r.unstable_NormalPriority,Dt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zd(){return{controller:new Dw,data:new Map,refCount:0}}function Gl(n){n.refCount--,n.refCount===0&&Vw(Ow,function(){n.controller.abort()})}var Kl=null,Wd=0,ro=0,ao=null;function Mw(n,i){if(Kl===null){var a=Kl=[];Wd=0,ro=ng(),ao={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,i.then(E_,E_),i}function E_(){if(--Wd===0&&Kl!==null){ao!==null&&(ao.status="fulfilled");var n=Kl;Kl=null,ro=0,ao=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Pw(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var T_=X.S;X.S=function(n,i){s0=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Mw(n,i),T_!==null&&T_(n,i)};var Jr=M(null);function em(){var n=Jr.current;return n!==null?n:rt.pooledCache}function ch(n,i){i===null?ae(Jr,Jr.current):ae(Jr,i.pool)}function b_(){var n=em();return n===null?null:{parent:Dt._currentValue,pool:n}}var oo=Error(s(460)),tm=Error(s(474)),hh=Error(s(542)),fh={then:function(){}};function A_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function S_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(ei,ei),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,I_(n),n;default:if(typeof i.status=="string")i.then(ei,ei);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,I_(n),n}throw Wr=i,oo}}function Zr(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Wr=a,oo):a}}var Wr=null;function w_(){if(Wr===null)throw Error(s(459));var n=Wr;return Wr=null,n}function I_(n){if(n===oo||n===hh)throw Error(s(483))}var lo=null,Ql=0;function dh(n){var i=Ql;return Ql+=1,lo===null&&(lo=[]),S_(lo,n,i)}function Yl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function mh(n,i){throw i.$$typeof===I?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function R_(n){function i(L,V){if(n){var B=L.deletions;B===null?(L.deletions=[V],L.flags|=16):B.push(V)}}function a(L,V){if(!n)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function f(L,V){return L=Xi(L,V),L.index=0,L.sibling=null,L}function d(L,V,B){return L.index=B,n?(B=L.alternate,B!==null?(B=B.index,B<V?(L.flags|=67108866,V):B):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function _(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function b(L,V,B,J){return V===null||V.tag!==6?(V=Fd(B,L.mode,J),V.return=L,V):(V=f(V,B),V.return=L,V)}function N(L,V,B,J){var pe=B.type;return pe===U?Y(L,V,B.props.children,J,B.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&Zr(pe)===V.type)?(V=f(V,B.props),Yl(V,B),V.return=L,V):(V=ah(B.type,B.key,B.props,null,L.mode,J),Yl(V,B),V.return=L,V)}function q(L,V,B,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Hd(B,L.mode,J),V.return=L,V):(V=f(V,B.children||[]),V.return=L,V)}function Y(L,V,B,J,pe){return V===null||V.tag!==7?(V=Qr(B,L.mode,J,pe),V.return=L,V):(V=f(V,B),V.return=L,V)}function Z(L,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Fd(""+V,L.mode,B),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case P:return B=ah(V.type,V.key,V.props,null,L.mode,B),Yl(B,V),B.return=L,B;case H:return V=Hd(V,L.mode,B),V.return=L,V;case w:return V=Zr(V),Z(L,V,B)}if(gt(V)||k(V))return V=Qr(V,L.mode,B,null),V.return=L,V;if(typeof V.then=="function")return Z(L,dh(V),B);if(V.$$typeof===se)return Z(L,uh(L,V),B);mh(L,V)}return null}function F(L,V,B,J){var pe=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return pe!==null?null:b(L,V,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case P:return B.key===pe?N(L,V,B,J):null;case H:return B.key===pe?q(L,V,B,J):null;case w:return B=Zr(B),F(L,V,B,J)}if(gt(B)||k(B))return pe!==null?null:Y(L,V,B,J,null);if(typeof B.then=="function")return F(L,V,dh(B),J);if(B.$$typeof===se)return F(L,V,uh(L,B),J);mh(L,B)}return null}function K(L,V,B,J,pe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(B)||null,b(V,L,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case P:return L=L.get(J.key===null?B:J.key)||null,N(V,L,J,pe);case H:return L=L.get(J.key===null?B:J.key)||null,q(V,L,J,pe);case w:return J=Zr(J),K(L,V,B,J,pe)}if(gt(J)||k(J))return L=L.get(B)||null,Y(V,L,J,pe,null);if(typeof J.then=="function")return K(L,V,B,dh(J),pe);if(J.$$typeof===se)return K(L,V,B,uh(V,J),pe);mh(V,J)}return null}function ue(L,V,B,J){for(var pe=null,qe=null,de=V,Ne=V=0,Pe=null;de!==null&&Ne<B.length;Ne++){de.index>Ne?(Pe=de,de=null):Pe=de.sibling;var Fe=F(L,de,B[Ne],J);if(Fe===null){de===null&&(de=Pe);break}n&&de&&Fe.alternate===null&&i(L,de),V=d(Fe,V,Ne),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe,de=Pe}if(Ne===B.length)return a(L,de),Ue&&$i(L,Ne),pe;if(de===null){for(;Ne<B.length;Ne++)de=Z(L,B[Ne],J),de!==null&&(V=d(de,V,Ne),qe===null?pe=de:qe.sibling=de,qe=de);return Ue&&$i(L,Ne),pe}for(de=l(de);Ne<B.length;Ne++)Pe=K(de,L,Ne,B[Ne],J),Pe!==null&&(n&&Pe.alternate!==null&&de.delete(Pe.key===null?Ne:Pe.key),V=d(Pe,V,Ne),qe===null?pe=Pe:qe.sibling=Pe,qe=Pe);return n&&de.forEach(function(er){return i(L,er)}),Ue&&$i(L,Ne),pe}function ve(L,V,B,J){if(B==null)throw Error(s(151));for(var pe=null,qe=null,de=V,Ne=V=0,Pe=null,Fe=B.next();de!==null&&!Fe.done;Ne++,Fe=B.next()){de.index>Ne?(Pe=de,de=null):Pe=de.sibling;var er=F(L,de,Fe.value,J);if(er===null){de===null&&(de=Pe);break}n&&de&&er.alternate===null&&i(L,de),V=d(er,V,Ne),qe===null?pe=er:qe.sibling=er,qe=er,de=Pe}if(Fe.done)return a(L,de),Ue&&$i(L,Ne),pe;if(de===null){for(;!Fe.done;Ne++,Fe=B.next())Fe=Z(L,Fe.value,J),Fe!==null&&(V=d(Fe,V,Ne),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe);return Ue&&$i(L,Ne),pe}for(de=l(de);!Fe.done;Ne++,Fe=B.next())Fe=K(de,L,Ne,Fe.value,J),Fe!==null&&(n&&Fe.alternate!==null&&de.delete(Fe.key===null?Ne:Fe.key),V=d(Fe,V,Ne),qe===null?pe=Fe:qe.sibling=Fe,qe=Fe);return n&&de.forEach(function(KI){return i(L,KI)}),Ue&&$i(L,Ne),pe}function st(L,V,B,J){if(typeof B=="object"&&B!==null&&B.type===U&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case P:e:{for(var pe=B.key;V!==null;){if(V.key===pe){if(pe=B.type,pe===U){if(V.tag===7){a(L,V.sibling),J=f(V,B.props.children),J.return=L,L=J;break e}}else if(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&Zr(pe)===V.type){a(L,V.sibling),J=f(V,B.props),Yl(J,B),J.return=L,L=J;break e}a(L,V);break}else i(L,V);V=V.sibling}B.type===U?(J=Qr(B.props.children,L.mode,J,B.key),J.return=L,L=J):(J=ah(B.type,B.key,B.props,null,L.mode,J),Yl(J,B),J.return=L,L=J)}return _(L);case H:e:{for(pe=B.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(L,V.sibling),J=f(V,B.children||[]),J.return=L,L=J;break e}else{a(L,V);break}else i(L,V);V=V.sibling}J=Hd(B,L.mode,J),J.return=L,L=J}return _(L);case w:return B=Zr(B),st(L,V,B,J)}if(gt(B))return ue(L,V,B,J);if(k(B)){if(pe=k(B),typeof pe!="function")throw Error(s(150));return B=pe.call(B),ve(L,V,B,J)}if(typeof B.then=="function")return st(L,V,dh(B),J);if(B.$$typeof===se)return st(L,V,uh(L,B),J);mh(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(a(L,V.sibling),J=f(V,B),J.return=L,L=J):(a(L,V),J=Fd(B,L.mode,J),J.return=L,L=J),_(L)):a(L,V)}return function(L,V,B,J){try{Ql=0;var pe=st(L,V,B,J);return lo=null,pe}catch(de){if(de===oo||de===hh)throw de;var qe=wn(29,de,null,L.mode);return qe.lanes=J,qe.return=L,qe}}}var ea=R_(!0),x_=R_(!1),Ls=!1;function nm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Us(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function js(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=rh(n),h_(n,null,a),i}return sh(n,l,i,a),rh(n)}function Xl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,bl(n,a)}}function sm(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var rm=!1;function $l(){if(rm){var n=ao;if(n!==null)throw n}}function Jl(n,i,a,l){rm=!1;var f=n.updateQueue;Ls=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,q=N.next;N.next=null,_===null?d=q:_.next=q,_=N;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==_&&(b===null?Y.firstBaseUpdate=q:b.next=q,Y.lastBaseUpdate=N))}if(d!==null){var Z=f.baseState;_=0,Y=q=N=null,b=d;do{var F=b.lane&-536870913,K=F!==b.lane;if(K?(Me&F)===F:(l&F)===F){F!==0&&F===ro&&(rm=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ue=n,ve=b;F=i;var st=a;switch(ve.tag){case 1:if(ue=ve.payload,typeof ue=="function"){Z=ue.call(st,Z,F);break e}Z=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ve.payload,F=typeof ue=="function"?ue.call(st,Z,F):ue,F==null)break e;Z=T({},Z,F);break e;case 2:Ls=!0}}F=b.callback,F!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[F]:K.push(F))}else K={lane:F,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(q=Y=K,N=Z):Y=Y.next=K,_|=F;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;K=b,b=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Y===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=q,f.lastBaseUpdate=Y,d===null&&(f.shared.lanes=0),Hs|=_,n.lanes=_,n.memoizedState=Z}}function C_(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function N_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)C_(a[n],i)}var uo=M(null),gh=M(0);function D_(n,i){n=os,ae(gh,n),ae(uo,i),os=n|i.baseLanes}function am(){ae(gh,os),ae(uo,uo.current)}function om(){os=gh.current,W(uo),W(gh)}var In=M(null),Gn=null;function zs(n){var i=n.alternate;ae(Tt,Tt.current&1),ae(In,n),Gn===null&&(i===null||uo.current!==null||i.memoizedState!==null)&&(Gn=n)}function lm(n){ae(Tt,Tt.current),ae(In,n),Gn===null&&(Gn=n)}function V_(n){n.tag===22?(ae(Tt,Tt.current),ae(In,n),Gn===null&&(Gn=n)):Bs()}function Bs(){ae(Tt,Tt.current),ae(In,In.current)}function Rn(n){W(In),Gn===n&&(Gn=null),W(Tt)}var Tt=M(0);function ph(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mg(a)||gg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,Re=null,nt=null,Vt=null,yh=!1,co=!1,ta=!1,_h=0,Zl=0,ho=null,kw=0;function pt(){throw Error(s(321))}function um(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function cm(n,i,a,l,f,d){return Wi=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?gv:wm,ta=!1,d=a(l,f),ta=!1,co&&(d=M_(i,a,l,f)),O_(n),d}function O_(n){X.H=tu;var i=nt!==null&&nt.next!==null;if(Wi=0,Vt=nt=Re=null,yh=!1,Zl=0,ho=null,i)throw Error(s(300));n===null||Ot||(n=n.dependencies,n!==null&&lh(n)&&(Ot=!0))}function M_(n,i,a,l){Re=n;var f=0;do{if(co&&(ho=null),Zl=0,co=!1,25<=f)throw Error(s(301));if(f+=1,Vt=nt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=pv,d=i(a,l)}while(co);return d}function Lw(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?Wl(i):i,n=n.useState()[0],(nt!==null?nt.memoizedState:null)!==n&&(Re.flags|=1024),i}function hm(){var n=_h!==0;return _h=0,n}function fm(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function dm(n){if(yh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}yh=!1}Wi=0,Vt=nt=Re=null,co=!1,Zl=_h=0,ho=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Re.memoizedState=Vt=n:Vt=Vt.next=n,Vt}function bt(){if(nt===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var i=Vt===null?Re.memoizedState:Vt.next;if(i!==null)Vt=i,nt=n;else{if(n===null)throw Re.alternate===null?Error(s(467)):Error(s(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Vt===null?Re.memoizedState=Vt=n:Vt=Vt.next=n}return Vt}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(n){var i=Zl;return Zl+=1,ho===null&&(ho=[]),n=S_(ho,n,i),i=Re,(Vt===null?i.memoizedState:Vt.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?gv:wm),n}function Eh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wl(n);if(n.$$typeof===se)return Jt(n)}throw Error(s(438,String(n)))}function mm(n){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=vh(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function es(n,i){return typeof i=="function"?i(n):i}function Th(n){var i=bt();return gm(i,nt,n)}function gm(n,i,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var b=_=null,N=null,q=i,Y=!1;do{var Z=q.lane&-536870913;if(Z!==q.lane?(Me&Z)===Z:(Wi&Z)===Z){var F=q.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Z===ro&&(Y=!0);else if((Wi&F)===F){q=q.next,F===ro&&(Y=!0);continue}else Z={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=Z,_=d):N=N.next=Z,Re.lanes|=F,Hs|=F;Z=q.action,ta&&a(d,Z),d=q.hasEagerState?q.eagerState:a(d,Z)}else F={lane:Z,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=F,_=d):N=N.next=F,Re.lanes|=Z,Hs|=Z;q=q.next}while(q!==null&&q!==i);if(N===null?_=d:N.next=b,!Sn(d,n.memoizedState)&&(Ot=!0,Y&&(a=ao,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function pm(n){var i=bt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,i.memoizedState)||(Ot=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function P_(n,i,a){var l=Re,f=bt(),d=Ue;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Sn((nt||f).memoizedState,a);if(_&&(f.memoizedState=a,Ot=!0),f=f.queue,vm(U_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,fo(9,{destroy:void 0},L_.bind(null,l,f,a,i),null),rt===null)throw Error(s(349));d||(Wi&127)!==0||k_(l,i,a)}return a}function k_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=vh(),Re.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function L_(n,i,a,l){i.value=a,i.getSnapshot=l,j_(i)&&z_(n)}function U_(n,i,a){return a(function(){j_(i)&&z_(n)})}function j_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function z_(n){var i=Kr(n,2);i!==null&&_n(i,n,2)}function ym(n){var i=cn();if(typeof n=="function"){var a=n;if(n=a(),ta){Pn(!0);try{a()}finally{Pn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:n},i}function B_(n,i,a,l){return n.baseState=a,gm(n,nt,typeof l=="function"?l:es)}function Uw(n,i,a,l,f){if(Sh(n))throw Error(s(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,q_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function q_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=X.T,_={};X.T=_;try{var b=a(f,l),N=X.S;N!==null&&N(_,b),F_(n,i,b)}catch(q){_m(n,i,q)}finally{d!==null&&_.types!==null&&(d.types=_.types),X.T=d}}else try{d=a(f,l),F_(n,i,d)}catch(q){_m(n,i,q)}}function F_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){H_(n,i,l)},function(l){return _m(n,i,l)}):H_(n,i,a)}function H_(n,i,a){i.status="fulfilled",i.value=a,G_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,q_(n,a)))}function _m(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,G_(i),i=i.next;while(i!==l)}n.action=null}function G_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function K_(n,i){return i}function Q_(n,i){if(Ue){var a=rt.formState;if(a!==null){e:{var l=Re;if(Ue){if(ot){t:{for(var f=ot,d=Hn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Kn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ot=Kn(f.nextSibling),l=f.data==="F!";break e}}Ps(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K_,lastRenderedState:i},a.queue=l,a=fv.bind(null,Re,l),l.dispatch=a,l=ym(!1),d=Sm.bind(null,Re,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=Uw.bind(null,Re,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function Y_(n){var i=bt();return X_(i,nt,n)}function X_(n,i,a){if(i=gm(n,i,K_)[0],n=Th(es)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Wl(i)}catch(_){throw _===oo?hh:_}else l=i;i=bt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,fo(9,{destroy:void 0},jw.bind(null,f,a),null)),[l,d,n]}function jw(n,i){n.action=i}function $_(n){var i=bt(),a=nt;if(a!==null)return X_(i,a,n);bt(),i=i.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function fo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=vh(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function J_(){return bt().memoizedState}function bh(n,i,a,l){var f=cn();Re.flags|=n,f.memoizedState=fo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Ah(n,i,a,l){var f=bt();l=l===void 0?null:l;var d=f.memoizedState.inst;nt!==null&&l!==null&&um(l,nt.memoizedState.deps)?f.memoizedState=fo(i,d,a,l):(Re.flags|=n,f.memoizedState=fo(1|i,d,a,l))}function Z_(n,i){bh(8390656,8,n,i)}function vm(n,i){Ah(2048,8,n,i)}function zw(n){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=vh(),Re.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function W_(n){var i=bt().memoizedState;return zw({ref:i,nextImpl:n}),function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function ev(n,i){return Ah(4,2,n,i)}function tv(n,i){return Ah(4,4,n,i)}function nv(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function iv(n,i,a){a=a!=null?a.concat([n]):null,Ah(4,4,nv.bind(null,i,n),a)}function Em(){}function sv(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&um(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function rv(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&um(i,l[1]))return l[0];if(l=n(),ta){Pn(!0);try{n()}finally{Pn(!1)}}return a.memoizedState=[l,i],l}function Tm(n,i,a){return a===void 0||(Wi&1073741824)!==0&&(Me&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=a0(),Re.lanes|=n,Hs|=n,a)}function av(n,i,a,l){return Sn(a,i)?a:uo.current!==null?(n=Tm(n,a,l),Sn(n,i)||(Ot=!0),n):(Wi&42)===0||(Wi&1073741824)!==0&&(Me&261930)===0?(Ot=!0,n.memoizedState=a):(n=a0(),Re.lanes|=n,Hs|=n,i)}function ov(n,i,a,l,f){var d=re.p;re.p=d!==0&&8>d?d:8;var _=X.T,b={};X.T=b,Sm(n,!1,i,a);try{var N=f(),q=X.S;if(q!==null&&q(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Y=Pw(N,l);eu(n,i,Y,Nn(n))}else eu(n,i,l,Nn(n))}catch(Z){eu(n,i,{then:function(){},status:"rejected",reason:Z},Nn())}finally{re.p=d,_!==null&&b.types!==null&&(_.types=b.types),X.T=_}}function Bw(){}function bm(n,i,a,l){if(n.tag!==5)throw Error(s(476));var f=lv(n).queue;ov(n,f,i,_e,a===null?Bw:function(){return uv(n),a(l)})}function lv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function uv(n){var i=lv(n);i.next===null&&(i=n.alternate.memoizedState),eu(n,i.next.queue,{},Nn())}function Am(){return Jt(yu)}function cv(){return bt().memoizedState}function hv(){return bt().memoizedState}function qw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();n=Us(a);var l=js(i,n,a);l!==null&&(_n(l,i,a),Xl(l,i,a)),i={cache:Zd()},n.payload=i;return}i=i.return}}function Fw(n,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sh(n)?dv(i,a):(a=Bd(n,i,a,l),a!==null&&(_n(a,n,l),mv(a,i,l)))}function fv(n,i,a){var l=Nn();eu(n,i,a,l)}function eu(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sh(n))dv(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,Sn(b,_))return sh(n,i,f,0),rt===null&&ih(),!1}catch{}if(a=Bd(n,i,f,l),a!==null)return _n(a,n,l),mv(a,i,l),!0}return!1}function Sm(n,i,a,l){if(l={lane:2,revertLane:ng(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sh(n)){if(i)throw Error(s(479))}else i=Bd(n,a,l,2),i!==null&&_n(i,n,2)}function Sh(n){var i=n.alternate;return n===Re||i!==null&&i===Re}function dv(n,i){co=yh=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function mv(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,bl(n,a)}}var tu={readContext:Jt,use:Eh,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};tu.useEffectEvent=pt;var gv={readContext:Jt,use:Eh,useCallback:function(n,i){return cn().memoizedState=[n,i===void 0?null:i],n},useContext:Jt,useEffect:Z_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,bh(4194308,4,nv.bind(null,i,n),a)},useLayoutEffect:function(n,i){return bh(4194308,4,n,i)},useInsertionEffect:function(n,i){bh(4,2,n,i)},useMemo:function(n,i){var a=cn();i=i===void 0?null:i;var l=n();if(ta){Pn(!0);try{n()}finally{Pn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=cn();if(a!==void 0){var f=a(i);if(ta){Pn(!0);try{a(i)}finally{Pn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Fw.bind(null,Re,n),[l.memoizedState,n]},useRef:function(n){var i=cn();return n={current:n},i.memoizedState=n},useState:function(n){n=ym(n);var i=n.queue,a=fv.bind(null,Re,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Em,useDeferredValue:function(n,i){var a=cn();return Tm(a,n,i)},useTransition:function(){var n=ym(!1);return n=ov.bind(null,Re,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Re,f=cn();if(Ue){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),rt===null)throw Error(s(349));(Me&127)!==0||k_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,Z_(U_.bind(null,l,d,n),[n]),l.flags|=2048,fo(9,{destroy:void 0},L_.bind(null,l,d,a,i),null),a},useId:function(){var n=cn(),i=rt.identifierPrefix;if(Ue){var a=Vi,l=Di;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=_h++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=kw++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Am,useFormState:Q_,useActionState:Q_,useOptimistic:function(n){var i=cn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Sm.bind(null,Re,!0,a),a.dispatch=i,[n,i]},useMemoCache:mm,useCacheRefresh:function(){return cn().memoizedState=qw.bind(null,Re)},useEffectEvent:function(n){var i=cn(),a={impl:n};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},wm={readContext:Jt,use:Eh,useCallback:sv,useContext:Jt,useEffect:vm,useImperativeHandle:iv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:rv,useReducer:Th,useRef:J_,useState:function(){return Th(es)},useDebugValue:Em,useDeferredValue:function(n,i){var a=bt();return av(a,nt.memoizedState,n,i)},useTransition:function(){var n=Th(es)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:Wl(n),i]},useSyncExternalStore:P_,useId:cv,useHostTransitionStatus:Am,useFormState:Y_,useActionState:Y_,useOptimistic:function(n,i){var a=bt();return B_(a,nt,n,i)},useMemoCache:mm,useCacheRefresh:hv};wm.useEffectEvent=W_;var pv={readContext:Jt,use:Eh,useCallback:sv,useContext:Jt,useEffect:vm,useImperativeHandle:iv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:rv,useReducer:pm,useRef:J_,useState:function(){return pm(es)},useDebugValue:Em,useDeferredValue:function(n,i){var a=bt();return nt===null?Tm(a,n,i):av(a,nt.memoizedState,n,i)},useTransition:function(){var n=pm(es)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:Wl(n),i]},useSyncExternalStore:P_,useId:cv,useHostTransitionStatus:Am,useFormState:$_,useActionState:$_,useOptimistic:function(n,i){var a=bt();return nt!==null?B_(a,nt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:mm,useCacheRefresh:hv};pv.useEffectEvent=W_;function Im(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Rm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=Us(l);f.payload=i,a!=null&&(f.callback=a),i=js(n,f,l),i!==null&&(_n(i,n,l),Xl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=Us(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=js(n,f,l),i!==null&&(_n(i,n,l),Xl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Nn(),l=Us(a);l.tag=2,i!=null&&(l.callback=i),i=js(n,l,a),i!==null&&(_n(i,n,a),Xl(i,n,a))}};function yv(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Bl(a,l)||!Bl(f,d):!0}function _v(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Rm.enqueueReplaceState(i,i.state,null)}function na(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function vv(n){nh(n)}function Ev(n){console.error(n)}function Tv(n){nh(n)}function wh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function bv(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xm(n,i,a){return a=Us(a),a.tag=3,a.payload={element:null},a.callback=function(){wh(n,i)},a}function Av(n){return n=Us(n),n.tag=3,n}function Sv(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){bv(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){bv(i,a,l),typeof f!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Hw(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&so(i,a,f,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Lh():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===fh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Wm(n,l,f)),!1;case 22:return a.flags|=65536,l===fh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Wm(n,l,f)),!1}throw Error(s(435,a.tag))}return Wm(n,l,f),Lh(),!1}if(Ue)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Qd&&(n=Error(s(422),{cause:l}),Hl(Bn(n,a)))):(l!==Qd&&(i=Error(s(423),{cause:l}),Hl(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=xm(n.stateNode,l,f),sm(n,f),yt!==4&&(yt=2)),!1;var d=Error(s(520),{cause:l});if(d=Bn(d,a),uu===null?uu=[d]:uu.push(d),yt!==4&&(yt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=xm(a.stateNode,l,n),sm(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Gs===null||!Gs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Av(f),Sv(f,n,a,l),sm(a,f),!1}a=a.return}while(a!==null);return!1}var Cm=Error(s(461)),Ot=!1;function Zt(n,i,a,l){i.child=n===null?x_(i,null,a,l):ea(i,n.child,a,l)}function wv(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return $r(i),l=cm(n,i,a,_,d,f),b=hm(),n!==null&&!Ot?(fm(n,i,f),ts(n,i,f)):(Ue&&b&&Gd(i),i.flags|=1,Zt(n,i,l,f),i.child)}function Iv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!qd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Rv(n,i,d,l,f)):(n=ah(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Lm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Bl,a(_,l)&&n.ref===i.ref)return ts(n,i,f)}return i.flags|=1,n=Xi(d,l),n.ref=i.ref,n.return=i,i.child=n}function Rv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Bl(d,l)&&n.ref===i.ref)if(Ot=!1,i.pendingProps=l=d,Lm(n,f))(n.flags&131072)!==0&&(Ot=!0);else return i.lanes=n.lanes,ts(n,i,f)}return Nm(n,i,a,l,f)}function xv(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Cv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ch(i,d!==null?d.cachePool:null),d!==null?D_(i,d):am(),V_(i);else return l=i.lanes=536870912,Cv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(ch(i,d.cachePool),D_(i,d),Bs(),i.memoizedState=null):(n!==null&&ch(i,null),am(),Bs());return Zt(n,i,f,a),i.child}function nu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Cv(n,i,a,l,f){var d=em();return d=d===null?null:{parent:Dt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&ch(i,null),am(),V_(i),n!==null&&so(n,i,l,!0),i.childLanes=f,null}function Ih(n,i){return i=xh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Nv(n,i,a){return ea(i,n.child,null,a),n=Ih(i,i.pendingProps),n.flags|=2,Rn(i),i.memoizedState=null,n}function Gw(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ue){if(l.mode==="hidden")return n=Ih(i,l),i.lanes=536870912,nu(null,n);if(lm(i),(n=ot)?(n=q0(n,Hn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Os!==null?{id:Di,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},a=d_(n),a.return=i,i.child=a,$t=i,ot=null)):n=null,n===null)throw Ps(i);return i.lanes=536870912,null}return Ih(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(lm(i),f)if(i.flags&256)i.flags&=-257,i=Nv(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ot||so(n,i,a,!1),f=(a&n.childLanes)!==0,Ot||f){if(l=rt,l!==null&&(_=Al(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Kr(n,_),_n(l,n,_),Cm;Lh(),i=Nv(n,i,a)}else n=d.treeContext,ot=Kn(_.nextSibling),$t=i,Ue=!0,Ms=null,Hn=!1,n!==null&&p_(i,n),i=Ih(i,l),i.flags|=4096;return i}return n=Xi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Rh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Nm(n,i,a,l,f){return $r(i),a=cm(n,i,a,l,void 0,f),l=hm(),n!==null&&!Ot?(fm(n,i,f),ts(n,i,f)):(Ue&&l&&Gd(i),i.flags|=1,Zt(n,i,a,f),i.child)}function Dv(n,i,a,l,f,d){return $r(i),i.updateQueue=null,a=M_(i,l,a,f),O_(n),l=hm(),n!==null&&!Ot?(fm(n,i,d),ts(n,i,d)):(Ue&&l&&Gd(i),i.flags|=1,Zt(n,i,a,d),i.child)}function Vv(n,i,a,l,f){if($r(i),i.stateNode===null){var d=eo,_=a.contextType;typeof _=="object"&&_!==null&&(d=Jt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},nm(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Jt(_):eo,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Im(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Rm.enqueueReplaceState(d,d.state,null),Jl(i,l,d,f),$l(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var b=i.memoizedProps,N=na(a,b);d.props=N;var q=d.context,Y=a.contextType;_=eo,typeof Y=="object"&&Y!==null&&(_=Jt(Y));var Z=a.getDerivedStateFromProps;Y=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||q!==_)&&_v(i,d,l,_),Ls=!1;var F=i.memoizedState;d.state=F,Jl(i,l,d,f),$l(),q=i.memoizedState,b||F!==q||Ls?(typeof Z=="function"&&(Im(i,a,Z,l),q=i.memoizedState),(N=Ls||yv(i,a,N,l,F,q,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,im(n,i),_=i.memoizedProps,Y=na(a,_),d.props=Y,Z=i.pendingProps,F=d.context,q=a.contextType,N=eo,typeof q=="object"&&q!==null&&(N=Jt(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==Z||F!==N)&&_v(i,d,l,N),Ls=!1,F=i.memoizedState,d.state=F,Jl(i,l,d,f),$l();var K=i.memoizedState;_!==Z||F!==K||Ls||n!==null&&n.dependencies!==null&&lh(n.dependencies)?(typeof b=="function"&&(Im(i,a,b,l),K=i.memoizedState),(Y=Ls||yv(i,a,Y,l,F,K,N)||n!==null&&n.dependencies!==null&&lh(n.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=N,l=Y):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Rh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=ea(i,n.child,null,f),i.child=ea(i,null,a,f)):Zt(n,i,a,f),i.memoizedState=d.state,n=i.child):n=ts(n,i,f),n}function Ov(n,i,a,l){return Yr(),i.flags|=256,Zt(n,i,a,l),i.child}var Dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(n){return{baseLanes:n,cachePool:b_()}}function Om(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function Mv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Tt.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ue){if(f?zs(i):Bs(),(n=ot)?(n=q0(n,Hn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Os!==null?{id:Di,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},a=d_(n),a.return=i,i.child=a,$t=i,ot=null)):n=null,n===null)throw Ps(i);return gg(n)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Bs(),f=i.mode,b=xh({mode:"hidden",children:b},f),l=Qr(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=Vm(a),l.childLanes=Om(n,_,a),i.memoizedState=Dm,nu(null,l)):(zs(i),Mm(i,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(zs(i),i.flags&=-257,i=Pm(n,i,a)):i.memoizedState!==null?(Bs(),i.child=n.child,i.flags|=128,i=null):(Bs(),b=l.fallback,f=i.mode,l=xh({mode:"visible",children:l.children},f),b=Qr(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,ea(i,n.child,null,a),l=i.child,l.memoizedState=Vm(a),l.childLanes=Om(n,_,a),i.memoizedState=Dm,i=nu(null,l));else if(zs(i),gg(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var q=_.dgst;_=q,l=Error(s(419)),l.stack="",l.digest=_,Hl({value:l,source:null,stack:null}),i=Pm(n,i,a)}else if(Ot||so(n,i,a,!1),_=(a&n.childLanes)!==0,Ot||_){if(_=rt,_!==null&&(l=Al(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,Kr(n,l),_n(_,n,l),Cm;mg(b)||Lh(),i=Pm(n,i,a)}else mg(b)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,ot=Kn(b.nextSibling),$t=i,Ue=!0,Ms=null,Hn=!1,n!==null&&p_(i,n),i=Mm(i,l.children),i.flags|=4096);return i}return f?(Bs(),b=l.fallback,f=i.mode,N=n.child,q=N.sibling,l=Xi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?b=Xi(q,b):(b=Qr(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,nu(null,l),l=i.child,b=n.child.memoizedState,b===null?b=Vm(a):(f=b.cachePool,f!==null?(N=Dt._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=b_(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=Om(n,_,a),i.memoizedState=Dm,nu(n.child,l)):(zs(i),a=n.child,n=a.sibling,a=Xi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Mm(n,i){return i=xh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function xh(n,i){return n=wn(22,n,null,i),n.lanes=0,n}function Pm(n,i,a){return ea(i,n.child,null,a),n=Mm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Pv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),$d(n.return,i,a)}function km(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function kv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Tt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,ae(Tt,_),Zt(n,i,l,a),l=Ue?Fl:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Pv(n,a,i);else if(n.tag===19)Pv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&ph(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),km(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&ph(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}km(i,!0,a,null,d,l);break;case"together":km(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ts(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hs|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(so(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=Xi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Xi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Lm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&lh(n)))}function Kw(n,i,a){switch(i.tag){case 3:Ut(i,i.stateNode.containerInfo),ks(i,Dt,n.memoizedState.cache),Yr();break;case 27:case 5:xr(i);break;case 4:Ut(i,i.stateNode.containerInfo);break;case 10:ks(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lm(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(zs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Mv(n,i,a):(zs(i),n=ts(n,i,a),n!==null?n.sibling:null);zs(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(so(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return kv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Tt,Tt.current),l)break;return null;case 22:return i.lanes=0,xv(n,i,a,i.pendingProps);case 24:ks(i,Dt,n.memoizedState.cache)}return ts(n,i,a)}function Lv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ot=!0;else{if(!Lm(n,a)&&(i.flags&128)===0)return Ot=!1,Kw(n,i,a);Ot=(n.flags&131072)!==0}else Ot=!1,Ue&&(i.flags&1048576)!==0&&g_(i,Fl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=Zr(i.elementType),i.type=n,typeof n=="function")qd(n)?(l=na(n,l),i.tag=1,i=Vv(null,i,n,l,a)):(i.tag=0,i=Nm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===Se){i.tag=11,i=wv(null,i,n,l,a);break e}else if(f===S){i.tag=14,i=Iv(null,i,n,l,a);break e}}throw i=Qe(n)||n,Error(s(306,i,""))}}return i;case 0:return Nm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=na(l,i.pendingProps),Vv(n,i,l,f,a);case 3:e:{if(Ut(i,i.stateNode.containerInfo),n===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,im(n,i),Jl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,ks(i,Dt,l),l!==d.cache&&Jd(i,[Dt],a,!0),$l(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ov(n,i,l,a);break e}else if(l!==f){f=Bn(Error(s(424)),i),Hl(f),i=Ov(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ot=Kn(n.firstChild),$t=i,Ue=!0,Ms=null,Hn=!0,a=x_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Yr(),l===f){i=ts(n,i,a);break e}Zt(n,i,l,a)}i=i.child}return i;case 26:return Rh(n,i),n===null?(a=Y0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ue||(a=i.type,n=i.pendingProps,l=Hh(Ce.current).createElement(a),l[xt]=i,l[Ht]=n,Wt(l,a,n),Ct(l),i.stateNode=l):i.memoizedState=Y0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return xr(i),n===null&&Ue&&(l=i.stateNode=G0(i.type,i.pendingProps,Ce.current),$t=i,Hn=!0,f=ot,Xs(i.type)?(pg=f,ot=Kn(l.firstChild)):ot=f),Zt(n,i,i.pendingProps.children,a),Rh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ue&&((f=l=ot)&&(l=bI(l,i.type,i.pendingProps,Hn),l!==null?(i.stateNode=l,$t=i,ot=Kn(l.firstChild),Hn=!1,f=!0):f=!1),f||Ps(i)),xr(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,hg(f,d)?l=null:_!==null&&hg(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=cm(n,i,Lw,null,null,a),yu._currentValue=f),Rh(n,i),Zt(n,i,l,a),i.child;case 6:return n===null&&Ue&&((n=a=ot)&&(a=AI(a,i.pendingProps,Hn),a!==null?(i.stateNode=a,$t=i,ot=null,n=!0):n=!1),n||Ps(i)),null;case 13:return Mv(n,i,a);case 4:return Ut(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=ea(i,null,l,a):Zt(n,i,l,a),i.child;case 11:return wv(n,i,i.type,i.pendingProps,a);case 7:return Zt(n,i,i.pendingProps,a),i.child;case 8:return Zt(n,i,i.pendingProps.children,a),i.child;case 12:return Zt(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ks(i,i.type,l.value),Zt(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,$r(i),f=Jt(f),l=l(f),i.flags|=1,Zt(n,i,l,a),i.child;case 14:return Iv(n,i,i.type,i.pendingProps,a);case 15:return Rv(n,i,i.type,i.pendingProps,a);case 19:return kv(n,i,a);case 31:return Gw(n,i,a);case 22:return xv(n,i,a,i.pendingProps);case 24:return $r(i),l=Jt(Dt),n===null?(f=em(),f===null&&(f=rt,d=Zd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},nm(i),ks(i,Dt,f)):((n.lanes&a)!==0&&(im(n,i),Jl(i,null,null,a),$l()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ks(i,Dt,l)):(l=d.cache,ks(i,Dt,l),l!==f.cache&&Jd(i,[Dt],a,!0))),Zt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ns(n){n.flags|=4}function Um(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(c0())n.flags|=8192;else throw Wr=fh,tm}else n.flags&=-16777217}function Uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!W0(i))if(c0())n.flags|=8192;else throw Wr=fh,tm}function Ch(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Pc():536870912,n.lanes|=i,yo|=i)}function iu(n,i){if(!Ue)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function Qw(n,i,a){var l=i.pendingProps;switch(Kd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Zi(Dt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(io(i)?ns(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yd())),lt(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(ns(i),d!==null?(lt(i),Uv(i,d)):(lt(i),Um(i,f,null,l,a))):d?d!==n.memoizedState?(ns(i),lt(i),Uv(i,d)):(lt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&ns(i),lt(i),Um(i,f,n,l,a)),null;case 27:if(Pa(i),a=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ns(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return lt(i),null}n=oe.current,io(i)?y_(i):(n=G0(f,l,a),i.stateNode=n,ns(i))}return lt(i),null;case 5:if(Pa(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ns(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(d=oe.current,io(i))y_(i);else{var _=Hh(Ce.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[xt]=i,d[Ht]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Wt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ns(i)}}return lt(i),Um(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ns(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ce.current,io(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=$t,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[xt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||M0(n.nodeValue,a)),n||Ps(i,!0)}else n=Hh(n).createTextNode(l),n[xt]=i,i.stateNode=n}return lt(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=io(i),a!==null){if(n===null){if(!l)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[xt]=i}else Yr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),n=!1}else a=Yd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(Rn(i),i):(Rn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=io(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[xt]=i}else Yr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),f=!1}else f=Yd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Rn(i),i):(Rn(i),null)}return Rn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),Ch(i,i.updateQueue),lt(i),null);case 4:return ut(),n===null&&ag(i.stateNode.containerInfo),lt(i),null;case 10:return Zi(i.type),lt(i),null;case 19:if(W(Tt),l=i.memoizedState,l===null)return lt(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)iu(l,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=ph(n),d!==null){for(i.flags|=128,iu(l,!1),n=d.updateQueue,i.updateQueue=n,Ch(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)f_(a,n),a=a.sibling;return ae(Tt,Tt.current&1|2),Ue&&$i(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&ln()>Mh&&(i.flags|=128,f=!0,iu(l,!1),i.lanes=4194304)}else{if(!f)if(n=ph(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,Ch(i,n),iu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ue)return lt(i),null}else 2*ln()-l.renderingStartTime>Mh&&a!==536870912&&(i.flags|=128,f=!0,iu(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ln(),n.sibling=null,a=Tt.current,ae(Tt,f?a&1|2:a&1),Ue&&$i(i,l.treeForkCount),n):(lt(i),null);case 22:case 23:return Rn(i),om(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&Ch(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&W(Jr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zi(Dt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Yw(n,i){switch(Kd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Zi(Dt),ut(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Pa(i),null;case 31:if(i.memoizedState!==null){if(Rn(i),i.alternate===null)throw Error(s(340));Yr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Rn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Yr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Tt),null;case 4:return ut(),null;case 10:return Zi(i.type),null;case 22:case 23:return Rn(i),om(),n!==null&&W(Jr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Zi(Dt),null;case 25:return null;default:return null}}function jv(n,i){switch(Kd(i),i.tag){case 3:Zi(Dt),ut();break;case 26:case 27:case 5:Pa(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&Rn(i);break;case 13:Rn(i);break;case 19:W(Tt);break;case 10:Zi(i.type);break;case 22:case 23:Rn(i),om(),n!==null&&W(Jr);break;case 24:Zi(Dt)}}function su(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){Je(i,i.return,b)}}function qs(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,q=b;try{q()}catch(Y){Je(f,N,Y)}}}l=l.next}while(l!==d)}}catch(Y){Je(i,i.return,Y)}}function zv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{N_(i,a)}catch(l){Je(n,n.return,l)}}}function Bv(n,i,a){a.props=na(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Je(n,i,l)}}function ru(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Je(n,i,f)}}function Oi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Je(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Je(n,i,f)}else a.current=null}function qv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Je(n,n.return,f)}}function jm(n,i,a){try{var l=n.stateNode;pI(l,n.type,a,i),l[Ht]=i}catch(f){Je(n,n.return,f)}}function Fv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xs(n.type)||n.tag===4}function zm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Fv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ei));else if(l!==4&&(l===27&&Xs(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Bm(n,i,a),n=n.sibling;n!==null;)Bm(n,i,a),n=n.sibling}function Nh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Xs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Nh(n,i,a),n=n.sibling;n!==null;)Nh(n,i,a),n=n.sibling}function Hv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Wt(i,l,a),i[xt]=n,i[Ht]=a}catch(d){Je(n,n.return,d)}}var is=!1,Mt=!1,qm=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Xw(n,i){if(n=n.containerInfo,ug=Jh,n=i_(n),Pd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,q=0,Y=0,Z=n,F=null;t:for(;;){for(var K;Z!==a||f!==0&&Z.nodeType!==3||(b=_+f),Z!==d||l!==0&&Z.nodeType!==3||(N=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(K=Z.firstChild)!==null;)F=Z,Z=K;for(;;){if(Z===n)break t;if(F===a&&++q===f&&(b=_),F===d&&++Y===l&&(N=_),(K=Z.nextSibling)!==null)break;Z=F,F=Z.parentNode}Z=K}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(cg={focusedElem:n,selectionRange:a},Jh=!1,Kt=i;Kt!==null;)if(i=Kt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Kt=n;else for(;Kt!==null;){switch(i=Kt,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ue=na(a.type,f);n=l.getSnapshotBeforeUpdate(ue,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(ve){Je(a,a.return,ve)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)dg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Kt=n;break}Kt=i.return}}function Kv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rs(n,a),l&4&&su(5,a);break;case 1:if(rs(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Je(a,a.return,_)}else{var f=na(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Je(a,a.return,_)}}l&64&&zv(a),l&512&&ru(a,a.return);break;case 3:if(rs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{N_(n,i)}catch(_){Je(a,a.return,_)}}break;case 27:i===null&&l&4&&Hv(a);case 26:case 5:rs(n,a),i===null&&l&4&&qv(a),l&512&&ru(a,a.return);break;case 12:rs(n,a);break;case 31:rs(n,a),l&4&&Xv(n,a);break;case 13:rs(n,a),l&4&&$v(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=sI.bind(null,a),SI(n,a))));break;case 22:if(l=a.memoizedState!==null||is,!l){i=i!==null&&i.memoizedState!==null||Mt,f=is;var d=Mt;is=l,(Mt=i)&&!d?as(n,a,(a.subtreeFlags&8772)!==0):rs(n,a),is=f,Mt=d}break;case 30:break;default:rs(n,a)}}function Qv(n){var i=n.alternate;i!==null&&(n.alternate=null,Qv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&za(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,mn=!1;function ss(n,i,a){for(a=a.child;a!==null;)Yv(n,i,a),a=a.sibling}function Yv(n,i,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:Mt||Oi(a,i),ss(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Oi(a,i);var l=ht,f=mn;Xs(a.type)&&(ht=a.stateNode,mn=!1),ss(n,i,a),mu(a.stateNode),ht=l,mn=f;break;case 5:Mt||Oi(a,i);case 6:if(l=ht,f=mn,ht=null,ss(n,i,a),ht=l,mn=f,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{ht.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:ht!==null&&(mn?(n=ht,z0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),wo(n)):z0(ht,a.stateNode));break;case 4:l=ht,f=mn,ht=a.stateNode.containerInfo,mn=!0,ss(n,i,a),ht=l,mn=f;break;case 0:case 11:case 14:case 15:qs(2,a,i),Mt||qs(4,a,i),ss(n,i,a);break;case 1:Mt||(Oi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Bv(a,i,l)),ss(n,i,a);break;case 21:ss(n,i,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,ss(n,i,a),Mt=l;break;default:ss(n,i,a)}}function Xv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{wo(n)}catch(a){Je(i,i.return,a)}}}function $v(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{wo(n)}catch(a){Je(i,i.return,a)}}function $w(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Gv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Gv),i;default:throw Error(s(435,n.tag))}}function Dh(n,i){var a=$w(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=rI.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Xs(b.type)){ht=b.stateNode,mn=!1;break e}break;case 5:ht=b.stateNode,mn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,mn=!0;break e}b=b.return}if(ht===null)throw Error(s(160));Yv(d,_,f),ht=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Jv(i,n),i=i.sibling}var ai=null;function Jv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(qs(3,n,n.return),su(3,n),qs(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Mt||a===null||Oi(a,a.return)),l&64&&is&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ai;if(gn(i,n),pn(n),l&512&&(Mt||a===null||Oi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[vi]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Wt(d,l,a),d[xt]=n,Ct(d),l=d;break e;case"link":var _=J0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=f.createElement(l),Wt(d,l,a),f.head.appendChild(d);break;case"meta":if(_=J0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=f.createElement(l),Wt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[xt]=n,Ct(d),l=d}n.stateNode=l}else Z0(f,n.type,n.stateNode);else n.stateNode=$0(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Z0(f,n.type,n.stateNode):$0(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&jm(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Mt||a===null||Oi(a,a.return)),a!==null&&l&4&&jm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Mt||a===null||Oi(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(ue){Je(n,n.return,ue)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,jm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(qm=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ue){Je(n,n.return,ue)}}break;case 3:if(Qh=null,f=ai,ai=Gh(i.containerInfo),gn(i,n),ai=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{wo(i.containerInfo)}catch(ue){Je(n,n.return,ue)}qm&&(qm=!1,Zv(n));break;case 4:l=ai,ai=Gh(n.stateNode.containerInfo),gn(i,n),pn(n),ai=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Dh(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oh=ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Dh(n,l)));break;case 22:f=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=is,Y=Mt;if(is=q||f,Mt=Y||N,gn(i,n),Mt=Y,is=q,pn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||is||Mt||ia(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var Z=N.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ue){Je(N,N.return,ue)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(ue){Je(N,N.return,ue)}}}else if(i.tag===18){if(a===null){N=i;try{var K=N.stateNode;f?B0(K,!0):B0(N.stateNode,!1)}catch(ue){Je(N,N.return,ue)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Dh(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Dh(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(Fv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=zm(n);Nh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var b=zm(n);Nh(n,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,q=zm(n);Bm(n,q,N);break;default:throw Error(s(161))}}catch(Y){Je(n,n.return,Y)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Zv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Zv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function rs(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Kv(n,i.alternate,i),i=i.sibling}function ia(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:qs(4,i,i.return),ia(i);break;case 1:Oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Bv(i,i.return,a),ia(i);break;case 27:mu(i.stateNode);case 26:case 5:Oi(i,i.return),ia(i);break;case 22:i.memoizedState===null&&ia(i);break;case 30:ia(i);break;default:ia(i)}n=n.sibling}}function as(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:as(f,d,a),su(4,d);break;case 1:if(as(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Je(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)C_(N[f],b)}catch(q){Je(l,l.return,q)}}a&&_&64&&zv(d),ru(d,d.return);break;case 27:Hv(d);case 26:case 5:as(f,d,a),a&&l===null&&_&4&&qv(d),ru(d,d.return);break;case 12:as(f,d,a);break;case 31:as(f,d,a),a&&_&4&&Xv(f,d);break;case 13:as(f,d,a),a&&_&4&&$v(f,d);break;case 22:d.memoizedState===null&&as(f,d,a),ru(d,d.return);break;case 30:break;default:as(f,d,a)}i=i.sibling}}function Fm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Gl(a))}function Hm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n))}function oi(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wv(n,i,a,l),i=i.sibling}function Wv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:oi(n,i,a,l),f&2048&&su(9,i);break;case 1:oi(n,i,a,l);break;case 3:oi(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n)));break;case 12:if(f&2048){oi(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Je(i,i.return,N)}}else oi(n,i,a,l);break;case 31:oi(n,i,a,l);break;case 13:oi(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?oi(n,i,a,l):au(n,i):d._visibility&2?oi(n,i,a,l):(d._visibility|=2,mo(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(_,i);break;case 24:oi(n,i,a,l),f&2048&&Hm(i.alternate,i);break;default:oi(n,i,a,l)}}function mo(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,b=a,N=l,q=_.flags;switch(_.tag){case 0:case 11:case 15:mo(d,_,b,N,f),su(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?mo(d,_,b,N,f):au(d,_):(Y._visibility|=2,mo(d,_,b,N,f)),f&&q&2048&&Fm(_.alternate,_);break;case 24:mo(d,_,b,N,f),f&&q&2048&&Hm(_.alternate,_);break;default:mo(d,_,b,N,f)}i=i.sibling}}function au(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:au(a,l),f&2048&&Fm(l.alternate,l);break;case 24:au(a,l),f&2048&&Hm(l.alternate,l);break;default:au(a,l)}i=i.sibling}}var ou=8192;function go(n,i,a){if(n.subtreeFlags&ou)for(n=n.child;n!==null;)e0(n,i,a),n=n.sibling}function e0(n,i,a){switch(n.tag){case 26:go(n,i,a),n.flags&ou&&n.memoizedState!==null&&kI(a,ai,n.memoizedState,n.memoizedProps);break;case 5:go(n,i,a);break;case 3:case 4:var l=ai;ai=Gh(n.stateNode.containerInfo),go(n,i,a),ai=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=ou,ou=16777216,go(n,i,a),ou=l):go(n,i,a));break;default:go(n,i,a)}}function t0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function lu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,i0(l,n)}t0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)n0(n),n=n.sibling}function n0(n){switch(n.tag){case 0:case 11:case 15:lu(n),n.flags&2048&&qs(9,n,n.return);break;case 3:lu(n);break;case 12:lu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Vh(n)):lu(n);break;default:lu(n)}}function Vh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,i0(l,n)}t0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:qs(8,i,i.return),Vh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vh(i));break;default:Vh(i)}n=n.sibling}}function i0(n,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:qs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=n;Kt!==null;){l=Kt;var f=l.sibling,d=l.return;if(Qv(l),l===a){Kt=null;break e}if(f!==null){f.return=d,Kt=f;break e}Kt=d}}}var Jw={getCacheForType:function(n){var i=Jt(Dt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Jt(Dt).controller.signal}},Zw=typeof WeakMap=="function"?WeakMap:Map,Ge=0,rt=null,Ve=null,Me=0,$e=0,xn=null,Fs=!1,po=!1,Gm=!1,os=0,yt=0,Hs=0,sa=0,Km=0,Cn=0,yo=0,uu=null,yn=null,Qm=!1,Oh=0,s0=0,Mh=1/0,Ph=null,Gs=null,zt=0,Ks=null,_o=null,ls=0,Ym=0,Xm=null,r0=null,cu=0,$m=null;function Nn(){return(Ge&2)!==0&&Me!==0?Me&-Me:X.T!==null?ng():kc()}function a0(){if(Cn===0)if((Me&536870912)===0||Ue){var n=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),Cn=n}else Cn=536870912;return n=In.current,n!==null&&(n.flags|=32),Cn}function _n(n,i,a){(n===rt&&($e===2||$e===9)||n.cancelPendingCommit!==null)&&(vo(n,0),Qs(n,Me,Cn,!1)),Vr(n,a),((Ge&2)===0||n!==rt)&&(n===rt&&((Ge&2)===0&&(sa|=a),yt===4&&Qs(n,Me,Cn,!1)),Mi(n))}function o0(n,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Jn(n,i),f=l?tI(n,i):Zm(n,i,!0),d=l;do{if(f===0){po&&!l&&Qs(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!Ww(a)){f=Zm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=n;f=uu;var N=b.current.memoizedState.isDehydrated;if(N&&(vo(b,_).flags|=256),_=Zm(b,_,!1),_!==2){if(Gm&&!N){b.errorRecoveryDisabledLanes|=d,sa|=d,f=4;break e}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){vo(n,0),Qs(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Qs(l,i,Cn,!Fs);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Oh+300-ln(),10<f)){if(Qs(l,i,Cn,!Fs),pi(l,0,!0)!==0)break e;ls=i,l.timeoutHandle=U0(l0.bind(null,l,a,yn,Ph,Qm,i,Cn,sa,yo,Fs,d,"Throttled",-0,0),f);break e}l0(l,a,yn,Ph,Qm,i,Cn,sa,yo,Fs,d,null,-0,0)}}break}while(!0);Mi(n)}function l0(n,i,a,l,f,d,_,b,N,q,Y,Z,F,K){if(n.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},e0(i,d,Z);var ue=(d&62914560)===d?Oh-ln():(d&4194048)===d?s0-ln():0;if(ue=LI(Z,ue),ue!==null){ls=d,n.cancelPendingCommit=ue(p0.bind(null,n,i,d,a,l,f,_,b,N,Y,Z,null,F,K)),Qs(n,d,_,!q);return}}p0(n,i,d,a,l,f,_,b,N)}function Ww(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qs(n,i,a,l){i&=~Km,i&=~sa,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-vt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Or(n,a,i)}function kh(){return(Ge&6)===0?(hu(0),!1):!0}function Jm(){if(Ve!==null){if($e===0)var n=Ve.return;else n=Ve,Ji=Xr=null,dm(n),lo=null,Ql=0,n=Ve;for(;n!==null;)jv(n.alternate,n),n=n.return;Ve=null}}function vo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,vI(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ls=0,Jm(),rt=n,Ve=a=Xi(n.current,null),Me=i,$e=0,xn=null,Fs=!1,po=Jn(n,i),Gm=!1,yo=Cn=Km=sa=Hs=yt=0,yn=uu=null,Qm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-vt(l),d=1<<f;i|=n[f],l&=~d}return os=i,ih(),a}function u0(n,i){Re=null,X.H=tu,i===oo||i===hh?(i=w_(),$e=3):i===tm?(i=w_(),$e=4):$e=i===Cm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,xn=i,Ve===null&&(yt=1,wh(n,Bn(i,n.current)))}function c0(){var n=In.current;return n===null?!0:(Me&4194048)===Me?Gn===null:(Me&62914560)===Me||(Me&536870912)!==0?n===Gn:!1}function h0(){var n=X.H;return X.H=tu,n===null?tu:n}function f0(){var n=X.A;return X.A=Jw,n}function Lh(){yt=4,Fs||(Me&4194048)!==Me&&In.current!==null||(po=!0),(Hs&134217727)===0&&(sa&134217727)===0||rt===null||Qs(rt,Me,Cn,!1)}function Zm(n,i,a){var l=Ge;Ge|=2;var f=h0(),d=f0();(rt!==n||Me!==i)&&(Ph=null,vo(n,i)),i=!1;var _=yt;e:do try{if($e!==0&&Ve!==null){var b=Ve,N=xn;switch($e){case 8:Jm(),_=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var q=$e;if($e=0,xn=null,Eo(n,b,N,q),a&&po){_=0;break e}break;default:q=$e,$e=0,xn=null,Eo(n,b,N,q)}}eI(),_=yt;break}catch(Y){u0(n,Y)}while(!0);return i&&n.shellSuspendCounter++,Ji=Xr=null,Ge=l,X.H=f,X.A=d,Ve===null&&(rt=null,Me=0,ih()),_}function eI(){for(;Ve!==null;)d0(Ve)}function tI(n,i){var a=Ge;Ge|=2;var l=h0(),f=f0();rt!==n||Me!==i?(Ph=null,Mh=ln()+500,vo(n,i)):po=Jn(n,i);e:do try{if($e!==0&&Ve!==null){i=Ve;var d=xn;t:switch($e){case 1:$e=0,xn=null,Eo(n,i,d,1);break;case 2:case 9:if(A_(d)){$e=0,xn=null,m0(i);break}i=function(){$e!==2&&$e!==9||rt!==n||($e=7),Mi(n)},d.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:A_(d)?($e=0,xn=null,m0(i)):($e=0,xn=null,Eo(n,i,d,7));break;case 5:var _=null;switch(Ve.tag){case 26:_=Ve.memoizedState;case 5:case 27:var b=Ve;if(_?W0(_):b.stateNode.complete){$e=0,xn=null;var N=b.sibling;if(N!==null)Ve=N;else{var q=b.return;q!==null?(Ve=q,Uh(q)):Ve=null}break t}}$e=0,xn=null,Eo(n,i,d,5);break;case 6:$e=0,xn=null,Eo(n,i,d,6);break;case 8:Jm(),yt=6;break e;default:throw Error(s(462))}}nI();break}catch(Y){u0(n,Y)}while(!0);return Ji=Xr=null,X.H=l,X.A=f,Ge=a,Ve!==null?0:(rt=null,Me=0,ih(),yt)}function nI(){for(;Ve!==null&&!xd();)d0(Ve)}function d0(n){var i=Lv(n.alternate,n,os);n.memoizedProps=n.pendingProps,i===null?Uh(n):Ve=i}function m0(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Dv(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=Dv(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:dm(i);default:jv(a,i),i=Ve=f_(i,os),i=Lv(a,i,os)}n.memoizedProps=n.pendingProps,i===null?Uh(n):Ve=i}function Eo(n,i,a,l){Ji=Xr=null,dm(i),lo=null,Ql=0;var f=i.return;try{if(Hw(n,f,i,a,Me)){yt=1,wh(n,Bn(a,n.current)),Ve=null;return}}catch(d){if(f!==null)throw Ve=f,d;yt=1,wh(n,Bn(a,n.current)),Ve=null;return}i.flags&32768?(Ue||l===1?n=!0:po||(Me&536870912)!==0?n=!1:(Fs=n=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),g0(i,n)):Uh(i)}function Uh(n){var i=n;do{if((i.flags&32768)!==0){g0(i,Fs);return}n=i.return;var a=Qw(i.alternate,i,os);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=n}while(i!==null);yt===0&&(yt=5)}function g0(n,i){do{var a=Yw(n.alternate,n);if(a!==null){a.flags&=32767,Ve=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=a}while(n!==null);yt=6,Ve=null}function p0(n,i,a,l,f,d,_,b,N){n.cancelPendingCommit=null;do jh();while(zt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=zd,Dd(n,a,d,_,b,N),n===rt&&(Ve=rt=null,Me=0),_o=i,Ks=n,ls=a,Ym=d,Xm=f,r0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,aI(As,function(){return T0(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=re.p,re.p=2,_=Ge,Ge|=4;try{Xw(n,i,a)}finally{Ge=_,re.p=f,X.T=l}}zt=1,y0(),_0(),v0()}}function y0(){if(zt===1){zt=0;var n=Ks,i=_o,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=re.p;re.p=2;var f=Ge;Ge|=4;try{Jv(i,n);var d=cg,_=i_(n.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&n_(b.ownerDocument.documentElement,b)){if(N!==null&&Pd(b)){var q=N.start,Y=N.end;if(Y===void 0&&(Y=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(Y,b.value.length);else{var Z=b.ownerDocument||document,F=Z&&Z.defaultView||window;if(F.getSelection){var K=F.getSelection(),ue=b.textContent.length,ve=Math.min(N.start,ue),st=N.end===void 0?ve:Math.min(N.end,ue);!K.extend&&ve>st&&(_=st,st=ve,ve=_);var L=t_(b,ve),V=t_(b,st);if(L&&V&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var B=Z.createRange();B.setStart(L.node,L.offset),K.removeAllRanges(),ve>st?(K.addRange(B),K.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),K.addRange(B))}}}}for(Z=[],K=b;K=K.parentNode;)K.nodeType===1&&Z.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var J=Z[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Jh=!!ug,cg=ug=null}finally{Ge=f,re.p=l,X.T=a}}n.current=i,zt=2}}function _0(){if(zt===2){zt=0;var n=Ks,i=_o,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=re.p;re.p=2;var f=Ge;Ge|=4;try{Kv(n,i.alternate,i)}finally{Ge=f,re.p=l,X.T=a}}zt=3}}function v0(){if(zt===4||zt===3){zt=0,Cc();var n=Ks,i=_o,a=ls,l=r0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?zt=5:(zt=0,_o=Ks=null,E0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Gs=null),Gi(a),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot($n,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=re.p,re.p=2,X.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{X.T=i,re.p=f}}(ls&3)!==0&&jh(),Mi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===$m?cu++:(cu=0,$m=n):cu=0,hu(0)}}function E0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Gl(i)))}function jh(){return y0(),_0(),v0(),T0()}function T0(){if(zt!==5)return!1;var n=Ks,i=Ym;Ym=0;var a=Gi(ls),l=X.T,f=re.p;try{re.p=32>a?32:a,X.T=null,a=Xm,Xm=null;var d=Ks,_=ls;if(zt=0,_o=Ks=null,ls=0,(Ge&6)!==0)throw Error(s(331));var b=Ge;if(Ge|=4,n0(d.current),Wv(d,d.current,_,a),Ge=b,hu(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot($n,d)}catch{}return!0}finally{re.p=f,X.T=l,E0(n,i)}}function b0(n,i,a){i=Bn(a,i),i=xm(n.stateNode,i,2),n=js(n,i,2),n!==null&&(Vr(n,2),Mi(n))}function Je(n,i,a){if(n.tag===3)b0(n,n,a);else for(;i!==null;){if(i.tag===3){b0(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gs===null||!Gs.has(l))){n=Bn(a,n),a=Av(2),l=js(i,a,2),l!==null&&(Sv(a,l,i,n),Vr(l,2),Mi(l));break}}i=i.return}}function Wm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Zw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Gm=!0,f.add(a),n=iI.bind(null,n,i,a),i.then(n,n))}function iI(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,rt===n&&(Me&a)===a&&(yt===4||yt===3&&(Me&62914560)===Me&&300>ln()-Oh?(Ge&2)===0&&vo(n,0):Km|=a,yo===Me&&(yo=0)),Mi(n)}function A0(n,i){i===0&&(i=Pc()),n=Kr(n,i),n!==null&&(Vr(n,i),Mi(n))}function sI(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),A0(n,a)}function rI(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),A0(n,a)}function aI(n,i){return jt(n,i)}var zh=null,To=null,eg=!1,Bh=!1,tg=!1,Ys=0;function Mi(n){n!==To&&n.next===null&&(To===null?zh=To=n:To=To.next=n),Bh=!0,eg||(eg=!0,lI())}function hu(n,i){if(!tg&&Bh){tg=!0;do for(var a=!1,l=zh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-vt(42|n)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,R0(l,d))}else d=Me,d=pi(l,l===rt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Jn(l,d)||(a=!0,R0(l,d));l=l.next}while(a);tg=!1}}function oI(){S0()}function S0(){Bh=eg=!1;var n=0;Ys!==0&&_I()&&(n=Ys);for(var i=ln(),a=null,l=zh;l!==null;){var f=l.next,d=w0(l,i);d===0?(l.next=null,a===null?zh=f:a.next=f,f===null&&(To=a)):(a=l,(n!==0||(d&3)!==0)&&(Bh=!0)),l=f}zt!==0&&zt!==5||hu(n),Ys!==0&&(Ys=0)}function w0(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-vt(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=Nd(b,i)):N<=i&&(n.expiredLanes|=b),d&=~b}if(i=rt,a=Me,a=pi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&($e===2||$e===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&bs(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Jn(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&bs(l),Gi(a)){case 2:case 8:a=Tl;break;case 32:a=As;break;case 268435456:a=Nc;break;default:a=As}return l=I0.bind(null,n),a=jt(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&bs(l),n.callbackPriority=2,n.callbackNode=null,2}function I0(n,i){if(zt!==0&&zt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(jh()&&n.callbackNode!==a)return null;var l=Me;return l=pi(n,n===rt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(o0(n,l,i),w0(n,ln()),n.callbackNode!=null&&n.callbackNode===a?I0.bind(null,n):null)}function R0(n,i){if(jh())return null;o0(n,i,!0)}function lI(){EI(function(){(Ge&6)!==0?jt(El,oI):S0()})}function ng(){if(Ys===0){var n=ro;n===0&&(n=mi,mi<<=1,(mi&261888)===0&&(mi=256)),Ys=n}return Ys}function x0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ha(""+n)}function C0(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function uI(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=x0((f[Ht]||null).action),_=l.submitter;_&&(i=(i=_[Ht]||null)?x0(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Ri("action","action",null,l,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ys!==0){var N=_?C0(f,_):new FormData(f);bm(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?C0(f,_):new FormData(f),bm(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var ig=0;ig<jd.length;ig++){var sg=jd[ig],cI=sg.toLowerCase(),hI=sg[0].toUpperCase()+sg.slice(1);ri(cI,"on"+hI)}ri(a_,"onAnimationEnd"),ri(o_,"onAnimationIteration"),ri(l_,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(Rw,"onTransitionRun"),ri(xw,"onTransitionStart"),ri(Cw,"onTransitionCancel"),ri(u_,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function N0(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,q=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=q;try{d(f)}catch(Y){nh(Y)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,q=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=q;try{d(f)}catch(Y){nh(Y)}f.currentTarget=null,d=N}}}}function Oe(n,i){var a=i[ja];a===void 0&&(a=i[ja]=new Set);var l=n+"__bubble";a.has(l)||(D0(i,n,2,!1),a.add(l))}function rg(n,i,a){var l=0;i&&(l|=4),D0(a,n,l,i)}var qh="_reactListening"+Math.random().toString(36).slice(2);function ag(n){if(!n[qh]){n[qh]=!0,Sl.forEach(function(a){a!=="selectionchange"&&(fI.has(a)||rg(a,!1,n),rg(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[qh]||(i[qh]=!0,rg("selectionchange",!1,i))}}function D0(n,i,a,l){switch(aE(i)){case 2:var f=zI;break;case 8:f=BI;break;default:f=Tg}a=f.bind(null,i,a,n),f=void 0,!Ur||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function og(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Ei(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}Cs(function(){var q=d,Y=Ln(a),Z=[];e:{var F=c_.get(n);if(F!==void 0){var K=Ri,ue=n;switch(n){case"keypress":if(zr(a)===0)break e;case"keydown":case"keyup":K=Wc;break;case"focusin":ue="focus",K=qr;break;case"focusout":ue="blur",K=qr;break;case"beforeblur":case"afterblur":K=qr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=y;break;case a_:case o_:case l_:K=Kc;break;case u_:K=A;break;case"scroll":case"scrollend":K=kl;break;case"wheel":K=G;break;case"copy":case"cut":case"paste":K=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Yi;break;case"toggle":case"beforetoggle":K=Ie}var ve=(i&4)!==0,st=!ve&&(n==="scroll"||n==="scrollend"),L=ve?F!==null?F+"Capture":null:F;ve=[];for(var V=q,B;V!==null;){var J=V;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||L===null||(J=ti(V,L),J!=null&&ve.push(du(V,J,B))),st)break;V=V.return}0<ve.length&&(F=new K(F,ue,null,a,Y),Z.push({event:F,listeners:ve}))}}if((i&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",F&&a!==Ol&&(ue=a.relatedTarget||a.fromElement)&&(Ei(ue)||ue[_i]))break e;if((K||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,K?(ue=a.relatedTarget||a.toElement,K=q,ue=ue?Ei(ue):null,ue!==null&&(st=u(ue),ve=ue.tag,ue!==st||ve!==5&&ve!==27&&ve!==6)&&(ue=null)):(K=null,ue=q),K!==ue)){if(ve=Ll,J="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=Yi,J="onPointerLeave",L="onPointerEnter",V="pointer"),st=K==null?F:bn(K),B=ue==null?F:bn(ue),F=new ve(J,V+"leave",K,a,Y),F.target=st,F.relatedTarget=B,J=null,Ei(Y)===q&&(ve=new ve(L,V+"enter",ue,a,Y),ve.target=B,ve.relatedTarget=st,J=ve),st=J,K&&ue)t:{for(ve=dI,L=K,V=ue,B=0,J=L;J;J=ve(J))B++;J=0;for(var pe=V;pe;pe=ve(pe))J++;for(;0<B-J;)L=ve(L),B--;for(;0<J-B;)V=ve(V),J--;for(;B--;){if(L===V||V!==null&&L===V.alternate){ve=L;break t}L=ve(L),V=ve(V)}ve=null}else ve=null;K!==null&&V0(Z,F,K,ve,!1),ue!==null&&st!==null&&V0(Z,st,ue,ve,!0)}}e:{if(F=q?bn(q):window,K=F.nodeName&&F.nodeName.toLowerCase(),K==="select"||K==="input"&&F.type==="file")var qe=Xy;else if(Qy(F))if($y)qe=Sw;else{qe=bw;var de=Tw}else K=F.nodeName,!K||K.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&Fa(q.elementType)&&(qe=Xy):qe=Aw;if(qe&&(qe=qe(n,q))){Yy(Z,qe,a,Y);break e}de&&de(n,F,q),n==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&Nl(F,"number",F.value)}switch(de=q?bn(q):window,n){case"focusin":(Qy(de)||de.contentEditable==="true")&&(Ja=de,kd=q,ql=null);break;case"focusout":ql=kd=Ja=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,s_(Z,a,Y);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":s_(Z,a,Y)}var Ne;if(He)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else $a?Fr(n,a)&&(Pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ni&&a.locale!=="ko"&&($a||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&$a&&(Ne=Pl()):(Ii=Y,Ml="value"in Ii?Ii.value:Ii.textContent,$a=!0)),de=Fh(q,Pe),0<de.length&&(Pe=new Ci(Pe,n,null,a,Y),Z.push({event:Pe,listeners:de}),Ne?Pe.data=Ne:(Ne=Xa(a),Ne!==null&&(Pe.data=Ne)))),(Ne=jn?yw(n,a):_w(n,a))&&(Pe=Fh(q,"onBeforeInput"),0<Pe.length&&(de=new Ci("onBeforeInput","beforeinput",null,a,Y),Z.push({event:de,listeners:Pe}),de.data=Ne)),uI(Z,n,q,a,Y)}N0(Z,i)})}function du(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Fh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ti(n,a),f!=null&&l.unshift(du(n,f,d)),f=ti(n,i),f!=null&&l.push(du(n,f,d))),n.tag===3)return l;n=n.return}return[]}function dI(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function V0(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,q=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||q===null||(N=q,f?(q=ti(a,d),q!=null&&_.unshift(du(a,q,N))):f||(q=ti(a,d),q!=null&&_.push(du(a,q,N)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var mI=/\r\n?/g,gI=/\u0000|\uFFFD/g;function O0(n){return(typeof n=="string"?n:""+n).replace(mI,`
`).replace(gI,"")}function M0(n,i){return i=O0(i),O0(n)===i}function it(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":An(n,"class",l);break;case"tabIndex":An(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":An(n,a,l);break;case"style":Vl(n,l,d);break;case"data":if(i!=="object"){An(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ha(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&it(n,i,"name",f.name,f,null),it(n,i,"formEncType",f.formEncType,f,null),it(n,i,"formMethod",f.formMethod,f,null),it(n,i,"formTarget",f.formTarget,f,null)):(it(n,i,"encType",f.encType,f,null),it(n,i,"method",f.method,f,null),it(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ha(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=ei);break;case"onScroll":l!=null&&Oe("scroll",n);break;case"onScrollEnd":l!=null&&Oe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ha(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Oe("beforetoggle",n),Oe("toggle",n),Ba(n,"popover",l);break;case"xlinkActuate":Nt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Nt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Nt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Nt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Nt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Nt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ba(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fc.get(a)||a,Ba(n,a,l))}}function lg(n,i,a,l,f,d){switch(a){case"style":Vl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Oe("scroll",n);break;case"onScrollEnd":l!=null&&Oe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Ht]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ba(n,a,l)}}}function Wt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",n),Oe("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(n,i,d,_,a,null)}}f&&it(n,i,"srcSet",a.srcSet,a,null),l&&it(n,i,"src",a.src,a,null);return;case"input":Oe("invalid",n);var b=d=_=f=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":f=Y;break;case"type":_=Y;break;case"checked":N=Y;break;case"defaultChecked":q=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:it(n,i,l,Y,a,null)}}zc(n,d,b,N,q,_,f,!1);return;case"select":Oe("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:it(n,i,f,b,a,null)}i=d,a=_,n.multiple=!!l,i!=null?ws(n,!!l,i,!1):a!=null&&ws(n,!!l,a,!0);return;case"textarea":Oe("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:it(n,i,_,b,a,null)}Is(n,l,f,d);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":it(n,i,N,l,a,null));return;case"dialog":Oe("beforetoggle",n),Oe("toggle",n),Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":Oe("load",n);break;case"video":case"audio":for(l=0;l<fu.length;l++)Oe(fu[l],n);break;case"image":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"embed":case"source":case"link":Oe("error",n),Oe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(n,i,q,l,a,null)}return;default:if(Fa(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&lg(n,i,Y,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&it(n,i,b,l,a,null))}function pI(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,q=null,Y=null;for(K in a){var Z=a[K];if(a.hasOwnProperty(K)&&Z!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=Z;default:l.hasOwnProperty(K)||it(n,i,K,null,l,Z)}}for(var F in l){var K=l[F];if(Z=a[F],l.hasOwnProperty(F)&&(K!=null||Z!=null))switch(F){case"type":d=K;break;case"name":f=K;break;case"checked":q=K;break;case"defaultChecked":Y=K;break;case"value":_=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==Z&&it(n,i,F,K,l,Z)}}qa(n,_,b,N,q,Y,d,f);return;case"select":K=_=b=F=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":K=N;default:l.hasOwnProperty(d)||it(n,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":F=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&it(n,i,f,d,l,N)}i=b,a=_,l=K,F!=null?ws(n,!!a,F,!1):!!l!=!!a&&(i!=null?ws(n,!!a,i,!0):ws(n,!!a,a?[]:"",!1));return;case"textarea":K=F=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(n,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":F=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&it(n,i,_,f,l,d)}Bc(n,F,K);return;case"option":for(var ue in a)F=a[ue],a.hasOwnProperty(ue)&&F!=null&&!l.hasOwnProperty(ue)&&(ue==="selected"?n.selected=!1:it(n,i,ue,null,l,F));for(N in l)F=l[N],K=a[N],l.hasOwnProperty(N)&&F!==K&&(F!=null||K!=null)&&(N==="selected"?n.selected=F&&typeof F!="function"&&typeof F!="symbol":it(n,i,N,F,l,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)F=a[ve],a.hasOwnProperty(ve)&&F!=null&&!l.hasOwnProperty(ve)&&it(n,i,ve,null,l,F);for(q in l)if(F=l[q],K=a[q],l.hasOwnProperty(q)&&F!==K&&(F!=null||K!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:it(n,i,q,F,l,K)}return;default:if(Fa(i)){for(var st in a)F=a[st],a.hasOwnProperty(st)&&F!==void 0&&!l.hasOwnProperty(st)&&lg(n,i,st,void 0,l,F);for(Y in l)F=l[Y],K=a[Y],!l.hasOwnProperty(Y)||F===K||F===void 0&&K===void 0||lg(n,i,Y,F,l,K);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!l.hasOwnProperty(L)&&it(n,i,L,null,l,F);for(Z in l)F=l[Z],K=a[Z],!l.hasOwnProperty(Z)||F===K||F==null&&K==null||it(n,i,Z,F,l,K)}function P0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&P0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],q=N.startTime;if(q>b)break;var Y=N.transferSize,Z=N.initiatorType;Y&&P0(Z)&&(N=N.responseEnd,_+=Y*(N<b?1:(b-q)/(N-q)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ug=null,cg=null;function Hh(n){return n.nodeType===9?n:n.ownerDocument}function k0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function hg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fg=null;function _I(){var n=window.event;return n&&n.type==="popstate"?n===fg?!1:(fg=n,!0):(fg=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,EI=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(n){return j0.resolve(null).then(n).catch(TI)}:U0;function TI(n){setTimeout(function(){throw n})}function Xs(n){return n==="head"}function z0(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),wo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")mu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,mu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[vi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&mu(n.ownerDocument.body);a=f}while(a);wo(i)}function B0(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function dg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dg(a),za(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function bI(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[vi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function AI(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Kn(n.nextSibling),n===null))return null;return n}function q0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Kn(n.nextSibling),n===null))return null;return n}function mg(n){return n.data==="$?"||n.data==="$~"}function gg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function SI(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Kn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var pg=null;function F0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function H0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function G0(n,i,a){switch(i=Hh(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function mu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);za(n)}var Qn=new Map,K0=new Set;function Gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var us=re.d;re.d={f:wI,r:II,D:RI,C:xI,L:CI,m:NI,X:VI,S:DI,M:OI};function wI(){var n=us.f(),i=kh();return n||i}function II(n){var i=kn(n);i!==null&&i.tag===5&&i.type==="form"?uv(i):us.r(n)}var bo=typeof document>"u"?null:document;function Q0(n,i,a){var l=bo;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),K0.has(f)||(K0.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Wt(i,"link",n),Ct(i),l.head.appendChild(i)))}}function RI(n){us.D(n),Q0("dns-prefetch",n,null)}function xI(n,i){us.C(n,i),Q0("preconnect",n,i)}function CI(n,i,a){us.L(n,i,a);var l=bo;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=Ao(n);break;case"script":d=So(n)}Qn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Qn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(gu(d))||i==="script"&&l.querySelector(pu(d))||(i=l.createElement("link"),Wt(i,"link",n),Ct(i),l.head.appendChild(i)))}}function NI(n,i){us.m(n,i);var a=bo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=So(n)}if(!Qn.has(d)&&(n=T({rel:"modulepreload",href:n},i),Qn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pu(d)))return}l=a.createElement("link"),Wt(l,"link",n),Ct(l),a.head.appendChild(l)}}}function DI(n,i,a){us.S(n,i,a);var l=bo;if(l&&n){var f=Ti(l).hoistableStyles,d=Ao(n);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(gu(d)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Qn.get(d))&&yg(n,a);var N=_=l.createElement("link");Ct(N),Wt(N,"link",n),N._p=new Promise(function(q,Y){N.onload=q,N.onerror=Y}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Kh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function VI(n,i){us.X(n,i);var a=bo;if(a&&n){var l=Ti(a).hoistableScripts,f=So(n),d=l.get(f);d||(d=a.querySelector(pu(f)),d||(n=T({src:n,async:!0},i),(i=Qn.get(f))&&_g(n,i),d=a.createElement("script"),Ct(d),Wt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function OI(n,i){us.M(n,i);var a=bo;if(a&&n){var l=Ti(a).hoistableScripts,f=So(n),d=l.get(f);d||(d=a.querySelector(pu(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=Qn.get(f))&&_g(n,i),d=a.createElement("script"),Ct(d),Wt(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Y0(n,i,a,l){var f=(f=Ce.current)?Gh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ao(a.href),a=Ti(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ao(a.href);var d=Ti(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(gu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(n,a),d||MI(f,n,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=So(a),a=Ti(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Ao(n){return'href="'+fn(n)+'"'}function gu(n){return'link[rel="stylesheet"]['+n+"]"}function X0(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function MI(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Wt(i,"link",a),Ct(i),n.head.appendChild(i))}function So(n){return'[src="'+fn(n)+'"]'}function pu(n){return"script[async]"+n}function $0(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,Ct(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ct(l),Wt(l,"style",f),Kh(l,a.precedence,n),i.instance=l;case"stylesheet":f=Ao(a.href);var d=n.querySelector(gu(f));if(d)return i.state.loading|=4,i.instance=d,Ct(d),d;l=X0(a),(f=Qn.get(f))&&yg(l,f),d=(n.ownerDocument||n).createElement("link"),Ct(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Wt(d,"link",l),i.state.loading|=4,Kh(d,a.precedence,n),i.instance=d;case"script":return d=So(a.src),(f=n.querySelector(pu(d)))?(i.instance=f,Ct(f),f):(l=a,(f=Qn.get(d))&&(l=T({},a),_g(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ct(f),Wt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Kh(l,a.precedence,n));return i.instance}function Kh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function yg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function _g(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Qh=null;function J0(n,i,a){if(Qh===null){var l=new Map,f=Qh=new Map;f.set(a,l)}else f=Qh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[vi]||d[xt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function Z0(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function PI(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function W0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function kI(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ao(l.href),d=i.querySelector(gu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Yh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Ct(d);return}d=i.ownerDocument||i,l=X0(l),(f=Qn.get(f))&&yg(l,f),d=d.createElement("link"),Ct(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Wt(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Yh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var vg=0;function LI(n,i){return n.stylesheets&&n.count===0&&$h(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&$h(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&vg===0&&(vg=62500*yI());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&$h(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>vg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Yh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$h(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xh=null;function $h(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xh=new Map,i.forEach(UI,n),Xh=null,Yh.call(n))}function UI(n,i){if(!(i.state.loading&4)){var a=Xh.get(n);if(a)var l=a.get(null);else{a=new Map,Xh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Yh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var yu={$$typeof:se,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function jI(n,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function eE(n,i,a,l,f,d,_,b,N,q,Y,Z){return n=new jI(n,i,a,_,N,q,Y,Z,b),i=1,d===!0&&(i|=24),d=wn(3,null,null,i),n.current=d,d.stateNode=n,i=Zd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},nm(d),n}function tE(n){return n?(n=eo,n):eo}function nE(n,i,a,l,f,d){f=tE(f),l.context===null?l.context=f:l.pendingContext=f,l=Us(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=js(n,l,i),a!==null&&(_n(a,n,i),Xl(a,n,i))}function iE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Eg(n,i){iE(n,i),(n=n.alternate)&&iE(n,i)}function sE(n){if(n.tag===13||n.tag===31){var i=Kr(n,67108864);i!==null&&_n(i,n,67108864),Eg(n,67108864)}}function rE(n){if(n.tag===13||n.tag===31){var i=Nn();i=Mr(i);var a=Kr(n,i);a!==null&&_n(a,n,i),Eg(n,i)}}var Jh=!0;function zI(n,i,a,l){var f=X.T;X.T=null;var d=re.p;try{re.p=2,Tg(n,i,a,l)}finally{re.p=d,X.T=f}}function BI(n,i,a,l){var f=X.T;X.T=null;var d=re.p;try{re.p=8,Tg(n,i,a,l)}finally{re.p=d,X.T=f}}function Tg(n,i,a,l){if(Jh){var f=bg(l);if(f===null)og(n,i,l,Zh,a),oE(n,l);else if(FI(f,n,i,a,l))l.stopPropagation();else if(oE(n,l),i&4&&-1<qI.indexOf(n)){for(;f!==null;){var d=kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=gi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-vt(_);b.entanglements[1]|=N,_&=~N}Mi(d),(Ge&6)===0&&(Mh=ln()+500,hu(0))}}break;case 31:case 13:b=Kr(d,2),b!==null&&_n(b,d,2),kh(),Eg(d,2)}if(d=bg(l),d===null&&og(n,i,l,Zh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else og(n,i,l,null,a)}}function bg(n){return n=Ln(n),Ag(n)}var Zh=null;function Ag(n){if(Zh=null,n=Ei(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Zh=n,null}function aE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nr()){case El:return 2;case Tl:return 8;case As:case Cd:return 32;case Nc:return 268435456;default:return 32}default:return 32}}var Sg=!1,$s=null,Js=null,Zs=null,_u=new Map,vu=new Map,Ws=[],qI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oE(n,i){switch(n){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":_u.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(i.pointerId)}}function Eu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=kn(i),i!==null&&sE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function FI(n,i,a,l,f){switch(i){case"focusin":return $s=Eu($s,n,i,a,l,f),!0;case"dragenter":return Js=Eu(Js,n,i,a,l,f),!0;case"mouseover":return Zs=Eu(Zs,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return _u.set(d,Eu(_u.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,vu.set(d,Eu(vu.get(d)||null,n,i,a,l,f)),!0}return!1}function lE(n){var i=Ei(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Zn(n.priority,function(){rE(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Zn(n.priority,function(){rE(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=bg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Ol=l,a.target.dispatchEvent(l),Ol=null}else return i=kn(a),i!==null&&sE(i),n.blockedOn=a,!1;i.shift()}return!0}function uE(n,i,a){Wh(n)&&a.delete(i)}function HI(){Sg=!1,$s!==null&&Wh($s)&&($s=null),Js!==null&&Wh(Js)&&(Js=null),Zs!==null&&Wh(Zs)&&(Zs=null),_u.forEach(uE),vu.forEach(uE)}function ef(n,i){n.blockedOn===i&&(n.blockedOn=null,Sg||(Sg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,HI)))}var tf=null;function cE(n){tf!==n&&(tf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){tf===n&&(tf=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Ag(l||a)===null)continue;break}var d=kn(a);d!==null&&(n.splice(i,3),i-=3,bm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function wo(n){function i(N){return ef(N,n)}$s!==null&&ef($s,n),Js!==null&&ef(Js,n),Zs!==null&&ef(Zs,n),_u.forEach(i),vu.forEach(i);for(var a=0;a<Ws.length;a++){var l=Ws[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ws.length&&(a=Ws[0],a.blockedOn===null);)lE(a),a.blockedOn===null&&Ws.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Ht]||null;if(typeof d=="function")_||cE(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Ht]||null)b=_.formAction;else if(Ag(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),cE(a)}}}function hE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function wg(n){this._internalRoot=n}nf.prototype.render=wg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Nn();nE(a,l,n,i,null,null)},nf.prototype.unmount=wg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;nE(n.current,2,null,n,null,null),kh(),i[_i]=null}};function nf(n){this._internalRoot=n}nf.prototype.unstable_scheduleHydration=function(n){if(n){var i=kc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Ws.length&&i!==0&&i<Ws[a].priority;a++);Ws.splice(a,0,n),a===0&&lE(n)}};var fE=e.version;if(fE!=="19.2.3")throw Error(s(527,fE,"19.2.3"));re.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var GI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{$n=sf.inject(GI),Yt=sf}catch{}}return bu.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,l="",f=vv,d=Ev,_=Tv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=eE(n,1,!1,null,null,a,l,null,f,d,_,hE),n[_i]=i.current,ag(n),new wg(i)},bu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=vv,_=Ev,b=Tv,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=eE(n,1,!0,i,a??null,l,f,N,d,_,b,hE),i.context=tE(null),a=i.current,l=Nn(),l=Mr(l),f=Us(l),f.callback=null,js(a,f,l),a=l,i.current.lanes=a,Vr(i,a),Mi(i),n[_i]=i.current,ag(n),new nf(i)},bu.version="19.2.3",bu}var bE;function tR(){if(bE)return xg.exports;bE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xg.exports=eR(),xg.exports}var nR=tR();const iR=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sR=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),AE=r=>{const e=sR(r);return e.charAt(0).toUpperCase()+e.slice(1)},Rb=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),rR=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var aR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oR=xe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:c,...m},g)=>xe.createElement("svg",{ref:g,...aR,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Rb("lucide",o),...!u&&!rR(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>xe.createElement(p,E)),...Array.isArray(u)?u:[u]]));const dt=(r,e)=>{const t=xe.forwardRef(({className:s,...o},u)=>xe.createElement(oR,{ref:u,iconNode:e,className:Rb(`lucide-${iR(AE(r))}`,`lucide-${r}`,s),...o}));return t.displayName=AE(r),t};const lR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uR=dt("arrow-right",lR);const cR=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Au=dt("arrow-up-down",cR);const hR=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],fR=dt("award",hR);const dR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xb=dt("calendar",dR);const mR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gR=dt("chevron-left",mR);const pR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yR=dt("circle-check",pR);const _R=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],SE=dt("clock",_R);const vR=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Cb=dt("coffee",vR);const ER=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],TR=dt("funnel",ER);const bR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],AR=dt("history",bR);const SR=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wR=dt("layout-dashboard",SR);const IR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],RR=dt("lock",IR);const xR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],CR=dt("log-out",xR);const NR=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],DR=dt("mail",NR);const VR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nb=dt("package",VR);const OR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],MR=dt("pencil",OR);const PR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Db=dt("plus",PR);const kR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],LR=dt("search",kR);const UR=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],wE=dt("settings-2",UR);const jR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Vb=dt("smile",jR);const zR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ob=dt("sparkles",zR);const BR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mb=dt("trash-2",BR);const qR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],FR=dt("user",qR);const HR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mp=dt("x",HR),GR=()=>{};var IE={};const Pb=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},KR=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],c=r[t++],m=r[t++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],c=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],c=o+1<r.length,m=c?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let I=(m&15)<<2|p>>6,P=p&63;g||(P=64,c||(I=64)),s.push(t[E],t[T],t[I],t[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Pb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):KR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const p=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new QR;const I=u<<2|m>>4;if(s.push(I),p!==64){const P=m<<4&240|p>>2;if(s.push(P),T!==64){const H=p<<6&192|T;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(r){const e=Pb(r);return kb.encodeByteArray(e,!0)},Lb=function(r){return YR(r).replace(/\./g,"")},Ub=function(r){try{return kb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const XR=()=>jb().__FIREBASE_DEFAULTS__,$R=()=>{if(typeof process>"u"||typeof IE>"u")return;const r=IE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ub(r[1]);return e&&JSON.parse(e)},nd=()=>{try{return GR()||XR()||$R()||JR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ZR=r=>nd()?.emulatorHosts?.[r],zb=()=>nd()?.config,Bb=r=>nd()?.[`_${r}`];class WR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function ll(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qb(r){return(await fetch(r,{credentials:"include"})).ok}const ku={};function e2(){const r={prod:[],emulator:[]};for(const e of Object.keys(ku))ku[e]?r.emulator.push(e):r.prod.push(e);return r}function t2(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let RE=!1;function n2(r,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||ku[r]===e||ku[r]||RE)return;ku[r]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=e2().prod.length>0;function c(){const I=document.getElementById(s);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,P){I.setAttribute("width","24"),I.setAttribute("id",P),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{RE=!0,c()},I}function E(I,P){I.setAttribute("id",P),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=t2(s),P=t("text"),H=document.getElementById(P)||document.createElement("span"),U=t("learnmore"),$=document.getElementById(U)||document.createElement("a"),he=t("preprendIcon"),ce=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const se=I.element;m(se),E($,U);const Se=p();g(ce,he),se.append(ce,H,$,Se),document.body.appendChild(se)}u?(H.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function Fb(){const r=nd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function r2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function a2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o2(){const r=qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Hb(){return!Fb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gb(){return!Fb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Kb(){try{return typeof indexedDB=="object"}catch{return!1}}function l2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const u2="FirebaseError";class vs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=u2,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?c2(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new vs(o,m,s)}}function c2(r,e){return r.replace(h2,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const h2=/\{\$([^}]+)}/g;function f2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ms(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],c=e[o];if(xE(u)&&xE(c)){if(!ms(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function xE(r){return r!==null&&typeof r=="object"}function hc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Cu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Nu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function d2(r,e){const t=new m2(r,e);return t.subscribe.bind(t)}class m2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");g2(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Vg),o.error===void 0&&(o.error=Vg),o.complete===void 0&&(o.complete=Vg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function g2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Vg(){}function Lt(r){return r&&r._delegate?r._delegate:r}class _a{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const aa="[DEFAULT]";class p2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new WR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_2(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:y2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y2(r){return r===aa?void 0:r}function _2(r){return r.instantiationMode==="EAGER"}class v2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new p2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ke||(ke={}));const E2={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},T2=ke.INFO,b2={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},A2=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=b2[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=T2,this._logHandler=A2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const S2=(r,e)=>e.some(t=>r instanceof t);let CE,NE;function w2(){return CE||(CE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I2(){return NE||(NE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qb=new WeakMap,$g=new WeakMap,Yb=new WeakMap,Og=new WeakMap,kp=new WeakMap;function R2(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",c)},u=()=>{t(hr(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Qb.set(t,r)}).catch(()=>{}),kp.set(e,r),e}function x2(r){if($g.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",c),r.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",c),r.addEventListener("abort",c)});$g.set(r,e)}let Jg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return $g.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Yb.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function C2(r){Jg=r(Jg)}function N2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Mg(this),e,...t);return Yb.set(s,e.sort?e.sort():[e]),hr(s)}:I2().includes(r)?function(...e){return r.apply(Mg(this),e),hr(Qb.get(this))}:function(...e){return hr(r.apply(Mg(this),e))}}function D2(r){return typeof r=="function"?N2(r):(r instanceof IDBTransaction&&x2(r),S2(r,w2())?new Proxy(r,Jg):r)}function hr(r){if(r instanceof IDBRequest)return R2(r);if(Og.has(r))return Og.get(r);const e=D2(r);return e!==r&&(Og.set(r,e),kp.set(e,r)),e}const Mg=r=>kp.get(r);function V2(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(r,e),m=hr(c);return s&&c.addEventListener("upgradeneeded",g=>{s(hr(c.result),g.oldVersion,g.newVersion,hr(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const O2=["get","getKey","getAll","getAllKeys","count"],M2=["put","add","delete","clear"],Pg=new Map;function DE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pg.get(e))return Pg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=M2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||O2.includes(t)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&g.done]))[0]};return Pg.set(e,u),u}C2(r=>({...r,get:(e,t,s)=>DE(e,t)||r.get(e,t,s),has:(e,t)=>!!DE(e,t)||r.has(e,t)}));class P2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(k2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function k2(r){return r.getComponent()?.type==="VERSION"}const Zg="@firebase/app",VE="0.14.6";const gs=new Pp("@firebase/app"),L2="@firebase/app-compat",U2="@firebase/analytics-compat",j2="@firebase/analytics",z2="@firebase/app-check-compat",B2="@firebase/app-check",q2="@firebase/auth",F2="@firebase/auth-compat",H2="@firebase/database",G2="@firebase/data-connect",K2="@firebase/database-compat",Q2="@firebase/functions",Y2="@firebase/functions-compat",X2="@firebase/installations",$2="@firebase/installations-compat",J2="@firebase/messaging",Z2="@firebase/messaging-compat",W2="@firebase/performance",ex="@firebase/performance-compat",tx="@firebase/remote-config",nx="@firebase/remote-config-compat",ix="@firebase/storage",sx="@firebase/storage-compat",rx="@firebase/firestore",ax="@firebase/ai",ox="@firebase/firestore-compat",lx="firebase",ux="12.6.0";const Wg="[DEFAULT]",cx={[Zg]:"fire-core",[L2]:"fire-core-compat",[j2]:"fire-analytics",[U2]:"fire-analytics-compat",[B2]:"fire-app-check",[z2]:"fire-app-check-compat",[q2]:"fire-auth",[F2]:"fire-auth-compat",[H2]:"fire-rtdb",[G2]:"fire-data-connect",[K2]:"fire-rtdb-compat",[Q2]:"fire-fn",[Y2]:"fire-fn-compat",[X2]:"fire-iid",[$2]:"fire-iid-compat",[J2]:"fire-fcm",[Z2]:"fire-fcm-compat",[W2]:"fire-perf",[ex]:"fire-perf-compat",[tx]:"fire-rc",[nx]:"fire-rc-compat",[ix]:"fire-gcs",[sx]:"fire-gcs-compat",[rx]:"fire-fst",[ox]:"fire-fst-compat",[ax]:"fire-vertex","fire-js":"fire-js",[lx]:"fire-js-all"};const Nf=new Map,hx=new Map,ep=new Map;function OE(r,e){try{r.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ho(r){const e=r.name;if(ep.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,r);for(const t of Nf.values())OE(t,r);for(const t of hx.values())OE(t,r);return!0}function Lp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Yn(r){return r==null?!1:r.settings!==void 0}const fx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new cc("app","Firebase",fx);class dx{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const ul=ux;function Xb(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Wg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fr.create("bad-app-name",{appName:String(o)});if(t||(t=zb()),!t)throw fr.create("no-options");const u=Nf.get(o);if(u){if(ms(t,u.options)&&ms(s,u.config))return u;throw fr.create("duplicate-app",{appName:o})}const c=new v2(o);for(const g of ep.values())c.addComponent(g);const m=new dx(t,s,c);return Nf.set(o,m),m}function mx(r=Wg){const e=Nf.get(r);if(!e&&r===Wg&&zb())return Xb();if(!e)throw fr.create("no-app",{appName:r});return e}function dr(r,e,t){let s=cx[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(c.join(" "));return}Ho(new _a(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const gx="firebase-heartbeat-database",px=1,Qu="firebase-heartbeat-store";let kg=null;function $b(){return kg||(kg=V2(gx,px,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Qu)}catch(t){console.warn(t)}}}}).catch(r=>{throw fr.create("idb-open",{originalErrorMessage:r.message})})),kg}async function yx(r){try{const t=(await $b()).transaction(Qu),s=await t.objectStore(Qu).get(Jb(r));return await t.done,s}catch(e){if(e instanceof vs)gs.warn(e.message);else{const t=fr.create("idb-get",{originalErrorMessage:e?.message});gs.warn(t.message)}}}async function ME(r,e){try{const s=(await $b()).transaction(Qu,"readwrite");await s.objectStore(Qu).put(e,Jb(r)),await s.done}catch(t){if(t instanceof vs)gs.warn(t.message);else{const s=fr.create("idb-set",{originalErrorMessage:t?.message});gs.warn(s.message)}}}function Jb(r){return`${r.name}!${r.options.appId}`}const _x=1024,vx=30;class Ex{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bx(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>vx){const o=Ax(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PE(),{heartbeatsToSend:t,unsentEntries:s}=Tx(this._heartbeatsCache.heartbeats),o=Lb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return gs.warn(e),""}}}function PE(){return new Date().toISOString().substring(0,10)}function Tx(r,e=_x){const t=[];let s=r.slice();for(const o of r){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),kE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),kE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class bx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kb()?l2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ME(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ME(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kE(r){return Lb(JSON.stringify({version:2,heartbeats:r})).length}function Ax(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function Sx(r){Ho(new _a("platform-logger",e=>new P2(e),"PRIVATE")),Ho(new _a("heartbeat",e=>new Ex(e),"PRIVATE")),dr(Zg,VE,r),dr(Zg,VE,"esm2020"),dr("fire-js","")}Sx("");var wx="firebase",Ix="12.7.0";dr(wx,Ix,"app");function Zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rx=Zb,Wb=new cc("auth","Firebase",Zb());const Df=new Pp("@firebase/auth");function xx(r,...e){Df.logLevel<=ke.WARN&&Df.warn(`Auth (${ul}): ${r}`,...e)}function mf(r,...e){Df.logLevel<=ke.ERROR&&Df.error(`Auth (${ul}): ${r}`,...e)}function hi(r,...e){throw Up(r,...e)}function ji(r,...e){return Up(r,...e)}function eA(r,e,t){const s={...Rx(),[e]:t};return new cc("auth","Firebase",s).create(e,{appName:r.name})}function ds(r){return eA(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Up(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Wb.create(r,...e)}function Ee(r,e,...t){if(!r)throw Up(e,...t)}function cs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw mf(e),new Error(e)}function ps(r,e){r||cs(e)}function tp(){return typeof self<"u"&&self.location?.href||""}function Cx(){return LE()==="http:"||LE()==="https:"}function LE(){return typeof self<"u"&&self.location?.protocol||null}function Nx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cx()||r2()||"connection"in navigator)?navigator.onLine:!0}function Dx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ps(t>e,"Short delay should be less than long delay!"),this.isMobile=i2()||a2()}get(){return Nx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jp(r,e){ps(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class tA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Ox=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mx=new fc(3e4,6e4);function Tr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function br(r,e,t,s,o={}){return nA(r,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=hc({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return s2()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&ll(r.emulatorConfig.host)&&(p.credentials="include"),tA.fetch()(await iA(r,r.config.apiHost,t,m),p)})}async function nA(r,e,t){r._canInitEmulator=!1;const s={...Vx,...e};try{const o=new kx(r),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw rf(r,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw rf(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw rf(r,"user-disabled",c);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw eA(r,E,p);hi(r,E)}}catch(o){if(o instanceof vs)throw o;hi(r,"network-request-failed",{message:String(o)})}}async function dc(r,e,t,s,o={}){const u=await br(r,e,t,s,o);return"mfaPendingCredential"in u&&hi(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function iA(r,e,t,s){const o=`${e}${t}?${s}`,u=r,c=u.config.emulator?jp(r.config,o):`${r.config.apiScheme}://${o}`;return Ox.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function Px(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ji(this.auth,"network-request-failed")),Mx.get())})}}function rf(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ji(r,e,s);return o.customData._tokenResponse=t,o}function UE(r){return r!==void 0&&r.enterprise!==void 0}class Lx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Px(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ux(r,e){return br(r,"GET","/v2/recaptchaConfig",Tr(r,e))}async function jx(r,e){return br(r,"POST","/v1/accounts:delete",e)}async function Vf(r,e){return br(r,"POST","/v1/accounts:lookup",e)}function Lu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zx(r,e=!1){const t=Lt(r),s=await t.getIdToken(e),o=zp(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:Lu(Lg(o.auth_time)),issuedAtTime:Lu(Lg(o.iat)),expirationTime:Lu(Lg(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Lg(r){return Number(r)*1e3}function zp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ub(t);return o?JSON.parse(o):(mf("Failed to decode base64 JWT payload"),null)}catch(o){return mf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function jE(r){const e=zp(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof vs&&Bx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Bx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class qx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class np{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Of(r){const e=r.auth,t=await r.getIdToken(),s=await Yu(r,Vf(e,{idToken:t}));Ee(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?sA(o.providerUserInfo):[],c=Hx(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!c?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new np(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function Fx(r){const e=Lt(r);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function sA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Gx(r,e){const t=await nA(r,{},async()=>{const s=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,c=await iA(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&ll(r.emulatorConfig.host)&&(g.credentials="include"),tA.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Kx(r,e){return br(r,"POST","/v2/accounts:revokeToken",Tr(r,e))}class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=jE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await Gx(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,c=new Uo;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return cs("not implemented")}}function tr(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new qx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new np(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Yu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zx(this,e)}reload(){return Fx(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await Yu(this,jx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:I,isAnonymous:P,providerData:H,stsTokenManager:U}=t;Ee(T&&U,e,"internal-error");const $=Uo.fromJSON(this.name,U);Ee(typeof T=="string",e,"internal-error"),tr(s,e.name),tr(o,e.name),Ee(typeof I=="boolean",e,"internal-error"),Ee(typeof P=="boolean",e,"internal-error"),tr(u,e.name),tr(c,e.name),tr(m,e.name),tr(g,e.name),tr(p,e.name),tr(E,e.name);const he=new ui({uid:T,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:P,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:$,createdAt:p,lastLoginAt:E});return H&&Array.isArray(H)&&(he.providerData=H.map(ce=>({...ce}))),g&&(he._redirectEventId=g),he}static async _fromIdTokenResponse(e,t,s=!1){const o=new Uo;o.updateFromServerResponse(t);const u=new ui({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Of(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?sA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Uo;m.updateFromIdToken(s);const g=new ui({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new np(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const zE=new Map;function hs(r){ps(r instanceof Function,"Expected a class definition");let e=zE.get(r);return e?(ps(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zE.set(r,e),e)}class rA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rA.type="NONE";const BE=rA;function gf(r,e,t){return`firebase:${r}:${e}:${t}`}class jo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=gf(this.userKey,o.apiKey,u),this.fullPersistenceKey=gf("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vf(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new jo(hs(BE),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||hs(BE);const c=gf(s,e.config.apiKey,e.name);let m=null;for(const p of t)try{const E=await p._get(c);if(E){let T;if(typeof E=="string"){const I=await Vf(e,{idToken:E}).catch(()=>{});if(!I)break;T=await ui._fromGetAccountInfoResponse(e,I,E)}else T=ui._fromJSON(e,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new jo(u,e,s):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new jo(u,e,s))}}function qE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hA(e))return"Blackberry";if(fA(e))return"Webos";if(oA(e))return"Safari";if((e.includes("chrome/")||lA(e))&&!e.includes("edge/"))return"Chrome";if(cA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function aA(r=qt()){return/firefox\//i.test(r)}function oA(r=qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lA(r=qt()){return/crios\//i.test(r)}function uA(r=qt()){return/iemobile/i.test(r)}function cA(r=qt()){return/android/i.test(r)}function hA(r=qt()){return/blackberry/i.test(r)}function fA(r=qt()){return/webos/i.test(r)}function Bp(r=qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Qx(r=qt()){return Bp(r)&&!!window.navigator?.standalone}function Yx(){return o2()&&document.documentMode===10}function dA(r=qt()){return Bp(r)||cA(r)||fA(r)||hA(r)||/windows phone/i.test(r)||uA(r)}function mA(r,e=[]){let t;switch(r){case"Browser":t=qE(qt());break;case"Worker":t=`${qE(qt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ul}/${s}`}class Xx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((c,m)=>{try{const g=e(u);c(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function $x(r,e={}){return br(r,"GET","/v2/passwordPolicy",Tr(r,e))}const Jx=6;class Zx{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Jx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class Wx{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FE(this),this.idTokenSubscription=new FE(this),this.beforeStateQueue=new Xx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vf(this,{idToken:e}),s=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Yn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Dx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(ds(this));const t=e?Lt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $x(this),t=new Zx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Kx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&xx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Na(r){return Lt(r)}class FE{constructor(e){this.auth=e,this.observer=null,this.addObserver=d2(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(r){id=r}function gA(r){return id.loadJS(r)}function tC(){return id.recaptchaEnterpriseScript}function nC(){return id.gapiScript}function iC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class sC{constructor(){this.enterprise=new rC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const aC="recaptcha-enterprise",pA="NO_RECAPTCHA";class oC{constructor(e){this.type=aC,this.auth=Na(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{Ux(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new Lx(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,c(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,c,m){const g=window.grecaptcha;UE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{c(p)}).catch(()=>{c(pA)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sC().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(m=>{if(!t&&UE(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=tC();g.length!==0&&(g+=m),gA(g).then(()=>{o(m,u,c)}).catch(p=>{c(p)})}}).catch(m=>{c(m)})})}}async function HE(r,e,t,s=!1,o=!1){const u=new oC(r);let c;if(o)c=pA;else try{c=await u.verify(t)}catch{c=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function ip(r,e,t,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await HE(r,e,t,t==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await HE(r,e,t,t==="getOobCode");return s(r,c)}else return Promise.reject(u)})}function lC(r,e){const t=Lp(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(ms(u,e??{}))return o;hi(o,"already-initialized")}return t.initialize({options:e})}function uC(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(hs);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function cC(r,e,t){const s=Na(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=yA(e),{host:c,port:m}=hC(e),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(ms(p,s.config.emulator)&&ms(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,ll(c)?(qb(`${u}//${c}${g}`),n2("Auth",!0)):fC()}function yA(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function hC(r){const e=yA(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:GE(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:GE(c)}}}function GE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function fC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class qp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,t){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}async function dC(r,e){return br(r,"POST","/v1/accounts:signUp",e)}async function mC(r,e){return dc(r,"POST","/v1/accounts:signInWithPassword",Tr(r,e))}async function gC(r,e){return dc(r,"POST","/v1/accounts:signInWithEmailLink",Tr(r,e))}async function pC(r,e){return dc(r,"POST","/v1/accounts:signInWithEmailLink",Tr(r,e))}class Xu extends qp{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Xu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Xu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,t,"signInWithPassword",mC);case"emailLink":return gC(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,s,"signUpPassword",dC);case"emailLink":return pC(e,{idToken:t,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zo(r,e){return dc(r,"POST","/v1/accounts:signInWithIdp",Tr(r,e))}const yC="http://localhost";class va extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const c=new va(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return zo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,zo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zo(e,t)}buildRequest(){const e={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hc(t)}return e}}function _C(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vC(r){const e=Cu(Nu(r)).link,t=e?Cu(Nu(e)).deep_link_id:null,s=Cu(Nu(r)).deep_link_id;return(s?Cu(Nu(s)).link:null)||s||t||e||r}class Fp{constructor(e){const t=Cu(Nu(e)),s=t.apiKey??null,o=t.oobCode??null,u=_C(t.mode??null);Ee(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=vC(e);try{return new Fp(t)}catch{return null}}}class cl{constructor(){this.providerId=cl.PROVIDER_ID}static credential(e,t){return Xu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Fp.parseLink(t);return Ee(s,"argument-error"),Xu._fromEmailAndCode(e,s.code,s.tenantId)}}cl.PROVIDER_ID="password";cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _A{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mc extends _A{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rr extends mc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";class ar extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ar.credential(t,s)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";class or extends mc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";class lr extends mc{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return lr.credential(t,s)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";async function EC(r,e){return dc(r,"POST","/v1/accounts:signUp",Tr(r,e))}class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await ui._fromIdTokenResponse(e,s,o),c=KE(s);return new Ea({user:u,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=KE(s);return new Ea({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function KE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Mf extends vs{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Mf(e,t,s,o)}}function vA(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mf._fromErrorAndOperation(r,u,e,s):u})}async function TC(r,e,t=!1){const s=await Yu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ea._forOperation(r,"link",s)}async function bC(r,e,t=!1){const{auth:s}=r;if(Yn(s.app))return Promise.reject(ds(s));const o="reauthenticate";try{const u=await Yu(r,vA(s,o,e,r),t);Ee(u.idToken,s,"internal-error");const c=zp(u.idToken);Ee(c,s,"internal-error");const{sub:m}=c;return Ee(r.uid===m,s,"user-mismatch"),Ea._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&hi(s,"user-mismatch"),u}}async function EA(r,e,t=!1){if(Yn(r.app))return Promise.reject(ds(r));const s="signIn",o=await vA(r,s,e),u=await Ea._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(u.user),u}async function AC(r,e){return EA(Na(r),e)}async function TA(r){const e=Na(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SC(r,e,t){if(Yn(r.app))return Promise.reject(ds(r));const s=Na(r),c=await ip(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&TA(r),g}),m=await Ea._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(m.user),m}function wC(r,e,t){return Yn(r.app)?Promise.reject(ds(r)):AC(Lt(r),cl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&TA(r),s})}function IC(r,e,t,s){return Lt(r).onIdTokenChanged(e,t,s)}function RC(r,e,t){return Lt(r).beforeAuthStateChanged(e,t)}function xC(r,e,t,s){return Lt(r).onAuthStateChanged(e,t,s)}function CC(r){return Lt(r).signOut()}const Pf="__sak";class bA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const NC=1e3,DC=10;class AA extends bA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);Yx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,DC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},NC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AA.type="LOCAL";const VC=AA;class SA extends bA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SA.type="SESSION";const wA=SA;function OC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new sd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async p=>p(t.origin,u)),g=await OC(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sd.receivers=[];function Hp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class MC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=Hp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function zi(){return window}function PC(r){zi().location.href=r}function IA(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function kC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){return navigator?.serviceWorker?.controller||null}function UC(){return IA()?self:null}const RA="firebaseLocalStorageDb",jC=1,kf="firebaseLocalStorage",xA="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rd(r,e){return r.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function zC(){const r=indexedDB.deleteDatabase(RA);return new gc(r).toPromise()}function sp(){const r=indexedDB.open(RA,jC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kf,{keyPath:xA})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kf)?e(s):(s.close(),await zC(),e(await sp()))})})}async function QE(r,e,t){const s=rd(r,!0).put({[xA]:e,value:t});return new gc(s).toPromise()}async function BC(r,e){const t=rd(r,!1).get(e),s=await new gc(t).toPromise();return s===void 0?null:s.value}function YE(r,e){const t=rd(r,!0).delete(e);return new gc(t).toPromise()}const qC=800,FC=3;class CA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>FC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sd._getInstance(UC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kC(),!this.activeServiceWorker)return;this.sender=new MC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sp();return await QE(e,Pf,"1"),await YE(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>QE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>BC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>YE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=rd(o,!1).getAll();return new gc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CA.type="LOCAL";const HC=CA;new fc(3e4,6e4);function GC(r,e){return e?hs(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Gp extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KC(r){return EA(r.auth,new Gp(r),r.bypassAuthState)}function QC(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),bC(t,new Gp(r),r.bypassAuthState)}async function YC(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),TC(t,new Gp(r),r.bypassAuthState)}class NA{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KC;case"linkViaPopup":case"linkViaRedirect":return YC;case"reauthViaPopup":case"reauthViaRedirect":return QC;default:hi(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const XC=new fc(2e3,1e4);class Lo extends NA{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XC.get())};e()}}Lo.currentPopupAction=null;const $C="pendingRedirect",pf=new Map;class JC extends NA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const s=await ZC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZC(r,e){const t=tN(e),s=eN(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function WC(r,e){pf.set(r._key(),e)}function eN(r){return hs(r._redirectPersistence)}function tN(r){return gf($C,r.config.apiKey,r.name)}async function nN(r,e,t=!1){if(Yn(r.app))return Promise.reject(ds(r));const s=Na(r),o=GC(s,e),c=await new JC(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const iN=600*1e3;class sN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!DA(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ji(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iN&&this.cachedEventUids.clear(),this.cachedEventUids.has(XE(e))}saveEventToCache(e){this.cachedEventUids.add(XE(e)),this.lastProcessedEventTime=Date.now()}}function XE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function DA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function rN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(r);default:return!1}}async function aN(r,e={}){return br(r,"GET","/v1/projects",e)}const oN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lN=/^https?/;async function uN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await aN(r);for(const t of e)try{if(cN(t))return}catch{}hi(r,"unauthorized-domain")}function cN(r){const e=tp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!lN.test(t))return!1;if(oN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const hN=new fc(3e4,6e4);function $E(){const r=zi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function fN(r){return new Promise((e,t)=>{function s(){$E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$E(),t(ji(r,"network-request-failed"))},timeout:hN.get()})}if(zi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zi().gapi?.load)s();else{const o=iC("iframefcb");return zi()[o]=()=>{gapi.load?s():t(ji(r,"network-request-failed"))},gA(`${nC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw yf=null,e})}let yf=null;function dN(r){return yf=yf||fN(r),yf}const mN=new fc(5e3,15e3),gN="__/auth/iframe",pN="emulator/auth/iframe",yN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_N=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vN(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?jp(e,pN):`https://${r.config.authDomain}/${gN}`,s={apiKey:e.apiKey,appName:r.name,v:ul},o=_N.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${hc(s).slice(1)}`}async function EN(r){const e=await dN(r),t=zi().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:vN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=ji(r,"network-request-failed"),m=zi().setTimeout(()=>{u(c)},mN.get());function g(){zi().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(c)})}))}const TN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bN=500,AN=600,SN="_blank",wN="http://localhost";class JE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IN(r,e,t,s=bN,o=AN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...TN,width:s.toString(),height:o.toString(),top:u,left:c},p=qt().toLowerCase();t&&(m=lA(p)?SN:t),aA(p)&&(e=e||wN,g.scrollbars="yes");const E=Object.entries(g).reduce((I,[P,H])=>`${I}${P}=${H},`,"");if(Qx(p)&&m!=="_self")return RN(e||"",m),new JE(null);const T=window.open(e||"",m,E);Ee(T,r,"popup-blocked");try{T.focus()}catch{}return new JE(T)}function RN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const xN="__/auth/handler",CN="emulator/auth/handler",NN=encodeURIComponent("fac");async function ZE(r,e,t,s,o,u){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ul,eventId:o};if(e instanceof _A){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",f2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(e instanceof mc){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}r.tenantId&&(c.tid=r.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${NN}=${encodeURIComponent(g)}`:"";return`${DN(r)}?${hc(m).slice(1)}${p}`}function DN({config:r}){return r.emulator?jp(r,CN):`https://${r.authDomain}/${xN}`}const Ug="webStorageSupport";class VN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=nN,this._overrideRedirectResult=WC}async _openPopup(e,t,s,o){ps(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await ZE(e,t,s,tp(),o);return IN(e,u,Hp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await ZE(e,t,s,tp(),o);return PC(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(ps(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await EN(e),s=new sN(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ug,{type:Ug},o=>{const u=o?.[0]?.[Ug];u!==void 0&&t(!!u),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dA()||oA()||Bp()}}const ON=VN;var WE="@firebase/auth",eT="1.12.0";class MN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function PN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kN(r){Ho(new _a("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mA(r)},p=new Wx(s,o,u,g);return uC(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ho(new _a("auth-internal",e=>{const t=Na(e.getProvider("auth").getImmediate());return(s=>new MN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(WE,eT,PN(r)),dr(WE,eT,"esm2020")}const LN=300,UN=Bb("authIdTokenMaxAge")||LN;let tT=null;const jN=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>UN)return;const o=t?.token;tT!==o&&(tT=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zN(r=mx()){const e=Lp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=lC(r,{popupRedirectResolver:ON,persistence:[HC,VC,wA]}),s=Bb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=jN(u.toString());RC(t,c,()=>c(t.currentUser)),IC(t,m=>c(m))}}const o=ZR("auth");return o&&cC(t,`http://${o}`),t}function BN(){return document.getElementsByTagName("head")?.[0]??document}eC({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=ji("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",BN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kN("Browser");var nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mr,VA;(function(){var r;function e(S,w){function x(){}x.prototype=w.prototype,S.F=w.prototype,S.prototype=new x,S.prototype.constructor=S,S.D=function(O,D,k){for(var C=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)C[Qe-2]=arguments[Qe];return w.prototype[D].apply(O,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,w,x){x||(x=0);const O=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)O[D]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(D=0;D<16;++D)O[D]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=S.g[0],x=S.g[1],D=S.g[2];let k=S.g[3],C;C=w+(k^x&(D^k))+O[0]+3614090360&4294967295,w=x+(C<<7&4294967295|C>>>25),C=k+(D^w&(x^D))+O[1]+3905402710&4294967295,k=w+(C<<12&4294967295|C>>>20),C=D+(x^k&(w^x))+O[2]+606105819&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(w^D&(k^w))+O[3]+3250441966&4294967295,x=D+(C<<22&4294967295|C>>>10),C=w+(k^x&(D^k))+O[4]+4118548399&4294967295,w=x+(C<<7&4294967295|C>>>25),C=k+(D^w&(x^D))+O[5]+1200080426&4294967295,k=w+(C<<12&4294967295|C>>>20),C=D+(x^k&(w^x))+O[6]+2821735955&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(w^D&(k^w))+O[7]+4249261313&4294967295,x=D+(C<<22&4294967295|C>>>10),C=w+(k^x&(D^k))+O[8]+1770035416&4294967295,w=x+(C<<7&4294967295|C>>>25),C=k+(D^w&(x^D))+O[9]+2336552879&4294967295,k=w+(C<<12&4294967295|C>>>20),C=D+(x^k&(w^x))+O[10]+4294925233&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(w^D&(k^w))+O[11]+2304563134&4294967295,x=D+(C<<22&4294967295|C>>>10),C=w+(k^x&(D^k))+O[12]+1804603682&4294967295,w=x+(C<<7&4294967295|C>>>25),C=k+(D^w&(x^D))+O[13]+4254626195&4294967295,k=w+(C<<12&4294967295|C>>>20),C=D+(x^k&(w^x))+O[14]+2792965006&4294967295,D=k+(C<<17&4294967295|C>>>15),C=x+(w^D&(k^w))+O[15]+1236535329&4294967295,x=D+(C<<22&4294967295|C>>>10),C=w+(D^k&(x^D))+O[1]+4129170786&4294967295,w=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(w^x))+O[6]+3225465664&4294967295,k=w+(C<<9&4294967295|C>>>23),C=D+(w^x&(k^w))+O[11]+643717713&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^w&(D^k))+O[0]+3921069994&4294967295,x=D+(C<<20&4294967295|C>>>12),C=w+(D^k&(x^D))+O[5]+3593408605&4294967295,w=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(w^x))+O[10]+38016083&4294967295,k=w+(C<<9&4294967295|C>>>23),C=D+(w^x&(k^w))+O[15]+3634488961&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^w&(D^k))+O[4]+3889429448&4294967295,x=D+(C<<20&4294967295|C>>>12),C=w+(D^k&(x^D))+O[9]+568446438&4294967295,w=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(w^x))+O[14]+3275163606&4294967295,k=w+(C<<9&4294967295|C>>>23),C=D+(w^x&(k^w))+O[3]+4107603335&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^w&(D^k))+O[8]+1163531501&4294967295,x=D+(C<<20&4294967295|C>>>12),C=w+(D^k&(x^D))+O[13]+2850285829&4294967295,w=x+(C<<5&4294967295|C>>>27),C=k+(x^D&(w^x))+O[2]+4243563512&4294967295,k=w+(C<<9&4294967295|C>>>23),C=D+(w^x&(k^w))+O[7]+1735328473&4294967295,D=k+(C<<14&4294967295|C>>>18),C=x+(k^w&(D^k))+O[12]+2368359562&4294967295,x=D+(C<<20&4294967295|C>>>12),C=w+(x^D^k)+O[5]+4294588738&4294967295,w=x+(C<<4&4294967295|C>>>28),C=k+(w^x^D)+O[8]+2272392833&4294967295,k=w+(C<<11&4294967295|C>>>21),C=D+(k^w^x)+O[11]+1839030562&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^w)+O[14]+4259657740&4294967295,x=D+(C<<23&4294967295|C>>>9),C=w+(x^D^k)+O[1]+2763975236&4294967295,w=x+(C<<4&4294967295|C>>>28),C=k+(w^x^D)+O[4]+1272893353&4294967295,k=w+(C<<11&4294967295|C>>>21),C=D+(k^w^x)+O[7]+4139469664&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^w)+O[10]+3200236656&4294967295,x=D+(C<<23&4294967295|C>>>9),C=w+(x^D^k)+O[13]+681279174&4294967295,w=x+(C<<4&4294967295|C>>>28),C=k+(w^x^D)+O[0]+3936430074&4294967295,k=w+(C<<11&4294967295|C>>>21),C=D+(k^w^x)+O[3]+3572445317&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^w)+O[6]+76029189&4294967295,x=D+(C<<23&4294967295|C>>>9),C=w+(x^D^k)+O[9]+3654602809&4294967295,w=x+(C<<4&4294967295|C>>>28),C=k+(w^x^D)+O[12]+3873151461&4294967295,k=w+(C<<11&4294967295|C>>>21),C=D+(k^w^x)+O[15]+530742520&4294967295,D=k+(C<<16&4294967295|C>>>16),C=x+(D^k^w)+O[2]+3299628645&4294967295,x=D+(C<<23&4294967295|C>>>9),C=w+(D^(x|~k))+O[0]+4096336452&4294967295,w=x+(C<<6&4294967295|C>>>26),C=k+(x^(w|~D))+O[7]+1126891415&4294967295,k=w+(C<<10&4294967295|C>>>22),C=D+(w^(k|~x))+O[14]+2878612391&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~w))+O[5]+4237533241&4294967295,x=D+(C<<21&4294967295|C>>>11),C=w+(D^(x|~k))+O[12]+1700485571&4294967295,w=x+(C<<6&4294967295|C>>>26),C=k+(x^(w|~D))+O[3]+2399980690&4294967295,k=w+(C<<10&4294967295|C>>>22),C=D+(w^(k|~x))+O[10]+4293915773&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~w))+O[1]+2240044497&4294967295,x=D+(C<<21&4294967295|C>>>11),C=w+(D^(x|~k))+O[8]+1873313359&4294967295,w=x+(C<<6&4294967295|C>>>26),C=k+(x^(w|~D))+O[15]+4264355552&4294967295,k=w+(C<<10&4294967295|C>>>22),C=D+(w^(k|~x))+O[6]+2734768916&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~w))+O[13]+1309151649&4294967295,x=D+(C<<21&4294967295|C>>>11),C=w+(D^(x|~k))+O[4]+4149444226&4294967295,w=x+(C<<6&4294967295|C>>>26),C=k+(x^(w|~D))+O[11]+3174756917&4294967295,k=w+(C<<10&4294967295|C>>>22),C=D+(w^(k|~x))+O[2]+718787259&4294967295,D=k+(C<<15&4294967295|C>>>17),C=x+(k^(D|~w))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+k&4294967295}s.prototype.v=function(S,w){w===void 0&&(w=S.length);const x=w-this.blockSize,O=this.C;let D=this.h,k=0;for(;k<w;){if(D==0)for(;k<=x;)o(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<w;)if(O[D++]=S.charCodeAt(k++),D==this.blockSize){o(this,O),D=0;break}}else for(;k<w;)if(O[D++]=S[k++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=w},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var x=S.length-8;x<S.length;++x)S[x]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,x=0;x<4;++x)for(let O=0;O<32;O+=8)S[w++]=this.g[x]>>>O&255;return S};function u(S,w){var x=m;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=w(S)}function c(S,w){this.h=w;const x=[];let O=!0;for(let D=S.length-1;D>=0;D--){const k=S[D]|0;O&&k==w||(x[D]=k,O=!1)}this.g=x}var m={};function g(S){return-128<=S&&S<128?u(S,function(w){return new c([w|0],w<0?-1:0)}):new c([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return T;if(S<0)return $(p(-S));const w=[];let x=1;for(let O=0;S>=x;O++)w[O]=S/x|0,x*=4294967296;return new c(w,0)}function E(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return $(E(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(w,8));let O=T;for(let k=0;k<S.length;k+=8){var D=Math.min(8,S.length-k);const C=parseInt(S.substring(k,k+D),w);D<8?(D=p(Math.pow(w,D)),O=O.j(D).add(p(C))):(O=O.j(x),O=O.add(p(C)))}return O}var T=g(0),I=g(1),P=g(16777216);r=c.prototype,r.m=function(){if(U(this))return-$(this).m();let S=0,w=1;for(let x=0;x<this.g.length;x++){const O=this.i(x);S+=(O>=0?O:4294967296+O)*w,w*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(H(this))return"0";if(U(this))return"-"+$(this).toString(S);const w=p(Math.pow(S,6));var x=this;let O="";for(;;){const D=Se(x,w).g;x=he(x,D.j(w));let k=((x.g.length>0?x.g[0]:x.h)>>>0).toString(S);if(x=D,H(x))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function H(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function U(S){return S.h==-1}r.l=function(S){return S=he(this,S),U(S)?-1:H(S)?0:1};function $(S){const w=S.g.length,x=[];for(let O=0;O<w;O++)x[O]=~S.g[O];return new c(x,~S.h).add(I)}r.abs=function(){return U(this)?$(this):this},r.add=function(S){const w=Math.max(this.g.length,S.g.length),x=[];let O=0;for(let D=0;D<=w;D++){let k=O+(this.i(D)&65535)+(S.i(D)&65535),C=(k>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);O=C>>>16,k&=65535,C&=65535,x[D]=C<<16|k}return new c(x,x[x.length-1]&-2147483648?-1:0)};function he(S,w){return S.add($(w))}r.j=function(S){if(H(this)||H(S))return T;if(U(this))return U(S)?$(this).j($(S)):$($(this).j(S));if(U(S))return $(this.j($(S)));if(this.l(P)<0&&S.l(P)<0)return p(this.m()*S.m());const w=this.g.length+S.g.length,x=[];for(var O=0;O<2*w;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<S.g.length;D++){const k=this.i(O)>>>16,C=this.i(O)&65535,Qe=S.i(D)>>>16,gt=S.i(D)&65535;x[2*O+2*D]+=C*gt,ce(x,2*O+2*D),x[2*O+2*D+1]+=k*gt,ce(x,2*O+2*D+1),x[2*O+2*D+1]+=C*Qe,ce(x,2*O+2*D+1),x[2*O+2*D+2]+=k*Qe,ce(x,2*O+2*D+2)}for(S=0;S<w;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=w;S<2*w;S++)x[S]=0;return new c(x,0)};function ce(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function se(S,w){this.g=S,this.h=w}function Se(S,w){if(H(w))throw Error("division by zero");if(H(S))return new se(T,T);if(U(S))return w=Se($(S),w),new se($(w.g),$(w.h));if(U(w))return w=Se(S,$(w)),new se($(w.g),w.h);if(S.g.length>30){if(U(S)||U(w))throw Error("slowDivide_ only works with positive integers.");for(var x=I,O=w;O.l(S)<=0;)x=Te(x),O=Te(O);var D=ge(x,1),k=ge(O,1);for(O=ge(O,2),x=ge(x,2);!H(O);){var C=k.add(O);C.l(S)<=0&&(D=D.add(x),k=C),O=ge(O,1),x=ge(x,1)}return w=he(S,D.j(w)),new se(D,w)}for(D=T;S.l(w)>=0;){for(x=Math.max(1,Math.floor(S.m()/w.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(x),C=k.j(w);U(C)||C.l(S)>0;)x-=O,k=p(x),C=k.j(w);H(k)&&(k=I),D=D.add(k),S=he(S,C)}return new se(D,S)}r.B=function(S){return Se(this,S).h},r.and=function(S){const w=Math.max(this.g.length,S.g.length),x=[];for(let O=0;O<w;O++)x[O]=this.i(O)&S.i(O);return new c(x,this.h&S.h)},r.or=function(S){const w=Math.max(this.g.length,S.g.length),x=[];for(let O=0;O<w;O++)x[O]=this.i(O)|S.i(O);return new c(x,this.h|S.h)},r.xor=function(S){const w=Math.max(this.g.length,S.g.length),x=[];for(let O=0;O<w;O++)x[O]=this.i(O)^S.i(O);return new c(x,this.h^S.h)};function Te(S){const w=S.g.length+1,x=[];for(let O=0;O<w;O++)x[O]=S.i(O)<<1|S.i(O-1)>>>31;return new c(x,S.h)}function ge(S,w){const x=w>>5;w%=32;const O=S.g.length-x,D=[];for(let k=0;k<O;k++)D[k]=w>0?S.i(k+x)>>>w|S.i(k+x+1)<<32-w:S.i(k+x);return new c(D,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,VA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,mr=c}).apply(typeof nT<"u"?nT:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var OA,Du,MA,_f,rp,PA,kA,LA;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var v=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var z=h[A];if(!(z in v))break e;v=v[z]}h=h[h.length-1],A=v[h],y=y(A),y!=A&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(A,z,G){for(var ne=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ne[Ie-2]=arguments[Ie];return y.prototype[z].apply(A,ne)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const y=h.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=h[A];return v}return[]}function H(h,y){for(let A=1;A<arguments.length;A++){const z=arguments[A];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=h.length||0;const G=z.length||0;h.length=v+G;for(let ne=0;ne<G;ne++)h[v+ne]=z[ne]}else h.push(z)}}class U{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(h){c.setTimeout(()=>{throw h},0)}function he(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,v){const A=se.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new U(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,ge=!1,S=new ce,w=()=>{const h=Promise.resolve(void 0);Te=()=>{h.then(x)}};function x(){for(var h;h=he();){try{h.h.call(h.g)}catch(v){$(v)}var y=se;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ge=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Qe(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(Qe,D),Qe.prototype.init=function(h,y){const v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),X=0;function re(h,y,v,A,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=z,this.key=++X,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,v){for(const A in h)y.call(v,h[A],A,h)}function Ye(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function M(h){const y={};for(const v in h)y[v]=h[v];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let v,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(v in A)h[v]=A[v];for(let G=0;G<W.length;G++)v=W[G],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function oe(h){this.src=h,this.g={},this.h=0}oe.prototype.add=function(h,y,v,A,z){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const ne=Ce(h,y,A,z);return ne>-1?(y=h[ne],v||(y.fa=!1)):(y=new re(y,this.src,G,!!A,z),y.fa=v,h.push(y)),y};function be(h,y){const v=y.type;if(v in h.g){var A=h.g[v],z=Array.prototype.indexOf.call(A,y,void 0),G;(G=z>=0)&&Array.prototype.splice.call(A,z,1),G&&(_e(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ce(h,y,v,A){for(let z=0;z<h.length;++z){const G=h[z];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==A)return z}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Ut={};function ut(h,y,v,A,z){if(Array.isArray(y)){for(let G=0;G<y.length;G++)ut(h,y[G],v,A,z);return null}return v=vl(v),h&&h[gt]?h.J(y,v,m(A)?!!A.capture:!1,z):xr(h,y,v,!1,A,z)}function xr(h,y,v,A,z,G){if(!y)throw Error("Invalid event type");const ne=m(z)?!!z.capture:!!z;let Ie=Cr(h);if(Ie||(h[je]=Ie=new oe(h)),v=Ie.add(y,v,A,ne,G),v.proxy)return v;if(A=Pa(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)k||(z=ne),z===void 0&&(z=!1),h.addEventListener(y.toString(),A,z);else if(h.attachEvent)h.attachEvent(di(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Pa(){function h(v){return y.call(h.src,h.listener,v)}const y=yl;return h}function ka(h,y,v,A,z){if(Array.isArray(y))for(var G=0;G<y.length;G++)ka(h,y[G],v,A,z);else A=m(A)?!!A.capture:!!A,v=vl(v),h&&h[gt]?(h=h.i,G=String(y).toString(),G in h.g&&(y=h.g[G],v=Ce(y,v,A,z),v>-1&&(_e(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[G],h.h--)))):h&&(h=Cr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ce(y,v,A,z)),(v=h>-1?y[h]:null)&&La(v))}function La(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[gt])be(y.i,h);else{var v=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(v,A,h.capture):y.detachEvent?y.detachEvent(di(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Cr(y))?(be(v,h),v.h==0&&(v.src=null,y[je]=null)):_e(h)}}}function di(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function yl(h,y){if(h.da)h=!0;else{y=new Qe(y,this);const v=h.listener,A=h.ha||h.src;h.fa&&La(h),h=v.call(A,y)}return h}function Cr(h){return h=h[je],h instanceof oe?h:null}var _l="__closure_events_fn_"+(Math.random()*1e9>>>0);function vl(h){return typeof h=="function"?h:(h[_l]||(h[_l]=function(y){return h.handleEvent(y)}),h[_l])}function It(){O.call(this),this.i=new oe(this),this.M=this,this.G=null}T(It,O),It.prototype[gt]=!0,It.prototype.removeEventListener=function(h,y,v,A){ka(this,h,y,v,A)};function jt(h,y){var v,A=h.G;if(A)for(v=[];A;A=A.G)v.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var z=y;y=new D(A,h),ae(y,z)}z=!0;let G,ne;if(v)for(ne=v.length-1;ne>=0;ne--)G=y.g=v[ne],z=bs(G,A,!0,y)&&z;if(G=y.g=h,z=bs(G,A,!0,y)&&z,z=bs(G,A,!1,y)&&z,v)for(ne=0;ne<v.length;ne++)G=y.g=v[ne],z=bs(G,A,!1,y)&&z}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let A=0;A<v.length;A++)_e(v[A]);delete h.g[y],h.h--}}this.G=null},It.prototype.J=function(h,y,v,A){return this.i.add(String(h),y,!1,v,A)},It.prototype.K=function(h,y,v,A){return this.i.add(String(h),y,!0,v,A)};function bs(h,y,v,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let G=0;G<y.length;++G){const ne=y[G];if(ne&&!ne.da&&ne.capture==v){const Ie=ne.listener,Et=ne.ha||ne.src;ne.fa&&be(h.i,ne),z=Ie.call(Et,A)!==!1&&z}}return z&&!A.defaultPrevented}function xd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Cc(h){h.g=xd(()=>{h.g=null,h.i&&(h.i=!1,Cc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Cc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(h){O.call(this),this.h=h,this.g={}}T(Nr,O);var El=[];function Tl(h){Be(h.g,function(y,v){this.g.hasOwnProperty(v)&&La(y)},h),h.g={}}Nr.prototype.N=function(){Nr.Z.N.call(this),Tl(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=c.JSON.stringify,Cd=c.JSON.parse,Nc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Dc(){}function Vc(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){D.call(this,"d")}T(Yt,D);function Pn(){D.call(this,"c")}T(Pn,D);var vt={},Oc=null;function Ua(){return Oc=Oc||new It}vt.Ia="serverreachability";function Mc(h){D.call(this,vt.Ia,h)}T(Mc,D);function mi(h){const y=Ua();jt(y,new Mc(y))}vt.STAT_EVENT="statevent";function Dr(h,y){D.call(this,vt.STAT_EVENT,h),this.stat=y}T(Dr,D);function Rt(h){const y=Ua();jt(y,new Dr(y,h))}vt.Ja="timingevent";function gi(h,y){D.call(this,vt.Ja,h),this.size=y}T(gi,D);function pi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Nd(h,y,v,A,z,G){h.info(function(){if(h.g)if(G){var ne="",Ie=G.split("&");for(let He=0;He<Ie.length;He++){var Et=Ie[He].split("=");if(Et.length>1){const ct=Et[0];Et=Et[1];const jn=ct.split("_");ne=jn.length>=2&&jn[1]=="type"?ne+(ct+"="+Et+"&"):ne+(ct+"=redacted&")}}}else ne=null;else ne=G;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+y+`
`+v+`
`+ne})}function Pc(h,y,v,A,z,G,ne){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+y+`
`+v+`
`+G+" "+ne})}function yi(h,y,v,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Dd(h,v)+(A?" "+A:"")})}function Vr(h,y){h.info(function(){return"TIMEOUT: "+y})}Jn.prototype.info=function(){};function Dd(h,y){if(!h.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var v=G[h];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ne=1;ne<A.length;ne++)A[ne]=""}}}}return As(G)}catch{return y}}var Or={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Al;function Mr(){}T(Mr,Dc),Mr.prototype.g=function(){return new XMLHttpRequest},Al=new Mr;function Gi(h){return encodeURIComponent(String(h))}function kc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Zn(h,y,v,A){this.j=h,this.i=y,this.l=v,this.S=A||1,this.V=new Nr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var xt={},Ht={};function _i(h,y,v){h.M=1,h.A=Pr(Nt(y)),h.u=v,h.R=!0,ja(h,null)}function ja(h,y){h.F=Date.now(),vi(h),h.B=Nt(h.A);var v=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Fa(v.i,"t",A),h.C=0,v=h.j.L,h.h=new Wn,h.g=Jc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,A=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(El[0]=z.toString()),z=El);for(let G=0;G<z.length;G++){const ne=ut(v,z[G],A||y.handleEvent,!1,y.h||y);if(!ne)break;y.g[ne.key]=ne}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),mi(),Nd(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ni(h)==3?y.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=ni(this.g),Et=this.g.ya(),He=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||Ie!=4||Et==7||(Et==8||He<=0?mi(3):mi(2)),Ei(this);var y=this.g.ca();this.X=y;var v=Vd(this);if(this.o=y==200,Pc(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var G=A;break t}}G=null}if(h=G)yi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,h);else{this.o=!1,this.m=3,Rt(12),bn(this),kn(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<v.length;)if(ct=Uc(this,v),ct==Ht){Ie==4&&(this.m=4,Rt(14),h=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==xt){this.m=4,Rt(15),yi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else yi(this.i,this.l,ct,null),Ti(this,ct);if(Lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||v.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)yi(this.i,this.l,v,"[Invalid Chunked Response]"),bn(this),kn(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ul(ne),ne.P=!0,Rt(11))}}else yi(this.i,this.l,v,null),Ti(this,v);Ie==4&&bn(this),this.o&&!this.K&&(Ie==4?Qc(this.j,this):(this.o=!1,vi(this)))}else Qi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),bn(this),kn(this)}}}catch{}};function Vd(h){if(!Lc(h))return h.g.la();const y=Xt(h.g);if(y==="")return"";let v="";const A=y.length,z=ni(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bn(h),kn(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<A;G++)h.h.h=!0,v+=h.h.i.decode(y[G],{stream:!(z&&G==A-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Lc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Uc(h,y){var v=h.C,A=y.indexOf(`
`,v);return A==-1?Ht:(v=Number(y.substring(v,A)),isNaN(v)?xt:(A+=1,A+v>y.length?Ht:(y=y.slice(A,A+v),h.C=A+v,y)))}Zn.prototype.cancel=function(){this.K=!0,bn(this)};function vi(h){h.T=Date.now()+h.H,za(h,h.H)}function za(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pi(p(h.aa,h),y)}function Ei(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vr(this.i,this.B),this.M!=2&&(mi(),Rt(17)),bn(this),this.m=2,kn(this)):za(this,this.T-h)};function kn(h){h.j.I==0||h.K||Qc(h.j,h)}function bn(h){Ei(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ti(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ai(v.h,h))){if(!h.L&&Ai(v.h,h)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ya(v),Ds(v);else break e;qr(v),Rt(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=pi(p(v.Va,v),6e3));bi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ci(v,11)}else if((h.L||v.g==h)&&Ya(v),!C(y))for(z=v.Ba.g.parse(y),y=0;y<z.length;y++){let He=z[y];const ct=He[0];if(!(ct<=v.K))if(v.K=ct,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const jn=He[3];jn!=null&&(v.ka=jn,v.j.info("VER="+v.ka));const Ni=He[4];Ni!=null&&(v.za=Ni,v.j.info("SVER="+v.za));const ii=He[5];ii!=null&&typeof ii=="number"&&ii>0&&(A=1.5*ii,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const si=h.g;if(si){const Fr=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fr){var G=A.h;G.g||Fr.indexOf("spdy")==-1&&Fr.indexOf("quic")==-1&&Fr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Il(G,G.h),G.h=null))}if(A.G){const Xa=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(A.wa=Xa,Xe(A.J,A.G,Xa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ne=h;if(A.na=$c(A,A.L?A.ba:null,A.W),ne.L){Rl(A.h,ne);var Ie=ne,Et=A.O;Et&&(Ie.H=Et),Ie.D&&(Ei(Ie),vi(Ie)),A.g=ne}else Gc(A);v.i.length>0&&xi(v)}else He[0]!="stop"&&He[0]!="close"||Ci(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ci(v,7):kl(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}mi(4)}catch{}}var Ct=class{constructor(h,y){this.g=h,this.map=y}};function Sl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function bi(h){return h.h?1:h.g?h.g.size:0}function Ai(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Il(h,y){h.g?h.g.add(y):h.h=y}function Rl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Sl.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return P(h.i)}var jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const A=h[v].indexOf("=");let z,G=null;A>=0?(z=h[v].substring(0,A),G=h[v].substring(A+1)):z=h[v],y(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function An(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof An?(this.l=h.l,Gt(this,h.j),this.o=h.o,this.g=h.g,Ss(this,h.u),this.h=h.h,Cl(this,Fc(h.i)),this.m=h.m):h&&(y=String(h).match(jc))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Si(y[2]||""),this.g=Si(y[3]||"",!0),Ss(this,y[4]),this.h=Si(y[5]||"",!0),Cl(this,y[6]||"",!0),this.m=Si(y[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}An.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(kr(y,qa,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(kr(y,qa,!0),"@"),h.push(Gi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(kr(v,v.charAt(0)=="/"?Nl:zc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",kr(v,Bc)),h.join("")},An.prototype.resolve=function(h){const y=Nt(this);let v=!!h.j;v?Gt(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var A=h.h;if(v)Ss(y,h.u);else if(v=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=y.h.lastIndexOf("/");z!=-1&&(A=y.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let ne=0;ne<z.length;){const Ie=z[ne++];Ie=="."?A&&ne==z.length&&G.push(""):Ie==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&ne==z.length&&G.push("")):(G.push(Ie),A=!0)}A=G.join("/")}else A=z}return v?y.h=A:v=h.i.toString()!=="",v?Cl(y,Fc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function Nt(h){return new An(h)}function Gt(h,y,v){h.j=v?Si(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ss(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Cl(h,y,v){y instanceof Is?(h.i=y,Ha(h.i,h.l)):(v||(y=kr(y,ws)),h.i=new Is(y,h.l))}function Xe(h,y,v){h.i.set(y,v)}function Pr(h){return Xe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Si(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function kr(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,zc=/[#\?:]/g,Nl=/[#\?]/g,ws=/[#\?@]/g,Bc=/#/g;function Is(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ba(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Is.prototype,r.add=function(h,y){dn(this),this.i=null,h=Rs(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function qc(h,y){dn(h),y=Rs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Dl(h,y){return dn(h),y=Rs(h,y),h.g.has(y)}r.forEach=function(h,y){dn(this),this.g.forEach(function(v,A){v.forEach(function(z){h.call(y,z,A,this)},this)},this)};function Vl(h,y){dn(h);let v=[];if(typeof y=="string")Dl(h,y)&&(v=v.concat(h.g.get(Rs(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return dn(this),this.i=null,h=Rs(this,h),Dl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Vl(this,h),h.length>0?String(h[0]):y):y};function Fa(h,y,v){qc(h,y),v.length>0&&(h.i=null,h.g.set(Rs(h,y),P(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const z=Gi(v);v=Vl(this,v);for(let G=0;G<v.length;G++){let ne=z;v[G]!==""&&(ne+="="+Gi(v[G])),h.push(ne)}}return this.i=h.join("&")};function Fc(h){const y=new Is;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Rs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ha(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(v,A){const z=A.toLowerCase();A!=z&&(qc(this,A),Fa(this,z,v))},h)),h.j=y}function ei(h,y){const v=new Jn;if(c.Image){const A=new Image;A.onload=E(Ln,v,"TestLoadImage: loaded",!0,y,A),A.onerror=E(Ln,v,"TestLoadImage: error",!1,y,A),A.onabort=E(Ln,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(Ln,v,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Ol(h,y){const v=new Jn,A=new AbortController,z=setTimeout(()=>{A.abort(),Ln(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(G=>{clearTimeout(z),G.ok?Ln(v,"TestPingServer: ok",!0,y):Ln(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Ln(v,"TestPingServer: error",!1,y)})}function Ln(h,y,v,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(v)}catch{}}function xs(){this.g=new Nc}function wi(h){this.i=h.Sb||null,this.h=h.ab||!1}T(wi,Dc),wi.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(h,y){It.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Lr,It),r=Lr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ti(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ga(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ga(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Cs(this):ti(this),this.readyState==3&&Ga(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Cs(this))},r.Na=function(h){this.g&&(this.response=h,Cs(this))},r.ga=function(){this.g&&Cs(this)};function Cs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ti(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ti(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let y="";return Be(h,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function Ur(h,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Un(v),typeof h=="string"?v!=null&&Gi(v):Xe(h,y,v))}function tt(h){It.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(tt,It);var Ii=/^https?$/i,Ml=["POST","PUT"];r=tt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Al.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){jr(this,G);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)v.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())v.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),z=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Ml,y,void 0)>=0)||A||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ne]of v)this.g.setRequestHeader(G,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){jr(this,G)}};function jr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Pl(h),Ki(h)}function Pl(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),Ki(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},r.Xa=function(){zr(this)};function zr(h){if(h.h&&typeof u<"u"){if(h.v&&ni(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),ni(h)==4){h.h=!1;try{const G=h.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=G===0){let ne=String(h.D).match(jc)[1]||null;!ne&&c.self&&c.self.location&&(ne=c.self.location.protocol.slice(0,-1)),A=!Ii.test(ne?ne.toLowerCase():"")}v=A}if(v)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var z=ni(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",Pl(h)}}finally{Ki(h)}}}}function Ki(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||jt(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ni(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Cd(y)}};function Xt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(h){const y={};h=(h.g&&ni(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(C(h[A]))continue;var v=kc(h[A]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[z]||[];y[z]=G,G.push(v)}Ye(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Ns(h){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ri("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ri("baseRetryDelayMs",5e3,h),this.Za=Ri("retryDelaySeedMs",1e4,h),this.Ta=Ri("forwardChannelMaxRetries",2,h),this.va=Ri("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Sl(h&&h.concurrentRequestLimit),this.Ba=new xs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ns.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,A){Rt(0),this.W=h,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=$c(this,null,this.W),xi(this)};function kl(h){if(Ka(h),h.I==3){var y=h.V++,v=Nt(h.J);if(Xe(v,"SID",h.M),Xe(v,"RID",y),Xe(v,"TYPE","terminate"),Br(h,v),y=new Zn(h,h.j,y),y.M=2,y.A=Pr(Nt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Jc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),vi(y)}Xc(h)}function Ds(h){h.g&&(Ul(h),h.g.cancel(),h.g=null)}function Ka(h){Ds(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ya(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function xi(h){if(!wl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Te||w(),ge||(Te(),ge=!0),S.add(y,h),h.D=0}}function Qa(h,y){return bi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pi(p(h.Ea,h,y),Yc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new Zn(this,this.j,h);let G=this.o;if(this.U&&(G?(G=M(G),ae(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Hc(this,z,y),v=Nt(this.J),Xe(v,"RID",h),Xe(v,"CVER",22),this.G&&Xe(v,"X-HTTP-Session-Id",this.G),Br(this,v),G&&(this.R?y="headers="+Gi(Un(G))+"&"+y:this.u&&Ur(v,this.u,G)),Il(this.h,z),this.Ra&&Xe(v,"TYPE","init"),this.S?(Xe(v,"$req",y),Xe(v,"SID","null"),z.U=!0,_i(z,v,null)):_i(z,v,y),this.I=2}}else this.I==3&&(h?Ll(this,h):this.i.length==0||wl(this.h)||Ll(this))};function Ll(h,y){var v;y?v=y.l:v=h.V++;const A=Nt(h.J);Xe(A,"SID",h.M),Xe(A,"RID",v),Xe(A,"AID",h.K),Br(h,A),h.u&&h.o&&Ur(A,h.u,h.o),v=new Zn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Hc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Il(h.h,v),_i(v,A,y)}function Br(h,y){h.H&&Be(h.H,function(v,A){Xe(y,A,v)}),h.l&&Be({},function(v,A){Xe(y,A,v)})}function Hc(h,y,v){v=Math.min(h.i.length,v);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var z=h.i;let Ie=-1;for(;;){const Et=["count="+v];Ie==-1?v>0?(Ie=z[0].g,Et.push("ofs="+Ie)):Ie=0:Et.push("ofs="+Ie);let He=!0;for(let ct=0;ct<v;ct++){var G=z[ct].g;const jn=z[ct].map;if(G-=Ie,G<0)Ie=Math.max(0,z[ct].g-100),He=!1;else try{G="req"+G+"_"||"";try{var ne=jn instanceof Map?jn:Object.entries(jn);for(const[Ni,ii]of ne){let si=ii;m(ii)&&(si=As(ii)),Et.push(G+Ni+"="+encodeURIComponent(si))}}catch(Ni){throw Et.push(G+"type="+encodeURIComponent("_badmap")),Ni}}catch{A&&A(jn)}}if(He){ne=Et.join("&");break e}}ne=void 0}return h=h.i.splice(0,v),y.G=h,ne}function Gc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Te||w(),ge||(Te(),ge=!0),S.add(y,h),h.A=0}}function qr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pi(p(h.Da,h),Yc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Kc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pi(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ds(this),Kc(this))};function Ul(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Kc(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Nt(h.na);Xe(y,"RID","rpc"),Xe(y,"SID",h.M),Xe(y,"AID",h.K),Xe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xe(y,"TO",h.ia),Xe(y,"TYPE","xmlhttp"),Br(h,y),h.u&&h.o&&Ur(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Pr(Nt(y)),v.u=null,v.R=!0,ja(v,h)}r.Va=function(){this.C!=null&&(this.C=null,Ds(this),qr(this),Rt(19))};function Ya(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Qc(h,y){var v=null;if(h.g==y){Ya(h),Ul(h),h.g=null;var A=2}else if(Ai(h.h,y))v=y.G,Rl(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var z=h.D;A=Ua(),jt(A,new gi(A,v)),xi(h)}else Gc(h);else if(z=y.m,z==3||z==0&&y.X>0||!(A==1&&Qa(h,y)||A==2&&qr(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Ci(h,5);break;case 4:Ci(h,10);break;case 3:Ci(h,6);break;default:Ci(h,2)}}}function Yc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ci(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),A=h.Ua;const z=!A;A=new An(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gt(A,"https"),Pr(A),z?ei(A.toString(),v):Ol(A.toString(),v)}else Rt(2);h.I=0,h.l&&h.l.pa(y),Xc(h),Ka(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Xc(h){if(h.I=0,h.ja=[],h.l){const y=xl(h.h);(y.length!=0||h.i.length!=0)&&(H(h.ja,y),H(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function $c(h,y,v){var A=v instanceof An?Nt(v):new An(v);if(A.g!="")y&&(A.g=y+"."+A.g),Ss(A,A.u);else{var z=c.location;A=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const G=new An(null);A&&Gt(G,A),y&&(G.g=y),z&&Ss(G,z),v&&(G.h=v),A=G}return v=h.G,y=h.wa,v&&y&&Xe(A,v,y),Xe(A,"VER",h.ka),Br(h,A),A}function Jc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new tt(new wi({ab:v})):new tt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zc(){}r=Zc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Vs(){}Vs.prototype.g=function(h,y){return new un(h,y)};function un(h,y){It.call(this),this.g=new Ns(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Yi(this)}T(un,It),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){kl(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=As(h),h=v);y.i.push(new Ct(y.Ya++,h)),y.I==3&&xi(y)},un.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,un.Z.N.call(this)};function Wc(h){Yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Wc,Yt);function eh(){Pn.call(this),this.status=1}T(eh,Pn);function Yi(h){this.g=h}T(Yi,Zc),Yi.prototype.ra=function(){jt(this.g,"a")},Yi.prototype.qa=function(h){jt(this.g,new Wc(h))},Yi.prototype.pa=function(h){jt(this.g,new eh)},Yi.prototype.oa=function(){jt(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,LA=function(){return new Vs},kA=function(){return Ua()},PA=vt,rp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Or.NO_ERROR=0,Or.TIMEOUT=8,Or.HTTP_ERROR=6,_f=Or,bl.COMPLETE="complete",MA=bl,Vc.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",It.prototype.listen=It.prototype.J,Du=Vc,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,OA=tt}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});const iT="@firebase/firestore",sT="4.9.3";class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let hl="12.7.0";const Ta=new Pp("@firebase/firestore");function Vo(){return Ta.logLevel}function ee(r,...e){if(Ta.logLevel<=ke.DEBUG){const t=e.map(Kp);Ta.debug(`Firestore (${hl}): ${r}`,...t)}}function At(r,...e){if(Ta.logLevel<=ke.ERROR){const t=e.map(Kp);Ta.error(`Firestore (${hl}): ${r}`,...t)}}function $u(r,...e){if(Ta.logLevel<=ke.WARN){const t=e.map(Kp);Ta.warn(`Firestore (${hl}): ${r}`,...t)}}function Kp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function le(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,UA(r,s,t)}function UA(r,e,t){let s=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw At(s),new Error(s)}function me(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||UA(e,o,s)}function fe(r,e){return r}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends vs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class HN{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Bi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Bi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(me(typeof s.accessToken=="string",31837,{l:s}),new qN(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class GN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new GN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);const s=u=>{u.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Qp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=YN(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Ae(r,e){return r<e?-1:r>e?1:0}function ap(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return jg(o)===jg(u)?Ae(o,u):jg(o)?1:-1}return Ae(r.length,e.length)}const XN=55296,$N=57343;function jg(r){const e=r.charCodeAt(0);return e>=XN&&e<=$N}function Go(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}function jA(r){return r+"\0"}const aT="__name__";class Pi{constructor(e,t,s){t===void 0?t=0:t>e.length&&le(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&le(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Pi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ae(e.length,t.length)}static compareSegments(e,t){const s=Pi.isNumericId(e),o=Pi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):ap(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class Ke extends Pi{construct(e,t,s){return new Ke(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const JN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Pi{construct(e,t,s){return new mt(e,t,s)}static isValidIdentifier(e){return JN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aT}static keyField(){return new mt([aT])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new te(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new te(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new te(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new te(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(t)}static emptyPath(){return new mt([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ke.fromString(e))}static fromName(e){return new ie(Ke.fromString(e).popFirst(5))}static empty(){return new ie(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ke(e.slice()))}}function zA(r,e,t){if(!t)throw new te(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ZN(r,e,t,s){if(e===!0&&s===!0)throw new te(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function oT(r){if(!ie.isDocumentKey(r))throw new te(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function lT(r){if(ie.isDocumentKey(r))throw new te(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function BA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ad(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":le(12329,{type:typeof r})}function fi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new te(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ad(r);throw new te(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function pc(r,e){if(!BA(r))throw new te(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new te(Q.INVALID_ARGUMENT,t);return!0}const uT=-62135596800,cT=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*cT);return new Ze(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uT)throw new te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cT}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pc(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:kt("string",Ze._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ze(0,0))}static max(){return new ye(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ko=-1;class Lf{constructor(e,t,s,o){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=o}}function op(r){return r.fields.find((e=>e.kind===2))}function oa(r){return r.fields.filter((e=>e.kind!==2))}Lf.UNKNOWN_ID=-1;class vf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ju{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ju(0,Mn.min())}}function qA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ye.fromTimestamp(s===1e9?new Ze(t+1,0):new Ze(t,s));return new Mn(o,ie.empty(),e)}function FA(r){return new Mn(r.readTime,r.key,Ko)}class Mn{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Mn(ye.min(),ie.empty(),Ko)}static max(){return new Mn(ye.max(),ie.empty(),Ko)}}function Yp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(r.documentKey,e.documentKey),t!==0?t:Ae(r.largestBatchId,e.largestBatchId))}const HA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ar(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==HA)throw r;ee("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,s)=>{t(e)}))}static reject(e){return new j(((t,s)=>{s(e)}))}static waitFor(e){return new j(((t,s)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(g=>s(g)))})),c=!0,u===o&&t()}))}static or(e){let t=j.resolve(!1);for(const s of e)t=t.next((o=>o?j.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new j(((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;t(e[p]).next((E=>{c[p]=E,++m,m===u&&s(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new j(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}const Dn="SimpleDb";class od{static open(e,t,s,o){try{return new od(t,e.transaction(o,s))}catch(u){throw new Uu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Bi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Uu(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const o=Xp(s.target.error);this.S.reject(new Uu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new eD(t)}}class gr{static delete(e){return ee(Dn,"Removing database:",e),ua(jb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Kb())return!1;if(gr.F())return!0;const e=qt(),t=gr.M(e),s=0<t&&t<10,o=KA(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,gr.M(qt())===12.2&&At("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Dn,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{s(new Uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?s(new te(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?s(new te(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):s(new Uu(e,c))},o.onupgradeneeded=u=>{ee(Dn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ee(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=od.open(this.db,e,u?"readonly":"readwrite",s),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),j.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(ee(Dn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function KA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class WN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ua(this.U.delete())}}class Uu extends te{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sr(r){return r.name==="IndexedDbTransactionError"}class eD{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(ee(Dn,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(ee(Dn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ua(s)}add(e){return ee(Dn,"ADD",this.store.name,e,e),ua(this.store.add(e))}get(e){return ua(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Dn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Dn,"DELETE",this.store.name,e),ua(this.store.delete(e))}count(){return ee(Dn,"COUNT",this.store.name),ua(this.store.count())}J(e,t){const s=this.options(e,t),o=s.index?this.store.index(s.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(s.range);return new j(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(s),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new j(((o,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){ee(Dn,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const o=this.cursor(s);return this.H(o,((u,c,m)=>m.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const o=this.cursor(s);return this.H(o,t)}te(e){const t=this.cursor({});return new j(((s,o)=>{t.onerror=u=>{const c=Xp(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():s()})):s()}}))}H(e,t){const s=[];return new j(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new WN(m),p=t(m.primaryKey,m.value,g);if(p instanceof j){const E=p.catch((T=>(g.done(),j.reject(T))));s.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>j.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ua(r){return new j(((e,t)=>{r.onsuccess=s=>{const o=s.target.result;e(o)},r.onerror=s=>{const o=Xp(s.target.error);t(o)}}))}let hT=!1;function Xp(r){const e=gr.M(qt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hT||(hT=!0,setTimeout((()=>{throw s}),0)),s}}return r}const ju="IndexBackfiller";class tD{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(ju,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ee(ju,`Documents written: ${t}`)}catch(t){Sr(t)?ee(ju,"Ignoring IndexedDB error during index backfill: ",t):await Ar(t)}await this.re(6e4)}))}}class nD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let o=t,u=!0;return j.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!s.has(c))return ee(ju,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,s.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,s).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ee(ju,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((o,u)=>{const c=FA(u);Yp(c,s)>0&&(s=c)})),new Mn(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vn.ce=-1;const ma=-1;function ld(r){return r==null}function Zu(r){return r===0&&1/r==-1/0}function QA(r){return typeof r=="number"&&Number.isInteger(r)&&!Zu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Uf="";function on(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=fT(e)),e=iD(r.get(t),e);return fT(e)}function iD(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case Uf:t+="";break;default:t+=u}}return t}function fT(r){return r+Uf+""}function Li(r){const e=r.length;if(me(e>=2,64408,{path:r}),e===2)return me(r.charAt(0)===Uf&&r.charAt(1)==="",56145,{path:r}),Ke.emptyPath();const t=e-2,s=[];let o="";for(let u=0;u<e;){const c=r.indexOf(Uf,u);switch((c<0||c>t)&&le(50515,{path:r}),r.charAt(c+1)){case"":const m=r.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),s.push(g);break;case"":o+=r.substring(u,c),o+="\0";break;case"":o+=r.substring(u,c+1);break;default:le(61167,{path:r})}u=c+2}return new Ke(s)}const la="remoteDocuments",yc="owner",Io="owner",Wu="mutationQueues",sD="userId",li="mutations",dT="batchId",da="userMutationsIndex",mT=["userId","batchId"];function Ef(r,e){return[r,on(e)]}function YA(r,e,t){return[r,on(e),t]}const rD={},Qo="documentMutations",jf="remoteDocumentsV14",aD=["prefixPath","collectionGroup","readTime","documentId"],Tf="documentKeyIndex",oD=["prefixPath","collectionGroup","documentId"],XA="collectionGroupIndex",lD=["collectionGroup","readTime","prefixPath","documentId"],ec="remoteDocumentGlobal",lp="remoteDocumentGlobalKey",Yo="targets",$A="queryTargetsIndex",uD=["canonicalId","targetId"],Xo="targetDocuments",cD=["targetId","path"],$p="documentTargetsIndex",hD=["path","targetId"],zf="targetGlobalKey",ga="targetGlobal",tc="collectionParents",fD=["collectionId","parent"],$o="clientMetadata",dD="clientId",ud="bundles",mD="bundleId",cd="namedQueries",gD="name",Jp="indexConfiguration",pD="indexId",up="collectionGroupIndex",yD="collectionGroup",zu="indexState",_D=["indexId","uid"],JA="sequenceNumberIndex",vD=["uid","sequenceNumber"],Bu="indexEntries",ED=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZA="documentKeyIndex",TD=["indexId","uid","orderedDocumentKey"],hd="documentOverlays",bD=["userId","collectionPath","documentId"],cp="collectionPathOverlayIndex",AD=["userId","collectionPath","largestBatchId"],WA="collectionGroupOverlayIndex",SD=["userId","collectionGroup","largestBatchId"],Zp="globals",wD="name",eS=[Wu,li,Qo,la,Yo,yc,ga,Xo,$o,ec,tc,ud,cd],ID=[...eS,hd],tS=[Wu,li,Qo,jf,Yo,yc,ga,Xo,$o,ec,tc,ud,cd,hd],nS=tS,Wp=[...nS,Jp,zu,Bu],RD=Wp,iS=[...Wp,Zp],xD=iS;class hp extends GA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ft(r,e){const t=fe(r);return gr.O(t.le,e)}function gT(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function wr(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function sS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class at{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new of(this.root,e,this.comparator,!1)}getReverseIterator(){return new of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new of(this.root,e,this.comparator,!0)}}class of{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new en(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class et{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pT(this.data.getIterator())}getIteratorFrom(e){return new pT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class pT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ro(r){return r.hasNext()?r.getNext():void 0}class En{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new En([])}unionWith(e){let t=new et(mt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new rS("Invalid base64 string: "+u):u}})(e);return new wt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const CD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(r){if(me(!!r,39018),typeof r=="string"){let e=0;const t=CD.exec(r);if(me(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function _s(r){return typeof r=="string"?wt.fromBase64String(r):wt.fromUint8Array(r)}const aS="server_timestamp",oS="__type__",lS="__previous_value__",uS="__local_write_time__";function ey(r){return(r?.mapValue?.fields||{})[oS]?.stringValue===aS}function fd(r){const e=r.mapValue.fields[lS];return ey(e)?fd(e):e}function nc(r){const e=ys(r.mapValue.fields[uS].timestampValue);return new Ze(e.seconds,e.nanos)}class ND{constructor(e,t,s,o,u,c,m,g,p,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Bf="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}const ty="__type__",cS="__max__",cr={mapValue:{fields:{__type__:{stringValue:cS}}}},ny="__vector__",Jo="value",bf={nullValue:"NULL_VALUE"};function yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ey(r)?4:hS(r)?9007199254740991:dd(r)?10:11:le(28295,{value:r})}function Hi(r,e){if(r===e)return!0;const t=yr(r);if(t!==yr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return nc(r).isEqual(nc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=ys(o.timestampValue),m=ys(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return _s(o.bytesValue).isEqual(_s(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return ft(o.geoPointValue.latitude)===ft(u.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ft(o.integerValue)===ft(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=ft(o.doubleValue),m=ft(u.doubleValue);return c===m?Zu(c)===Zu(m):isNaN(c)&&isNaN(m)}return!1})(r,e);case 9:return Go(r.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(gT(c)!==gT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Hi(c[g],m[g])))return!1;return!0})(r,e);default:return le(52216,{left:r})}}function ic(r,e){return(r.values||[]).find((t=>Hi(t,e)))!==void 0}function _r(r,e){if(r===e)return 0;const t=yr(r),s=yr(e);if(t!==s)return Ae(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(r.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=ft(u.integerValue||u.doubleValue),g=ft(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return yT(r.timestampValue,e.timestampValue);case 4:return yT(nc(r),nc(e));case 5:return ap(r.stringValue,e.stringValue);case 6:return(function(u,c){const m=_s(u),g=_s(c);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Ae(m[p],g[p]);if(E!==0)return E}return Ae(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=Ae(ft(u.latitude),ft(c.latitude));return m!==0?m:Ae(ft(u.longitude),ft(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return _T(r.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Jo]?.arrayValue,E=g[Jo]?.arrayValue,T=Ae(p?.values?.length||0,E?.values?.length||0);return T!==0?T:_T(p,E)})(r.mapValue,e.mapValue);case 11:return(function(u,c){if(u===cr.mapValue&&c===cr.mapValue)return 0;if(u===cr.mapValue)return 1;if(c===cr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const I=ap(g[T],E[T]);if(I!==0)return I;const P=_r(m[g[T]],p[E[T]]);if(P!==0)return P}return Ae(g.length,E.length)})(r.mapValue,e.mapValue);default:throw le(23264,{he:t})}}function yT(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ae(r,e);const t=ys(r),s=ys(e),o=Ae(t.seconds,s.seconds);return o!==0?o:Ae(t.nanos,s.nanos)}function _T(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=_r(t[o],s[o]);if(u)return u}return Ae(t.length,s.length)}function Zo(r){return fp(r)}function fp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ys(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return _s(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ie.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=fp(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${fp(t.fields[c])}`;return o+"}"})(r.mapValue):le(61005,{value:r})}function Af(r){switch(yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fd(r);return e?16+Af(e):16;case 5:return 2*r.stringValue.length;case 6:return _s(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Af(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return wr(s.fields,((u,c)=>{o+=u.length+Af(c)})),o})(r.mapValue);default:throw le(13486,{value:r})}}function sc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function dp(r){return!!r&&"integerValue"in r}function rc(r){return!!r&&"arrayValue"in r}function vT(r){return!!r&&"nullValue"in r}function ET(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sf(r){return!!r&&"mapValue"in r}function dd(r){return(r?.mapValue?.fields||{})[ty]?.stringValue===ny}function qu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return wr(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=qu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(r.arrayValue.values[t]);return e}return{...r}}function hS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===cS}const fS={mapValue:{fields:{[ty]:{stringValue:ny},[Jo]:{arrayValue:{}}}}};function DD(r){return"nullValue"in r?bf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?sc(ba.empty(),ie.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?dd(r)?fS:{mapValue:{}}:le(35942,{value:r})}function VD(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?sc(ba.empty(),ie.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?fS:"mapValue"in r?dd(r)?{mapValue:{}}:cr:le(61959,{value:r})}function TT(r,e){const t=_r(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function bT(r,e){const t=_r(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=mt.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}c?s[m.lastSegment()]=qu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Sf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){wr(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new an(qu(this.value))}}function dS(r){const e=[];return wr(r.fields,((t,s)=>{const o=new mt([t]);if(Sf(s)){const u=dS(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new En(e)}class _t{constructor(e,t,s,o,u,c,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new _t(e,0,ye.min(),ye.min(),ye.min(),an.empty(),0)}static newFoundDocument(e,t,s,o){return new _t(e,1,t,ye.min(),s,o,0)}static newNoDocument(e,t){return new _t(e,2,t,ye.min(),ye.min(),an.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,ye.min(),ye.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wo{constructor(e,t){this.position=e,this.inclusive=t}}function AT(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],c=r.position[o];if(u.field.isKeyField()?s=ie.comparator(ie.fromName(c.referenceValue),t.key):s=_r(c,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function ST(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Hi(r.position[t],e.position[t]))return!1;return!0}class ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function OD(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class mS{}class Le extends mS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new MD(e,t,s):t==="array-contains"?new LD(e,s):t==="in"?new ES(e,s):t==="not-in"?new UD(e,s):t==="array-contains-any"?new jD(e,s):new Le(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new PD(e,s):new kD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_r(t,this.value)):t!==null&&yr(this.value)===yr(t)&&this.matchesComparison(_r(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends mS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new We(e,t)}matches(e){return el(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function el(r){return r.op==="and"}function mp(r){return r.op==="or"}function iy(r){return gS(r)&&el(r)}function gS(r){for(const e of r.filters)if(e instanceof We)return!1;return!0}function gp(r){if(r instanceof Le)return r.field.canonicalString()+r.op.toString()+Zo(r.value);if(iy(r))return r.filters.map((e=>gp(e))).join(",");{const e=r.filters.map((t=>gp(t))).join(",");return`${r.op}(${e})`}}function pS(r,e){return r instanceof Le?(function(s,o){return o instanceof Le&&s.op===o.op&&s.field.isEqual(o.field)&&Hi(s.value,o.value)})(r,e):r instanceof We?(function(s,o){return o instanceof We&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&pS(c,o.filters[m])),!0):!1})(r,e):void le(19439)}function yS(r,e){const t=r.filters.concat(e);return We.create(t,r.op)}function _S(r){return r instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(r):r instanceof We?(function(t){return t.op.toString()+" {"+t.getFilters().map(_S).join(" ,")+"}"})(r):"Filter"}class MD extends Le{constructor(e,t,s){super(e,t,s),this.key=ie.fromName(s.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class PD extends Le{constructor(e,t){super(e,"in",t),this.keys=vS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kD extends Le{constructor(e,t){super(e,"not-in",t),this.keys=vS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vS(r,e){return(e.arrayValue?.values||[]).map((t=>ie.fromName(t.referenceValue)))}class LD extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rc(t)&&ic(t.arrayValue,this.value)}}class ES extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ic(this.value.arrayValue,t)}}class UD extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ic(this.value.arrayValue,t)}}class jD extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ic(this.value.arrayValue,s)))}}class zD{constructor(e,t=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function pp(r,e=null,t=[],s=[],o=null,u=null,c=null){return new zD(r,e,t,s,o,u,c)}function Aa(r){const e=fe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>gp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Zo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Zo(s))).join(",")),e.Te=t}return e.Te}function _c(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!OD(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!pS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ST(r.startAt,e.startAt)&&ST(r.endAt,e.endAt)}function qf(r){return ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Ff(r,e){return r.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function wT(r,e,t){let s=bf,o=!0;for(const u of Ff(r,e)){let c=bf,m=!0;switch(u.op){case"<":case"<=":c=DD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=bf}TT({value:s,inclusive:o},{value:c,inclusive:m})<0&&(s=c,o=m)}if(t!==null){for(let u=0;u<r.orderBy.length;++u)if(r.orderBy[u].field.isEqual(e)){const c=t.position[u];TT({value:s,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(s=c,o=t.inclusive);break}}return{value:s,inclusive:o}}function IT(r,e,t){let s=cr,o=!0;for(const u of Ff(r,e)){let c=cr,m=!0;switch(u.op){case">=":case">":c=VD(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=cr}bT({value:s,inclusive:o},{value:c,inclusive:m})>0&&(s=c,o=m)}if(t!==null){for(let u=0;u<r.orderBy.length;++u)if(r.orderBy[u].field.isEqual(e)){const c=t.position[u];bT({value:s,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(s=c,o=t.inclusive);break}}return{value:s,inclusive:o}}class fl{constructor(e,t=null,s=[],o=[],u=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TS(r,e,t,s,o,u,c,m){return new fl(r,e,t,s,o,u,c,m)}function md(r){return new fl(r)}function RT(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function bS(r){return r.collectionGroup!==null}function Fu(r){const e=fe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new et(mt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new ac(u,s))})),t.has(mt.keyField().canonicalString())||e.Ie.push(new ac(mt.keyField(),s))}return e.Ie}function On(r){const e=fe(r);return e.Ee||(e.Ee=BD(e,Fu(r))),e.Ee}function BD(r,e){if(r.limitType==="F")return pp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ac(o.field,u)}));const t=r.endAt?new Wo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wo(r.startAt.position,r.startAt.inclusive):null;return pp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function yp(r,e){const t=r.filters.concat([e]);return new fl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function _p(r,e,t){return new fl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function gd(r,e){return _c(On(r),On(e))&&r.limitType===e.limitType}function AS(r){return`${Aa(On(r))}|lt:${r.limitType}`}function Oo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>_S(o))).join(", ")}]`),ld(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Zo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Zo(o))).join(",")),`Target(${s})`})(On(r))}; limitType=${r.limitType})`}function vc(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ie.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Fu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,g){const p=AT(c,m,g);return c.inclusive?p<=0:p<0})(s.startAt,Fu(s),o)||s.endAt&&!(function(c,m,g){const p=AT(c,m,g);return c.inclusive?p>=0:p>0})(s.endAt,Fu(s),o))})(r,e)}function SS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function wS(r){return(e,t)=>{let s=!1;for(const o of Fu(r)){const u=qD(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function qD(r,e,t){const s=r.field.isKeyField()?ie.comparator(e.key,t.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?_r(g,p):le(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return le(19790,{direction:r.dir})}}class Es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return sS(this.inner)}size(){return this.innerSize}}const FD=new at(ie.comparator);function Vn(){return FD}const IS=new at(ie.comparator);function Vu(...r){let e=IS;for(const t of r)e=e.insert(t.key,t);return e}function RS(r){let e=IS;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ui(){return Hu()}function xS(){return Hu()}function Hu(){return new Es((r=>r.toString()),((r,e)=>r.isEqual(e)))}const HD=new at(ie.comparator),GD=new et(ie.comparator);function De(...r){let e=GD;for(const t of r)e=e.add(t);return e}const KD=new et(Ae);function sy(){return KD}function ry(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function CS(r){return{integerValue:""+r}}function NS(r,e){return QA(e)?CS(e):ry(r,e)}class pd{constructor(){this._=void 0}}function QD(r,e,t){return r instanceof tl?(function(o,u){const c={fields:{[oS]:{stringValue:aS},[uS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ey(u)&&(u=fd(u)),u&&(c.fields[lS]=u),{mapValue:c}})(t,e):r instanceof Sa?VS(r,e):r instanceof wa?OS(r,e):(function(o,u){const c=DS(o,u),m=xT(c)+xT(o.Ae);return dp(c)&&dp(o.Ae)?CS(m):ry(o.serializer,m)})(r,e)}function YD(r,e,t){return r instanceof Sa?VS(r,e):r instanceof wa?OS(r,e):t}function DS(r,e){return r instanceof nl?(function(s){return dp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class tl extends pd{}class Sa extends pd{constructor(e){super(),this.elements=e}}function VS(r,e){const t=MS(e);for(const s of r.elements)t.some((o=>Hi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class wa extends pd{constructor(e){super(),this.elements=e}}function OS(r,e){let t=MS(e);for(const s of r.elements)t=t.filter((o=>!Hi(o,s)));return{arrayValue:{values:t}}}class nl extends pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xT(r){return ft(r.integerValue||r.doubleValue)}function MS(r){return rc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Ec{constructor(e,t){this.field=e,this.transform=t}}function XD(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Sa&&o instanceof Sa||s instanceof wa&&o instanceof wa?Go(s.elements,o.elements,Hi):s instanceof nl&&o instanceof nl?Hi(s.Ae,o.Ae):s instanceof tl&&o instanceof tl})(r.transform,e.transform)}class $D{constructor(e,t){this.version=e,this.transformResults=t}}class Bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class yd{}function PS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Tc(r.key,Bt.none()):new dl(r.key,r.data,Bt.none());{const t=r.data,s=an.empty();let o=new et(mt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new Ts(r.key,s,new En(o.toArray()),Bt.none())}}function JD(r,e,t){r instanceof dl?(function(o,u,c){const m=o.value.clone(),g=NT(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ts?(function(o,u,c){if(!wf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=NT(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(kS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Gu(r,e,t,s){return r instanceof dl?(function(u,c,m,g){if(!wf(u.precondition,c))return m;const p=u.value.clone(),E=DT(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ts?(function(u,c,m,g){if(!wf(u.precondition,c))return m;const p=DT(u.fieldTransforms,g,c),E=c.data;return E.setAll(kS(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,t,s):(function(u,c,m){return wf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(r,e,t)}function ZD(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=DS(s.transform,o||null);u!=null&&(t===null&&(t=an.empty()),t.set(s.field,u))}return t||null}function CT(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Go(s,o,((u,c)=>XD(u,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class dl extends yd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends yd{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function kS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function NT(r,e,t){const s=new Map;me(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const u=r[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,YD(c,m,t[o]))}return s}function DT(r,e,t){const s=new Map;for(const o of r){const u=o.transform,c=t.data.field(o.field);s.set(o.field,QD(u,c,e))}return s}class Tc extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LS extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ay{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&JD(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Gu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Gu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=xS();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const g=PS(c,m);g!==null&&s.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(ye.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,((t,s)=>CT(t,s)))&&Go(this.baseMutations,e.baseMutations,((t,s)=>CT(t,s)))}}class oy{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){me(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return HD})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new oy(e,t,s,o)}}class ly{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WD{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pt,ze;function eV(r){switch(r){case Q.OK:return le(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return le(15467,{code:r})}}function US(r){if(r===void 0)return At("GRPC error has no .code"),Q.UNKNOWN;switch(r){case Pt.OK:return Q.OK;case Pt.CANCELLED:return Q.CANCELLED;case Pt.UNKNOWN:return Q.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return Q.INTERNAL;case Pt.UNAVAILABLE:return Q.UNAVAILABLE;case Pt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Pt.NOT_FOUND:return Q.NOT_FOUND;case Pt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Pt.ABORTED:return Q.ABORTED;case Pt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Pt.DATA_LOSS:return Q.DATA_LOSS;default:return le(39323,{code:r})}}(ze=Pt||(Pt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";function tV(){return new TextEncoder}const nV=new mr([4294967295,4294967295],0);function VT(r){const e=tV().encode(r),t=new VA;return t.update(e),new Uint8Array(t.digest())}function OT(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new mr([t,s],0),new mr([o,u],0)]}class uy{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ou(`Invalid padding: ${t}`);if(s<0)throw new Ou(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ou(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ou(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(mr.fromNumber(s)));return o.compare(nV)===1&&(o=new mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=VT(e),[s,o]=OT(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new uy(u,o,t);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=VT(e),[s,o]=OT(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bc{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new bc(ye.min(),o,new at(Ae),Vn(),De())}}class Ac{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ac(s,t,De(),De(),De())}}class If{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class jS{constructor(e,t){this.targetId=e,this.Ce=t}}class zS{constructor(e,t,s=wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class MT{constructor(){this.ve=0,this.Fe=PT(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),s=De();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:le(38017,{changeType:u})}})),new Ac(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=PT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vn(),this.Je=lf(),this.He=lf(),this.Ye=new at(Ae)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(qf(u))if(s===0){const c=new ie(u.path);this.et(t,c,_t.newNoDocument(c,ye.min()))}else me(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=_s(s).toUint8Array()}catch(g){if(g instanceof rS)return $u("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new uy(c,o,u)}catch(g){return $u(g instanceof Ou?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&qf(m.target)){const g=new ie(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,_t.newNoDocument(g,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let s=De();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new bc(e,t,this.Ye,this.je,s);return this.je=Vn(),this.Je=lf(),this.He=lf(),this.Ye=new at(Ae),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new MT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new et(Ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new et(Ae),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new MT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lf(){return new at(ie.comparator)}function PT(){return new at(ie.comparator)}const sV={asc:"ASCENDING",desc:"DESCENDING"},rV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aV={and:"AND",or:"OR"};class oV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vp(r,e){return r.useProto3Json||ld(e)?e:{value:e}}function il(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lV(r,e){return il(r,e.toTimestamp())}function hn(r){return me(!!r,49232),ye.fromTimestamp((function(t){const s=ys(t);return new Ze(s.seconds,s.nanos)})(r))}function cy(r,e){return Ep(r,e).canonicalString()}function Ep(r,e){const t=(function(o){return new Ke(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function qS(r){const e=Ke.fromString(r);return me(JS(e),10190,{key:e.toString()}),e}function Hf(r,e){return cy(r.databaseId,e.path)}function pa(r,e){const t=qS(e);if(t.get(1)!==r.databaseId.projectId)throw new te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new te(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ie(GS(t))}function FS(r,e){return cy(r.databaseId,e)}function HS(r){const e=qS(r);return e.length===4?Ke.emptyPath():GS(e)}function Tp(r){return new Ke(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function GS(r){return me(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function kT(r,e,t){return{name:Hf(r,e),fields:t.value.mapValue.fields}}function uV(r,e,t){const s=pa(r,e.name),o=hn(e.updateTime),u=e.createTime?hn(e.createTime):ye.min(),c=new an({mapValue:{fields:e.fields}}),m=_t.newFoundDocument(s,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function cV(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:le(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(me(E===void 0||typeof E=="string",58123),wt.fromBase64String(E||"")):(me(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),wt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?Q.UNKNOWN:US(p.code);return new te(E,p.message||"")})(c);t=new zS(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=pa(r,s.document.name),u=hn(s.document.updateTime),c=s.document.createTime?hn(s.document.createTime):ye.min(),m=new an({mapValue:{fields:s.document.fields}}),g=_t.newFoundDocument(o,u,c,m),p=s.targetIds||[],E=s.removedTargetIds||[];t=new If(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=pa(r,s.document),u=s.readTime?hn(s.readTime):ye.min(),c=_t.newNoDocument(o,u),m=s.removedTargetIds||[];t=new If([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=pa(r,s.document),u=s.removedTargetIds||[];t=new If([],u,o,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new WD(o,u),m=s.targetId;t=new jS(m,c)}}return t}function Gf(r,e){let t;if(e instanceof dl)t={update:kT(r,e.key,e.value)};else if(e instanceof Tc)t={delete:Hf(r,e.key)};else if(e instanceof Ts)t={update:kT(r,e.key,e.data),updateMask:pV(e.fieldMask)};else{if(!(e instanceof LS))return le(16599,{Vt:e.type});t={verify:Hf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof tl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof wa)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof nl)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw le(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:lV(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:le(27497)})(r,e.precondition)),t}function bp(r,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?Bt.updateTime(hn(u.updateTime)):u.exists!==void 0?Bt.exists(u.exists):Bt.none()})(e.currentDocument):Bt.none(),s=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)me(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new tl;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Sa(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new wa(E)}else"increment"in m?g=new nl(c,m.increment):le(16584,{proto:m});const p=mt.fromServerFormat(m.fieldPath);return new Ec(p,g)})(r,o))):[];if(e.update){e.update.name;const o=pa(r,e.update.name),u=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((E=>mt.fromServerFormat(E))))})(e.updateMask);return new Ts(o,u,c,t,s)}return new dl(o,u,t,s)}if(e.delete){const o=pa(r,e.delete);return new Tc(o,t)}if(e.verify){const o=pa(r,e.verify);return new LS(o,t)}return le(1463,{proto:e})}function hV(r,e){return r&&r.length>0?(me(e!==void 0,14353),r.map((t=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(ye.min())&&(c=hn(u)),new $D(c,o.transformResults||[])})(t,e)))):[]}function KS(r,e){return{documents:[FS(r,e.path)]}}function QS(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=FS(r,o);const u=(function(p){if(p.length!==0)return $S(We.create(p,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(I){return{field:Mo(I.field),direction:dV(I.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=vp(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function YS(r){let e=HS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){me(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(T){const I=XS(T);return I instanceof We&&iy(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((I=>(function(H){return new ac(Po(H.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(I)))})(t.orderBy));let m=null;t.limit&&(m=(function(T){let I;return I=typeof T=="object"?T.value:T,ld(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(T){const I=!!T.before,P=T.values||[];return new Wo(P,I)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const I=!T.before,P=T.values||[];return new Wo(P,I)})(t.endAt)),TS(e,o,c,u,m,"F",g,p)}function fV(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Po(t.unaryFilter.field);return Le.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(t.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Po(t.unaryFilter.field);return Le.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Po(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Le.create(Po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return We.create(t.compositeFilter.filters.map((s=>XS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return le(1026)}})(t.compositeFilter.op))})(r):le(30097,{filter:r})}function dV(r){return sV[r]}function mV(r){return rV[r]}function gV(r){return aV[r]}function Mo(r){return{fieldPath:r.canonicalString()}}function Po(r){return mt.fromServerFormat(r.fieldPath)}function $S(r){return r instanceof Le?(function(t){if(t.op==="=="){if(ET(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(vT(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ET(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(vT(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:mV(t.op),value:t.value}}})(r):r instanceof We?(function(t){const s=t.getFilters().map((o=>$S(o)));return s.length===1?s[0]:{compositeFilter:{op:gV(t.op),filters:s}}})(r):le(54877,{filter:r})}function pV(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,s,o,u=ye.min(),c=ye.min(),m=wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZS{constructor(e){this.yt=e}}function yV(r,e){let t;if(e.document)t=uV(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ie.fromSegments(e.noDocument.path),o=Ra(e.noDocument.readTime);t=_t.newNoDocument(s,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return le(56709);{const s=ie.fromSegments(e.unknownDocument.path),o=Ra(e.unknownDocument.version);t=_t.newUnknownDocument(s,o)}}return e.readTime&&t.setReadTime((function(o){const u=new Ze(o[0],o[1]);return ye.fromTimestamp(u)})(e.readTime)),t}function LT(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(u,c){return{name:Hf(u,c.key),fields:c.data.value.mapValue.fields,updateTime:il(u,c.version.toTimestamp()),createTime:il(u,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Ia(e.version)};else{if(!e.isUnknownDocument())return le(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Ia(e.version)}}return s}function Kf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ia(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ra(r){const e=new Ze(r.seconds,r.nanoseconds);return ye.fromTimestamp(e)}function ca(r,e){const t=(e.baseMutations||[]).map((u=>bp(r.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const s=e.mutations.map((u=>bp(r.yt,u))),o=Ze.fromMillis(e.localWriteTimeMs);return new ay(e.batchId,o,t,s)}function Mu(r){const e=Ra(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ra(r.lastLimboFreeSnapshotVersion):ye.min();let s;return s=(function(u){return u.documents!==void 0})(r.query)?(function(u){const c=u.documents.length;return me(c===1,1966,{count:c}),On(md(HS(u.documents[0])))})(r.query):(function(u){return On(YS(u))})(r.query),new fs(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,wt.fromBase64String(r.resumeToken))}function WS(r,e){const t=Ia(e.snapshotVersion),s=Ia(e.lastLimboFreeSnapshotVersion);let o;o=qf(e.target)?KS(r.yt,e.target):QS(r.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:o}}function e1(r){const e=YS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?_p(e,e.limit,"L"):e}function zg(r,e){return new ly(e.largestBatchId,bp(r.yt,e.overlayMutation))}function UT(r,e){const t=e.path.lastSegment();return[r,on(e.path.popLast()),t]}function jT(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ia(s.readTime),documentKey:on(s.documentKey.path),largestBatchId:s.largestBatchId}}class _V{getBundleMetadata(e,t){return zT(e).get(t).next((s=>{if(s)return(function(u){return{id:u.bundleId,createTime:Ra(u.createTime),version:u.version}})(s)}))}saveBundleMetadata(e,t){return zT(e).put((function(o){return{bundleId:o.id,createTime:Ia(hn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return BT(e).get(t).next((s=>{if(s)return(function(u){return{name:u.name,query:e1(u.bundledQuery),readTime:Ra(u.readTime)}})(s)}))}saveNamedQuery(e,t){return BT(e).put((function(o){return{name:o.name,readTime:Ia(hn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function zT(r){return Ft(r,ud)}function BT(r){return Ft(r,cd)}class _d{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new _d(e,s)}getOverlay(e,t){return Su(e).get(UT(this.userId,t)).next((s=>s?zg(this.serializer,s):null))}getOverlays(e,t){const s=Ui();return j.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){const o=[];return s.forEach(((u,c)=>{const m=new ly(t,c);o.push(this.St(e,m))})),j.waitFor(o)}removeOverlaysForBatchId(e,t,s){const o=new Set;t.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,s+1],!1,!0);u.push(Su(e).Z(cp,m))})),j.waitFor(u)}getOverlaysForCollection(e,t,s){const o=Ui(),u=on(t),c=IDBKeyRange.bound([this.userId,u,s],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Su(e).J(cp,c).next((m=>{for(const g of m){const p=zg(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(e,t,s,o){const u=Ui();let c;const m=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Su(e).ee({index:WA,range:m},((g,p,E)=>{const T=zg(this.serializer,p);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>u))}St(e,t){return Su(e).put((function(o,u,c){const[m,g,p]=UT(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Gf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Su(r){return Ft(r,hd)}class vV{bt(e){return Ft(e,Zp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t?.value;return s?wt.fromUint8Array(s):wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ha{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const s=ft(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Zu(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=ys(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_s(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?hS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):dd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):le(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const o of Object.keys(s))this.Ot(o,t),this.Ct(s[o],t)}kt(e,t){const s=e.fields||{};this.Ft(t,53);const o=Jo,u=s[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(u)),this.Ot(o,t),this.Ct(s[o],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const o of s)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),ie.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ha.Kt=new ha;const xo=255;function EV(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function qT(r){const e=64-(function(s){let o=0;for(let u=0;u<8;++u){const c=EV(255&s[u]);if(o+=c,c!==8)break}return o})(r);return Math.ceil(e/8)}class TV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),s=qT(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let o=t.length-s;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),s=qT(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let o=t.length-s;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(xo),this.sn(255)}_n(){this.an(xo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let o=1;o<t.length;++o)t[o]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===xo?(this.sn(xo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===xo?(this.an(xo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const o=new Uint8Array(s);o.set(this.buffer),this.buffer=o}}class bV{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class AV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wu{constructor(){this.cn=new TV,this.ln=new bV(this.cn),this.hn=new AV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class fa{constructor(e,t,s,o){this.Tn=e,this.In=t,this.En=s,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new fa(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:Rf(this.En),directionalValue:Rf(this.dn),orderedDocumentKey:Rf(t),documentKey:s.path.toArray()}}Vn(e,t,s){const o=this.Rn(e,t,s);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function nr(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=FT(r.En,e.En),t!==0?t:(t=FT(r.dn,e.dn),t!==0?t:ie.comparator(r.In,e.In)))}function FT(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(s!==0)return s}return r.length-e.length}function Rf(r){return Gb()?(function(t){let s="";for(let o=0;o<t.length;o++)s+=String.fromCharCode(t[o]);return s})(r):r}function HT(r){return typeof r!="string"?r:(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(r)}class GT{constructor(e){this.mn=new et(((t,s)=>mt.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(me(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=op(e);if(t!==void 0&&!this.wn(t))return!1;const s=oa(e);let o=new Set,u=0,c=0;for(;u<s.length&&this.wn(s[u]);++u)o=o.add(s[u].fieldPath.canonicalString());if(u===s.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=s[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<s.length;++u){const m=s[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let e=new et(mt.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new vf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new vf(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new vf(s.field,s.dir==="asc"?0:1)));return new Lf(Lf.UNKNOWN_ID,this.collectionId,t,Ju.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function t1(r){if(me(r instanceof Le||r instanceof We,20012),r instanceof Le){if(r instanceof ES){const t=r.value.arrayValue?.values?.map((s=>Le.create(r.field,"==",s)))||[];return We.create(t,"or")}return r}const e=r.filters.map((t=>t1(t)));return We.create(e,r.op)}function SV(r){if(r.getFilters().length===0)return[];const e=wp(t1(r));return me(n1(e),7391),Ap(e)||Sp(e)?[e]:e.getFilters()}function Ap(r){return r instanceof Le}function Sp(r){return r instanceof We&&iy(r)}function n1(r){return Ap(r)||Sp(r)||(function(t){if(t instanceof We&&mp(t)){for(const s of t.getFilters())if(!Ap(s)&&!Sp(s))return!1;return!0}return!1})(r)}function wp(r){if(me(r instanceof Le||r instanceof We,34018),r instanceof Le)return r;if(r.filters.length===1)return wp(r.filters[0]);const e=r.filters.map((s=>wp(s)));let t=We.create(e,r.op);return t=Qf(t),n1(t)?t:(me(t instanceof We,64498),me(el(t),40251),me(t.filters.length>1,57927),t.filters.reduce(((s,o)=>hy(s,o))))}function hy(r,e){let t;return me(r instanceof Le||r instanceof We,38388),me(e instanceof Le||e instanceof We,25473),t=r instanceof Le?e instanceof Le?(function(o,u){return We.create([o,u],"and")})(r,e):KT(r,e):e instanceof Le?KT(e,r):(function(o,u){if(me(o.filters.length>0&&u.filters.length>0,48005),el(o)&&el(u))return yS(o,u.getFilters());const c=mp(o)?o:u,m=mp(o)?u:o,g=c.filters.map((p=>hy(p,m)));return We.create(g,"or")})(r,e),Qf(t)}function KT(r,e){if(el(e))return yS(e,r.getFilters());{const t=e.filters.map((s=>hy(r,s)));return We.create(t,"or")}}function Qf(r){if(me(r instanceof Le||r instanceof We,11850),r instanceof Le)return r;const e=r.getFilters();if(e.length===1)return Qf(e[0]);if(gS(r))return r;const t=e.map((o=>Qf(o))),s=[];return t.forEach((o=>{o instanceof Le?s.push(o):o instanceof We&&(o.op===r.op?s.push(...o.filters):s.push(o))})),s.length===1?s[0]:We.create(s,r.op)}class wV{constructor(){this.Cn=new fy}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Mn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Mn.min())}updateCollectionGroup(e,t,s){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class fy{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new et(Ke.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new et(Ke.comparator)).toArray()}}const QT="IndexedDbIndexManager",uf=new Uint8Array(0);class IV{constructor(e,t){this.databaseId=t,this.vn=new fy,this.Fn=new Es((s=>Aa(s)),((s,o)=>_c(s,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const u={collectionId:s,parent:on(o)};return YT(e).put(u)}return j.resolve()}getCollectionParents(e,t){const s=[],o=IDBKeyRange.bound([t,""],[jA(t),""],!1,!0);return YT(e).J(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;s.push(Li(c.parent))}return s}))}addFieldIndex(e,t){const s=Iu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete o.indexId;const u=s.add(o);if(t.indexState){const c=No(e);return u.next((m=>{c.put(jT(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const s=Iu(e),o=No(e),u=Co(e);return s.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),s=Co(e),o=No(e);return t.Z().next((()=>s.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((o=>{if(o===0||o===1){const u=new GT(s).Dn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const s=Co(e);let o=!0;const u=new Map;return j.forEach(this.Mn(t),(c=>this.xn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=De();const m=[];return j.forEach(u,((g,p)=>{ee(QT,`Using index ${(function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map((Se=>`${Se.fieldPath}:${Se.kind}`)).join(",")}`})(g)} to execute ${Aa(t)}`);const E=(function(se,Se){const Te=op(Se);if(Te===void 0)return null;for(const ge of Ff(se,Te.fieldPath))switch(ge.op){case"array-contains-any":return ge.value.arrayValue.values||[];case"array-contains":return[ge.value]}return null})(p,g),T=(function(se,Se){const Te=new Map;for(const ge of oa(Se))for(const S of Ff(se,ge.fieldPath))switch(S.op){case"==":case"in":Te.set(ge.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return Te.set(ge.fieldPath.canonicalString(),S.value),Array.from(Te.values())}return null})(p,g),I=(function(se,Se){const Te=[];let ge=!0;for(const S of oa(Se)){const w=S.kind===0?wT(se,S.fieldPath,se.startAt):IT(se,S.fieldPath,se.startAt);Te.push(w.value),ge&&(ge=w.inclusive)}return new Wo(Te,ge)})(p,g),P=(function(se,Se){const Te=[];let ge=!0;for(const S of oa(Se)){const w=S.kind===0?IT(se,S.fieldPath,se.endAt):wT(se,S.fieldPath,se.endAt);Te.push(w.value),ge&&(ge=w.inclusive)}return new Wo(Te,ge)})(p,g),H=this.On(g,p,I),U=this.On(g,p,P),$=this.Nn(g,p,T),he=this.Bn(g.indexId,E,H,I.inclusive,U,P.inclusive,$);return j.forEach(he,(ce=>s.Y(ce,t.limit).next((se=>{se.forEach((Se=>{const Te=ie.fromSegments(Se.documentKey);c.has(Te)||(c=c.add(Te),m.push(Te))}))}))))})).next((()=>m))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=SV(We.create(e.filters,"and")).map((s=>pp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,o,u,c,m){const g=(t!=null?t.length:1)*Math.max(s.length,u.length),p=g/(t!=null?t.length:1),E=[];for(let T=0;T<g;++T){const I=t?this.Ln(t[T/p]):uf,P=this.kn(e,I,s[T%p],o),H=this.qn(e,I,u[T%p],c),U=m.map(($=>this.kn(e,I,$,!0)));E.push(...this.createRange(P,H,U))}return E}kn(e,t,s,o){const u=new fa(e,ie.empty(),t,s);return o?u:u.An()}qn(e,t,s,o){const u=new fa(e,ie.empty(),t,s);return o?u.An():u}xn(e,t){const s=new GT(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)s.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let s=2;const o=this.Mn(t);return j.forEach(o,(u=>this.xn(e,u).next((c=>{c?s!==0&&c.fields.length<(function(g){let p=new et(mt.comparator),E=!1;for(const T of g.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?E=!0:p=p.add(I.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)})(u)&&(s=1):s=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&s===2?1:s))}Qn(e,t){const s=new wu;for(const o of oa(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=s.Pn(o.kind);ha.Kt.Dt(u,c)}return s.un()}Ln(e){const t=new wu;return ha.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new wu;return ha.Kt.Dt(sc(this.databaseId,t),s.Pn((function(u){const c=oa(u);return c.length===0?0:c[c.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let o=[];o.push(new wu);let u=0;for(const c of oa(e)){const m=s[u++];for(const g of o)if(this.Un(t,c.fieldPath)&&rc(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);ha.Kt.Dt(m,p)}}return this.Wn(o)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const o=[...e],u=[];for(const c of s.arrayValue.values||[])for(const m of o){const g=new wu;g.seed(m.un()),ha.Kt.Dt(c,g.Pn(t.kind)),u.push(g)}return u}Un(e,t){return!!e.filters.find((s=>s instanceof Le&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=Iu(e),o=No(e);return(t?s.J(up,IDBKeyRange.bound(t,t)):s.J()).next((u=>{const c=[];return j.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,T){const I=T?new Ju(T.sequenceNumber,new Mn(Ra(T.readTime),new ie(Li(T.documentKey)),T.largestBatchId)):Ju.empty(),P=E.fields.map((([H,U])=>new vf(mt.fromServerFormat(H),U)));return new Lf(E.indexId,E.collectionGroup,P,I)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,o)=>{const u=s.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Ae(s.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const o=Iu(e),u=No(e);return this.Gn(e).next((c=>o.J(up,IDBKeyRange.bound(t,t)).next((m=>j.forEach(m,(g=>u.put(jT(g.indexId,this.uid,c,s))))))))}updateIndexEntries(e,t){const s=new Map;return j.forEach(t,((o,u)=>{const c=s.get(o.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(s.set(o.collectionGroup,m),j.forEach(m,(g=>this.zn(e,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?j.resolve():this.Jn(e,u,g,p,E)})))))))}))}Hn(e,t,s,o){return Co(e).put(o.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,o){return Co(e).delete(o.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const o=Co(e);let u=new et(nr);return o.ee({index:ZA,range:IDBKeyRange.only([s.indexId,this.uid,Rf(this.$n(s,t))])},((c,m)=>{u=u.add(new fa(s.indexId,t,HT(m.arrayValue),HT(m.directionalValue)))})).next((()=>u))}jn(e,t){let s=new et(nr);const o=this.Qn(t,e);if(o==null)return s;const u=op(t);if(u!=null){const c=e.data.field(u.fieldPath);if(rc(c))for(const m of c.arrayValue.values||[])s=s.add(new fa(t.indexId,e.key,this.Ln(m),o))}else s=s.add(new fa(t.indexId,e.key,uf,o));return s}Jn(e,t,s,o,u){ee(QT,"Updating index entries for document '%s'",t.key);const c=[];return(function(g,p,E,T,I){const P=g.getIterator(),H=p.getIterator();let U=Ro(P),$=Ro(H);for(;U||$;){let he=!1,ce=!1;if(U&&$){const se=E(U,$);se<0?ce=!0:se>0&&(he=!0)}else U!=null?ce=!0:he=!0;he?(T($),$=Ro(H)):ce?(I(U),U=Ro(P)):(U=Ro(P),$=Ro(H))}})(o,u,nr,(m=>{c.push(this.Hn(e,t,s,m))}),(m=>{c.push(this.Yn(e,t,s,m))})),j.waitFor(c)}Gn(e){let t=1;return No(e).ee({index:JA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((c,m)=>nr(c,m))).filter(((c,m,g)=>!m||nr(c,g[m-1])!==0));const o=[];o.push(e);for(const c of s){const m=nr(c,e),g=nr(c,t);if(m===0)o[0]=e.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,uf,ie.empty()),g=o[c+1].Vn(this.uid,uf,ie.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(e,t){return nr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XT)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(s=>this.xn(e,s).next((o=>o||le(44426))))).next(XT)}}function YT(r){return Ft(r,tc)}function Co(r){return Ft(r,Bu)}function Iu(r){return Ft(r,Jp)}function No(r){return Ft(r,zu)}function XT(r){me(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const o=r[s].indexState.offset;Yp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Mn(e.readTime,e.documentKey,t)}const $T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i1=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}function s1(r,e,t){const s=r.store(li),o=r.store(Qo),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const g=s.ee({range:c},((E,T,I)=>(m++,I.delete())));u.push(g.next((()=>{me(m===1,47070,{batchId:t.batchId})})));const p=[];for(const E of t.mutations){const T=YA(e,E.key.path,t.batchId);u.push(o.delete(T)),p.push(E.key)}return j.waitFor(u).next((()=>p))}function Yf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw le(14731);e=r.noDocument}return JSON.stringify(e).length}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(i1,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class vd{constructor(e,t,s,o){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=o,this.Xn={}}static wt(e,t,s,o){me(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new vd(u,t,s,o)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).ee({index:da,range:s},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,s,o){const u=ko(e),c=ir(e);return c.add({}).next((m=>{me(typeof m=="number",49019);const g=new ay(m,t,s,o),p=(function(P,H,U){const $=U.baseMutations.map((ce=>Gf(P.yt,ce))),he=U.mutations.map((ce=>Gf(P.yt,ce)));return{userId:H,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:$,mutations:he}})(this.serializer,this.userId,g),E=[];let T=new et(((I,P)=>Ae(I.canonicalString(),P.canonicalString())));for(const I of o){const P=YA(this.userId,I.key.path,m);T=T.add(I.key.path.popLast()),E.push(c.put(p)),E.push(u.put(P,rD))}return T.forEach((I=>{E.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),j.waitFor(E).next((()=>g))}))}lookupMutationBatch(e,t){return ir(e).get(t).next((s=>s?(me(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),ca(this.serializer,s)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const o=s.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=IDBKeyRange.lowerBound([this.userId,s]);let u=null;return ir(e).ee({index:da,range:o},((c,m,g)=>{m.userId===this.userId&&(me(m.batchId>=s,47524,{tr:s}),u=ca(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=ma;return ir(e).ee({index:da,range:t,reverse:!0},((o,u,c)=>{s=u.batchId,c.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ma],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).J(da,t).next((s=>s.map((o=>ca(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ef(this.userId,t.path),o=IDBKeyRange.lowerBound(s),u=[];return ko(e).ee({range:o},((c,m,g)=>{const[p,E,T]=c,I=Li(E);if(p===this.userId&&t.path.isEqual(I))return ir(e).get(T).next((P=>{if(!P)throw le(61480,{nr:c,batchId:T});me(P.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:P.userId,batchId:T}),u.push(ca(this.serializer,P))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new et(Ae);const o=[];return t.forEach((u=>{const c=Ef(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=ko(e).ee({range:m},((p,E,T)=>{const[I,P,H]=p,U=Li(P);I===this.userId&&u.path.isEqual(U)?s=s.add(H):T.done()}));o.push(g)})),j.waitFor(o).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1,u=Ef(this.userId,s),c=IDBKeyRange.lowerBound(u);let m=new et(Ae);return ko(e).ee({range:c},((g,p,E)=>{const[T,I,P]=g,H=Li(I);T===this.userId&&s.isPrefixOf(H)?H.length===o&&(m=m.add(P)):E.done()})).next((()=>this.rr(e,m)))}rr(e,t){const s=[],o=[];return t.forEach((u=>{o.push(ir(e).get(u).next((c=>{if(c===null)throw le(35274,{batchId:u});me(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),s.push(ca(this.serializer,c))})))})),j.waitFor(o).next((()=>s))}removeMutationBatch(e,t){return s1(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(s,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const s=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return ko(e).ee({range:s},((u,c,m)=>{if(u[0]===this.userId){const g=Li(u[1]);o.push(g)}else m.done()})).next((()=>{me(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return r1(e,this.userId,t)}_r(e){return a1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ma,lastStreamToken:""}))}}function r1(r,e,t){const s=Ef(e,t.path),o=s[1],u=IDBKeyRange.lowerBound(s);let c=!1;return ko(r).ee({range:u,X:!0},((m,g,p)=>{const[E,T,I]=m;E===e&&T===o&&(c=!0),p.done()})).next((()=>c))}function ir(r){return Ft(r,li)}function ko(r){return Ft(r,Qo)}function a1(r){return Ft(r,Wu)}class xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xa(0)}static cr(){return new xa(-1)}}class RV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new xa(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ye.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,s&&(o.lastRemoteSnapshotVersion=s.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Do(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(me(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let o=0;const u=[];return Do(e).ee(((c,m)=>{const g=Mu(m);g.sequenceNumber<=t&&s.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(e,g)))})).next((()=>j.waitFor(u))).next((()=>o))}forEachTarget(e,t){return Do(e).ee(((s,o)=>{const u=Mu(o);t(u)}))}lr(e){return JT(e).get(zf).next((t=>(me(t!==null,2888),t)))}hr(e,t){return JT(e).put(zf,t)}Pr(e,t){return Do(e).put(WS(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Aa(t),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let u=null;return Do(e).ee({range:o,index:$A},((c,m,g)=>{const p=Mu(m);_c(t,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(e,t,s){const o=[],u=ur(e);return t.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:s,path:m})),o.push(this.referenceDelegate.addReference(e,s,c))})),j.waitFor(o)}removeMatchingKeys(e,t,s){const o=ur(e);return j.forEach(t,(u=>{const c=on(u.path);return j.waitFor([o.delete([s,c]),this.referenceDelegate.removeReference(e,s,u)])}))}removeMatchingKeysForTargetId(e,t){const s=ur(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(o)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),o=ur(e);let u=De();return o.ee({range:s,X:!0},((c,m,g)=>{const p=Li(c[1]),E=new ie(p);u=u.add(E)})).next((()=>u))}containsKey(e,t){const s=on(t.path),o=IDBKeyRange.bound([s],[jA(s)],!1,!0);let u=0;return ur(e).ee({index:$p,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(e,t){return Do(e).get(t).next((s=>s?Mu(s):null))}}function Do(r){return Ft(r,Yo)}function JT(r){return Ft(r,ga)}function ur(r){return Ft(r,Xo)}const ZT="LruGarbageCollector",o1=1048576;function WT([r,e],[t,s]){const o=Ae(r,t);return o===0?Ae(e,s):o}class xV{constructor(e){this.Ir=e,this.buffer=new et(WT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();WT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class l1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(ZT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sr(t)?ee(ZT,"Ignoring IndexedDB error during garbage collection: ",t):await Ar(t)}await this.Vr(3e5)}))}}class CV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(vn.ce);const s=new xV(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve($T)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$T):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,t)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Vo()<=ke.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function u1(r,e){return new CV(r,e)}class NV{constructor(e,t){this.db=e,this.garbageCollector=u1(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,o)=>t(o)))}addReference(e,t,s){return cf(e,s)}removeReference(e,t,s){return cf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return cf(e,t)}br(e,t){return(function(o,u){let c=!1;return a1(o).te((m=>r1(o,m,u).next((g=>(g&&(c=!0),j.resolve(!g)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(e,((c,m)=>{if(m<=t){const g=this.br(e,c).next((p=>{if(!p)return u++,s.getEntry(e,c).next((()=>(s.removeEntry(c,ye.min()),ur(e).delete((function(T){return[0,on(T.path)]})(c)))))}));o.push(g)}})).next((()=>j.waitFor(o))).next((()=>s.apply(e))).next((()=>u))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return cf(e,t)}Sr(e,t){const s=ur(e);let o,u=vn.ce;return s.ee({index:$p},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&t(new ie(Li(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&t(new ie(Li(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cf(r,e){return ur(r).put((function(s,o){return{targetId:0,path:on(s.path),sequenceNumber:o}})(e,r.currentSequenceNumber))}class c1{constructor(){this.changes=new Es((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?j.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ra(e).put(s)}removeEntry(e,t,s){return ra(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Kf(c),m[m.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=_t.newInvalidDocument(t);return ra(e).ee({index:Tf,range:IDBKeyRange.only(Ru(t))},((o,u)=>{s=this.Cr(t,u)})).next((()=>s))}vr(e,t){let s={size:0,document:_t.newInvalidDocument(t)};return ra(e).ee({index:Tf,range:IDBKeyRange.only(Ru(t))},((o,u)=>{s={document:this.Cr(t,u),size:Yf(u)}})).next((()=>s))}getEntries(e,t){let s=Vn();return this.Fr(e,t,((o,u)=>{const c=this.Cr(o,u);s=s.insert(o,c)})).next((()=>s))}Mr(e,t){let s=Vn(),o=new at(ie.comparator);return this.Fr(e,t,((u,c)=>{const m=this.Cr(u,c);s=s.insert(u,m),o=o.insert(u,Yf(c))})).next((()=>({documents:s,Or:o})))}Fr(e,t,s){if(t.isEmpty())return j.resolve();let o=new et(nb);t.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Ru(o.first()),Ru(o.last())),c=o.getIterator();let m=c.getNext();return ra(e).ee({index:Tf,range:u},((g,p,E)=>{const T=ie.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&nb(m,T)<0;)s(m,null),m=c.getNext();m&&m.isEqual(T)&&(s(m,p),m=c.hasNext()?c.getNext():null),m?E.j(Ru(m)):E.done()})).next((()=>{for(;m;)s(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,s,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Kf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ra(e).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u?.incrementDocumentReadCount(p.length);let E=Vn();for(const T of p){const I=this.Cr(ie.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(vc(t,I)||o.has(I.key))&&(E=E.insert(I.key,I))}return E}))}getAllFromCollectionGroup(e,t,s,o){let u=Vn();const c=tb(t,s),m=tb(t,Mn.max());return ra(e).ee({index:XA,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const T=this.Cr(ie.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new VV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return eb(e).get(lp).next((t=>(me(!!t,20021),t)))}Dr(e,t){return eb(e).put(lp,t)}Cr(e,t){if(t){const s=yV(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(ye.min())))return s}return _t.newInvalidDocument(e)}}function h1(r){return new DV(r)}class VV extends c1{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Es((s=>s.toString()),((s,o)=>s.isEqual(o)))}applyChanges(e){const t=[];let s=0,o=new et(((u,c)=>Ae(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(t.push(this.Nr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const g=LT(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Yf(g);s+=p-m.size,t.push(this.Nr.addEntry(e,u,g))}else if(s-=m.size,this.trackRemovals){const g=LT(this.Nr.serializer,c.convertToNoDocument(ye.min()));t.push(this.Nr.addEntry(e,u,g))}})),o.forEach((u=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Nr.updateMetadata(e,s)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:s.get(u).readTime})})),s)))}}function eb(r){return Ft(r,ec)}function ra(r){return Ft(r,jf)}function Ru(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tb(r,e){const t=e.documentKey.path.toArray();return[r,Kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nb(r,e){const t=r.path.toArray(),s=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<s.length-2;++u)if(o=Ae(t[u],s[u]),o)return o;return o=Ae(t.length,s.length),o||(o=Ae(t[t.length-2],s[s.length-2]),o||Ae(t[t.length-1],s[s.length-1]))}class OV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class f1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Gu(s.mutation,o,En.empty(),Ze.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,De()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=De()){const o=Ui();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let c=Vu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Ui();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,De())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,s,o){let u=Vn();const c=Hu(),m=(function(){return Hu()})();return t.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Ts)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),Gu(E.mutation,p,E.mutation.getFieldMask(),Ze.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),t.forEach(((p,E)=>m.set(p,new OV(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=Hu();let o=new at(((c,m)=>c-m)),u=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let E=s.get(g)||En.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||De()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=xS();E.forEach((I=>{if(!u.has(I)){const P=PS(t.get(I),s.get(I));P!==null&&T.set(I,P),u=u.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return j.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):j.resolve(Ui());let m=Ko,g=u;return c.next((p=>j.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?j.resolve():this.remoteDocumentCache.getEntry(e,E).next((I=>{g=g.insert(E,I)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,De()))).next((E=>({batchId:m,changes:RS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next((s=>{let o=Vu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let c=Vu();return this.indexManager.getCollectionParents(e,u).next((m=>j.forEach(m,(g=>{const p=(function(T,I){return new fl(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((E=>{E.forEach(((T,I)=>{c=c.insert(T,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,_t.newInvalidDocument(E)))}));let m=Vu();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Gu(E.mutation,p,En.empty(),Ze.now()),vc(t,p)&&(m=m.insert(g,p))})),m}))}}class MV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:e1(o.bundledQuery),readTime:hn(o.readTime)}})(t)),j.resolve()}}class PV{constructor(){this.overlays=new at(ie.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ui();return j.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),j.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),j.resolve()}getOverlaysForCollection(e,t,s){const o=Ui(),u=t.length+1,c=new ie(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return j.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new at(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=Ui(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Ui(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return j.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new ly(t,s));let u=this.qr.get(t);u===void 0&&(u=De(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}class kV{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}class dy{constructor(){this.Qr=new et(Qt.$r),this.Ur=new et(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Qt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ie(new Ke([])),s=new Qt(t,e),o=new Qt(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ie(new Ke([])),s=new Qt(t,e),o=new Qt(t,e+1);let u=De();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Qt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ie.comparator(e.key,t.key)||Ae(e.Yr,t.Yr)}static Kr(e,t){return Ae(e.Yr,t.Yr)||ie.comparator(e.key,t.key)}}class LV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new et(Qt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ay(u,t,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Qt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return j.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?ma:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Qt(t,0),o=new Qt(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),j.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new et(Ae);return t.forEach((o=>{const u=new Qt(o,0),c=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),j.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;ie.isDocumentKey(u)||(u=u.child(""));const c=new Qt(new ie(u),0);let m=new et(Ae);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),j.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){me(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return j.forEach(t.mutations,(o=>{const u=new Qt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Qt(t,0),o=this.Zr.firstAfterOrEqual(s);return j.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UV{constructor(e){this.ri=e,this.docs=(function(){return new at(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return j.resolve(s?s.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let s=Vn();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():_t.newInvalidDocument(o))})),j.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Vn();const c=t.path,m=new ie(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Yp(FA(E),s)<=0||(o.has(E.key)||vc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return j.resolve(u)}getAllFromCollectionGroup(e,t,s,o){le(9500)}ii(e,t){return j.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new jV(this)}getSize(e){return j.resolve(this.size)}}class jV extends c1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class zV{constructor(e){this.persistence=e,this.si=new Es((t=>Aa(t)),_c),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new dy,this.targetCount=0,this.ai=xa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),j.waitFor(u).next((()=>o))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return j.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),j.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),j.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return j.resolve(s)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}class my{constructor(e,t){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new kV,this.referenceDelegate=e(this),this.Pi=new zV(this),this.indexManager=new wV,this.remoteDocumentCache=(function(o){return new UV(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new ZS(t),this.Ii=new MV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new LV(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ee("MemoryPersistence","Starting transaction:",e);const o=new BV(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return j.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class BV extends GA{constructor(e){super(),this.currentSequenceNumber=e}}class Ed{constructor(e){this.persistence=e,this.Ri=new dy,this.Vi=null}static mi(e){return new Ed(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),j.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(s=>{const o=ie.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xf{constructor(e,t){this.persistence=e,this.pi=new Es((s=>on(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=u1(this,t)}static mi(e,t){return new Xf(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?j.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((m=>{m||(s++,u.removeEntry(c,ye.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),j.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}br(e,t,s){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return j.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qV{constructor(e){this.serializer=e}k(e,t,s,o){const u=new od("createOrUpgrade",t);s<1&&o>=1&&((function(g){g.createObjectStore(yc)})(e),(function(g){g.createObjectStore(Wu,{keyPath:sD}),g.createObjectStore(li,{keyPath:dT,autoIncrement:!0}).createIndex(da,mT,{unique:!0}),g.createObjectStore(Qo)})(e),ib(e),(function(g){g.createObjectStore(la)})(e));let c=j.resolve();return s<3&&o>=3&&(s!==0&&((function(g){g.deleteObjectStore(Xo),g.deleteObjectStore(Yo),g.deleteObjectStore(ga)})(e),ib(e)),c=c.next((()=>(function(g){const p=g.store(ga),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return p.put(zf,E)})(u)))),s<4&&o>=4&&(s!==0&&(c=c.next((()=>(function(g,p){return p.store(li).J().next((T=>{g.deleteObjectStore(li),g.createObjectStore(li,{keyPath:dT,autoIncrement:!0}).createIndex(da,mT,{unique:!0});const I=p.store(li),P=T.map((H=>I.put(H)));return j.waitFor(P)}))})(e,u)))),c=c.next((()=>{(function(g){g.createObjectStore($o,{keyPath:dD})})(e)}))),s<5&&o>=5&&(c=c.next((()=>this.yi(u)))),s<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(ec)})(e),this.wi(u))))),s<7&&o>=7&&(c=c.next((()=>this.Si(u)))),s<8&&o>=8&&(c=c.next((()=>this.bi(e,u)))),s<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&o>=10&&(c=c.next((()=>this.Di(u)))),s<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(ud,{keyPath:mD})})(e),(function(g){g.createObjectStore(cd,{keyPath:gD})})(e)}))),s<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(hd,{keyPath:bD});p.createIndex(cp,AD,{unique:!1}),p.createIndex(WA,SD,{unique:!1})})(e)}))),s<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(jf,{keyPath:aD});p.createIndex(Tf,oD),p.createIndex(XA,lD)})(e))).next((()=>this.Ci(e,u))).next((()=>e.deleteObjectStore(la)))),s<14&&o>=14&&(c=c.next((()=>this.Fi(e,u)))),s<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(Jp,{keyPath:pD,autoIncrement:!0}).createIndex(up,yD,{unique:!1}),g.createObjectStore(zu,{keyPath:_D}).createIndex(JA,vD,{unique:!1}),g.createObjectStore(Bu,{keyPath:ED}).createIndex(ZA,TD,{unique:!1})})(e)))),s<16&&o>=16&&(c=c.next((()=>{t.objectStore(zu).clear()})).next((()=>{t.objectStore(Bu).clear()}))),s<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Zp,{keyPath:wD})})(e)}))),s<18&&o>=18&&Gb()&&(c=c.next((()=>{t.objectStore(zu).clear()})).next((()=>{t.objectStore(Bu).clear()}))),c}wi(e){let t=0;return e.store(la).ee(((s,o)=>{t+=Yf(o)})).next((()=>{const s={byteSize:t};return e.store(ec).put(lp,s)}))}yi(e){const t=e.store(Wu),s=e.store(li);return t.J().next((o=>j.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ma],[u.userId,u.lastAcknowledgedBatchId]);return s.J(da,c).next((m=>j.forEach(m,(g=>{me(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=ca(this.serializer,g);return s1(e,u.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Xo),s=e.store(la);return e.store(ga).get(zf).next((o=>{const u=[];return s.ee(((c,m)=>{const g=new Ke(c),p=(function(T){return[0,on(T)]})(g);u.push(t.get(p).next((E=>E?j.resolve():(T=>t.put({targetId:0,path:on(T),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>j.waitFor(u)))}))}bi(e,t){e.createObjectStore(tc,{keyPath:fD});const s=t.store(tc),o=new fy,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return s.put({collectionId:m,parent:on(g)})}};return t.store(la).ee({X:!0},((c,m)=>{const g=new Ke(c);return u(g.popLast())})).next((()=>t.store(Qo).ee({X:!0},(([c,m,g],p)=>{const E=Li(m);return u(E.popLast())}))))}Di(e){const t=e.store(Yo);return t.ee(((s,o)=>{const u=Mu(o),c=WS(this.serializer,u);return t.put(c)}))}Ci(e,t){const s=t.store(la),o=[];return s.ee(((u,c)=>{const m=t.store(jf),g=(function(T){return T.document?new ie(Ke.fromString(T.document.name).popFirst(5)):T.noDocument?ie.fromSegments(T.noDocument.path):T.unknownDocument?ie.fromSegments(T.unknownDocument.path):le(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>j.waitFor(o)))}Fi(e,t){const s=t.store(li),o=h1(this.serializer),u=new my(Ed.mi,this.serializer.yt);return s.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??De();ca(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),j.forEach(m,((g,p)=>{const E=new sn(p),T=_d.wt(this.serializer,E),I=u.getIndexManager(E),P=vd.wt(E,this.serializer,I,u.referenceDelegate);return new f1(o,P,T,I).recalculateAndSaveOverlaysForDocumentKeys(new hp(t,vn.ce),g).next()}))}))}}function ib(r){r.createObjectStore(Xo,{keyPath:cD}).createIndex($p,hD,{unique:!0}),r.createObjectStore(Yo,{keyPath:"targetId"}).createIndex($A,uD,{unique:!0}),r.createObjectStore(ga)}const sr="IndexedDbPersistence",Bg=18e5,qg=5e3,Fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FV="main";class gy{constructor(e,t,s,o,u,c,m,g,p,E,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!gy.v())throw new te(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NV(this,o),this.$i=t+FV,this.serializer=new ZS(g),this.Ui=new gr(this.$i,this.Ni,new qV(this.serializer)),this.hi=new vV,this.Pi=new RV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=h1(this.serializer),this.Ii=new _V,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&At(sr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(Q.FAILED_PRECONDITION,Fg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new vn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Sr(e))return ee(sr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(sr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return xu(e).get(Io).next((t=>j.resolve(this.es(t))))}ts(e){return hf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Bg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=Ft(t,$o);return s.J().next((o=>{const u=this.ss(o,Bg),c=o.filter((m=>u.indexOf(m)===-1));return j.forEach(c,(m=>s.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):xu(e).get(Io).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,qg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new te(Q.FAILED_PRECONDITION,Fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||hf(e).J().next((s=>this.ss(s,qg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(sr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[yc,$o],(e=>{const t=new hp(e,vn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>hf(e).J().next((t=>this.ss(t,Bg).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return vd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return _d.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){ee(sr,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?xD:g===17?iS:g===16?RD:g===15?Wp:g===14?nS:g===13?tS:g===12?ID:g===11?eS:void le(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,u,(m=>(c=new hp(m,this.ci?this.ci.next():vn.ce),t==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw At(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new te(Q.FAILED_PRECONDITION,HA);return s(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>s(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(e){return xu(e).get(Io).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,qg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new te(Q.FAILED_PRECONDITION,Fg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xu(e).put(Io,t)}static v(){return gr.v()}Zi(e){const t=xu(e);return t.get(Io).next((s=>this.es(s)?(ee(sr,"Releasing primary lease."),t.delete(Io)):j.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(At(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Hb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ee(sr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return At(sr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){At("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xu(r){return Ft(r,yc)}function hf(r){return Ft(r,$o)}function d1(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class py{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=De(),o=De();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new py(e,t.fromCache,s,o)}}class HV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class m1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Hb()?8:KA(qt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new HV;return this.Ss(e,t,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Vo()<=ke.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Vo()<=ke.DEBUG&&ee("QueryEngine","Query:",Oo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Vo()<=ke.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(t))):j.resolve())}ys(e,t){if(RT(t))return j.resolve(null);let s=On(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=_p(t,null,"F"),s=On(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=De(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,_p(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,o){return RT(t)||o.isEqual(ye.min())?j.resolve(null):this.ps.getDocuments(e,s).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,s,o)?j.resolve(null):(Vo()<=ke.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Oo(t)),this.vs(e,c,t,qA(o,Ko)).next((m=>m)))}))}Ds(e,t){let s=new et(wS(e));return t.forEach(((o,u)=>{vc(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return Vo()<=ke.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.ps.getDocumentsMatchingQuery(e,t,Mn.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const yy="LocalStore",GV=3e8;class KV{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new at(Ae),this.xs=new Es((u=>Aa(u)),_c),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function g1(r,e,t,s){return new KV(r,e,t,s)}async function p1(r,e){const t=fe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let g=De();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function QV(r,e){const t=fe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,I=T.keys();let P=j.resolve();return I.forEach((H=>{P=P.next((()=>E.getEntry(g,H))).next((U=>{const $=p.docVersions.get(H);me($!==null,48541),U.version.compareTo($)<0&&(T.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),E.addEntry(U)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=De();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function y1(r){const e=fe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function YV(r,e){const t=fe(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const I=o.get(T);if(!I)return;m.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,T))));let P=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(wt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(T,P),(function(U,$,he){return U.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=GV?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(I,P,E)&&m.push(t.Pi.updateTargetData(u,P))}));let g=Vn(),p=De();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(XV(u,c,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(ye.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((T=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return j.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function XV(r,e,t){let s=De(),o=De();return t.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let c=Vn();return t.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ye.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):ee(yy,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function $V(r,e){const t=fe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ma),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function $f(r,e){const t=fe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,j.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new fs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function sl(r,e,t){const s=fe(r),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Sr(c))throw c;ee(yy,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Ip(r,e,t){const s=fe(r);let o=ye.min(),u=De();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const T=fe(g),I=T.xs.get(E);return I!==void 0?j.resolve(T.Ms.get(I)):T.Pi.getTargetData(p,E)})(s,c,On(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:ye.min(),t?u:De()))).next((m=>(E1(s,SS(e),m),{documents:m,Qs:u})))))}function _1(r,e){const t=fe(r),s=fe(t.Pi),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(u=>s.At(u,e).next((c=>c?c.target:null))))}function v1(r,e){const t=fe(r),s=t.Os.get(e)||ye.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Ns.getAllFromCollectionGroup(o,e,qA(s,Ko),Number.MAX_SAFE_INTEGER))).then((o=>(E1(t,e,o),o)))}function E1(r,e,t){let s=r.Os.get(e)||ye.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}const T1="firestore_clients";function sb(r,e){return`${T1}_${r}_${e}`}const b1="firestore_mutations";function rb(r,e,t){let s=`${b1}_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const A1="firestore_targets";function Hg(r,e){return`${A1}_${r}_${e}`}const ki="SharedClientState";class Jf{constructor(e,t,s,o){this.user=e,this.batchId=t,this.state=s,this.error=o}static Ws(e,t,s){const o=JSON.parse(s);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new te(o.error.code,o.error.message))),c?new Jf(e,t,o.state,u):(At(ki,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ku{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let o,u=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new te(s.error.code,s.error.message))),u?new Ku(e,s.state,o):(At(ki,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let o=typeof s=="object"&&s.activeTargetIds instanceof Array,u=sy();for(let c=0;o&&c<s.activeTargetIds.length;++c)o=QA(s.activeTargetIds[c]),u=u.add(s.activeTargetIds[c]);return o?new Zf(e,u):(At(ki,`Failed to parse client data for instance '${e}': ${t}`),null)}}class _y{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new _y(t.clientId,t.onlineState):(At(ki,`Failed to parse online state: ${e}`),null)}}class Rp{constructor(){this.activeTargetIds=sy()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gg{constructor(e,t,s,o,u){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new at(Ae),this.started=!1,this.Xs=[];const c=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=sb(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Rp),this.ro=new RegExp(`^${T1}_${c}_([^_]*)$`),this.io=new RegExp(`^${b1}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${A1}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const o=this.getItem(sb(this.persistenceKey,s));if(o){const u=Zf.Ws(s,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Hg(this.persistenceKey,e));if(o){const u=Ku.Ws(e,o);u&&(s=u.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hg(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((o=>{this.Po(o)})),this.currentUser=e,s.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee(ki,"READ",e,t),t}setItem(e,t){ee(ki,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee(ki,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ee(ki,"EVENT",t.key,t.newValue),t.key===this.eo)return void At("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);me(typeof m=="number",30636,{So:u}),c=m}catch(m){At(ki,"Failed to read sequence number from WebStorage",m)}return c})(t.newValue);s!==vn.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const o=new Jf(this.currentUser,e,t,s),u=rb(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Gs())}Po(e){const t=rb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const o=Hg(this.persistenceKey,e),u=new Ku(e,t,s);this.setItem(o,u.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return Zf.Ws(s,t)}fo(e,t){const s=this.io.exec(e),o=Number(s[1]),u=s[2]!==void 0?s[2]:null;return Jf.Ws(new sn(u),o,t)}yo(e,t){const s=this.so.exec(e),o=Number(s[1]);return Ku.Ws(o,t)}uo(e){return _y.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee(ki,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),o=this.lo(this.Zs),u=this.lo(s),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=sy();return e.forEach(((s,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class S1{constructor(){this.Mo=new Rp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Rp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class JV{Oo(e){}shutdown(){}}const ab="ConnectivityMonitor";class ob{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(ab,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(ab,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ff=null;function xp(){return ff===null?ff=(function(){return 268435456+Math.round(2147483648*Math.random())})():ff++,"0x"+ff.toString(16)}const Kg="RestConnection",ZV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Bf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const c=xp(),m=this.zo(e,t.toUriEncodedString());ee(Kg,`Sending RPC '${e}' ${c}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=ll(p);return this.Jo(e,m,g,s,E).then((T=>(ee(Kg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw $u(Kg,`RPC '${e}' ${c} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,t,s,o,u,c){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=ZV[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class eO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const nn="WebChannelConnection";class tO extends WV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const c=xp();return new Promise(((m,g)=>{const p=new OA;p.setWithCredentials(!0),p.listenOnce(MA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case _f.NO_ERROR:const T=p.getResponseJson();ee(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),m(T);break;case _f.TIMEOUT:ee(nn,`RPC '${e}' ${c} timed out`),g(new te(Q.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const I=p.getStatus();if(ee(nn,`RPC '${e}' ${c} failed with status:`,I,"response text:",p.getResponseText()),I>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const H=P?.error;if(H&&H.status&&H.message){const U=(function(he){const ce=he.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ce)>=0?ce:Q.UNKNOWN})(H.status);g(new te(U,H.message))}else g(new te(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new te(Q.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ee(nn,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);ee(nn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=xp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=LA(),m=kA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=u.join("");ee(nn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=c.createWebChannel(E,g);this.I_(T);let I=!1,P=!1;const H=new eO({Yo:$=>{P?ee(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(I||(ee(nn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),ee(nn,`RPC '${e}' stream ${o} sending:`,$),T.send($))},Zo:()=>T.close()}),U=($,he,ce)=>{$.listen(he,(se=>{try{ce(se)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return U(T,Du.EventType.OPEN,(()=>{P||(ee(nn,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),U(T,Du.EventType.CLOSE,(()=>{P||(P=!0,ee(nn,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(T))})),U(T,Du.EventType.ERROR,($=>{P||(P=!0,$u(nn,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),H.a_(new te(Q.UNAVAILABLE,"The operation could not be completed")))})),U(T,Du.EventType.MESSAGE,($=>{if(!P){const he=$.data[0];me(!!he,16349);const ce=he,se=ce?.error||ce[0]?.error;if(se){ee(nn,`RPC '${e}' stream ${o} received error:`,se);const Se=se.status;let Te=(function(w){const x=Pt[w];if(x!==void 0)return US(x)})(Se),ge=se.message;Te===void 0&&(Te=Q.INTERNAL,ge="Unknown error status: "+Se+" with message "+se.message),P=!0,H.a_(new te(Te,ge)),T.close()}else ee(nn,`RPC '${e}' stream ${o} received:`,he),H.u_(he)}})),U(m,PA.STAT_EVENT,($=>{$.stat===rp.PROXY?ee(nn,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===rp.NOPROXY&&ee(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function w1(){return typeof window<"u"?window:null}function xf(){return typeof document<"u"?document:null}function Td(r){return new oV(r,!0)}class I1{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const lb="PersistentStream";class R1{constructor(e,t,s,o,u,c,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(At(t.toString()),At("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new te(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(lb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ee(lb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nO extends R1{constructor(e,t,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cV(this.serializer,e),s=(function(u){if(!("targetChange"in u))return ye.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?ye.min():c.readTime?hn(c.readTime):ye.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Tp(this.serializer),t.addTarget=(function(u,c){let m;const g=c.target;if(m=qf(g)?{documents:KS(u,g)}:{query:QS(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=BS(u,c.resumeToken);const p=vp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(ye.min())>0){m.readTime=il(u,c.snapshotVersion.toTimestamp());const p=vp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=fV(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.q_(t)}}class iO extends R1{constructor(e,t,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=hV(e.writeResults,e.commitTime),s=hn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Gf(this.serializer,s)))};this.q_(t)}}class sO{}class rO extends sO{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new te(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Ep(t,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new te(Q.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Ep(t,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(Q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(At(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ca="RemoteStore";class oO{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Da(this)&&(ee(Ca,"Restarting streams for network reachability change."),await(async function(g){const p=fe(g);p.Ea.add(4),await Sc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await bd(p)})(this))}))})),this.Ra=new aO(s,o)}}async function bd(r){if(Da(r))for(const e of r.da)await e(!0)}async function Sc(r){for(const e of r.da)await e(!1)}function Ad(r,e){const t=fe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ty(t)?Ey(t):gl(t).O_()&&vy(t,e))}function rl(r,e){const t=fe(r),s=gl(t);t.Ia.delete(e),s.O_()&&x1(t,e),t.Ia.size===0&&(s.O_()?s.L_():Da(t)&&t.Ra.set("Unknown"))}function vy(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gl(r).Y_(e)}function x1(r,e){r.Va.Ue(e),gl(r).Z_(e)}function Ey(r){r.Va=new iV({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),gl(r).start(),r.Ra.ua()}function Ty(r){return Da(r)&&!gl(r).x_()&&r.Ia.size>0}function Da(r){return fe(r).Ea.size===0}function C1(r){r.Va=void 0}async function lO(r){r.Ra.set("Online")}async function uO(r){r.Ia.forEach(((e,t)=>{vy(r,e)}))}async function cO(r,e){C1(r),Ty(r)?(r.Ra.ha(e),Ey(r)):r.Ra.set("Unknown")}async function hO(r,e,t){if(r.Ra.set("Online"),e instanceof zS&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ee(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wf(r,s)}else if(e instanceof If?r.Va.Ze(e):e instanceof jS?r.Va.st(e):r.Va.tt(e),!t.isEqual(ye.min()))try{const s=await y1(r.localStore);t.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(wt.EMPTY_BYTE_STRING,E.snapshotVersion)),x1(u,g);const T=new fs(E.target,g,p,E.sequenceNumber);vy(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){ee(Ca,"Failed to raise snapshot:",s),await Wf(r,s)}}async function Wf(r,e,t){if(!Sr(e))throw e;r.Ea.add(1),await Sc(r),r.Ra.set("Offline"),t||(t=()=>y1(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ee(Ca,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await bd(r)}))}function N1(r,e){return e().catch((t=>Wf(r,t,e)))}async function ml(r){const e=fe(r),t=vr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ma;for(;fO(e);)try{const o=await $V(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,dO(e,o)}catch(o){await Wf(e,o)}D1(e)&&V1(e)}function fO(r){return Da(r)&&r.Ta.length<10}function dO(r,e){r.Ta.push(e);const t=vr(r);t.O_()&&t.X_&&t.ea(e.mutations)}function D1(r){return Da(r)&&!vr(r).x_()&&r.Ta.length>0}function V1(r){vr(r).start()}async function mO(r){vr(r).ra()}async function gO(r){const e=vr(r);for(const t of r.Ta)e.ea(t.mutations)}async function pO(r,e,t){const s=r.Ta.shift(),o=oy.from(s,e,t);await N1(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await ml(r)}async function yO(r,e){e&&vr(r).X_&&await(async function(s,o){if((function(c){return eV(c)&&c!==Q.ABORTED})(o.code)){const u=s.Ta.shift();vr(s).B_(),await N1(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ml(s)}})(r,e),D1(r)&&V1(r)}async function ub(r,e){const t=fe(r);t.asyncQueue.verifyOperationInProgress(),ee(Ca,"RemoteStore received new credentials");const s=Da(t);t.Ea.add(3),await Sc(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bd(t)}async function Cp(r,e){const t=fe(r);e?(t.Ea.delete(2),await bd(t)):e||(t.Ea.add(2),await Sc(t),t.Ra.set("Unknown"))}function gl(r){return r.ma||(r.ma=(function(t,s,o){const u=fe(t);return u.sa(),new nO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:lO.bind(null,r),t_:uO.bind(null,r),r_:cO.bind(null,r),H_:hO.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ty(r)?Ey(r):r.Ra.set("Unknown")):(await r.ma.stop(),C1(r))}))),r.ma}function vr(r){return r.fa||(r.fa=(function(t,s,o){const u=fe(t);return u.sa(),new iO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:mO.bind(null,r),r_:yO.bind(null,r),ta:gO.bind(null,r),na:pO.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ml(r)):(await r.fa.stop(),r.Ta.length>0&&(ee(Ca,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class by{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const c=Date.now()+s,m=new by(e,t,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ay(r,e){if(At("AsyncQueue",`${e}: ${r}`),Sr(r))return new te(Q.UNAVAILABLE,`${e}: ${r}`);throw r}class Bo{static emptySet(e){return new Bo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ie.comparator(t.key,s.key):(t,s)=>ie.comparator(t.key,s.key),this.keyedMap=Vu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Bo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class cb{constructor(){this.ga=new at(ie.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class al{constructor(e,t,s,o,u,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new al(e,t,Bo.emptySet(t),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class _O{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vO{constructor(){this.queries=hb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=fe(t),u=o.queries;o.queries=hb(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new te(Q.ABORTED,"Firestore shutting down"))}}function hb(){return new Es((r=>AS(r)),gd)}async function O1(r,e){const t=fe(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new _O,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=Ay(c,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Sy(t)}async function M1(r,e){const t=fe(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function EO(r,e){const t=fe(r);let s=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&Sy(t)}function TO(r,e,t){const s=fe(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function Sy(r){r.Ca.forEach((e=>{e.next()}))}var Np,fb;(fb=Np||(Np={})).Ma="default",fb.Cache="cache";class P1{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new al(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Np.Cache}}class k1{constructor(e){this.key=e}}class L1{constructor(e){this.key=e}}class bO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=wS(e),this.tu=new Bo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new cb,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const I=o.get(E),P=vc(this.query,T)?T:null,H=!!I&&this.mutatedKeys.has(I.key),U=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let $=!1;I&&P?I.data.isEqual(P.data)?H!==U&&(s.track({type:3,doc:P}),$=!0):this.su(I,P)||(s.track({type:2,doc:P}),$=!0,(g&&this.eu(P,g)>0||p&&this.eu(P,p)<0)&&(m=!0)):!I&&P?(s.track({type:0,doc:P}),$=!0):I&&!P&&(s.track({type:1,doc:I}),$=!0,(g||p)&&(m=!0)),$&&(P?(c=c.add(P),u=U?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,T)=>(function(P,H){const U=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:$})}};return U(P)-U(H)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new al(this.query,e.tu,u,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new L1(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new k1(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pl="SyncEngine";class AO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class SO{constructor(e){this.key=e,this.hu=!1}}class wO{constructor(e,t,s,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Es((m=>AS(m)),gd),this.Iu=new Map,this.Eu=new Set,this.du=new at(ie.comparator),this.Au=new Map,this.Ru=new dy,this.Vu={},this.mu=new Map,this.fu=xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IO(r,e,t=!0){const s=Sd(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await U1(s,e,t,!0),o}async function RO(r,e){const t=Sd(r);await U1(t,e,!0,!1)}async function U1(r,e,t,s){const o=await $f(r.localStore,On(e)),u=o.targetId,c=r.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await wy(r,e,u,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&Ad(r.remoteStore,o),m}async function wy(r,e,t,s,o){r.pu=(T,I,P)=>(async function(U,$,he,ce){let se=$.view.ru(he);se.Cs&&(se=await Ip(U.localStore,$.query,!1).then((({documents:S})=>$.view.ru(S,se))));const Se=ce&&ce.targetChanges.get($.targetId),Te=ce&&ce.targetMismatches.get($.targetId)!=null,ge=$.view.applyChanges(se,U.isPrimaryClient,Se,Te);return Dp(U,$.targetId,ge.au),ge.snapshot})(r,T,I,P);const u=await Ip(r.localStore,e,!0),c=new bO(e,u.Qs),m=c.ru(u.documents),g=Ac.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),p=c.applyChanges(m,r.isPrimaryClient,g);Dp(r,t,p.au);const E=new AO(e,t,c);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function xO(r,e,t){const s=fe(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!gd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sl(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&rl(s.remoteStore,o.targetId),ol(s,o.targetId)})).catch(Ar)):(ol(s,o.targetId),await sl(s.localStore,o.targetId,!0))}async function CO(r,e){const t=fe(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),rl(t.remoteStore,s.targetId))}async function NO(r,e,t){const s=Cy(r);try{const o=await(function(c,m){const g=fe(c),p=Ze.now(),E=m.reduce(((P,H)=>P.add(H.key)),De());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let H=Vn(),U=De();return g.Ns.getEntries(P,E).next(($=>{H=$,H.forEach(((he,ce)=>{ce.isValidDocument()||(U=U.add(he))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,H))).next(($=>{T=$;const he=[];for(const ce of m){const se=ZD(ce,T.get(ce.key).overlayedDocument);se!=null&&he.push(new Ts(ce.key,se,dS(se.value.mapValue),Bt.exists(!0)))}return g.mutationQueue.addMutationBatch(P,p,he,m)})).next(($=>{I=$;const he=$.applyToLocalDocumentSet(T,U);return g.documentOverlayCache.saveOverlays(P,$.batchId,he)}))})).then((()=>({batchId:I.batchId,changes:RS(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new at(Ae)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await Ir(s,o.changes),await ml(s.remoteStore)}catch(o){const u=Ay(o,"Failed to persist write");t.reject(u)}}async function j1(r,e){const t=fe(r);try{const s=await YV(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(me(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?me(c.hu,14607):o.removedDocuments.size>0&&(me(c.hu,42227),c.hu=!1))})),await Ir(t,s,e)}catch(s){await Ar(s)}}function db(r,e,t){const s=fe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=fe(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const I of T.Sa)I.va(m)&&(p=!0)})),p&&Sy(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function DO(r,e,t){const s=fe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new at(ie.comparator);c=c.insert(u,_t.newNoDocument(u,ye.min()));const m=De().add(u),g=new bc(ye.min(),new Map,new at(Ae),c,m);await j1(s,g),s.du=s.du.remove(u),s.Au.delete(e),xy(s)}else await sl(s.localStore,e,!1).then((()=>ol(s,e,t))).catch(Ar)}async function VO(r,e){const t=fe(r),s=e.batch.batchId;try{const o=await QV(t.localStore,e);Ry(t,s,null),Iy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ir(t,o)}catch(o){await Ar(o)}}async function OO(r,e,t){const s=fe(r);try{const o=await(function(c,m){const g=fe(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(me(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,e);Ry(s,e,t),Iy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ir(s,o)}catch(o){await Ar(o)}}function Iy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Ry(r,e,t){const s=fe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function ol(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||z1(r,s)}))}function z1(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(rl(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),xy(r))}function Dp(r,e,t){for(const s of t)s instanceof k1?(r.Ru.addReference(s.key,e),MO(r,s)):s instanceof L1?(ee(pl,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||z1(r,s.key)):le(19791,{wu:s})}function MO(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ee(pl,"New document in limbo: "+t),r.Eu.add(s),xy(r))}function xy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ie(Ke.fromString(e)),s=r.fu.next();r.Au.set(s,new SO(t)),r.du=r.du.insert(t,s),Ad(r.remoteStore,new fs(On(md(t.path)),s,"TargetPurposeLimboResolution",vn.ce))}}async function Ir(r,e,t){const s=fe(r),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{c.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=py.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(g,p){const E=fe(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>j.forEach(p,(I=>j.forEach(I.Es,(P=>E.persistence.referenceDelegate.addReference(T,I.targetId,P))).next((()=>j.forEach(I.ds,(P=>E.persistence.referenceDelegate.removeReference(T,I.targetId,P)))))))))}catch(T){if(!Sr(T))throw T;ee(yy,"Failed to update sequence numbers: "+T)}for(const T of p){const I=T.targetId;if(!T.fromCache){const P=E.Ms.get(I),H=P.snapshotVersion,U=P.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(I,U)}}})(s.localStore,u))}async function PO(r,e){const t=fe(r);if(!t.currentUser.isEqual(e)){ee(pl,"User change. New user:",e.toKey());const s=await p1(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new te(Q.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ir(t,s.Ls)}}function kO(r,e){const t=fe(r),s=t.Au.get(e);if(s&&s.hu)return De().add(s.key);{let o=De();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function LO(r,e){const t=fe(r),s=await Ip(t.localStore,e.query,!0),o=e.view.cu(s);return t.isPrimaryClient&&Dp(t,e.targetId,o.au),o}async function UO(r,e){const t=fe(r);return v1(t.localStore,e).then((s=>Ir(t,s)))}async function jO(r,e,t,s){const o=fe(r),u=await(function(m,g){const p=fe(m),E=fe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(T=>E.er(T,g).next((I=>I?p.localDocuments.getDocuments(T,I):j.resolve(null)))))})(o.localStore,e);u!==null?(t==="pending"?await ml(o.remoteStore):t==="acknowledged"||t==="rejected"?(Ry(o,e,s||null),Iy(o,e),(function(m,g){fe(fe(m).mutationQueue).ir(g)})(o.localStore,e)):le(6720,"Unknown batchState",{Su:t}),await Ir(o,u)):ee(pl,"Cannot apply mutation batch with id: "+e)}async function zO(r,e){const t=fe(r);if(Sd(t),Cy(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),o=await mb(t,s.toArray());t.gu=!0,await Cp(t.remoteStore,!0);for(const u of o)Ad(t.remoteStore,u)}else if(e===!1&&t.gu!==!1){const s=[];let o=Promise.resolve();t.Iu.forEach(((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?s.push(c):o=o.then((()=>(ol(t,c),sl(t.localStore,c,!0)))),rl(t.remoteStore,c)})),await o,await mb(t,s),(function(c){const m=fe(c);m.Au.forEach(((g,p)=>{rl(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new at(ie.comparator)})(t),t.gu=!1,await Cp(t.remoteStore,!1)}}async function mb(r,e,t){const s=fe(r),o=[],u=[];for(const c of e){let m;const g=s.Iu.get(c);if(g&&g.length!==0){m=await $f(s.localStore,On(g[0]));for(const p of g){const E=s.Tu.get(p),T=await LO(s,E);T.snapshot&&u.push(T.snapshot)}}else{const p=await _1(s.localStore,c);m=await $f(s.localStore,p),await wy(s,B1(p),c,!1,m.resumeToken)}o.push(m)}return s.Pu.H_(u),o}function B1(r){return TS(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function BO(r){return(function(t){return fe(fe(t).persistence).Ts()})(fe(r).localStore)}async function qO(r,e,t,s){const o=fe(r);if(o.gu)return void ee(pl,"Ignoring unexpected query state notification.");const u=o.Iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await v1(o.localStore,SS(u[0])),m=bc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wt.EMPTY_BYTE_STRING);await Ir(o,c,m);break}case"rejected":await sl(o.localStore,e,!0),ol(o,e,s);break;default:le(64155,t)}}async function FO(r,e,t){const s=Sd(r);if(s.gu){for(const o of e){if(s.Iu.has(o)&&s.sharedClientState.isActiveQueryTarget(o)){ee(pl,"Adding an already active target "+o);continue}const u=await _1(s.localStore,o),c=await $f(s.localStore,u);await wy(s,B1(u),c.targetId,!1,c.resumeToken),Ad(s.remoteStore,c)}for(const o of t)s.Iu.has(o)&&await sl(s.localStore,o,!1).then((()=>{rl(s.remoteStore,o),ol(s,o)})).catch(Ar)}}function Sd(r){const e=fe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=j1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DO.bind(null,e),e.Pu.H_=EO.bind(null,e.eventManager),e.Pu.yu=TO.bind(null,e.eventManager),e}function Cy(r){const e=fe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OO.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return g1(this.persistence,new m1,e.initialUser,this.serializer)}Cu(e){return new my(Ed.mi,this.serializer)}Du(e){return new S1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class HO extends oc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){me(this.persistence.referenceDelegate instanceof Xf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new l1(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new my((s=>Xf.mi(s,t)),this.serializer)}}class q1 extends oc{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Cy(this.xu.syncEngine),await ml(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return g1(this.persistence,new m1,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new l1(s,e.asyncQueue,t)}Mu(e,t){const s=new nD(t,this.persistence);return new tD(e.asyncQueue,s)}Cu(e){const t=d1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new gy(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,w1(),xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new S1}}class GO extends q1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Gg&&(this.sharedClientState.syncEngine={Co:jO.bind(null,t),vo:qO.bind(null,t),Fo:FO.bind(null,t),Ts:BO.bind(null,t),Do:UO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await zO(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=w1();if(!Gg.v(t))throw new te(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=d1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gg(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class lc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>db(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=PO.bind(null,this.syncEngine),await Cp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vO})()}createDatastore(e){const t=Td(e.databaseInfo.databaseId),s=(function(u){return new tO(u)})(e.databaseInfo);return(function(u,c,m,g){return new rO(u,c,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,c,m){return new oO(s,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>db(this.syncEngine,t,0)),(function(){return ob.v()?new ob:new JV})())}createSyncEngine(e,t){return(function(o,u,c,m,g,p,E){const T=new wO(o,u,c,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=fe(t);ee(Ca,"RemoteStore shutting down."),s.Ea.add(5),await Sc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lc.provider={build:()=>new lc};class F1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):At("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Er="FirestoreClient";class KO{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{ee(Er,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ee(Er,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ay(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Qg(r,e){r.asyncQueue.verifyOperationInProgress(),ee(Er,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await p1(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function gb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await QO(r);ee(Er,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>ub(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>ub(e.remoteStore,o))),r._onlineComponents=e}async function QO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ee(Er,"Using user provided OfflineComponentProvider");try{await Qg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;$u("Error using user provided cache. Falling back to memory cache: "+t),await Qg(r,new oc)}}else ee(Er,"Using default OfflineComponentProvider"),await Qg(r,new HO(void 0));return r._offlineComponents}async function H1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ee(Er,"Using user provided OnlineComponentProvider"),await gb(r,r._uninitializedComponentsProvider._online)):(ee(Er,"Using default OnlineComponentProvider"),await gb(r,new lc))),r._onlineComponents}function YO(r){return H1(r).then((e=>e.syncEngine))}async function G1(r){const e=await H1(r),t=e.eventManager;return t.onListen=IO.bind(null,e.syncEngine),t.onUnlisten=xO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CO.bind(null,e.syncEngine),t}function XO(r,e,t={}){const s=new Bi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new F1({next:I=>{E.Nu(),c.enqueueAndForget((()=>M1(u,T)));const P=I.docs.has(m);!P&&I.fromCache?p.reject(new te(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&g&&g.source==="server"?p.reject(new te(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new P1(md(m.path),E,{includeMetadataChanges:!0,qa:!0});return O1(u,T)})(await G1(r),r.asyncQueue,e,t,s))),s.promise}function $O(r,e,t={}){const s=new Bi;return r.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new F1({next:I=>{E.Nu(),c.enqueueAndForget((()=>M1(u,T))),I.fromCache&&g.source==="server"?p.reject(new te(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new P1(m,E,{includeMetadataChanges:!0,qa:!0});return O1(u,T)})(await G1(r),r.asyncQueue,e,t,s))),s.promise}function K1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const pb=new Map;const JO="firestore.googleapis.com",yb=!0;class _b{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JO,this.ssl=yb}else this.host=e.host,this.ssl=e.ssl??yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=i1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o1)throw new te(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ny{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _b({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _b(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FN;switch(s.type){case"firstParty":return new KN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new te(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=pb.get(t);s&&(ee("ComponentProvider","Removing Datastore"),pb.delete(t),s.terminate())})(this),Promise.resolve()}}class Va{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(pc(t,St._jsonSchema))return new St(e,s||null,new ie(Ke.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:kt("string",St._jsonSchemaVersion),referencePath:kt("string")};class pr extends Va{constructor(e,t,s){super(e,t,md(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ie(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function wc(r,e,...t){if(r=Lt(r),zA("collection","path",e),r instanceof Ny){const s=Ke.fromString(e,...t);return lT(s),new pr(r,null,s)}{if(!(r instanceof St||r instanceof pr))throw new te(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return lT(s),new pr(r.firestore,null,s)}}function ci(r,e,...t){if(r=Lt(r),arguments.length===1&&(e=Qp.newId()),zA("doc","path",e),r instanceof Ny){const s=Ke.fromString(e,...t);return oT(s),new St(r,null,new ie(s))}{if(!(r instanceof St||r instanceof pr))throw new te(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return oT(s),new St(r.firestore,r instanceof pr?r.converter:null,new ie(s))}}const vb="AsyncQueue";class Eb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I1(this,"async_queue_retry"),this._c=()=>{const s=xf();s&&ee(vb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=xf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sr(e))throw e;ee(vb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,At("INTERNAL UNHANDLED ERROR: ",Tb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=by.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&le(47125,{Pc:Tb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Tb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Rr extends Ny{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Eb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Eb(e),this._firestoreClient=void 0,await e}}}function ZO(r,e,t){t||(t=Bf);const s=Lp(r,"firestore");if(s.isInitialized(t)){const o=s.getImmediate({identifier:t}),u=s.getOptions(t);if(ms(u,e))return o;throw new te(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new te(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o1)throw new te(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ll(e.host)&&qb(e.host),s.initialize({options:e,instanceIdentifier:t})}function wd(r){if(r._terminated)throw new te(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||WO(r),r._firestoreClient}function WO(r){const e=r._freezeSettings(),t=(function(o,u,c,m){return new ND(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,K1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new KO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(wt.fromBase64String(e))}catch(t){throw new te(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pc(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:kt("string",Xn._jsonSchemaVersion),bytes:kt("string")};class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oa{constructor(e){this._methodName=e}}class qi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(e){if(pc(e,qi._jsonSchema))return new qi(e.latitude,e.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:kt("string",qi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};class Fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pc(e,Fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fi(e.vectorValues);throw new te(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:kt("string",Fi._jsonSchemaVersion),vectorValues:kt("object")};const e4=/^__.*__$/;class t4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new dl(e,this.data,t,this.fieldTransforms)}}class Q1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:r})}}class Id{constructor(e,t,s,o,u,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Id({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Y1(this.Ac)&&e4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class n4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Td(e)}Cc(e,t,s,o=!1){return new Id({Ac:e,methodName:t,Dc:s,path:mt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rc(r){const e=r._freezeSettings(),t=Td(r._databaseId);return new n4(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Dy(r,e,t,s,o,u={}){const c=r.Cc(u.merge||u.mergeFields?2:0,e,t,o);ky("Data must be an object, but it was:",c,s);const m=Z1(s,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const I=Vp(e,T,t);if(!c.contains(I))throw new te(Q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);ew(E,I)||E.push(I)}g=new En(E),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new t4(new an(m),g,p)}class Rd extends Oa{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}function X1(r,e,t){return new Id({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vy extends Oa{_toFieldTransform(e){return new Ec(e.path,new tl)}isEqual(e){return e instanceof Vy}}class Oy extends Oa{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=X1(this,e,!0),s=this.vc.map((u=>Ma(u,t))),o=new Sa(s);return new Ec(e.path,o)}isEqual(e){return e instanceof Oy&&ms(this.vc,e.vc)}}class My extends Oa{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=X1(this,e,!0),s=this.vc.map((u=>Ma(u,t))),o=new wa(s);return new Ec(e.path,o)}isEqual(e){return e instanceof My&&ms(this.vc,e.vc)}}class Py extends Oa{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new nl(e.serializer,NS(e.serializer,this.Fc));return new Ec(e.path,t)}isEqual(e){return e instanceof Py&&this.Fc===e.Fc}}function $1(r,e,t,s){const o=r.Cc(1,e,t);ky("Data must be an object, but it was:",o,s);const u=[],c=an.empty();wr(s,((g,p)=>{const E=Ly(e,g,t);p=Lt(p);const T=o.yc(E);if(p instanceof Rd)u.push(E);else{const I=Ma(p,T);I!=null&&(u.push(E),c.set(E,I))}}));const m=new En(u);return new Q1(c,m,o.fieldTransforms)}function J1(r,e,t,s,o,u){const c=r.Cc(1,e,t),m=[Vp(e,s,t)],g=[o];if(u.length%2!=0)throw new te(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(Vp(e,u[I])),g.push(u[I+1]);const p=[],E=an.empty();for(let I=m.length-1;I>=0;--I)if(!ew(p,m[I])){const P=m[I];let H=g[I];H=Lt(H);const U=c.yc(P);if(H instanceof Rd)p.push(P);else{const $=Ma(H,U);$!=null&&(p.push(P),E.set(P,$))}}const T=new En(p);return new Q1(E,T,c.fieldTransforms)}function i4(r,e,t,s=!1){return Ma(t,r.Cc(s?4:3,e))}function Ma(r,e){if(W1(r=Lt(r)))return ky("Unsupported field value:",e,r),Z1(r,e);if(r instanceof Oa)return(function(s,o){if(!Y1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let g=Ma(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return NS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ze.fromDate(s);return{timestampValue:il(o.serializer,u)}}if(s instanceof Ze){const u=new Ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:il(o.serializer,u)}}if(s instanceof qi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xn)return{bytesValue:BS(o.serializer,s._byteString)};if(s instanceof St){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cy(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Fi)return(function(c,m){return{mapValue:{fields:{[ty]:{stringValue:ny},[Jo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return ry(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ad(s)}`)})(r,e)}function Z1(r,e){const t={};return sS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(r,((s,o)=>{const u=Ma(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function W1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ze||r instanceof qi||r instanceof Xn||r instanceof St||r instanceof Oa||r instanceof Fi)}function ky(r,e,t){if(!W1(t)||!BA(t)){const s=ad(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Vp(r,e,t){if((e=Lt(e))instanceof Ic)return e._internalPath;if(typeof e=="string")return Ly(r,e);throw ed("Field path arguments must be of type string or ",r,!1,void 0,t)}const s4=new RegExp("[~\\*/\\[\\]]");function Ly(r,e,t){if(e.search(s4)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ed(r,e,t,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${s}`),c&&(g+=` in document ${o}`),g+=")"),new te(Q.INVALID_ARGUMENT,m+r+g)}function ew(r,e){return r.some((t=>t.isEqual(e)))}class tw{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Uy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r4 extends tw{data(){return super.data()}}function Uy(r,e){return typeof e=="string"?Ly(r,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}function a4(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new te(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jy{}class nw extends jy{}function iw(r,e,...t){let s=[];e instanceof jy&&s.push(e),s=s.concat(t),(function(u){const c=u.filter((g=>g instanceof By)).length,m=u.filter((g=>g instanceof zy)).length;if(c>1||c>0&&m>0)throw new te(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class zy extends nw{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zy(e,t,s)}_apply(e){const t=this._parse(e);return rw(e._query,t),new Va(e.firestore,e.converter,yp(e._query,t))}_parse(e){const t=Rc(e.firestore);return(function(u,c,m,g,p,E,T){let I;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new te(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Ab(T,E);const H=[];for(const U of T)H.push(bb(g,u,U));I={arrayValue:{values:H}}}else I=bb(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Ab(T,E),I=i4(m,c,T,E==="in"||E==="not-in");return Le.create(p,E,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class By extends jy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new By(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)rw(c,g),c=yp(c,g)})(e._query,t),new Va(e.firestore,e.converter,yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qy extends nw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qy(e,t)}_apply(e){const t=(function(o,u,c){if(o.startAt!==null)throw new te(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new te(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(u,c)})(e._query,this._field,this._direction);return new Va(e.firestore,e.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new fl(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function sw(r,e="asc"){const t=e,s=Uy("orderBy",r);return qy._create(s,t)}function bb(r,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new te(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&t.indexOf("/")!==-1)throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ke.fromString(t));if(!ie.isDocumentKey(s))throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return sc(r,new ie(s))}if(t instanceof St)return sc(r,t._key);throw new te(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(t)}.`)}function Ab(r,e){if(!Array.isArray(r)||r.length===0)throw new te(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rw(r,e){const t=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class o4{convertValue(e,t="none"){switch(yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return wr(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[Jo].arrayValue?.values?.map((s=>ft(s.doubleValue)));return new Fi(t)}convertGeoPoint(e){return new qi(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=fd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const t=ys(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ke.fromString(e);me(JS(s),9688,{name:e});const o=new ba(s.get(1),s.get(3)),u=new ie(s.popFirst(5));return o.isEqual(t)||At(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Fy(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends tw{constructor(e,t,s,o,u,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Uy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:kt("string",ya._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class Cf extends ya{data(e={}){return super.data(e)}}class qo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Pu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Cf(this._firestore,this._userDataWriter,s.key,s,new Pu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new Cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Pu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Pu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:l4(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:r})}}function u4(r){r=fi(r,St);const e=fi(r.firestore,Rr);return XO(wd(e),r._key).then((t=>d4(e,r,t)))}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:kt("string",qo._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class aw extends o4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function Hy(r){r=fi(r,Va);const e=fi(r.firestore,Rr),t=wd(e),s=new aw(e);return a4(r._query),$O(t,r._query).then((o=>new qo(e,s,r,o)))}function c4(r,e,t){r=fi(r,St);const s=fi(r.firestore,Rr),o=Fy(r.converter,e,t);return xc(s,[Dy(Rc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Bt.none())])}function ow(r,e,t,...s){r=fi(r,St);const o=fi(r.firestore,Rr),u=Rc(o);let c;return c=typeof(e=Lt(e))=="string"||e instanceof Ic?J1(u,"updateDoc",r._key,e,t,s):$1(u,"updateDoc",r._key,e),xc(o,[c.toMutation(r._key,Bt.exists(!0))])}function h4(r){return xc(fi(r.firestore,Rr),[new Tc(r._key,Bt.none())])}function f4(r,e){const t=fi(r.firestore,Rr),s=ci(r),o=Fy(r.converter,e);return xc(t,[Dy(Rc(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Bt.exists(!1))]).then((()=>s))}function xc(r,e){return(function(s,o){const u=new Bi;return s.asyncQueue.enqueueAndForget((async()=>NO(await YO(s),o,u))),u.promise})(wd(r),e)}function d4(r,e,t){const s=t.docs.get(e._key),o=new aw(r);return new ya(r,o,e._key,s,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}class m4{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=_4(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function g4(r){return new m4(r)}class p4{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lc.provider,this._offlineComponentProvider={build:t=>new q1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class y4{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lc.provider,this._offlineComponentProvider={build:t=>new GO(t,e?.cacheSizeBytes)}}}function _4(r){return new p4(r?.forceOwnership)}function v4(){return new y4}class E4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rc(e)}set(e,t,s){this._verifyNotCommitted();const o=Yg(e,this._firestore),u=Fy(o.converter,t,s),c=Dy(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(c.toMutation(o._key,Bt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const u=Yg(e,this._firestore);let c;return c=typeof(t=Lt(t))=="string"||t instanceof Ic?J1(this._dataReader,"WriteBatch.update",u._key,t,s,o):$1(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yg(e,this._firestore);return this._mutations=this._mutations.concat(new Tc(t._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yg(r,e){if((r=Lt(r)).firestore!==e)throw new te(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Fo(){return new Vy("serverTimestamp")}function T4(...r){return new Oy("arrayUnion",r)}function b4(...r){return new My("arrayRemove",r)}function lw(r){return new Py("increment",r)}function uw(r){return wd(r=fi(r,Rr)),new E4(r,(e=>xc(r,e)))}(function(e,t=!0){(function(o){hl=o})(ul),Ho(new _a("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new Rr(new HN(s.getProvider("auth-internal")),new QN(c,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new te(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),dr(iT,sT,e),dr(iT,sT,"esm2020")})();const A4={apiKey:"AIzaSyAD3y3HNjlsSO7xykkqLWqofxU5U_6hW_Y",authDomain:"aichaku-924d0.firebaseapp.com",projectId:"aichaku-924d0",storageBucket:"aichaku-924d0.firebasestorage.app",messagingSenderId:"745993610184",appId:"1:745993610184:web:97ea4b13fef74d43d396fd"},cw=Xb(A4),td=zN(cw),Tn=ZO(cw,{localCache:g4({tabManager:v4()})}),S4=()=>{const[r,e]=xe.useState(null);return xe.useEffect(()=>{const s=xC(td,o=>{e(o)});return()=>s()},[]),{user:r,logout:async()=>{await CC(td)}}},w4=async r=>{const e=ci(Tn,"users",r,"metadata","categories"),t=await u4(e);if(t.exists())return t.data();const s={brands:{Closet:[],Beauty:[],Appliances:[]},subcategories:{Closet:[],Beauty:[],Appliances:[]}};return await c4(e,s),s},I4=async r=>{const e=wc(Tn,"users",r,"items");return(await Hy(e)).docs.map(s=>({id:s.id,...s.data()}))},R4=async(r,e)=>{const t=wc(Tn,"users",r,"items"),s={...e,uses:e.uses??0,createdAt:Fo()};return{id:(await f4(t,s)).id,...s}},x4=async(r,e)=>{const t=ci(Tn,"users",r,"items",e);await h4(t)},C4=async(r,e,t)=>{const s=ci(Tn,"users",r,"items",e);await ow(s,{...t,updatedAt:Fo()})},N4=async r=>{const e=wc(Tn,"users",r,"journalDays"),t=iw(e,sw("date","desc"));return(await Hy(t)).docs.map(o=>({id:o.id,...o.data()}))},D4=async(r,e)=>{const t=ci(Tn,"users",r,"journalDays",e),s=wc(t,"events"),o=iw(s,sw("createdAt","asc"));return(await Hy(o)).docs.map(c=>({id:c.id,...c.data()}))},V4=async(r,e,t)=>{const s=ci(Tn,"users",r,"items",e.id),o=ci(Tn,"users",r,"journalDays",t),u=ci(wc(o,"events")),c=uw(Tn);c.set(o,{date:t,updatedAt:Fo()},{merge:!0}),c.update(s,{uses:lw(1),lastUsedAt:Fo(),lastUsedLocalDate:t});const m={createdAt:Fo(),itemId:e.id,category:e.category,itemName:e.name,brand:e.brand};return c.set(u,m),await c.commit(),{id:u.id,...m}},O4=async(r,e,t)=>{const s=ci(Tn,"users",r,"journalDays",e,"events",t.id),o=ci(Tn,"users",r,"items",t.itemId),u=uw(Tn);u.delete(s),u.update(o,{uses:lw(-1)}),await u.commit()},M4=r=>{const[e,t]=xe.useState({brands:{},subcategories:{}});return xe.useEffect(()=>{if(!r){t({brands:{},subcategories:{}});return}(async()=>{const o=await w4(r.uid);t(o)})()},[r]),{categoriesData:e,setCategoriesData:t}},P4=r=>{const[e,t]=xe.useState([]),[s,o]=xe.useState(!1);xe.useEffect(()=>{if(!r){t([]);return}(async()=>{o(!0);const T=await I4(r.uid);t(T),o(!1)})()},[r]);const u=()=>{const E=new Date,T=E.getFullYear(),I=String(E.getMonth()+1).padStart(2,"0"),P=String(E.getDate()).padStart(2,"0");return`${T}-${I}-${P}`};return{items:e,loading:s,addItem:async E=>{if(!r)return;const T=await R4(r.uid,E);t(I=>[...I,T])},logUsage:async E=>{if(!r)return;const T=u(),I=e.find(P=>P.id===E);I&&(await V4(r.uid,I,T),t(P=>P.map(H=>H.id===E?{...H,uses:H.uses+1,lastUsedLocalDate:T}:H)))},deleteItem:async E=>{r&&(await x4(r.uid,E),t(T=>T.filter(I=>I.id!==E)))},updateItem:async(E,T)=>{r&&(await C4(r.uid,E,T),t(I=>I.map(P=>P.id===E?{...P,...T}:P)))}}};function uc(r,e){return typeof r!="number"||typeof e!="number"?0:e<=0?r:r/e}function k4(r){if(!Array.isArray(r)||r.length===0)return 0;let e=0;for(const t of r)e+=uc(t.price,t.uses);return e/r.length}function L4(r,e,t="desc"){const s=uc(r.price,r.uses),o=uc(e.price,e.uses);return s<o?t==="asc"?-1:1:s>o?t==="asc"?1:-1:0}const U4="/Aichaku/assets/cami-top-yh5VPBAI.svg",j4="/Aichaku/assets/cardigan-DyOr518j.svg",z4="/Aichaku/assets/hoodie-zip-C6ejns6n.svg",B4="/Aichaku/assets/jacket-brown-C3cJCzHZ.svg",q4="/Aichaku/assets/skirt-kqcEnIU2.svg",F4="/Aichaku/assets/eye-shadow-CYE7mQec.svg",H4="/Aichaku/assets/foundation-CxfxfEX9.svg",G4="/Aichaku/assets/lip-gloss-C3F4bIZH.svg",K4="/Aichaku/assets/liquid-lipstick-DPm0nyzs.svg",Q4="/Aichaku/assets/air-fryer-6uYiUEqx.svg",Y4="/Aichaku/assets/coffee-grinder-DdabzTt_.svg",X4="/Aichaku/assets/robot-vaccum-DZDkWk8Q.svg",$4="/Aichaku/assets/vacuum-C3puDZFN.svg",J4=Object.assign({"./closet/cami-top.svg":U4,"./closet/cardigan.svg":j4,"./closet/hoodie-zip.svg":z4,"./closet/jacket-brown.svg":B4,"./closet/skirt.svg":q4}),Z4=Object.assign({"./beauty/eye-shadow.svg":F4,"./beauty/foundation.svg":H4,"./beauty/lip-gloss.svg":G4,"./beauty/liquid-lipstick.svg":K4}),W4=Object.assign({"./appliance/air-fryer.svg":Q4,"./appliance/coffee-grinder.svg":Y4,"./appliance/robot-vaccum.svg":X4,"./appliance/vacuum.svg":$4});function Gy(r){return Object.fromEntries(Object.entries(r).map(([e,t])=>[e.split("/").pop().replace(".svg","").replace(/-([a-z])/g,(o,u)=>u.toUpperCase()),t]))}const hw=Gy(J4),fw=Gy(Z4),dw=Gy(W4),eM={...hw,...fw,...dw},mw=Object.keys(hw),gw=Object.keys(fw),pw=Object.keys(dw);function Ky({name:r,size:e=24,className:t=""}){const s=eM[r];return s?R.jsx("img",{src:s,width:e,height:e,className:t,alt:r}):(console.warn(`Icon "${r}" not found`),null)}const Xg={Closet:[...mw.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Beauty:[...gw.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Appliances:[...pw.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""}]},Sb=(r,e=24)=>r?r.type==="emoji"?R.jsx("span",{style:{fontSize:e},children:r.value}):r.type==="custom"?R.jsx(Ky,{name:r.value,size:e}):null:null,tM=({isOpen:r,onClose:e,item:t,categoriesData:s,updateItem:o})=>{const[u,c]=xe.useState({name:"",category:"",brand:"",subcategory:"",price:"",uses:"",icon:{type:null,value:null}}),[m,g]=xe.useState(!1),[p,E]=xe.useState(!1),[T,I]=xe.useState("main");xe.useEffect(()=>{if(!t)return;const U=t.category??"",$=t.iconType&&t.iconValue?{type:t.iconType,value:t.iconValue}:{type:null,value:null},ce=(Xg[U]??[]).some(se=>se.type===$.type&&se.value===$.value);c({name:t.name??"",category:U,brand:t.brand??"",subcategory:t.subcategory??"",price:t.price?.toString()??"",uses:t.uses?.toString()??"",icon:ce?$:{type:null,value:null}})},[t]);const P=U=>{c($=>p?{...$,category:U}:{...$,category:U,icon:Xg[U]?.[0]??null})},H=async U=>{if(U.preventDefault(),!t)return;const $={name:u.name.trim(),category:u.category,brand:u.brand,subcategory:u.subcategory,price:Number(u.price)||0,uses:Number(u.uses)||0,iconType:u.icon?.type??null,iconValue:u.icon?.value??null};await o(t.id,$),e()};return r?R.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:r&&R.jsx("div",{className:"bg-white w-full max-w-xl rounded-[40px] shadow-2xl overflow-hidden transition-all duration-300",children:R.jsxs("div",{className:"p-10",children:[T==="main"&&R.jsxs("div",{className:"flex justify-between items-center mb-8",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-3xl font-serif italic text-stone-900",children:"Update the Item"}),R.jsx("p",{className:"text-stone-400 text-sm mt-1 font-medium",children:"Update the details of your existing piece"})]}),R.jsx("button",{onClick:()=>{e(),I("main")},className:"bg-stone-100 p-2 rounded-full text-stone-400 hover:text-stone-600 transition-colors",children:R.jsx(Mp,{size:24})})]}),R.jsx("div",{className:"flex justify-center mb-4",children:R.jsxs("div",{className:"relative group",children:[R.jsxs("button",{type:"button",onClick:()=>g(!m),className:"w-24 h-24 rounded-3xl bg-stone-50 border-2 border-dashed border-stone-200 flex items-center justify-center text-4xl hover:border-stone-900 hover:bg-white transition-all shadow-inner group",children:[Sb(u.icon,36),R.jsx("div",{className:"absolute -bottom-2 -right-2 bg-stone-900 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:R.jsx(Vb,{size:14})})]}),m&&R.jsx("div",{className:"absolute top-full mt-4 left-1/2 -translate-x-1/2 w-64 bg-white border border-stone-100 shadow-2xl rounded-2xl p-4 z-10 animate-in fade-in zoom-in duration-200",children:R.jsx("div",{className:"grid grid-cols-5 gap-2",children:Xg[u.category]?.map((U,$)=>R.jsx("button",{type:"button",onClick:()=>{c({...u,icon:U}),E(!0),g(!1)},className:"w-10 h-10 flex items-center justify-center hover:bg-stone-100 rounded-lg transition-colors",children:Sb(U,20)},`${U.type}-${U.value}-${$}`))})})]})}),T==="main"&&R.jsxs("form",{className:"space-y-6",onSubmit:H,children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-3",children:"Core Category"}),R.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Closet","Beauty","Appliances"].map(U=>R.jsx("button",{type:"button",onClick:()=>P(U),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${u.category===U?"bg-stone-900 text-white border-stone-900 shadow-lg":"bg-white text-stone-500 border-stone-100 hover:border-stone-300"}`,children:U},U))})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[R.jsxs("div",{children:[R.jsx("div",{className:"flex justify-between items-center mb-2",children:R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Brand"})}),R.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:u.brand,onChange:U=>c({...u,brand:U.target.value}),children:[R.jsx("option",{value:"",children:"Select Brand"}),s?.brands?.[u.category]?.map(U=>R.jsx("option",{value:U,children:U},U))]})]}),R.jsxs("div",{children:[R.jsx("div",{className:"flex justify-between items-center mb-2",children:R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Subcategory"})}),R.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:u.subcategory,onChange:U=>c({...u,subcategory:U.target.value}),children:[R.jsx("option",{value:"",children:"Select Subcategory"}),s.subcategories[u.category]?.map(U=>R.jsx("option",{value:U,children:U},U))]})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Item Name"}),R.jsx("input",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"e.g. Vintage Cashmere Sweater",value:u.name,onChange:U=>c($=>({...$,name:U.target.value}))})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Price ($)"}),R.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0.00",value:u.price,onChange:U=>c($=>({...$,price:U.target.value}))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Initial Times Used"}),R.jsx("input",{required:!0,type:"number",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0",value:u.uses,onChange:U=>c($=>({...$,price:U.target.value}))})]})]}),R.jsx("button",{type:"submit",className:"w-full py-5 bg-stone-900 text-white rounded-[24px] font-bold uppercase tracking-[0.2em] text-sm shadow-xl hover:bg-stone-800 transition-all hover:-translate-y-1 active:translate-y-0",children:"Save to My Collection"})]})]})})}):null},nM=(r,e=40)=>!r.iconType||!r.iconValue?null:r.iconType==="emoji"?R.jsx("span",{style:{fontSize:e},children:r.iconValue}):r.iconType==="custom"?R.jsx(Ky,{name:r.iconValue,size:e}):null,iM=({items:r,activeCategory:e,requestSort:t,logUsage:s,deleteItem:o,updateItem:u,user:c,categoriesData:m,setCategoriesData:g})=>{const[p,E]=xe.useState(!1),[T,I]=xe.useState(null),P=U=>{I(U),E(!0)},H=()=>{E(!1),I(null)};return R.jsxs("div",{className:"bg-white rounded-3xl border border-stone-200 shadow-sm overflow-hidden",children:[R.jsxs("div",{className:"px-6 py-4 border-b border-stone-100 flex items-center justify-between bg-stone-50/50",children:[R.jsxs("h2",{className:"font-serif text-lg",children:[e," Collection"]}),R.jsx("button",{className:"p-2 hover:bg-white rounded-lg border border-transparent hover:border-stone-200 transition-all",children:R.jsx(TR,{size:14})})]}),R.jsxs("table",{className:"w-full text-left",children:[R.jsx("thead",{children:R.jsxs("tr",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest border-b border-stone-100",children:[R.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900 transition-colors",onClick:()=>t("subcategory"),children:["Item / Subcategory ",R.jsx(Au,{size:10,className:"inline ml-1"})]}),R.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("brand"),children:["Brand ",R.jsx(Au,{size:10,className:"inline ml-1"})]}),R.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("price"),children:["Price ",R.jsx(Au,{size:10,className:"inline ml-1"})]}),R.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("uses"),children:["Total Uses ",R.jsx(Au,{size:10,className:"inline ml-1"})]}),R.jsxs("th",{className:"px-6 py-4 cursor-pointer hover:text-stone-900",onClick:()=>t("cpu"),children:["Cost Per Use ",R.jsx(Au,{size:10,className:"inline ml-1"})]}),R.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),R.jsx("tbody",{className:"divide-y divide-stone-50",children:r.map(U=>R.jsxs("tr",{className:"hover:bg-stone-50/50 transition-colors group",children:[R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"w-10 h-10 rounded-lg bg-stone-50 flex items-center justify-center shadow-sm",children:nM(U,24)}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-semibold",children:U.name}),R.jsxs("div",{className:"flex items-center gap-1.5",children:[R.jsx("p",{className:"text-[10px] text-stone-400 uppercase font-bold tracking-tighter",children:U.category}),U.subcategory&&R.jsxs(R.Fragment,{children:[R.jsx("span",{className:"text-[10px] text-stone-300",children:""}),R.jsx("p",{className:"text-[10px] text-stone-400 uppercase font-bold tracking-tighter",children:U.subcategory})]})]})]})]})}),R.jsx("td",{className:"px-6 py-4 text-sm",children:U.brand}),R.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",U.price.toFixed(2)]}),R.jsx("td",{className:"px-6 py-4 text-sm",children:U.uses}),R.jsx("td",{className:"px-6 py-4",children:R.jsxs("span",{className:`text-sm font-bold ${uc(U.price,U.uses)<10?"text-emerald-600":"text-stone-900"}`,children:["$",uc(U.price,U.uses).toFixed(2)]})}),R.jsx("td",{className:"px-6 py-4 text-right",children:R.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[R.jsx("button",{title:"Log Usage",onClick:()=>s(U.id),className:"p-2 bg-stone-100 text-stone-400 hover:bg-stone-900 hover:text-white rounded-xl transition-all shadow-sm",children:R.jsx(yR,{size:15})}),R.jsx("button",{title:"Edit Item",onClick:()=>P(U),className:"p-2 bg-stone-100 text-stone-400 hover:bg-stone-900 hover:text-white rounded-xl transition-all shadow-sm",children:R.jsx(MR,{size:15})}),R.jsx("button",{onClick:()=>o(U.id),title:"Delete Item",className:"p-2 bg-stone-100 text-stone-400 hover:bg-red-500 hover:text-white rounded-xl transition-all shadow-sm",children:R.jsx(Mb,{size:15})})]})})]},U.id))})]}),p&&T&&R.jsx(tM,{isOpen:p,onClose:H,item:T,categoriesData:m,updateItem:u})]})},sM=({isOpen:r,onClose:e,onAuthSuccess:t})=>{const[s,o]=xe.useState(!0),[u,c]=xe.useState(""),[m,g]=xe.useState(""),[p,E]=xe.useState(!1);if(!r)return null;const T=async I=>{I.preventDefault(),E(!0);try{if(s){const P=await wC(td,u,m);t(P.user)}else{const P=await SC(td,u,m);t(P.user)}e()}catch(P){alert(P.message)}finally{E(!1)}};return R.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:R.jsxs("div",{className:"bg-white w-full max-w-md rounded-[32px] p-8 shadow-2xl relative overflow-hidden",children:[R.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-stone-400 hover:text-stone-600 transition-colors",children:R.jsx(Mp,{size:20})}),R.jsxs("div",{className:"mb-8 text-center",children:[R.jsx("h3",{className:"text-2xl font-serif italic mb-2",children:s?"Welcome Back":"Create Account"}),R.jsx("p",{className:"text-sm text-stone-500 font-medium",children:"Please enter your details to continue"})]}),R.jsxs("form",{className:"space-y-5",onSubmit:T,children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Email Address"}),R.jsxs("div",{className:"relative",children:[R.jsx(DR,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),R.jsx("input",{required:!0,type:"email",value:u,onChange:I=>c(I.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:"hello@example.com"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2 ml-1",children:"Password"}),R.jsxs("div",{className:"relative",children:[R.jsx(RR,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-stone-400",size:16}),R.jsx("input",{required:!0,type:"password",value:m,onChange:I=>g(I.target.value),className:"w-full bg-stone-50 border-stone-200 border rounded-2xl pl-12 pr-4 py-3.5 outline-none focus:ring-2 ring-stone-200 transition-all text-sm",placeholder:""})]})]}),R.jsx("button",{disabled:p,type:"submit",className:"w-full py-4 bg-stone-900 text-white rounded-2xl font-bold uppercase tracking-widest text-xs shadow-lg hover:bg-stone-800 transition-all disabled:opacity-50",children:p?"Processing...":s?"Sign In":"Sign Up"})]}),R.jsx("div",{className:"mt-6 text-center",children:R.jsx("button",{onClick:()=>o(!s),className:"text-xs font-bold text-stone-400 hover:text-stone-900 transition-colors uppercase tracking-tight",children:s?"Don't have an account? Sign Up":"Already have an account? Sign In"})})]})})},df={Closet:[...mw.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Beauty:[...gw.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""},{type:"emoji",value:""}],Appliances:[...pw.map(r=>({type:"custom",value:r})),{type:"emoji",value:""},{type:"emoji",value:""}]},wb=(r,e=32)=>r?r.type==="emoji"?R.jsx("span",{style:{fontSize:e},children:r.value}):r.type==="custom"?R.jsx(Ky,{name:r.value,size:e}):null:null,Ib=({title:r,list:e,onAdd:t,onRemove:s,onBack:o})=>{const[u,c]=xe.useState("");return R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[R.jsx("button",{onClick:o,className:"p-2 hover:bg-stone-100 rounded-full transition-colors",children:R.jsx(gR,{size:20})}),R.jsx("h3",{className:"text-xl font-serif italic",children:r})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("input",{className:"flex-1 bg-stone-50 border-stone-200 border rounded-xl px-4 py-2 outline-none focus:ring-2 ring-stone-200",placeholder:`New ${r.toLowerCase()} name...`,value:u,onChange:m=>c(m.target.value)}),R.jsx("button",{onClick:()=>{t(u),c("")},className:"bg-stone-900 text-white px-4 py-2 rounded-xl hover:bg-stone-800 transition-colors",children:R.jsx(Db,{size:20})})]}),R.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:e.map(m=>R.jsxs("div",{className:"flex justify-between items-center p-3 bg-stone-50 rounded-xl border border-stone-100",children:[R.jsx("span",{className:"text-stone-700",children:m}),R.jsx("button",{onClick:()=>s(m),className:"text-stone-400 hover:text-red-500 transition-colors",children:R.jsx(Mb,{size:16})})]},m))})]})},rM=({isOpen:r,onClose:e,user:t,categoriesData:s,setCategoriesData:o,addItem:u})=>{const[c,m]=xe.useState("main"),[g,p]=xe.useState(!1),[E,T]=xe.useState(!1),[I,P]=xe.useState(!1),[H,U]=xe.useState({category:"Closet",icon:df.Closet[0],brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"});xe.useEffect(()=>{r&&(P(!1),U(S=>({...S,category:"Closet",icon:df.Closet[0]})))},[r]);const $=async(S,w,x,O,D)=>{if(!S||!w||!x||!O)return;const k=ci(Tn,"users",S,"metadata","categories"),C=`${w}.${x}`;let Qe={};D==="add"?Qe[C]=T4(O):D==="remove"&&(Qe[C]=b4(O)),Qe.updatedAt=Fo();try{await ow(k,Qe),console.log(`Firebase ${w} for ${x} updated successfully.`)}catch(gt){console.error("Error updating Firebase categories:",gt),alert("Failed to update categories in Firebase: "+gt.message)}},he=async S=>{if(!t||!S)return;const w=H.category,x=s.brands[w]||[];if(S&&!x.includes(S)){const O={...s.brands,[w]:[...x,S]};o(D=>({...D,brands:O})),await $(t.uid,"brands",w,S,"add")}},ce=async S=>{if(!t||!S)return;const w=H.category,O=(s.brands[w]||[]).filter(k=>k!==S),D={...s.brands,[w]:O};o(k=>({...k,brands:D})),await $(t.uid,"brands",w,S,"remove")},se=async S=>{if(!t||!S)return;const w=H.category,x=s.subcategories[w]||[];if(S&&!x.includes(S)){const O={...s.subcategories,[w]:[...x,S]};o(D=>({...D,subcategories:O})),await $(t.uid,"subcategories",w,S,"add")}},Se=async S=>{if(!t||!S)return;const w=H.category,O=(s.subcategories[w]||[]).filter(k=>k!==S),D={...s.subcategories,[w]:O};o(k=>({...k,subcategories:D})),await $(t.uid,"subcategories",w,S,"remove")},Te=S=>{U(w=>I?{...w,category:S}:{...w,category:S,icon:df[S]?.[0]??null})},ge=async S=>{if(S.preventDefault(),!t){alert("Guest mode (IndexedDB) is coming soon! Please sign in for now.");return}p(!0);try{const w={name:H.itemName,category:H.category,brand:H.brand,subcategory:H.subcategory,price:parseFloat(H.price)||0,uses:parseInt(H.timesUsed)||0,iconType:H.icon?.type??null,iconValue:H.icon?.value??null};await u(w),U({category:"Closet",brand:"",itemName:"",subcategory:"",price:"",timesUsed:"0"}),e()}catch(w){console.error("Add item failed:",w),alert("Failed to save item.")}finally{p(!1)}};return r?R.jsx("div",{className:"fixed inset-0 bg-stone-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:r&&R.jsx("div",{className:"bg-white w-full max-w-xl rounded-[40px] shadow-2xl overflow-hidden transition-all duration-300",children:R.jsxs("div",{className:"p-10",children:[c==="main"&&R.jsxs("div",{className:"flex justify-between items-center mb-8",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-3xl font-serif italic text-stone-900",children:"Add to Collection"}),R.jsx("p",{className:"text-stone-400 text-sm mt-1 font-medium",children:"Capture the details of your new piece"})]}),R.jsx("button",{onClick:()=>{e(),m("main")},className:"bg-stone-100 p-2 rounded-full text-stone-400 hover:text-stone-600 transition-colors",children:R.jsx(Mp,{size:24})})]}),R.jsx("div",{className:"flex justify-center mb-4",children:R.jsxs("div",{className:"relative group",children:[R.jsxs("button",{type:"button",onClick:()=>T(!E),className:"w-24 h-24 rounded-3xl bg-stone-50 border-2 border-dashed border-stone-200 flex items-center justify-center text-4xl hover:border-stone-900 hover:bg-white transition-all shadow-inner group",children:[wb(H.icon,36),R.jsx("div",{className:"absolute -bottom-2 -right-2 bg-stone-900 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:R.jsx(Vb,{size:14})})]}),E&&R.jsx("div",{className:"absolute top-full mt-4 left-1/2 -translate-x-1/2 w-64 bg-white border border-stone-100 shadow-2xl rounded-2xl p-4 z-10 animate-in fade-in zoom-in duration-200",children:R.jsx("div",{className:"grid grid-cols-5 gap-2",children:df[H.category]?.map((S,w)=>R.jsx("button",{type:"button",onClick:()=>{U({...H,icon:S}),P(!0),T(!1)},className:"w-10 h-10 flex items-center justify-center hover:bg-stone-100 rounded-lg transition-colors",children:wb(S,20)},`${S.type}-${S.value}-${w}`))})})]})}),c==="main"&&R.jsxs("form",{className:"space-y-6",onSubmit:ge,children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-3",children:"Core Category"}),R.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Closet","Beauty","Appliances"].map(S=>R.jsx("button",{type:"button",onClick:()=>Te(S),className:`py-3 rounded-2xl text-xs font-bold transition-all border ${H.category===S?"bg-stone-900 text-white border-stone-900 shadow-lg":"bg-white text-stone-500 border-stone-100 hover:border-stone-300"}`,children:S},S))})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[R.jsxs("div",{children:[R.jsxs("div",{className:"flex justify-between items-center mb-2",children:[R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Brand"}),R.jsx("button",{type:"button",onClick:()=>m("manage-brands"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:R.jsx(wE,{size:14})})]}),R.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:H.brand,onChange:S=>U({...H,brand:S.target.value}),children:[R.jsx("option",{value:"",children:"Select Brand"}),s.brands[H.category]?.map(S=>R.jsx("option",{value:S,children:S},S))]})]}),R.jsxs("div",{children:[R.jsxs("div",{className:"flex justify-between items-center mb-2",children:[R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-stone-400",children:"Subcategory"}),R.jsx("button",{type:"button",onClick:()=>m("manage-subs"),className:"text-stone-400 hover:text-stone-900 transition-colors",children:R.jsx(wE,{size:14})})]}),R.jsxs("select",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200",value:H.subcategory,onChange:S=>U({...H,subcategory:S.target.value}),children:[R.jsx("option",{value:"",children:"Select Subcategory"}),s.subcategories[H.category]?.map(S=>R.jsx("option",{value:S,children:S},S))]})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Item Name"}),R.jsx("input",{required:!0,className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"e.g. Vintage Cashmere Sweater",value:H.itemName,onChange:S=>U({...H,itemName:S.target.value})})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Price ($)"}),R.jsx("input",{required:!0,type:"number",step:"0.01",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0.00",value:H.price,onChange:S=>U({...H,price:S.target.value})})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2",children:"Initial Times Used"}),R.jsx("input",{required:!0,type:"number",className:"w-full bg-stone-50 border-stone-200 border rounded-2xl px-4 py-3 outline-none focus:ring-2 ring-stone-200 shadow-inner",placeholder:"0",value:H.timesUsed,onChange:S=>U({...H,timesUsed:S.target.value})})]})]}),R.jsx("button",{type:"submit",className:"w-full py-5 bg-stone-900 text-white rounded-[24px] font-bold uppercase tracking-[0.2em] text-sm shadow-xl hover:bg-stone-800 transition-all hover:-translate-y-1 active:translate-y-0",children:"Save to My Collection"})]}),c==="manage-brands"&&R.jsx(Ib,{title:"Brands",list:s.brands[H.category]||[],onAdd:he,onRemove:ce,onBack:()=>m("main")}),c==="manage-subs"&&R.jsx(Ib,{title:"Subcategories",list:s.subcategories[H.category]||[],onAdd:se,onRemove:Se,onBack:()=>m("main")})]})})}):null},aM=r=>{const e=new Date(r);return isNaN(e.getTime())?r:e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},oM=r=>{const[e,t]=xe.useState([]),[s,o]=xe.useState(!1);xe.useEffect(()=>{if(!r){t([]);return}(async()=>{o(!0);const g=await N4(r.uid),p=await Promise.all(g.map(async E=>{const I=(await D4(r.uid,E.id)).reduce((P,H)=>{const U=H.category||"Uncategorized";return P[U]||(P[U]=[]),P[U].push(H),P},{});return{date:E.id,formattedDate:aM(E.id),categories:I}}));t(p),o(!1)})()},[r]);const u=xe.useMemo(()=>e.reduce((m,g)=>{const p=Object.values(g.categories).reduce((E,T)=>E+T.length,0);return m+p},0),[e]);return{journalEntries:e,totalLogs:u,loading:s,removeEvent:async(m,g)=>{r&&(await O4(r.uid,m,g),t(p=>p.map(E=>{if(E.date!==m)return E;const T=Object.fromEntries(Object.entries(E.categories).map(([I,P])=>[I,P.filter(H=>H.id!==g.id)]));return{...E,categories:T}}).filter(E=>Object.values(E.categories).some(T=>T.length>0))))}}},lM=({user:r,onSwitchTab:e})=>{const{journalEntries:t,totalLogs:s,loading:o,removeEvent:u}=oM(r),c=xe.useMemo(()=>({Closet:R.jsx(Nb,{size:14}),Beauty:R.jsx(Ob,{size:14}),Appliances:R.jsx(Cb,{size:14})}),[]);return o?R.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-stone-400",children:[R.jsx(SE,{size:48,className:"mb-4 opacity-20"}),R.jsx("p",{className:"font-serif italic text-lg text-center px-4",children:"Loading your journal..."})]}):!t||t.length===0?R.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-stone-400",children:[R.jsx(SE,{size:48,className:"mb-4 opacity-20"}),R.jsx("p",{className:"font-serif italic text-lg text-center px-4 mb-6",children:"No entries yet. Start logging to build your story."}),R.jsxs("button",{onClick:()=>e?.("All"),className:"flex items-center gap-2 text-stone-900 font-bold text-sm border-b border-stone-900 pb-1",children:["Go to Collection ",R.jsx(uR,{size:16})]})]}):R.jsxs("div",{className:"max-w-2xl mx-auto pb-20",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-12 pb-6 border-b border-stone-200",children:[R.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[R.jsx(AR,{size:16}),R.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest",children:[s," Entries Logged"]})]}),R.jsx("div",{className:"w-1 h-1 rounded-full bg-stone-300"}),R.jsx("div",{className:"text-xs text-stone-400 uppercase tracking-widest font-bold",children:"All Days"})]}),R.jsx("div",{className:"space-y-12",children:t.map(m=>R.jsxs("section",{className:"relative pl-10 border-l border-stone-200 ml-2",children:[R.jsx("div",{className:"absolute -left-[5px] top-1.5 w-2.5 h-2.5 rounded-full bg-stone-900 shadow-[0_0_0_4px_rgba(255,255,255,1)]"}),R.jsx("h2",{className:"text-lg font-serif italic mb-6 text-stone-800 leading-none",children:m.formattedDate}),R.jsx("div",{className:"space-y-4",children:Object.entries(m.categories).map(([g,p])=>R.jsxs("div",{className:"group",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-2 text-stone-400",children:[c[g]||R.jsx(xb,{size:14}),R.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em]",children:g})]}),R.jsx("div",{className:"bg-white p-4 rounded-2xl border border-stone-100 shadow-sm group-hover:border-stone-200 transition-colors",children:R.jsx("ul",{className:"space-y-2",children:p.map(E=>R.jsxs("li",{className:"text-sm text-stone-600 flex items-start justify-between gap-2",children:[R.jsxs("span",{className:"flex items-start gap-2",children:[R.jsx("span",{className:"text-stone-300 font-serif leading-tight",children:""}),R.jsxs("span",{className:"leading-tight",children:[E.brand||"Unknown"," * ",E.itemName||"Unnamed"]})]}),R.jsx("button",{onClick:()=>{window.confirm("Delete this entry?")&&u(m.date,E)},className:"text-xs text-stone-400 hover:text-red-500",title:"Delete entry",children:"Delete"})]},E.id))})})]},g))})]},m.date))})]})},uM=()=>{const{user:r,logout:e}=S4(),[t,s]=xe.useState(!1),[o,u]=xe.useState("All"),[c,m]=xe.useState(""),[g,p]=xe.useState({key:"cpu",direction:"desc"}),[E,T]=xe.useState(!1),{categoriesData:I,setCategoriesData:P}=M4(r),{items:H,addItem:U,logUsage:$,deleteItem:he,updateItem:ce}=P4(r),se=xe.useMemo(()=>{let S=H.filter(w=>(o==="All"||w.category===o)&&w.name.toLowerCase().includes(c.toLowerCase()));return g.key&&S.sort((w,x)=>{if(g.key==="cpu")return L4(w,x,g.direction);let O=w[g.key],D=x[g.key];return(g.key==="brand"||g.key==="subcategory")&&(O=(O||"").toLowerCase(),D=(D||"").toLowerCase()),O<D?g.direction==="asc"?-1:1:O>D?g.direction==="asc"?1:-1:0}),S},[H,o,c,g]),Se=S=>{let w="desc";g.key===S&&g.direction==="desc"&&(w="asc"),p({key:S,direction:w})},Te=k4(H).toFixed(2),ge=o==="Journal";return R.jsxs("div",{className:"flex h-screen bg-stone-50 font-sans text-stone-900 overflow-hidden",children:[R.jsxs("aside",{className:"w-64 bg-white border-r border-stone-200 flex flex-col p-6 space-y-8",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[R.jsx("div",{className:"w-8 h-8 bg-stone-800 rounded-lg flex items-center justify-center text-white font-serif italic text-xl",children:"A"}),R.jsx("h1",{className:"text-2xl font-serif italic tracking-tight",children:"Aichaku"})]}),R.jsxs("nav",{className:"flex-1 space-y-1",children:[R.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-4 ml-2",children:"Main Menu"}),[{id:"All",icon:wR,label:"Overview"},{id:"Journal",icon:xb,label:"Daily Journal"},{id:"Closet",icon:Nb,label:"Closet"},{id:"Beauty",icon:Ob,label:"Beauty"},{id:"Appliances",icon:Cb,label:"Appliances"}].map(S=>R.jsxs("button",{onClick:()=>u(S.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all ${o===S.id?"bg-stone-900 text-white shadow-md":"text-stone-500 hover:bg-stone-100"}`,children:[R.jsx(S.icon,{size:18}),S.label]},S.id))]}),R.jsx("div",{className:"pt-6 border-t border-stone-100",children:r?R.jsx("div",{className:"group relative",children:R.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-2xl hover:bg-stone-50 transition-colors cursor-pointer",children:[R.jsx("div",{className:"w-9 h-9 rounded-full bg-stone-800 flex items-center justify-center text-white text-xs font-bold uppercase",children:r.email.charAt(0)}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("p",{className:"text-xs font-bold text-stone-900 truncate",children:"My Account"}),R.jsx("p",{className:"text-[10px] text-stone-400 truncate",children:r.email})]}),R.jsx("button",{onClick:e,className:"opacity-0 group-hover:opacity-100 p-1.5 text-stone-400 hover:text-red-500 transition-all",title:"Log out",children:R.jsx(CR,{size:14})})]})}):R.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-2xl bg-stone-100 text-stone-900 text-xs font-bold uppercase tracking-widest hover:bg-stone-200 transition-all border border-stone-200",children:[R.jsx(FR,{size:14})," Sign In"]})})]}),R.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[!ge&&R.jsxs("header",{className:"h-20 bg-white border-b border-stone-200 flex items-center justify-between px-8",children:[R.jsxs("div",{className:"flex items-center bg-stone-100 px-4 py-2 rounded-full w-96",children:[R.jsx(LR,{size:16,className:"text-stone-400 mr-2"}),R.jsx("input",{className:"bg-transparent border-none outline-none text-sm w-full",placeholder:"Search your collection...",value:c,onChange:S=>m(S.target.value)})]}),R.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 bg-stone-900 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-sm hover:bg-stone-800 transition-all",children:[R.jsx(Db,{size:18})," Add New Item"]})]}),ge&&R.jsx("header",{className:"h-20 bg-white border-b border-stone-200 flex items-center justify-between px-8",children:R.jsx("h2",{className:"text-lg font-serif",children:"Daily Journal"})}),ge?R.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:R.jsx(lM,{user:r,onSwitchTab:u})}):R.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[R.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[R.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Inventory Value"}),R.jsxs("p",{className:"text-3xl font-serif italic",children:["$",H.reduce((S,w)=>S+w.price,0).toLocaleString()]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-200 shadow-sm",children:[R.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Avg. Cost Per Use"}),R.jsxs("p",{className:"text-3xl font-serif italic",children:["$",Te]})]}),R.jsxs("div",{className:"bg-stone-900 text-white p-6 rounded-3xl shadow-lg flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest mb-2",children:"Reward Earned"}),R.jsx("p",{className:"text-3xl font-serif italic text-amber-400",children:"$5.00"})]}),R.jsx(fR,{size:40,className:"text-amber-400 opacity-50"})]})]}),R.jsx(iM,{items:se,activeCategory:o,requestSort:Se,logUsage:$,deleteItem:he,updateItem:ce,categoriesData:I,setCategoriesData:P})]})]}),R.jsx(sM,{isOpen:t,onClose:()=>s(!1),onAuthSuccess:()=>s(!1)}),R.jsx(rM,{isOpen:E,onClose:()=>T(!1),user:r,categoriesData:I,setCategoriesData:P,addItem:U})]})};nR.createRoot(document.getElementById("root")).render(R.jsx(xe.StrictMode,{children:R.jsx(uM,{})}));
